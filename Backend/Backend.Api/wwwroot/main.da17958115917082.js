(self.webpackChunkFrontend=self.webpackChunkFrontend||[]).push([[179],{760:($f,Wc,qc)=>{"use strict";function Nn(t){return"function"==typeof t}function pu(t){const e=t(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Gf=pu(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,o)=>`${o+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function v(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class di{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(Nn(i))try{i()}catch(s){n=s instanceof Gf?s.errors:[s]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const s of o)try{kl(s)}catch(d){n=n??[],d instanceof Gf?n=[...n,...d.errors]:n.push(d)}}if(n)throw new Gf(n)}}add(n){var e;if(n&&n!==this)if(this.closed)kl(n);else{if(n instanceof di){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&v(e,n)}remove(n){const{_finalizers:e}=this;e&&v(e,n),n instanceof di&&n._removeParent(this)}}di.EMPTY=(()=>{const t=new di;return t.closed=!0,t})();const Ms=di.EMPTY;function fs(t){return t instanceof di||t&&"closed"in t&&Nn(t.remove)&&Nn(t.add)&&Nn(t.unsubscribe)}function kl(t){Nn(t)?t():t.unsubscribe()}const Yt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Oe={setTimeout(t,n,...e){const{delegate:i}=Oe;return i?.setTimeout?i.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){const{delegate:n}=Oe;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Qo(t){Oe.setTimeout(()=>{const{onUnhandledError:n}=Yt;if(!n)throw t;n(t)})}function pr(){}const ks=No("C",void 0,void 0);function No(t,n,e){return{kind:t,value:n,error:e}}let fr=null;function yn(t){if(Yt.useDeprecatedSynchronousErrorHandling){const n=!fr;if(n&&(fr={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:i}=fr;if(fr=null,e)throw i}}else t()}class dc extends di{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,fs(n)&&n.add(this)):this.destination=Zc}static create(n,e,i){return new mr(n,e,i)}next(n){this.isStopped?ei(function Al(t){return No("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?ei(function Na(t){return No("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?ei(ks,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Rr=Function.prototype.bind;function ra(t,n){return Rr.call(t,n)}class As{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){Fa(i)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){Fa(i)}else Fa(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){Fa(e)}}}class mr extends dc{constructor(n,e,i){let o;if(super(),Nn(n)||!n)o={next:n??void 0,error:e??void 0,complete:i??void 0};else{let s;this&&Yt.useDeprecatedNextContext?(s=Object.create(n),s.unsubscribe=()=>this.unsubscribe(),o={next:n.next&&ra(n.next,s),error:n.error&&ra(n.error,s),complete:n.complete&&ra(n.complete,s)}):o=n}this.destination=new As(o)}}function Fa(t){Yt.useDeprecatedSynchronousErrorHandling?function po(t){Yt.useDeprecatedSynchronousErrorHandling&&fr&&(fr.errorThrown=!0,fr.error=t)}(t):Qo(t)}function ei(t,n){const{onStoppedNotification:e}=Yt;e&&Oe.setTimeout(()=>e(t,n))}const Zc={closed:!0,next:pr,error:function ms(t){throw t},complete:pr},Pt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ri(t){return t}function Os(t){return 0===t.length?Ri:1===t.length?t[0]:function(e){return t.reduce((i,o)=>o(i),e)}}let cn=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,o){const s=function Ba(t){return t&&t instanceof dc||function Ol(t){return t&&Nn(t.next)&&Nn(t.error)&&Nn(t.complete)}(t)&&fs(t)}(e)?e:new mr(e,i,o);return yn(()=>{const{operator:d,source:f}=this;s.add(d?d.call(s,f):f?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=uc(i))((o,s)=>{const d=new mr({next:f=>{try{e(f)}catch(_){s(_),d.unsubscribe()}},error:s,complete:o});this.subscribe(d)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Pt](){return this}pipe(...e){return Os(e)(this)}toPromise(e){return new(e=uc(e))((i,o)=>{let s;this.subscribe(d=>s=d,d=>o(d),()=>i(s))})}}return t.create=n=>new t(n),t})();function uc(t){var n;return null!==(n=t??Yt.Promise)&&void 0!==n?n:Promise}const hc=pu(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ht=(()=>{class t extends cn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new za(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new hc}next(e){yn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(e)}})}error(e){yn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){yn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:o,observers:s}=this;return i||o?Ms:(this.currentObservers=null,s.push(e),new di(()=>{this.currentObservers=null,v(s,e)}))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:o,isStopped:s}=this;i?e.error(o):s&&e.complete()}asObservable(){const e=new cn;return e.source=this,e}}return t.create=(n,e)=>new za(n,e),t})();class za extends Ht{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,n)}error(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==i?i:Ms}}function sa(t){return Nn(t?.lift)}function Gn(t){return n=>{if(sa(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function xn(t,n,e,i,o){return new Re(t,n,e,i,o)}class Re extends dc{constructor(n,e,i,o,s,d){super(n),this.onFinalize=s,this.shouldUnsubscribe=d,this._next=e?function(f){try{e(f)}catch(_){n.error(_)}}:super._next,this._error=o?function(f){try{o(f)}catch(_){n.error(_)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(f){n.error(f)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function ke(t,n){return Gn((e,i)=>{let o=0;e.subscribe(xn(i,s=>{i.next(t.call(n,s,o++))}))})}function _r(t){return this instanceof _r?(this.v=t,this):new _r(t)}function la(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function aa(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(s){e[s]=t[s]&&function(d){return new Promise(function(f,_){!function o(s,d,f,_){Promise.resolve(_).then(function(C){s({value:C,done:f})},d)}(f,_,(d=t[s](d)).done,d.value)})}}}const tr=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function to(t){return Nn(t?.then)}function Hi(t){return Nn(t[Pt])}function Co(t){return Symbol.asyncIterator&&Nn(t?.[Symbol.asyncIterator])}function Do(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Q=function Rs(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function L(t){return Nn(t?.[Q])}function V(t){return function Rl(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,i=e.apply(t,n||[]),s=[];return o={},d("next"),d("throw"),d("return"),o[Symbol.asyncIterator]=function(){return this},o;function d(z){i[z]&&(o[z]=function(G){return new Promise(function(ae,be){s.push([z,G,ae,be])>1||f(z,G)})})}function f(z,G){try{!function _(z){z.value instanceof _r?Promise.resolve(z.value.v).then(C,T):P(s[0][2],z)}(i[z](G))}catch(ae){P(s[0][3],ae)}}function C(z){f("next",z)}function T(z){f("throw",z)}function P(z,G){z(G),s.shift(),s.length&&f(s[0][0],s[0][1])}}(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:i,done:o}=yield _r(e.read());if(o)return yield _r(void 0);yield yield _r(i)}}finally{e.releaseLock()}})}function q(t){return Nn(t?.getReader)}function te(t){if(t instanceof cn)return t;if(null!=t){if(Hi(t))return function le(t){return new cn(n=>{const e=t[Pt]();if(Nn(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(tr(t))return function pe(t){return new cn(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(to(t))return function de(t){return new cn(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,Qo)})}(t);if(Co(t))return ye(t);if(L(t))return function ce(t){return new cn(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(q(t))return function Ie(t){return ye(V(t))}(t)}throw Do(t)}function ye(t){return new cn(n=>{(function je(t,n){var e,i,o,s;return function _s(t,n,e,i){return new(e||(e=Promise))(function(s,d){function f(T){try{C(i.next(T))}catch(P){d(P)}}function _(T){try{C(i.throw(T))}catch(P){d(P)}}function C(T){T.done?s(T.value):function o(s){return s instanceof e?s:new e(function(d){d(s)})}(T.value).then(f,_)}C((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){try{for(e=la(t);!(i=yield e.next()).done;)if(n.next(i.value),n.closed)return}catch(d){o={error:d}}finally{try{i&&!i.done&&(s=e.return)&&(yield s.call(e))}finally{if(o)throw o.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function Ae(t,n,e,i=0,o=!1){const s=n.schedule(function(){e(),o?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!o)return s}function ht(t,n,e=1/0){return Nn(n)?ht((i,o)=>ke((s,d)=>n(i,s,o,d))(te(t(i,o))),e):("number"==typeof n&&(e=n),Gn((i,o)=>function Tt(t,n,e,i,o,s,d,f){const _=[];let C=0,T=0,P=!1;const z=()=>{P&&!_.length&&!C&&n.complete()},G=be=>C<i?ae(be):_.push(be),ae=be=>{s&&n.next(be),C++;let Ce=!1;te(e(be,T++)).subscribe(xn(n,Te=>{o?.(Te),s?G(Te):n.next(Te)},()=>{Ce=!0},void 0,()=>{if(Ce)try{for(C--;_.length&&C<i;){const Te=_.shift();d?Ae(n,d,()=>ae(Te)):ae(Te)}z()}catch(Te){n.error(Te)}}))};return t.subscribe(xn(n,G,()=>{P=!0,z()})),()=>{f?.()}}(i,o,t,e)))}function pt(t=1/0){return ht(Ri,t)}const gt=new cn(t=>t.complete());function dn(t){return t&&Nn(t.schedule)}function pn(t){return t[t.length-1]}function qn(t){return Nn(pn(t))?t.pop():void 0}function ui(t){return dn(pn(t))?t.pop():void 0}function Ni(t,n=0){return Gn((e,i)=>{e.subscribe(xn(i,o=>Ae(i,t,()=>i.next(o),n),()=>Ae(i,t,()=>i.complete(),n),o=>Ae(i,t,()=>i.error(o),n)))})}function ja(t,n=0){return Gn((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function Ga(t,n){if(!t)throw new Error("Iterable cannot be null");return new cn(e=>{Ae(e,n,()=>{const i=t[Symbol.asyncIterator]();Ae(e,n,()=>{i.next().then(o=>{o.done?e.complete():e.next(o.value)})},0,!0)})})}function xi(t,n){return n?function Qc(t,n){if(null!=t){if(Hi(t))return function Kh(t,n){return te(t).pipe(ja(n),Ni(n))}(t,n);if(tr(t))return function $a(t,n){return new cn(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}(t,n);if(to(t))return function Yh(t,n){return te(t).pipe(ja(n),Ni(n))}(t,n);if(Co(t))return Ga(t,n);if(L(t))return function Yc(t,n){return new cn(e=>{let i;return Ae(e,n,()=>{i=t[Q](),Ae(e,n,()=>{let o,s;try{({value:o,done:s}=i.next())}catch(d){return void e.error(d)}s?e.complete():e.next(o)},0,!0)}),()=>Nn(i?.return)&&i.return()})}(t,n);if(q(t))return function da(t,n){return Ga(V(t),n)}(t,n)}throw Do(t)}(t,n):te(t)}function Qr(...t){const n=ui(t),e=function fo(t,n){return"number"==typeof pn(t)?t.pop():n}(t,1/0),i=t;return i.length?1===i.length?te(i[0]):pt(e)(xi(i,n)):gt}function Fl(t,n,...e){if(!0===n)return void t();if(!1===n)return;const i=new mr({next:()=>{i.unsubscribe(),t()}});return te(n(...e)).subscribe(i)}function Vn(t){for(let n in t)if(t[n]===Vn)return n;throw Error("Could not find renamed property on target object.")}function ai(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function Fn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Fn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function Xc(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const Qh=Vn({__forward_ref__:Vn});function Nt(t){return t.__forward_ref__=Nt,t.toString=function(){return Fn(this())},t}function It(t){return Ll(t)?t():t}function Ll(t){return"function"==typeof t&&t.hasOwnProperty(Qh)&&t.__forward_ref__===Nt}function mc(t){return t&&!!t.\u0275providers}const Ln="https://g.co/ng/security#xss";class Ye extends Error{constructor(n,e){super(ua(n,e)),this.code=n}}function ua(t,n){return`NG0${Math.abs(t)}${n?": "+n.trim():""}`}function jt(t){return"string"==typeof t?t:null==t?"":String(t)}function Ns(t,n){throw new Ye(-201,!1)}function Zn(t,n,e,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${e} ${i} ${n} <=Actual]`))}function Ue(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Qe(t){return{providers:t.providers||[],imports:t.imports||[]}}function Wa(t){return td(t,Vl)||td(t,Du)}function td(t,n){return t.hasOwnProperty(n)?t[n]:null}function Cu(t){return t&&(t.hasOwnProperty(Fs)||t.hasOwnProperty(Ul))?t[Fs]:null}const Vl=Vn({\u0275prov:Vn}),Fs=Vn({\u0275inj:Vn}),Du=Vn({ngInjectableDef:Vn}),Ul=Vn({ngInjectorDef:Vn});var At=(()=>((At=At||{})[At.Default=0]="Default",At[At.Host=1]="Host",At[At.Self=2]="Self",At[At.SkipSelf=4]="SkipSelf",At[At.Optional=8]="Optional",At))();let nd;function tn(t){const n=nd;return nd=t,n}function gc(t,n,e){const i=Wa(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&At.Optional?null:void 0!==n?n:void Ns(Fn(t))}const li=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Hl={},Su="__NG_DI_FLAG__",jl="ngTempTokenPath",od="ngTokenPath",rd=/\n/gm,Tu="\u0275",sd="__source";let $l;function Ls(t){const n=$l;return $l=t,n}function ad(t,n=At.Default){if(void 0===$l)throw new Ye(-203,!1);return null===$l?gc(t,void 0,n):$l.get(t,n&At.Optional?null:void 0,n)}function Le(t,n=At.Default){return(function Eu(){return nd}()||ad)(It(t),n)}function Qt(t,n=At.Default){return Le(t,bc(n))}function bc(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function ha(t){const n=[];for(let e=0;e<t.length;e++){const i=It(t[e]);if(Array.isArray(i)){if(0===i.length)throw new Ye(900,!1);let o,s=At.Default;for(let d=0;d<i.length;d++){const f=i[d],_=ld(f);"number"==typeof _?-1===_?o=f.token:s|=_:o=f}n.push(Le(o,s))}else n.push(Le(i))}return n}function pa(t,n){return t[Su]=n,t.prototype[Su]=n,t}function ld(t){return t[Su]}function Bs(t){return{toString:t}.toString()}var Un=(()=>((Un=Un||{})[Un.OnPush=0]="OnPush",Un[Un.Default=1]="Default",Un))(),vr=(()=>{return(t=vr||(vr={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",vr;var t})();const zt={},In=[],ni=Vn({\u0275cmp:Vn}),Kn=Vn({\u0275dir:Vn}),fa=Vn({\u0275pipe:Vn}),cd=Vn({\u0275mod:Vn}),vs=Vn({\u0275fac:Vn}),Gl=Vn({__NG_ELEMENT_ID__:Vn});let tp=0;function Wt(t){return Bs(()=>{const n=Za(t),e={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Un.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,data:t.data||{},encapsulation:t.encapsulation||vr.Emulated,id:"c"+tp++,styles:t.styles||In,_:null,schemas:t.schemas||null,tView:null};Pu(e);const i=t.dependencies;return e.directiveDefs=Ka(i,!1),e.pipeDefs=Ka(i,!0),e})}function ku(t){return Hn(t)||hi(t)}function Au(t){return null!==t}function Je(t){return Bs(()=>({type:t.type,bootstrap:t.bootstrap||In,declarations:t.declarations||In,imports:t.imports||In,exports:t.exports||In,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Ou(t,n){if(null==t)return zt;const e={};for(const i in t)if(t.hasOwnProperty(i)){let o=t[i],s=o;Array.isArray(o)&&(s=o[1],o=o[0]),e[o]=i,n&&(n[o]=s)}return e}function We(t){return Bs(()=>{const n=Za(t);return Pu(n),n})}function io(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Hn(t){return t[ni]||null}function hi(t){return t[Kn]||null}function wi(t){return t[fa]||null}function Ii(t,n){const e=t[cd]||null;if(!e&&!0===n)throw new Error(`Type ${Fn(t)} does not have '\u0275mod' property.`);return e}function Za(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,exportAs:t.exportAs||null,standalone:!0===t.standalone,selectors:t.selectors||In,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ou(t.inputs,n),outputs:Ou(t.outputs)}}function Pu(t){t.features?.forEach(n=>n(t))}function Ka(t,n){if(!t)return null;const e=n?wi:ku;return()=>("function"==typeof t?t():t).map(i=>e(i)).filter(Au)}const zs=0,_t=1,$t=2,Jn=3,ot=4,Xr=5,Ci=6,Lr=7,Di=8,tt=9,Wl=10,on=11,Ru=12,Ya=13,Nu=14,ys=15,ji=16,Eo=17,Jr=18,Br=19,Qa=20,ud=21,fn=22,hd=1,ql=2,Zl=7,xs=8,Xa=9,ii=10;function oo(t){return Array.isArray(t)&&"object"==typeof t[hd]}function ir(t){return Array.isArray(t)&&!0===t[hd]}function _c(t){return 0!=(4&t.flags)}function Kl(t){return t.componentOffset>-1}function Ja(t){return 1==(1&t.flags)}function or(t){return!!t.template}function es(t){return 0!=(256&t[$t])}function Us(t,n){return t.hasOwnProperty(vs)?t[vs]:null}class zu{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function Mn(){return xc}function xc(t){return t.type.prototype.ngOnChanges&&(t.setInput=Uu),Vu}function Vu(){const t=bd(this),n=t?.current;if(n){const e=t.previous;if(e===zt)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function Uu(t,n,e,i){const o=this.declaredInputs[e],s=bd(t)||function _d(t,n){return t[gd]=n}(t,{previous:zt,current:null}),d=s.current||(s.current={}),f=s.previous,_=f[o];d[o]=new zu(_&&_.currentValue,n,f===zt),t[i]=n}Mn.ngInherit=!0;const gd="__ngSimpleChanges__";function bd(t){return t[gd]||null}const Lo=function(t,n,e){};function Fi(t){for(;Array.isArray(t);)t=t[zs];return t}function Cc(t,n){return Fi(n[t])}function Bo(t,n){return Fi(n[t.index])}function wd(t,n){return t.data[n]}function Hs(t,n){return t[n]}function rr(t,n){const e=n[t];return oo(e)?e:e[zs]}function ba(t){return 64==(64&t[$t])}function js(t,n){return null==n?null:t[n]}function Cd(t){t[Jr]=0}function nl(t,n){t[Xr]+=n;let e=t,i=t[Jn];for(;null!==i&&(1===n&&1===e[Xr]||-1===n&&0===e[Xr]);)i[Xr]+=n,e=i,i=i[Jn]}const Xt={lFrame:en(null),bindingsEnabled:!0};function a(){return Xt.bindingsEnabled}function m(){return Xt.lFrame.lView}function x(){return Xt.lFrame.tView}function D(t){return Xt.lFrame.contextLView=t,t[Di]}function S(t){return Xt.lFrame.contextLView=null,t}function M(){let t=k();for(;null!==t&&64===t.type;)t=t.parent;return t}function k(){return Xt.lFrame.currentTNode}function F(){const t=Xt.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function N(t,n){const e=Xt.lFrame;e.currentTNode=t,e.isParent=n}function U(){return Xt.lFrame.isParent}function X(){Xt.lFrame.isParent=!1}function ue(){const t=Xt.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function he(){return Xt.lFrame.bindingIndex}function ve(){return Xt.lFrame.bindingIndex++}function xe(t){const n=Xt.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function Ne(t){Xt.lFrame.inI18n=t}function ze(t,n){const e=Xt.lFrame;e.bindingIndex=e.bindingRootIndex=t,He(n)}function He(t){Xt.lFrame.currentDirectiveIndex=t}function ft(){return Xt.lFrame.currentQueryIndex}function Ot(t){Xt.lFrame.currentQueryIndex=t}function Bt(t){const n=t[_t];return 2===n.type?n.declTNode:1===n.type?t[Ci]:null}function mt(t,n,e){if(e&At.SkipSelf){let o=n,s=t;for(;!(o=o.parent,null!==o||e&At.Host||(o=Bt(s),null===o||(s=s[ys],10&o.type))););if(null===o)return!1;n=o,t=s}const i=Xt.lFrame=kn();return i.currentTNode=n,i.lView=t,!0}function Cn(t){const n=kn(),e=t[_t];Xt.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function kn(){const t=Xt.lFrame,n=null===t?null:t.child;return null===n?en(t):n}function en(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function gn(){const t=Xt.lFrame;return Xt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Yn=gn;function Dn(){const t=gn();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Qn(){return Xt.lFrame.selectedIndex}function Gi(t){Xt.lFrame.selectedIndex=t}function bn(){const t=Xt.lFrame;return wd(t.tView,t.selectedIndex)}function ro(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const s=t.data[e].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:f,ngAfterViewInit:_,ngAfterViewChecked:C,ngOnDestroy:T}=s;d&&(t.contentHooks??(t.contentHooks=[])).push(-e,d),f&&((t.contentHooks??(t.contentHooks=[])).push(e,f),(t.contentCheckHooks??(t.contentCheckHooks=[])).push(e,f)),_&&(t.viewHooks??(t.viewHooks=[])).push(-e,_),C&&((t.viewHooks??(t.viewHooks=[])).push(e,C),(t.viewCheckHooks??(t.viewCheckHooks=[])).push(e,C)),null!=T&&(t.destroyHooks??(t.destroyHooks=[])).push(e,T)}}function so(t,n,e){Hr(t,n,3,e)}function oi(t,n,e,i){(3&t[$t])===e&&Hr(t,n,e,i)}function Ur(t,n){let e=t[$t];(3&e)===n&&(e&=2047,e+=1,t[$t]=e)}function Hr(t,n,e,i){const s=i??-1,d=n.length-1;let f=0;for(let _=void 0!==i?65535&t[Jr]:0;_<d;_++)if("number"==typeof n[_+1]){if(f=n[_],null!=i&&f>=i)break}else n[_]<0&&(t[Jr]+=65536),(f<s||-1==s)&&(ju(t,e,n,_),t[Jr]=(4294901760&t[Jr])+_+2),_++}function ju(t,n,e,i){const o=e[i]<0,s=e[i+1],f=t[o?-e[i]:e[i]];if(o){if(t[$t]>>11<t[Jr]>>16&&(3&t[$t])===n){t[$t]+=2048,Lo(4,f,s);try{s.call(f)}finally{Lo(5,f,s)}}}else{Lo(4,f,s);try{s.call(f)}finally{Lo(5,f,s)}}}const jr=-1;class ya{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function Jf(t,n,e){let i=0;for(;i<e.length;){const o=e[i];if("number"==typeof o){if(0!==o)break;i++;const s=e[i++],d=e[i++],f=e[i++];t.setAttribute(n,d,f,s)}else{const s=o,d=e[++i];em(s)?t.setProperty(n,s,d):t.setAttribute(n,s,d),i++}}return i}function Gu(t){return 3===t||4===t||6===t}function em(t){return 64===t.charCodeAt(0)}function Td(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const o=n[i];"number"==typeof o?e=o:0===e||Ib(t,e,o,null,-1===e||2===e?n[++i]:null)}}return t}function Ib(t,n,e,i,o){let s=0,d=t.length;if(-1===n)d=-1;else for(;s<t.length;){const f=t[s++];if("number"==typeof f){if(f===n){d=-1;break}if(f>n){d=s-1;break}}}for(;s<t.length;){const f=t[s];if("number"==typeof f)break;if(f===e){if(null===i)return void(null!==o&&(t[s+1]=o));if(i===t[s+1])return void(t[s+2]=o)}s++,null!==i&&s++,null!==o&&s++}-1!==d&&(t.splice(d,0,n),s=d+1),t.splice(s++,0,e),null!==i&&t.splice(s++,0,i),null!==o&&t.splice(s++,0,o)}function ap(t){return t!==jr}function Wu(t){return 32767&t}function Ql(t,n){let e=function tm(t){return t>>16}(t),i=n;for(;e>0;)i=i[ys],e--;return i}let xr=!0;function qu(t){const n=xr;return xr=t,n}const Mb=255,kb=5;let Zu=0;const ns={};function wa(t,n){const e=Ob(t,n);if(-1!==e)return e;const i=n[_t];i.firstCreatePass&&(t.injectorIndex=n.length,Dc(i.data,t),Dc(n,null),Dc(i.blueprint,null));const o=nm(t,n),s=t.injectorIndex;if(ap(o)){const d=Wu(o),f=Ql(o,n),_=f[_t].data;for(let C=0;C<8;C++)n[s+C]=f[d+C]|_[d+C]}return n[s+8]=o,s}function Dc(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Ob(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function nm(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,o=n;for(;null!==o;){if(i=Id(o),null===i)return jr;if(e++,o=o[ys],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return jr}function im(t,n,e){!function Ab(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(Gl)&&(i=e[Gl]),null==i&&(i=e[Gl]=Zu++);const o=i&Mb;n.data[t+(o>>kb)]|=1<<o}(t,n,e)}function Pb(t,n,e){if(e&At.Optional||void 0!==t)return t;Ns()}function Rb(t,n,e,i){if(e&At.Optional&&void 0===i&&(i=null),!(e&(At.Self|At.Host))){const o=t[tt],s=tn(void 0);try{return o?o.get(n,i,e&At.Optional):gc(n,i,e&At.Optional)}finally{tn(s)}}return Pb(i,0,e)}function Nb(t,n,e,i=At.Default,o){if(null!==t){if(1024&n[$t]){const d=function Fb(t,n,e,i,o){let s=t,d=n;for(;null!==s&&null!==d&&1024&d[$t]&&!(256&d[$t]);){const f=lp(s,d,e,i|At.Self,ns);if(f!==ns)return f;let _=s.parent;if(!_){const C=d[ud];if(C){const T=C.get(e,ns,i);if(T!==ns)return T}_=Id(d),d=d[ys]}s=_}return o}(t,n,e,i,ns);if(d!==ns)return d}const s=lp(t,n,e,i,ns);if(s!==ns)return s}return Rb(n,e,i,o)}function lp(t,n,e,i,o){const s=function ki(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Gl)?t[Gl]:void 0;return"number"==typeof n?n>=0?n&Mb:cp:n}(e);if("function"==typeof s){if(!mt(n,t,i))return i&At.Host?Pb(o,0,i):Rb(n,e,i,o);try{const d=s(i);if(null!=d||i&At.Optional)return d;Ns()}finally{Yn()}}else if("number"==typeof s){let d=null,f=Ob(t,n),_=jr,C=i&At.Host?n[ji][Ci]:null;for((-1===f||i&At.SkipSelf)&&(_=-1===f?nm(t,n):n[f+8],_!==jr&&om(i,!1)?(d=n[_t],f=Wu(_),n=Ql(_,n)):f=-1);-1!==f;){const T=n[_t];if(Ku(s,f,T.data)){const P=iy(f,n,e,d,i,C);if(P!==ns)return P}_=n[f+8],_!==jr&&om(i,n[_t].data[f+8]===C)&&Ku(s,f,n)?(d=T,f=Wu(_),n=Ql(_,n)):f=-1}}return o}function iy(t,n,e,i,o,s){const d=n[_t],f=d.data[t+8],T=il(f,d,e,null==i?Kl(f)&&xr:i!=d&&0!=(3&f.type),o&At.Host&&s===f);return null!==T?Ec(n,d,T,f):ns}function il(t,n,e,i,o){const s=t.providerIndexes,d=n.data,f=1048575&s,_=t.directiveStart,T=s>>20,z=o?f+T:t.directiveEnd;for(let G=i?f:f+T;G<z;G++){const ae=d[G];if(G<_&&e===ae||G>=_&&ae.type===e)return G}if(o){const G=d[_];if(G&&or(G)&&G.type===e)return _}return null}function Ec(t,n,e,i){let o=t[e];const s=n.data;if(function Ed(t){return t instanceof ya}(o)){const d=o;d.resolving&&function mu(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new Ye(-200,`Circular dependency in DI detected for ${t}${e}`)}(function Bn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():jt(t)}(s[e]));const f=qu(d.canSeeViewProviders);d.resolving=!0;const _=d.injectImpl?tn(d.injectImpl):null;mt(t,i,At.Default);try{o=t[e]=d.factory(void 0,s,t,i),n.firstCreatePass&&e>=i.directiveStart&&function Pn(t,n,e){const{ngOnChanges:i,ngOnInit:o,ngDoCheck:s}=n.type.prototype;if(i){const d=xc(n);(e.preOrderHooks??(e.preOrderHooks=[])).push(t,d),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(t,d)}o&&(e.preOrderHooks??(e.preOrderHooks=[])).push(0-t,o),s&&((e.preOrderHooks??(e.preOrderHooks=[])).push(t,s),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(t,s))}(e,s[e],n)}finally{null!==_&&tn(_),qu(f),d.resolving=!1,Yn()}}return o}function Ku(t,n,e){return!!(e[n+(t>>kb)]&1<<t)}function om(t,n){return!(t&At.Self||t&At.Host&&n)}class ol{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return Nb(this._tNode,this._lView,n,bc(i),e)}}function cp(){return new ol(M(),m())}function _i(t){return Bs(()=>{const n=t.prototype.constructor,e=n[vs]||dp(n),i=Object.prototype;let o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==i;){const s=o[vs]||dp(o);if(s&&s!==e)return s;o=Object.getPrototypeOf(o)}return s=>new s})}function dp(t){return Ll(t)?()=>{const n=dp(It(t));return n&&n()}:Us(t)}function Id(t){const n=t[_t],e=n.type;return 2===e?n.declTNode:1===e?t[Ci]:null}function Cs(t){return function ny(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const i=e.length;let o=0;for(;o<i;){const s=e[o];if(Gu(s))break;if(0===s)o+=2;else if("number"==typeof s)for(o++;o<i&&"string"==typeof e[o];)o++;else{if(s===n)return e[o+1];o+=2}}}return null}(M(),t)}const Md="__parameters__";function Jl(t,n,e){return Bs(()=>{const i=function rm(t){return function(...e){if(t){const i=t(...e);for(const o in i)this[o]=i[o]}}}(n);function o(...s){if(this instanceof o)return i.apply(this,s),this;const d=new o(...s);return f.annotation=d,f;function f(_,C,T){const P=_.hasOwnProperty(Md)?_[Md]:Object.defineProperty(_,Md,{value:[]})[Md];for(;P.length<=T;)P.push(null);return(P[T]=P[T]||[]).push(d),_}}return e&&(o.prototype=Object.create(e.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}class vt{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Ue({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ic(t,n){t.forEach(e=>Array.isArray(e)?Ic(e,n):n(e))}function zb(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function up(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Ju(t,n){const e=[];for(let i=0;i<t;i++)e.push(n);return e}function os(t,n,e){let i=Ca(t,n);return i>=0?t[1|i]=e:(i=~i,function cm(t,n,e,i){let o=t.length;if(o==n)t.push(e,i);else if(1===o)t.push(i,t[0]),t[0]=e;else{for(o--,t.push(t[o-1],t[o]);o>n;)t[o]=t[o-2],o--;t[n]=e,t[n+1]=i}}(t,i,n,e)),i}function dm(t,n){const e=Ca(t,n);if(e>=0)return t[1|e]}function Ca(t,n){return function Vb(t,n,e){let i=0,o=t.length>>e;for(;o!==i;){const s=i+(o-i>>1),d=t[s<<e];if(n===d)return s<<e;d>n?o=s:i=s+1}return~(o<<e)}(t,n,1)}const Ad=pa(Jl("Optional"),8),th=pa(Jl("SkipSelf"),4);var $r=(()=>(($r=$r||{})[$r.Important=1]="Important",$r[$r.DashCase=2]="DashCase",$r))();const Qb=/^>|^->|<!--|-->|--!>|<!-$/g,Xb=/(<|>)/,by="\u200b$1\u200b";const bp=new Map;let gm=0;const _p="__ngContext__";function zo(t,n){oo(n)?(t[_p]=n[Qa],function _y(t){bp.set(t[Qa],t)}(n)):t[_p]=n}let ym;function xm(t,n){return ym(t,n)}function dh(t){const n=t[Jn];return ir(n)?n[Jn]:n}function xp(t){return s_(t[Ya])}function uh(t){return s_(t[ot])}function s_(t){for(;null!==t&&!ir(t);)t=t[ot];return t}function rs(t,n,e,i,o){if(null!=i){let s,d=!1;ir(i)?s=i:oo(i)&&(d=!0,i=i[zs]);const f=Fi(i);0===t&&null!==e?null==o?c_(n,e,f):Oc(n,e,f,o||null,!0):1===t&&null!==e?Oc(n,e,f,o||null,!0):2===t?Ip(n,f,d):3===t&&n.destroyNode(f),null!=s&&function p_(t,n,e,i,o){const s=e[Zl];s!==Fi(e)&&rs(n,t,i,s,o);for(let f=ii;f<e.length;f++){const _=e[f];cl(_[_t],_,t,n,i,s)}}(n,t,s,e,o)}}function wp(t,n){return t.createText(n)}function Cm(t,n,e){t.setValue(n,e)}function yy(t,n){return t.createComment(function mm(t){return t.replace(Qb,n=>n.replace(Xb,by))}(n))}function Dm(t,n,e){return t.createElement(n,e)}function Ac(t,n){const e=t[Xa],i=e.indexOf(n),o=n[Jn];512&n[$t]&&(n[$t]&=-513,nl(o,-1)),e.splice(i,1)}function Im(t,n){if(t.length<=ii)return;const e=ii+n,i=t[e];if(i){const o=i[Eo];null!==o&&o!==t&&Ac(o,i),n>0&&(t[e-1][ot]=i[ot]);const s=up(t,ii+n);!function xy(t,n){cl(t,n,n[on],2,null,null),n[zs]=null,n[Ci]=null}(i[_t],i);const d=s[Br];null!==d&&d.detachView(s[_t]),i[Jn]=null,i[ot]=null,i[$t]&=-65}return i}function Dp(t,n){if(!(128&n[$t])){const e=n[on];e.destroyNode&&cl(t,n,e,3,null,null),function wy(t){let n=t[Ya];if(!n)return Ep(t[_t],t);for(;n;){let e=null;if(oo(n))e=n[Ya];else{const i=n[ii];i&&(e=i)}if(!e){for(;n&&!n[ot]&&n!==t;)oo(n)&&Ep(n[_t],n),n=n[Jn];null===n&&(n=t),oo(n)&&Ep(n[_t],n),e=n&&n[ot]}n=e}}(n)}}function Ep(t,n){if(!(128&n[$t])){n[$t]&=-65,n[$t]|=128,function Mm(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const o=n[e[i]];if(!(o instanceof ya)){const s=e[i+1];if(Array.isArray(s))for(let d=0;d<s.length;d+=2){const f=o[s[d]],_=s[d+1];Lo(4,f,_);try{_.call(f)}finally{Lo(5,f,_)}}else{Lo(4,o,s);try{s.call(o)}finally{Lo(5,o,s)}}}}}(t,n),function Sp(t,n){const e=t.cleanup,i=n[Lr];let o=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const d=e[s+3];d>=0?i[o=d]():i[o=-d].unsubscribe(),s+=2}else{const d=i[o=e[s+1]];e[s].call(d)}if(null!==i){for(let s=o+1;s<i.length;s++)(0,i[s])();n[Lr]=null}}(t,n),1===n[_t].type&&n[on].destroy();const e=n[Eo];if(null!==e&&ir(n[Jn])){e!==n[Jn]&&Ac(e,n);const i=n[Br];null!==i&&i.detachView(t)}!function e_(t){bp.delete(t[Qa])}(n)}}function a_(t,n,e){return l_(t,n.parent,e)}function l_(t,n,e){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return e[zs];{const{componentOffset:o}=i;if(o>-1){const{encapsulation:s}=t.data[i.directiveStart+o];if(s===vr.None||s===vr.Emulated)return null}return Bo(i,e)}}function Oc(t,n,e,i,o){t.insertBefore(n,e,i,o)}function c_(t,n,e){t.appendChild(n,e)}function d_(t,n,e,i,o){null!==i?Oc(t,n,e,i,o):c_(t,n,e)}function ll(t,n){return t.parentNode(n)}function Am(t,n,e){return Pm(t,n,e)}function Om(t,n,e){return 40&t.type?Bo(t,e):null}let Tp,Bd,ph,Vd,Pm=Om;function Rm(t,n){Pm=t,Tp=n}function Ld(t,n,e,i){const o=a_(t,i,n),s=n[on],f=Am(i.parent||n[Ci],i,n);if(null!=o)if(Array.isArray(e))for(let _=0;_<e.length;_++)d_(s,o,e[_],f,!1);else d_(s,o,e,f,!1);void 0!==Tp&&Tp(s,i,n,e,o)}function Pc(t,n){if(null!==n){const e=n.type;if(3&e)return Bo(n,t);if(4&e)return hh(-1,t[n.index]);if(8&e){const i=n.child;if(null!==i)return Pc(t,i);{const o=t[n.index];return ir(o)?hh(-1,o):Fi(o)}}if(32&e)return xm(n,t)()||Fi(t[n.index]);{const i=Nm(t,n);return null!==i?Array.isArray(i)?i[0]:Pc(dh(t[ji]),i):Pc(t,n.next)}}return null}function Nm(t,n){return null!==n?t[ji][Ci].projection[n.projection]:null}function hh(t,n){const e=ii+t+1;if(e<n.length){const i=n[e],o=i[_t].firstChild;if(null!==o)return Pc(i,o)}return n[Zl]}function Ip(t,n,e){const i=ll(t,n);i&&function km(t,n,e,i){t.removeChild(n,e,i)}(t,i,n,e)}function Cr(t,n,e,i,o,s,d){for(;null!=e;){const f=i[e.index],_=e.type;if(d&&0===n&&(f&&zo(Fi(f),i),e.flags|=2),32!=(32&e.flags))if(8&_)Cr(t,n,e.child,i,o,s,!1),rs(n,t,o,f,s);else if(32&_){const C=xm(e,i);let T;for(;T=C();)rs(n,t,o,T,s);rs(n,t,o,f,s)}else 16&_?Fm(t,n,i,e,o,s):rs(n,t,o,f,s);e=d?e.projectionNext:e.next}}function cl(t,n,e,i,o,s){Cr(e,i,t.firstChild,n,o,s,!1)}function Fm(t,n,e,i,o,s){const d=e[ji],_=d[Ci].projection[i.projection];if(Array.isArray(_))for(let C=0;C<_.length;C++)rs(n,t,o,_[C],s);else Cr(t,n,_,d[Jn],o,s,!0)}function Lm(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function g_(t,n,e){const{mergedAttrs:i,classes:o,styles:s}=e;null!==i&&Jf(t,n,i),null!==o&&Lm(t,n,o),null!==s&&function m_(t,n,e){t.setAttribute(n,"style",e)}(t,n,s)}function Ea(t){return function Mp(){if(void 0===Bd&&(Bd=null,li.trustedTypes))try{Bd=li.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Bd}()?.createHTML(t)||t}function zd(){return void 0!==ph?ph:typeof document<"u"?document:void 0}function zm(){if(void 0===Vd&&(Vd=null,li.trustedTypes))try{Vd=li.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Vd}function l(t){return zm()?.createHTML(t)||t}function c(t){return zm()?.createScriptURL(t)||t}class h{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ln})`}}function O(t){return t instanceof h?t.changingThisBreaksApplicationSecurity:t}function R(t,n){const e=function B(t){return t instanceof h&&t.getTypeName()||null}(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${Ln})`)}return e===n}function _e(t){const n=new fe(t);return function we(){try{return!!(new window.DOMParser).parseFromString(Ea(""),"text/html")}catch{return!1}}()?new De(n):n}class De{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(Ea(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch{return null}}}class fe{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const e=this.inertDocument.createElement("template");return e.innerHTML=Ea(n),e}}const Ve=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Be(t){return(t=String(t)).match(Ve)?t:"unsafe:"+t}function ct(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function bt(...t){const n={};for(const e of t)for(const i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}const st=ct("area,br,col,hr,img,wbr"),nt=ct("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),et=ct("rp,rt"),Dt=bt(st,bt(nt,ct("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),bt(et,ct("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),bt(et,nt)),yt=ct("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ci=bt(yt,ct("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ct("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Wi=ct("script,style,template");class ss{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=this.checkClobberedElement(e,e.nextSibling);if(o){e=o;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(n){const e=n.nodeName.toLowerCase();if(!Dt.hasOwnProperty(e))return this.sanitizedSomething=!0,!Wi.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=n.attributes;for(let o=0;o<i.length;o++){const s=i.item(o),d=s.name,f=d.toLowerCase();if(!ci.hasOwnProperty(f)){this.sanitizedSomething=!0;continue}let _=s.value;yt[f]&&(_=Be(_)),this.buf.push(" ",d,'="',qi(_),'"')}return this.buf.push(">"),!0}endElement(n){const e=n.nodeName.toLowerCase();Dt.hasOwnProperty(e)&&!st.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(qi(n))}checkClobberedElement(n,e){if(e&&(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return e}}const So=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Bi=/([^\#-~ |!])/g;function qi(t){return t.replace(/&/g,"&amp;").replace(So,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(Bi,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Zi;function Uo(t){return"content"in t&&function zi(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var En=(()=>((En=En||{})[En.NONE=0]="NONE",En[En.HTML=1]="HTML",En[En.STYLE=2]="STYLE",En[En.SCRIPT=3]="SCRIPT",En[En.URL=4]="URL",En[En.RESOURCE_URL=5]="RESOURCE_URL",En))();function To(t){const n=Dr();return n?l(n.sanitize(En.HTML,t)||""):R(t,"HTML")?l(O(t)):function Vo(t,n){let e=null;try{Zi=Zi||_e(t);let i=n?String(n):"";e=Zi.getInertBodyElement(i);let o=5,s=i;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,i=s,s=e.innerHTML,e=Zi.getInertBodyElement(i)}while(i!==s);return Ea((new ss).sanitizeChildren(Uo(e)||e))}finally{if(e){const i=Uo(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}(zd(),jt(t))}function ar(t){const n=Dr();return n?n.sanitize(En.URL,t)||"":R(t,"URL")?O(t):Be(jt(t))}function lr(t){const n=Dr();if(n)return c(n.sanitize(En.RESOURCE_URL,t)||"");if(R(t,"ResourceURL"))return c(O(t));throw new Ye(904,!1)}function Dr(){const t=m();return t&&t[Ru]}const Wr=new vt("ENVIRONMENT_INITIALIZER"),Sa=new vt("INJECTOR",-1),as=new vt("INJECTOR_DEF_TYPES");class qr{get(n,e=Hl){if(e===Hl){const i=new Error(`NullInjectorError: No provider for ${Fn(n)}!`);throw i.name="NullInjectorError",i}return e}}function dl(...t){return{\u0275providers:Ud(0,t),\u0275fromNgModule:!0}}function Ud(t,...n){const e=[],i=new Set;let o;return Ic(n,s=>{const d=s;fh(d,e,[],i)&&(o||(o=[]),o.push(d))}),void 0!==o&&Vm(o,e),e}function Vm(t,n){for(let e=0;e<t.length;e++){const{providers:o}=t[e];Gs(o,s=>{n.push(s)})}}function fh(t,n,e,i){if(!(t=It(t)))return!1;let o=null,s=Cu(t);const d=!s&&Hn(t);if(s||d){if(d&&!d.standalone)return!1;o=t}else{const _=t.ngModule;if(s=Cu(_),!s)return!1;o=_}const f=i.has(o);if(d){if(f)return!1;if(i.add(o),d.dependencies){const _="function"==typeof d.dependencies?d.dependencies():d.dependencies;for(const C of _)fh(C,n,e,i)}}else{if(!s)return!1;{if(null!=s.imports&&!f){let C;i.add(o);try{Ic(s.imports,T=>{fh(T,n,e,i)&&(C||(C=[]),C.push(T))})}finally{}void 0!==C&&Vm(C,n)}if(!f){const C=Us(o)||(()=>new o);n.push({provide:o,useFactory:C,deps:In},{provide:as,useValue:o,multi:!0},{provide:Wr,useValue:()=>Le(o),multi:!0})}const _=s.providers;null==_||f||Gs(_,T=>{n.push(T)})}}return o!==t&&void 0!==t.providers}function Gs(t,n){for(let e of t)mc(e)&&(e=e.\u0275providers),Array.isArray(e)?Gs(e,n):n(e)}const v_=Vn({provide:String,useValue:Vn});function mh(t){return null!==t&&"object"==typeof t&&v_ in t}function Rc(t){return"function"==typeof t}const Hm=new vt("Set Injector scope."),Op={},Ey={};let jm;function Pp(){return void 0===jm&&(jm=new qr),jm}class Ds{}class Es extends Ds{get destroyed(){return this._destroyed}constructor(n,e,i,o){super(),this.parent=e,this.source=i,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sy(n,d=>this.processProvider(d)),this.records.set(Sa,Ta(void 0,this)),o.has("environment")&&this.records.set(Ds,Ta(void 0,this));const s=this.records.get(Hm);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(as.multi,In,At.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const e=Ls(this),i=tn(void 0);try{return n()}finally{Ls(e),tn(i)}}get(n,e=Hl,i=At.Default){this.assertNotDestroyed(),i=bc(i);const o=Ls(this),s=tn(void 0);try{if(!(i&At.SkipSelf)){let f=this.records.get(n);if(void 0===f){const _=function Nc(t){return"function"==typeof t||"object"==typeof t&&t instanceof vt}(n)&&Wa(n);f=_&&this.injectableDefInScope(_)?Ta(Hd(n),Op):null,this.records.set(n,f)}if(null!=f)return this.hydrate(n,f)}return(i&At.Self?Pp():this.parent).get(n,e=i&At.Optional&&e===Hl?null:e)}catch(d){if("NullInjectorError"===d.name){if((d[jl]=d[jl]||[]).unshift(Fn(n)),o)throw d;return function Zf(t,n,e,i){const o=t[jl];throw n[sd]&&o.unshift(n[sd]),t.message=function Mu(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&t.charAt(1)==Tu?t.slice(2):t;let o=Fn(n);if(Array.isArray(n))o=n.map(Fn).join(" -> ");else if("object"==typeof n){let s=[];for(let d in n)if(n.hasOwnProperty(d)){let f=n[d];s.push(d+":"+("string"==typeof f?JSON.stringify(f):Fn(f)))}o=`{${s.join(", ")}}`}return`${e}${i?"("+i+")":""}[${o}]: ${t.replace(rd,"\n  ")}`}("\n"+t.message,o,e,i),t[od]=o,t[jl]=null,t}(d,n,"R3InjectorError",this.source)}throw d}finally{tn(s),Ls(o)}}resolveInjectorInitializers(){const n=Ls(this),e=tn(void 0);try{const i=this.get(Wr.multi,In,At.Self);for(const o of i)o()}finally{Ls(n),tn(e)}}toString(){const n=[],e=this.records;for(const i of e.keys())n.push(Fn(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ye(205,!1)}processProvider(n){let e=Rc(n=It(n))?n:It(n&&n.provide);const i=function Sr(t){return mh(t)?Ta(void 0,t.useValue):Ta(Ws(t),Op)}(n);if(Rc(n)||!0!==n.multi)this.records.get(e);else{let o=this.records.get(e);o||(o=Ta(void 0,Op,!0),o.factory=()=>ha(o.multi),this.records.set(e,o)),e=n,o.multi.push(n)}this.records.set(e,i)}hydrate(n,e){return e.value===Op&&(e.value=Ey,e.value=e.factory()),"object"==typeof e.value&&e.value&&function x_(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=It(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function Hd(t){const n=Wa(t),e=null!==n?n.factory:Us(t);if(null!==e)return e;if(t instanceof vt)throw new Ye(204,!1);if(t instanceof Function)return function y_(t){const n=t.length;if(n>0)throw Ju(n,"?"),new Ye(204,!1);const e=function zl(t){const n=t&&(t[Vl]||t[Du]);return n?(function On(t){if(t.hasOwnProperty("name"))return t.name;(""+t).match(/^function\s*([^\s(]+)/)}(t),n):null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new Ye(204,!1)}function Ws(t,n,e){let i;if(Rc(t)){const o=It(t);return Us(o)||Hd(o)}if(mh(t))i=()=>It(t.useValue);else if(function Um(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...ha(t.deps||[]));else if(function Ap(t){return!(!t||!t.useExisting)}(t))i=()=>Le(It(t.useExisting));else{const o=It(t&&(t.useClass||t.provide));if(!function gh(t){return!!t.deps}(t))return Us(o)||Hd(o);i=()=>new o(...ha(t.deps))}return i}function Ta(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function Sy(t,n){for(const e of t)Array.isArray(e)?Sy(e,n):e&&mc(e)?Sy(e.\u0275providers,n):n(e)}class sP{}class OC{}class lP{resolveComponentFactory(n){throw function aP(t){const n=Error(`No component factory found for ${Fn(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let Rp=(()=>{class t{}return t.NULL=new lP,t})();function cP(){return Np(M(),m())}function Np(t,n){return new qt(Bo(t,n))}let qt=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=cP,t})();function dP(t){return t instanceof qt?t.nativeElement:t}class $m{}let lo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function uP(){const t=m(),e=rr(M().index,t);return(oo(e)?e:t)[on]}(),t})(),hP=(()=>{class t{}return t.\u0275prov=Ue({token:t,providedIn:"root",factory:()=>null}),t})();class Gm{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const pP=new Gm("15.2.6"),Ty={},Iy="ngOriginalError";function My(t){return t[Iy]}class Fp{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&My(n);for(;e&&My(e);)e=My(e);return e||null}}function ky(t){return t.ownerDocument.defaultView}function RC(t){return t.ownerDocument}function Fc(t){return t instanceof Function?t():t}function FC(t,n,e){let i=t.length;for(;;){const o=t.indexOf(n,e);if(-1===o)return o;if(0===o||t.charCodeAt(o-1)<=32){const s=n.length;if(o+s===i||t.charCodeAt(o+s)<=32)return o}e=o+1}}const LC="ng-template";function wP(t,n,e){let i=0,o=!0;for(;i<t.length;){let s=t[i++];if("string"==typeof s&&o){const d=t[i++];if(e&&"class"===s&&-1!==FC(d.toLowerCase(),n,0))return!0}else{if(1===s){for(;i<t.length&&"string"==typeof(s=t[i++]);)if(s.toLowerCase()===n)return!0;return!1}"number"==typeof s&&(o=!1)}}return!1}function BC(t){return 4===t.type&&t.value!==LC}function CP(t,n,e){return n===(4!==t.type||e?t.value:LC)}function DP(t,n,e){let i=4;const o=t.attrs||[],s=function TP(t){for(let n=0;n<t.length;n++)if(Gu(t[n]))return n;return t.length}(o);let d=!1;for(let f=0;f<n.length;f++){const _=n[f];if("number"!=typeof _){if(!d)if(4&i){if(i=2|1&i,""!==_&&!CP(t,_,e)||""===_&&1===n.length){if(ul(i))return!1;d=!0}}else{const C=8&i?_:n[++f];if(8&i&&null!==t.attrs){if(!wP(t.attrs,C,e)){if(ul(i))return!1;d=!0}continue}const P=EP(8&i?"class":_,o,BC(t),e);if(-1===P){if(ul(i))return!1;d=!0;continue}if(""!==C){let z;z=P>s?"":o[P+1].toLowerCase();const G=8&i?z:null;if(G&&-1!==FC(G,C,0)||2&i&&C!==z){if(ul(i))return!1;d=!0}}}}else{if(!d&&!ul(i)&&!ul(_))return!1;if(d&&ul(_))continue;d=!1,i=_|1&i}}return ul(i)||d}function ul(t){return 0==(1&t)}function EP(t,n,e,i){if(null===n)return-1;let o=0;if(i||!e){let s=!1;for(;o<n.length;){const d=n[o];if(d===t)return o;if(3===d||6===d)s=!0;else{if(1===d||2===d){let f=n[++o];for(;"string"==typeof f;)f=n[++o];continue}if(4===d)break;if(0===d){o+=4;continue}}o+=s?1:2}return-1}return function IP(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const i=t[e];if("number"==typeof i)return-1;if(i===n)return e;e++}return-1}(n,t)}function zC(t,n,e=!1){for(let i=0;i<n.length;i++)if(DP(t,n[i],e))return!0;return!1}function MP(t,n){e:for(let e=0;e<n.length;e++){const i=n[e];if(t.length===i.length){for(let o=0;o<t.length;o++)if(t[o]!==i[o])continue e;return!0}}return!1}function VC(t,n){return t?":not("+n.trim()+")":n}function kP(t){let n=t[0],e=1,i=2,o="",s=!1;for(;e<t.length;){let d=t[e];if("string"==typeof d)if(2&i){const f=t[++e];o+="["+d+(f.length>0?'="'+f+'"':"")+"]"}else 8&i?o+="."+d:4&i&&(o+=" "+d);else""!==o&&!ul(d)&&(n+=VC(s,o),o=""),i=d,s=s||!ul(i);e++}return""!==o&&(n+=VC(s,o)),n}const sn={};function ne(t){UC(x(),m(),Qn()+t,!1)}function UC(t,n,e,i){if(!i)if(3==(3&n[$t])){const s=t.preOrderCheckHooks;null!==s&&so(n,s,e)}else{const s=t.preOrderHooks;null!==s&&oi(n,s,0,e)}Gi(e)}function GC(t,n=null,e=null,i){const o=WC(t,n,e,i);return o.resolveInjectorInitializers(),o}function WC(t,n=null,e=null,i,o=new Set){const s=[e||In,dl(t)];return i=i||("object"==typeof t?void 0:Fn(t)),new Es(s,n||Pp(),i||null,o)}let Zr=(()=>{class t{static create(e,i){if(Array.isArray(e))return GC({name:""},i,e,"");{const o=e.name??"";return GC({name:o},e.parent,e.providers,o)}}}return t.THROW_IF_NOT_FOUND=Hl,t.NULL=new qr,t.\u0275prov=Ue({token:t,providedIn:"any",factory:()=>Le(Sa)}),t.__NG_ELEMENT_ID__=-1,t})();function J(t,n=At.Default){const e=m();return null===e?Le(t,n):Nb(M(),e,It(t),n)}function eD(t,n){const e=t.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const s=e[i+1];if(-1!==s){const d=t.data[s];Ot(e[i]),d.contentQueries(2,n[s],s)}}}function C_(t,n,e,i,o,s,d,f,_,C,T){const P=n.blueprint.slice();return P[zs]=o,P[$t]=76|i,(null!==T||t&&1024&t[$t])&&(P[$t]|=1024),Cd(P),P[Jn]=P[ys]=t,P[Di]=e,P[Wl]=d||t&&t[Wl],P[on]=f||t&&t[on],P[Ru]=_||t&&t[Ru]||null,P[tt]=C||t&&t[tt]||null,P[Ci]=s,P[Qa]=function bm(){return gm++}(),P[ud]=T,P[ji]=2==n.type?t[ji]:P,P}function zp(t,n,e,i,o){let s=t.data[n];if(null===s)s=Ny(t,n,e,i,o),function Se(){return Xt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=e,s.value=i,s.attrs=o;const d=F();s.injectorIndex=null===d?-1:d.injectorIndex}return N(s,!0),s}function Ny(t,n,e,i,o){const s=k(),d=U(),_=t.data[n]=function nR(t,n,e,i,o,s){return{type:e,index:i,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?s:s&&s.parent,e,n,i,o);return null===t.firstChild&&(t.firstChild=_),null!==s&&(d?null==s.child&&null!==_.parent&&(s.child=_):null===s.next&&(s.next=_,_.prev=s)),_}function Wm(t,n,e,i){if(0===e)return-1;const o=n.length;for(let s=0;s<e;s++)n.push(i),t.blueprint.push(i),t.data.push(null);return o}function Fy(t,n,e){Cn(n);try{const i=t.viewQuery;null!==i&&Wy(1,i,e);const o=t.template;null!==o&&tD(t,n,o,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&eD(t,n),t.staticViewQueries&&Wy(2,t.viewQuery,e);const s=t.components;null!==s&&function JP(t,n){for(let e=0;e<n.length;e++)xR(t,n[e])}(n,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[$t]&=-5,Dn()}}function D_(t,n,e,i){const o=n[$t];if(128!=(128&o)){Cn(n);try{Cd(n),function ie(t){return Xt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&tD(t,n,e,2,i);const d=3==(3&o);if(d){const C=t.preOrderCheckHooks;null!==C&&so(n,C,null)}else{const C=t.preOrderHooks;null!==C&&oi(n,C,0,null),Ur(n,0)}if(function vR(t){for(let n=xp(t);null!==n;n=uh(n)){if(!n[ql])continue;const e=n[Xa];for(let i=0;i<e.length;i++){const o=e[i];512&o[$t]||nl(o[Jn],1),o[$t]|=512}}}(n),function _R(t){for(let n=xp(t);null!==n;n=uh(n))for(let e=ii;e<n.length;e++){const i=n[e],o=i[_t];ba(i)&&D_(o,i,o.template,i[Di])}}(n),null!==t.contentQueries&&eD(t,n),d){const C=t.contentCheckHooks;null!==C&&so(n,C)}else{const C=t.contentHooks;null!==C&&oi(n,C,1),Ur(n,1)}!function QP(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const o=e[i];if(o<0)Gi(~o);else{const s=o,d=e[++i],f=e[++i];ze(d,s),f(2,n[s])}}}finally{Gi(-1)}}(t,n);const f=t.components;null!==f&&function XP(t,n){for(let e=0;e<n.length;e++)yR(t,n[e])}(n,f);const _=t.viewQuery;if(null!==_&&Wy(2,_,i),d){const C=t.viewCheckHooks;null!==C&&so(n,C)}else{const C=t.viewHooks;null!==C&&oi(n,C,2),Ur(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[$t]&=-41,512&n[$t]&&(n[$t]&=-513,nl(n[Jn],-1))}finally{Dn()}}}function tD(t,n,e,i,o){const s=Qn(),d=2&i;try{Gi(-1),d&&n.length>fn&&UC(t,n,fn,!1),Lo(d?2:0,o),e(i,o)}finally{Gi(s),Lo(d?3:1,o)}}function Ly(t,n,e){if(_c(n)){const o=n.directiveEnd;for(let s=n.directiveStart;s<o;s++){const d=t.data[s];d.contentQueries&&d.contentQueries(1,e[s],s)}}}function By(t,n,e){a()&&(function lR(t,n,e,i){const o=e.directiveStart,s=e.directiveEnd;Kl(e)&&function mR(t,n,e){const i=Bo(n,t),o=nD(e),s=t[Wl],d=E_(t,C_(t,o,null,e.onPush?32:16,i,n,s,s.createRenderer(i,e),null,null,null));t[n.index]=d}(n,e,t.data[o+e.componentOffset]),t.firstCreatePass||wa(e,n),zo(i,n);const d=e.initialInputs;for(let f=o;f<s;f++){const _=t.data[f],C=Ec(n,t,f,e);zo(C,n),null!==d&&gR(0,f-o,C,_,0,d),or(_)&&(rr(e.index,n)[Di]=Ec(n,t,f,e))}}(t,n,e,Bo(e,n)),64==(64&e.flags)&&lD(t,n,e))}function zy(t,n,e=Bo){const i=n.localNames;if(null!==i){let o=n.index+1;for(let s=0;s<i.length;s+=2){const d=i[s+1],f=-1===d?e(n,t):t[d];t[o++]=f}}}function nD(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Vy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Vy(t,n,e,i,o,s,d,f,_,C){const T=fn+i,P=T+o,z=function eR(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:sn);return e}(T,P),G="function"==typeof C?C():C;return z[_t]={type:t,blueprint:z,template:e,queries:null,viewQuery:f,declTNode:n,data:z.slice().fill(null,T),bindingStartIndex:T,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:_,consts:G,incompleteFirstPass:!1}}function iD(t,n,e,i){const o=dD(n);null===e?o.push(i):(o.push(e),t.firstCreatePass&&uD(t).push(i,o.length-1))}function oD(t,n,e,i){for(let o in t)if(t.hasOwnProperty(o)){e=null===e?{}:e;const s=t[o];null===i?rD(e,n,o,s):i.hasOwnProperty(o)&&rD(e,n,i[o],s)}return e}function rD(t,n,e,i){t.hasOwnProperty(e)?t[e].push(n,i):t[e]=[n,i]}function qs(t,n,e,i,o,s,d,f){const _=Bo(n,e);let T,C=n.inputs;!f&&null!=C&&(T=C[i])?(qy(t,e,T,i,o),Kl(n)&&sD(e,n.index)):3&n.type&&(i=function oR(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),o=null!=d?d(o,n.value||"",i):o,s.setProperty(_,i,o))}function sD(t,n){const e=rr(n,t);16&e[$t]||(e[$t]|=32)}function Uy(t,n,e,i){if(a()){const o=null===i?null:{"":-1},s=function dR(t,n){const e=t.directiveRegistry;let i=null,o=null;if(e)for(let s=0;s<e.length;s++){const d=e[s];if(zC(n,d.selectors,!1))if(i||(i=[]),or(d))if(null!==d.findHostDirectiveDefs){const f=[];o=o||new Map,d.findHostDirectiveDefs(d,f,o),i.unshift(...f,d),Hy(t,n,f.length)}else i.unshift(d),Hy(t,n,0);else o=o||new Map,d.findHostDirectiveDefs?.(d,i,o),i.push(d)}return null===i?null:[i,o]}(t,e);let d,f;null===s?d=f=null:[d,f]=s,null!==d&&aD(t,n,e,d,o,f),o&&function uR(t,n,e){if(n){const i=t.localNames=[];for(let o=0;o<n.length;o+=2){const s=e[n[o+1]];if(null==s)throw new Ye(-301,!1);i.push(n[o],s)}}}(e,i,o)}e.mergedAttrs=Td(e.mergedAttrs,e.attrs)}function aD(t,n,e,i,o,s){for(let C=0;C<i.length;C++)im(wa(e,n),t,i[C].type);!function pR(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}(e,t.data.length,i.length);for(let C=0;C<i.length;C++){const T=i[C];T.providersResolver&&T.providersResolver(T)}let d=!1,f=!1,_=Wm(t,n,i.length,null);for(let C=0;C<i.length;C++){const T=i[C];e.mergedAttrs=Td(e.mergedAttrs,T.hostAttrs),fR(t,e,n,_,T),hR(_,T,o),null!==T.contentQueries&&(e.flags|=4),(null!==T.hostBindings||null!==T.hostAttrs||0!==T.hostVars)&&(e.flags|=64);const P=T.type.prototype;!d&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((t.preOrderHooks??(t.preOrderHooks=[])).push(e.index),d=!0),!f&&(P.ngOnChanges||P.ngDoCheck)&&((t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(e.index),f=!0),_++}!function iR(t,n,e){const o=n.directiveEnd,s=t.data,d=n.attrs,f=[];let _=null,C=null;for(let T=n.directiveStart;T<o;T++){const P=s[T],z=e?e.get(P):null,ae=z?z.outputs:null;_=oD(P.inputs,T,_,z?z.inputs:null),C=oD(P.outputs,T,C,ae);const be=null===_||null===d||BC(n)?null:bR(_,T,d);f.push(be)}null!==_&&(_.hasOwnProperty("class")&&(n.flags|=8),_.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=f,n.inputs=_,n.outputs=C}(t,e,s)}function lD(t,n,e){const i=e.directiveStart,o=e.directiveEnd,s=e.index,d=function Ge(){return Xt.lFrame.currentDirectiveIndex}();try{Gi(s);for(let f=i;f<o;f++){const _=t.data[f],C=n[f];He(f),(null!==_.hostBindings||0!==_.hostVars||null!==_.hostAttrs)&&cR(_,C)}}finally{Gi(-1),He(d)}}function cR(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Hy(t,n,e){n.componentOffset=e,(t.components??(t.components=[])).push(n.index)}function hR(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;or(n)&&(e[""]=t)}}function fR(t,n,e,i,o){t.data[i]=o;const s=o.factory||(o.factory=Us(o.type)),d=new ya(s,or(o),J);t.blueprint[i]=d,e[i]=d,function sR(t,n,e,i,o){const s=o.hostBindings;if(s){let d=t.hostBindingOpCodes;null===d&&(d=t.hostBindingOpCodes=[]);const f=~n.index;(function aR(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(d)!=f&&d.push(f),d.push(e,i,s)}}(t,n,i,Wm(t,e,o.hostVars,sn),o)}function jy(t,n,e,i,o,s,d){if(null==s)t.removeAttribute(n,o,e);else{const f=null==d?jt(s):d(s,i||"",o);t.setAttribute(n,o,f,e)}}function gR(t,n,e,i,o,s){const d=s[n];if(null!==d){const f=i.setInput;for(let _=0;_<d.length;){const C=d[_++],T=d[_++],P=d[_++];null!==f?i.setInput(e,P,C,T):e[T]=P}}}function bR(t,n,e){let i=null,o=0;for(;o<e.length;){const s=e[o];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===i&&(i=[]);const d=t[s];for(let f=0;f<d.length;f+=2)if(d[f]===n){i.push(s,d[f+1],e[o+1]);break}}o+=2}else o+=2;else o+=4}return i}function cD(t,n,e,i){return[t,!0,!1,n,null,0,i,e,null,null]}function yR(t,n){const e=rr(n,t);if(ba(e)){const i=e[_t];48&e[$t]?D_(i,e,i.template,e[Di]):e[Xr]>0&&$y(e)}}function $y(t){for(let i=xp(t);null!==i;i=uh(i))for(let o=ii;o<i.length;o++){const s=i[o];if(ba(s))if(512&s[$t]){const d=s[_t];D_(d,s,d.template,s[Di])}else s[Xr]>0&&$y(s)}const e=t[_t].components;if(null!==e)for(let i=0;i<e.length;i++){const o=rr(e[i],t);ba(o)&&o[Xr]>0&&$y(o)}}function xR(t,n){const e=rr(n,t),i=e[_t];(function wR(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])})(i,e),Fy(i,e,e[Di])}function E_(t,n){return t[Ya]?t[Nu][ot]=n:t[Ya]=n,t[Nu]=n,n}function Gy(t){for(;t;){t[$t]|=32;const n=dh(t);if(es(t)&&!n)return t;t=n}return null}function S_(t,n,e,i=!0){const o=n[Wl];o.begin&&o.begin();try{D_(t,n,t.template,e)}catch(d){throw i&&pD(n,d),d}finally{o.end&&o.end()}}function Wy(t,n,e){Ot(0),n(t,e)}function dD(t){return t[Lr]||(t[Lr]=[])}function uD(t){return t.cleanup||(t.cleanup=[])}function pD(t,n){const e=t[tt],i=e?e.get(Fp,null):null;i&&i.handleError(n)}function qy(t,n,e,i,o){for(let s=0;s<e.length;){const d=e[s++],f=e[s++],_=n[d],C=t.data[d];null!==C.setInput?C.setInput(_,o,i,f):_[f]=o}}function Lc(t,n,e){const i=Cc(n,t);Cm(t[on],i,e)}function T_(t,n,e){let i=e?t.styles:null,o=e?t.classes:null,s=0;if(null!==n)for(let d=0;d<n.length;d++){const f=n[d];"number"==typeof f?s=f:1==s?o=Xc(o,f):2==s&&(i=Xc(i,f+": "+n[++d]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=o:t.classesWithoutHost=o}function I_(t,n,e,i,o=!1){for(;null!==e;){const s=n[e.index];if(null!==s&&i.push(Fi(s)),ir(s))for(let f=ii;f<s.length;f++){const _=s[f],C=_[_t].firstChild;null!==C&&I_(_[_t],_,C,i)}const d=e.type;if(8&d)I_(t,n,e.child,i);else if(32&d){const f=xm(e,n);let _;for(;_=f();)i.push(_)}else if(16&d){const f=Nm(n,e);if(Array.isArray(f))i.push(...f);else{const _=dh(n[ji]);I_(_[_t],_,f,i,!0)}}e=o?e.projectionNext:e.next}return i}class qm{get rootNodes(){const n=this._lView,e=n[_t];return I_(e,n,e.firstChild,[])}constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Di]}set context(n){this._lView[Di]=n}get destroyed(){return 128==(128&this._lView[$t])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Jn];if(ir(n)){const e=n[xs],i=e?e.indexOf(this):-1;i>-1&&(Im(n,i),up(e,i))}this._attachedToViewContainer=!1}Dp(this._lView[_t],this._lView)}onDestroy(n){iD(this._lView[_t],this._lView,null,n)}markForCheck(){Gy(this._cdRefInjectingView||this._lView)}detach(){this._lView[$t]&=-65}reattach(){this._lView[$t]|=64}detectChanges(){S_(this._lView[_t],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Em(t,n){cl(t,n,n[on],2,null,null)}(this._lView[_t],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Ye(902,!1);this._appRef=n}}class CR extends qm{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;S_(n[_t],n,n[Di],!1)}checkNoChanges(){}get context(){return null}}class fD extends Rp{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=Hn(n);return new Zm(e,this.ngModule)}}function mD(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}class ER{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,i){i=bc(i);const o=this.injector.get(n,Ty,i);return o!==Ty||e===Ty?o:this.parentInjector.get(n,e,i)}}class Zm extends OC{get inputs(){return mD(this.componentDef.inputs)}get outputs(){return mD(this.componentDef.outputs)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function AP(t){return t.map(kP).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,i,o){let s=(o=o||this.ngModule)instanceof Ds?o:o?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const d=s?new ER(n,s):n,f=d.get($m,null);if(null===f)throw new Ye(407,!1);const _=d.get(hP,null),C=f.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",P=i?function tR(t,n,e){return t.selectRootElement(n,e===vr.ShadowDom)}(C,i,this.componentDef.encapsulation):Dm(C,T,function DR(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(T)),z=this.componentDef.onPush?288:272,G=Vy(0,null,null,1,0,null,null,null,null,null),ae=C_(null,G,null,z,null,null,f,C,_,d,null);let be,Ce;Cn(ae);try{const Te=this.componentDef;let $e,Pe=null;Te.findHostDirectiveDefs?($e=[],Pe=new Map,Te.findHostDirectiveDefs(Te,$e,Pe),$e.push(Te)):$e=[Te];const at=function TR(t,n){const e=t[_t],i=fn;return t[i]=n,zp(e,i,2,"#host",null)}(ae,P),Mt=function IR(t,n,e,i,o,s,d,f){const _=o[_t];!function MR(t,n,e,i){for(const o of t)n.mergedAttrs=Td(n.mergedAttrs,o.hostAttrs);null!==n.mergedAttrs&&(T_(n,n.mergedAttrs,!0),null!==e&&g_(i,e,n))}(i,t,n,d);const C=s.createRenderer(n,e),T=C_(o,nD(e),null,e.onPush?32:16,o[t.index],t,s,C,f||null,null,null);return _.firstCreatePass&&Hy(_,t,i.length-1),E_(o,T),o[t.index]=T}(at,P,Te,$e,ae,f,C);Ce=wd(G,fn),P&&function AR(t,n,e,i){if(i)Jf(t,e,["ng-version",pP.full]);else{const{attrs:o,classes:s}=function OP(t){const n=[],e=[];let i=1,o=2;for(;i<t.length;){let s=t[i];if("string"==typeof s)2===o?""!==s&&n.push(s,t[++i]):8===o&&e.push(s);else{if(!ul(o))break;o=s}i++}return{attrs:n,classes:e}}(n.selectors[0]);o&&Jf(t,e,o),s&&s.length>0&&Lm(t,e,s.join(" "))}}(C,Te,P,i),void 0!==e&&function OR(t,n,e){const i=t.projection=[];for(let o=0;o<n.length;o++){const s=e[o];i.push(null!=s?Array.from(s):null)}}(Ce,this.ngContentSelectors,e),be=function kR(t,n,e,i,o,s){const d=M(),f=o[_t],_=Bo(d,o);aD(f,o,d,e,null,i);for(let T=0;T<e.length;T++)zo(Ec(o,f,d.directiveStart+T,d),o);lD(f,o,d),_&&zo(_,o);const C=Ec(o,f,d.directiveStart+d.componentOffset,d);if(t[Di]=o[Di]=C,null!==s)for(const T of s)T(C,n);return Ly(f,d,t),C}(Mt,Te,$e,Pe,ae,[PR]),Fy(G,ae,null)}finally{Dn()}return new SR(this.componentType,be,Np(Ce,ae),ae,Ce)}}class SR extends sP{constructor(n,e,i,o,s){super(),this.location=i,this._rootLView=o,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new CR(o),this.componentType=n}setInput(n,e){const i=this._tNode.inputs;let o;if(null!==i&&(o=i[n])){const s=this._rootLView;qy(s[_t],s,o,n,e),sD(s,this._tNode.index)}}get injector(){return new ol(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function PR(){const t=M();ro(m()[_t],t)}function si(t){let n=function gD(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const i=[t];for(;n;){let o;if(or(t))o=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Ye(903,!1);o=n.\u0275dir}if(o){if(e){i.push(o);const d=t;d.inputs=Zy(t.inputs),d.declaredInputs=Zy(t.declaredInputs),d.outputs=Zy(t.outputs);const f=o.hostBindings;f&&LR(t,f);const _=o.viewQuery,C=o.contentQueries;if(_&&NR(t,_),C&&FR(t,C),ai(t.inputs,o.inputs),ai(t.declaredInputs,o.declaredInputs),ai(t.outputs,o.outputs),or(o)&&o.data.animation){const T=t.data;T.animation=(T.animation||[]).concat(o.data.animation)}}const s=o.features;if(s)for(let d=0;d<s.length;d++){const f=s[d];f&&f.ngInherit&&f(t),f===si&&(e=!1)}}n=Object.getPrototypeOf(n)}!function RR(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){const o=t[i];o.hostVars=n+=o.hostVars,o.hostAttrs=Td(o.hostAttrs,e=Td(e,o.hostAttrs))}}(i)}function Zy(t){return t===zt?{}:t===In?[]:t}function NR(t,n){const e=t.viewQuery;t.viewQuery=e?(i,o)=>{n(i,o),e(i,o)}:n}function FR(t,n){const e=t.contentQueries;t.contentQueries=e?(i,o,s)=>{n(i,o,s),e(i,o,s)}:n}function LR(t,n){const e=t.hostBindings;t.hostBindings=e?(i,o)=>{n(i,o),e(i,o)}:n}function Km(t){return n=>{n.findHostDirectiveDefs=bD,n.hostDirectives=(Array.isArray(t)?t:t()).map(e=>"function"==typeof e?{directive:It(e),inputs:zt,outputs:zt}:{directive:It(e.directive),inputs:_D(e.inputs),outputs:_D(e.outputs)})}}function bD(t,n,e){if(null!==t.hostDirectives)for(const i of t.hostDirectives){const o=hi(i.directive);UR(o.declaredInputs,i.inputs),bD(o,n,e),e.set(o,i),n.push(o)}}function _D(t){if(void 0===t||0===t.length)return zt;const n={};for(let e=0;e<t.length;e+=2)n[t[e]]=t[e+1];return n}function UR(t,n){for(const e in n)n.hasOwnProperty(e)&&(t[n[e]]=t[e])}function M_(t){return!!Ky(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Ky(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function nc(t,n,e){return t[n]=e}function Ym(t,n){return t[n]}function Kr(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function bh(t,n,e,i){const o=Kr(t,n,e);return Kr(t,n+1,i)||o}function Ia(t,n,e,i,o,s){const d=bh(t,n,e,i);return bh(t,n+2,o,s)||d}function an(t,n,e,i){const o=m();return Kr(o,ve(),n)&&(x(),function tc(t,n,e,i,o,s){const d=Bo(t,n);jy(n[on],d,s,t.value,e,i,o)}(bn(),o,t,n,e,i)),an}function Up(t,n,e,i){return Kr(t,ve(),e)?n+jt(e)+i:sn}function Hp(t,n,e,i,o,s){const f=bh(t,he(),e,o);return xe(2),f?n+jt(e)+i+jt(o)+s:sn}function Ee(t,n,e,i,o,s,d,f){const _=m(),C=x(),T=t+fn,P=C.firstCreatePass?function WR(t,n,e,i,o,s,d,f,_){const C=n.consts,T=zp(n,t,4,d||null,js(C,f));Uy(n,e,T,js(C,_)),ro(n,T);const P=T.tView=Vy(2,T,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,C);return null!==n.queries&&(n.queries.template(n,T),P.queries=n.queries.embeddedTView(T)),T}(T,C,_,n,e,i,o,s,d):C.data[T];N(P,!1);const z=_[on].createComment("");Ld(C,_,z,P),zo(z,_),E_(_,_[T]=cD(z,_,z,P)),Ja(P)&&By(C,_,P),null!=d&&zy(_,P,f)}function Vi(t){return Hs(function ee(){return Xt.lFrame.contextLView}(),fn+t)}function me(t,n,e){const i=m();return Kr(i,ve(),n)&&qs(x(),bn(),i,t,n,i[on],e,!1),me}function Yy(t,n,e,i,o){const d=o?"class":"style";qy(t,e,n.inputs[d],d,i)}function W(t,n,e,i){const o=m(),s=x(),d=fn+t,f=o[on],_=s.firstCreatePass?function ZR(t,n,e,i,o,s){const d=n.consts,_=zp(n,t,2,i,js(d,o));return Uy(n,e,_,js(d,s)),null!==_.attrs&&T_(_,_.attrs,!1),null!==_.mergedAttrs&&T_(_,_.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,_),_}(d,s,o,n,e,i):s.data[d],C=o[d]=Dm(f,n,function fi(){return Xt.lFrame.currentNamespace}()),T=Ja(_);return N(_,!0),g_(f,C,_),32!=(32&_.flags)&&Ld(s,o,C,_),0===function Qf(){return Xt.lFrame.elementDepthCount}()&&zo(C,o),function _a(){Xt.lFrame.elementDepthCount++}(),T&&(By(s,o,_),Ly(s,_,o)),null!==i&&zy(o,_),W}function Y(){let t=M();U()?X():(t=t.parent,N(t,!1));const n=t;!function g(){Xt.lFrame.elementDepthCount--}();const e=x();return e.firstCreatePass&&(ro(e,t),_c(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function xa(t){return 0!=(8&t.flags)}(n)&&Yy(e,n,m(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function Xf(t){return 0!=(16&t.flags)}(n)&&Yy(e,n,m(),n.stylesWithoutHost,!1),Y}function lt(t,n,e,i){return W(t,n,e,i),Y(),lt}function Zs(t,n,e){const i=m(),o=x(),s=t+fn,d=o.firstCreatePass?function KR(t,n,e,i,o){const s=n.consts,d=js(s,i),f=zp(n,t,8,"ng-container",d);return null!==d&&T_(f,d,!0),Uy(n,e,f,js(s,o)),null!==n.queries&&n.queries.elementStart(n,f),f}(s,o,i,n,e):o.data[s];N(d,!0);const f=i[s]=i[on].createComment("");return Ld(o,i,f,d),zo(f,i),Ja(d)&&(By(o,i,d),Ly(o,d,i)),null!=e&&zy(i,d),Zs}function Ks(){let t=M();const n=x();return U()?X():(t=t.parent,N(t,!1)),n.firstCreatePass&&(ro(n,t),_c(t)&&n.queries.elementEnd(t)),Ks}function A_(t,n,e){return Zs(t,n,e),Ks(),A_}function Xn(){return m()}function Qm(t){return!!t&&"function"==typeof t.then}const Qy=function MD(t){return!!t&&"function"==typeof t.subscribe};function Xe(t,n,e,i){const o=m(),s=x(),d=M();return function AD(t,n,e,i,o,s,d){const f=Ja(i),C=t.firstCreatePass&&uD(t),T=n[Di],P=dD(n);let z=!0;if(3&i.type||d){const be=Bo(i,n),Ce=d?d(be):be,Te=P.length,$e=d?at=>d(Fi(at[i.index])):i.index;let Pe=null;if(!d&&f&&(Pe=function YR(t,n,e,i){const o=t.cleanup;if(null!=o)for(let s=0;s<o.length-1;s+=2){const d=o[s];if(d===e&&o[s+1]===i){const f=n[Lr],_=o[s+2];return f.length>_?f[_]:null}"string"==typeof d&&(s+=2)}return null}(t,n,o,i.index)),null!==Pe)(Pe.__ngLastListenerFn__||Pe).__ngNextListenerFn__=s,Pe.__ngLastListenerFn__=s,z=!1;else{s=PD(i,n,T,s,!1);const at=e.listen(Ce,o,s);P.push(s,at),C&&C.push(o,$e,Te,Te+1)}}else s=PD(i,n,T,s,!1);const G=i.outputs;let ae;if(z&&null!==G&&(ae=G[o])){const be=ae.length;if(be)for(let Ce=0;Ce<be;Ce+=2){const Mt=n[ae[Ce]][ae[Ce+1]].subscribe(s),Lt=P.length;P.push(s,Mt),C&&C.push(o,i.index,Lt,-(Lt+1))}}}(s,o,o[on],d,t,n,i),Xe}function OD(t,n,e,i){try{return Lo(6,n,e),!1!==e(i)}catch(o){return pD(t,o),!1}finally{Lo(7,n,e)}}function PD(t,n,e,i,o){return function s(d){if(d===Function)return i;Gy(t.componentOffset>-1?rr(t.index,n):n);let _=OD(n,e,i,d),C=s.__ngNextListenerFn__;for(;C;)_=OD(n,e,C,d)&&_,C=C.__ngNextListenerFn__;return o&&!1===_&&(d.preventDefault(),d.returnValue=!1),_}}function Fe(t=1){return function zr(t){return(Xt.lFrame.contextLView=function Vr(t,n){for(;t>0;)n=n[ys],t--;return n}(t,Xt.lFrame.contextLView))[Di]}(t)}function QR(t,n){let e=null;const i=function SP(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(!(1&e))return n[e+1]}return null}(t);for(let o=0;o<n.length;o++){const s=n[o];if("*"!==s){if(null===i?zC(t,s,!0):MP(i,s))return o}else e=o}return e}function hl(t){const n=m()[ji][Ci];if(!n.projection){const i=n.projection=Ju(t?t.length:1,null),o=i.slice();let s=n.child;for(;null!==s;){const d=t?QR(s,t):0;null!==d&&(o[d]?o[d].projectionNext=s:i[d]=s,o[d]=s),s=s.next}}}function pl(t,n=0,e){const i=m(),o=x(),s=zp(o,fn+t,16,null,e||null);null===s.projection&&(s.projection=n),X(),32!=(32&s.flags)&&function h_(t,n,e){Fm(n[on],0,n,e,a_(t,e,n),Am(e.parent||n[Ci],e,n))}(o,i,s)}function Xm(t,n,e){return O_(t,"",n,"",e),Xm}function O_(t,n,e,i,o){const s=m(),d=Up(s,n,e,i);return d!==sn&&qs(x(),bn(),s,t,d,s[on],o,!1),O_}function P_(t,n){return t<<17|n<<2}function jd(t){return t>>17&32767}function Xy(t){return 2|t}function _h(t){return(131068&t)>>2}function Jy(t,n){return-131069&t|n<<2}function e1(t){return 1|t}function HD(t,n,e,i,o){const s=t[e+1],d=null===n;let f=i?jd(s):_h(s),_=!1;for(;0!==f&&(!1===_||d);){const T=t[f+1];iN(t[f],n)&&(_=!0,t[f+1]=i?e1(T):Xy(T)),f=i?jd(T):_h(T)}_&&(t[e+1]=i?Xy(s):e1(s))}function iN(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Ca(t,n)>=0}const Ho={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jD(t){return t.substring(Ho.key,Ho.keyEnd)}function oN(t){return t.substring(Ho.value,Ho.valueEnd)}function $D(t,n){const e=Ho.textEnd;return e===n?-1:(n=Ho.keyEnd=function aN(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,Ho.key=n,e),Kp(t,n,e))}function GD(t,n){const e=Ho.textEnd;let i=Ho.key=Kp(t,n,e);return e===i?-1:(i=Ho.keyEnd=function lN(t,n,e){let i;for(;n<e&&(45===(i=t.charCodeAt(n))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)n++;return n}(t,i,e),i=qD(t,i,e),i=Ho.value=Kp(t,i,e),i=Ho.valueEnd=function cN(t,n,e){let i=-1,o=-1,s=-1,d=n,f=d;for(;d<e;){const _=t.charCodeAt(d++);if(59===_)return f;34===_||39===_?f=d=ZD(t,_,d,e):n===d-4&&85===s&&82===o&&76===i&&40===_?f=d=ZD(t,41,d,e):_>32&&(f=d),s=o,o=i,i=-33&_}return f}(t,i,e),qD(t,i,e))}function WD(t){Ho.key=0,Ho.keyEnd=0,Ho.value=0,Ho.valueEnd=0,Ho.textEnd=t.length}function Kp(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function qD(t,n,e,i){return(n=Kp(t,n,e))<e&&n++,n}function ZD(t,n,e,i){let o=-1,s=e;for(;s<i;){const d=t.charCodeAt(s++);if(d==n&&92!==o)return s;o=92==d&&92===o?0:d}throw new Error}function $d(t,n,e){return gl(t,n,e,!1),$d}function ut(t,n){return gl(t,n,null,!0),ut}function dN(t,n){for(let e=function sN(t){return WD(t),GD(t,Kp(t,0,Ho.textEnd))}(n);e>=0;e=GD(n,e))QD(t,jD(n),oN(n))}function ml(t){bl(os,ic,t,!0)}function ic(t,n){for(let e=function rN(t){return WD(t),$D(t,Kp(t,0,Ho.textEnd))}(n);e>=0;e=$D(n,e))os(t,jD(n),!0)}function gl(t,n,e,i){const o=m(),s=x(),d=xe(2);s.firstUpdatePass&&YD(s,t,d,i),n!==sn&&Kr(o,d,n)&&XD(s,s.data[Qn()],o,o[on],t,o[d+1]=function bN(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=Fn(O(t)))),t}(n,e),i,d)}function bl(t,n,e,i){const o=x(),s=xe(2);o.firstUpdatePass&&YD(o,null,s,i);const d=m();if(e!==sn&&Kr(d,s,e)){const f=o.data[Qn()];if(eE(f,i)&&!KD(o,s)){let _=i?f.classesWithoutHost:f.stylesWithoutHost;null!==_&&(e=Xc(_,e||"")),Yy(o,f,d,e,i)}else!function gN(t,n,e,i,o,s,d,f){o===sn&&(o=In);let _=0,C=0,T=0<o.length?o[0]:null,P=0<s.length?s[0]:null;for(;null!==T||null!==P;){const z=_<o.length?o[_+1]:void 0,G=C<s.length?s[C+1]:void 0;let be,ae=null;T===P?(_+=2,C+=2,z!==G&&(ae=P,be=G)):null===P||null!==T&&T<P?(_+=2,ae=T):(C+=2,ae=P,be=G),null!==ae&&XD(t,n,e,i,ae,be,d,f),T=_<o.length?o[_]:null,P=C<s.length?s[C]:null}}(o,f,d,d[on],d[s+1],d[s+1]=function mN(t,n,e){if(null==e||""===e)return In;const i=[],o=O(e);if(Array.isArray(o))for(let s=0;s<o.length;s++)t(i,o[s],!0);else if("object"==typeof o)for(const s in o)o.hasOwnProperty(s)&&t(i,s,o[s]);else"string"==typeof o&&n(i,o);return i}(t,n,e),i,s)}}function KD(t,n){return n>=t.expandoStartIndex}function YD(t,n,e,i){const o=t.data;if(null===o[e+1]){const s=o[Qn()],d=KD(t,e);eE(s,i)&&null===n&&!d&&(n=!1),n=function uN(t,n,e,i){const o=function Ke(t){const n=Xt.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let s=i?n.residualClasses:n.residualStyles;if(null===o)0===(i?n.classBindings:n.styleBindings)&&(e=Jm(e=t1(null,t,n,e,i),n.attrs,i),s=null);else{const d=n.directiveStylingLast;if(-1===d||t[d]!==o)if(e=t1(o,t,n,e,i),null===s){let _=function hN(t,n,e){const i=e?n.classBindings:n.styleBindings;if(0!==_h(i))return t[jd(i)]}(t,n,i);void 0!==_&&Array.isArray(_)&&(_=t1(null,t,n,_[1],i),_=Jm(_,n.attrs,i),function pN(t,n,e,i){t[jd(e?n.classBindings:n.styleBindings)]=i}(t,n,i,_))}else s=function fN(t,n,e){let i;const o=n.directiveEnd;for(let s=1+n.directiveStylingLast;s<o;s++)i=Jm(i,t[s].hostAttrs,e);return Jm(i,n.attrs,e)}(t,n,i)}return void 0!==s&&(i?n.residualClasses=s:n.residualStyles=s),e}(o,s,n,i),function tN(t,n,e,i,o,s){let d=s?n.classBindings:n.styleBindings,f=jd(d),_=_h(d);t[i]=e;let T,C=!1;if(Array.isArray(e)?(T=e[1],(null===T||Ca(e,T)>0)&&(C=!0)):T=e,o)if(0!==_){const z=jd(t[f+1]);t[i+1]=P_(z,f),0!==z&&(t[z+1]=Jy(t[z+1],i)),t[f+1]=function JR(t,n){return 131071&t|n<<17}(t[f+1],i)}else t[i+1]=P_(f,0),0!==f&&(t[f+1]=Jy(t[f+1],i)),f=i;else t[i+1]=P_(_,0),0===f?f=i:t[_+1]=Jy(t[_+1],i),_=i;C&&(t[i+1]=Xy(t[i+1])),HD(t,T,i,!0),HD(t,T,i,!1),function nN(t,n,e,i,o){const s=o?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof n&&Ca(s,n)>=0&&(e[i+1]=e1(e[i+1]))}(n,T,t,i,s),d=P_(f,_),s?n.classBindings=d:n.styleBindings=d}(o,s,n,e,d,i)}}function t1(t,n,e,i,o){let s=null;const d=e.directiveEnd;let f=e.directiveStylingLast;for(-1===f?f=e.directiveStart:f++;f<d&&(s=n[f],i=Jm(i,s.hostAttrs,o),s!==t);)f++;return null!==t&&(e.directiveStylingLast=f),i}function Jm(t,n,e){const i=e?1:2;let o=-1;if(null!==n)for(let s=0;s<n.length;s++){const d=n[s];"number"==typeof d?o=d:o===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),os(t,d,!!e||n[++s]))}return void 0===t?null:t}function QD(t,n,e){os(t,n,O(e))}function XD(t,n,e,i,o,s,d,f){if(!(3&n.type))return;const _=t.data,C=_[f+1],T=function eN(t){return 1==(1&t)}(C)?JD(_,n,e,o,_h(C),d):void 0;R_(T)||(R_(s)||function XR(t){return 2==(2&t)}(C)&&(s=JD(_,null,e,o,f,d)),function f_(t,n,e,i,o){if(n)o?t.addClass(e,i):t.removeClass(e,i);else{let s=-1===i.indexOf("-")?void 0:$r.DashCase;null==o?t.removeStyle(e,i,s):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),s|=$r.Important),t.setStyle(e,i,o,s))}}(i,d,Cc(Qn(),e),o,s))}function JD(t,n,e,i,o,s){const d=null===n;let f;for(;o>0;){const _=t[o],C=Array.isArray(_),T=C?_[1]:_,P=null===T;let z=e[o+1];z===sn&&(z=P?In:void 0);let G=P?dm(z,i):T===i?z:void 0;if(C&&!R_(G)&&(G=dm(_,i)),R_(G)&&(f=G,d))return f;const ae=t[o+1];o=d?jd(ae):_h(ae)}if(null!==n){let _=s?n.residualClasses:n.residualStyles;null!=_&&(f=dm(_,i))}return f}function R_(t){return void 0!==t}function eE(t,n){return 0!=(t.flags&(n?8:16))}function ge(t,n=""){const e=m(),i=x(),o=t+fn,s=i.firstCreatePass?zp(i,o,1,n,null):i.data[o],d=e[o]=wp(e[on],n);Ld(i,e,d,s),N(s,!1)}function nn(t){return Rn("",t,""),nn}function Rn(t,n,e){const i=m(),o=Up(i,t,n,e);return o!==sn&&Lc(i,Qn(),o),Rn}function N_(t,n,e,i,o){const s=m(),d=Hp(s,t,n,e,i,o);return d!==sn&&Lc(s,Qn(),d),N_}function oc(t,n,e){bl(os,ic,Up(m(),t,n,e),!0)}function Ss(t,n,e){const i=m();return Kr(i,ve(),n)&&qs(x(),bn(),i,t,n,i[on],e,!0),Ss}const vh=void 0;var NN=["en",[["a","p"],["AM","PM"],vh],[["AM","PM"],vh,vh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vh,"{1} 'at' {0}",vh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function RN(t){const e=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let Yp={};function ls(t){const n=function FN(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=yE(n);if(e)return e;const i=n.split("-")[0];if(e=yE(i),e)return e;if("en"===i)return NN;throw new Ye(701,!1)}function yE(t){return t in Yp||(Yp[t]=li.ng&&li.ng.common&&li.ng.common.locales&&li.ng.common.locales[t]),Yp[t]}var xt=(()=>((xt=xt||{})[xt.LocaleId=0]="LocaleId",xt[xt.DayPeriodsFormat=1]="DayPeriodsFormat",xt[xt.DayPeriodsStandalone=2]="DayPeriodsStandalone",xt[xt.DaysFormat=3]="DaysFormat",xt[xt.DaysStandalone=4]="DaysStandalone",xt[xt.MonthsFormat=5]="MonthsFormat",xt[xt.MonthsStandalone=6]="MonthsStandalone",xt[xt.Eras=7]="Eras",xt[xt.FirstDayOfWeek=8]="FirstDayOfWeek",xt[xt.WeekendRange=9]="WeekendRange",xt[xt.DateFormat=10]="DateFormat",xt[xt.TimeFormat=11]="TimeFormat",xt[xt.DateTimeFormat=12]="DateTimeFormat",xt[xt.NumberSymbols=13]="NumberSymbols",xt[xt.NumberFormats=14]="NumberFormats",xt[xt.CurrencyCode=15]="CurrencyCode",xt[xt.CurrencySymbol=16]="CurrencySymbol",xt[xt.CurrencyName=17]="CurrencyName",xt[xt.Currencies=18]="Currencies",xt[xt.Directionality=19]="Directionality",xt[xt.PluralCase=20]="PluralCase",xt[xt.ExtraData=21]="ExtraData",xt))();const LN=["zero","one","two","few","many"],Qp="en-US",F_={marker:"element"},L_={marker:"ICU"};var co=(()=>((co=co||{})[co.SHIFT=2]="SHIFT",co[co.APPEND_EAGERLY=1]="APPEND_EAGERLY",co[co.COMMENT=2]="COMMENT",co))();let xE=Qp;function wE(t){(function no(t,n){null==t&&Zn(n,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(xE=t.toLowerCase().replace(/_/g,"-"))}function CE(t,n,e){const i=n.insertBeforeIndex,o=Array.isArray(i)?i[0]:i;return null===o?Om(t,0,e):Fi(e[o])}function DE(t,n,e,i,o){const s=n.insertBeforeIndex;if(Array.isArray(s)){let d=i,f=null;if(3&n.type||(f=d,d=o),null!==d&&-1===n.componentOffset)for(let _=1;_<s.length;_++)Oc(t,d,e[s[_]],f,!1)}}function EE(t,n){if(t.push(n),t.length>1)for(let e=t.length-2;e>=0;e--){const i=t[e];SE(i)||UN(i,n)&&null===HN(i)&&jN(i,n.index)}}function SE(t){return!(64&t.type)}function UN(t,n){return SE(n)||t.index>n.index}function HN(t){const n=t.insertBeforeIndex;return Array.isArray(n)?n[0]:n}function jN(t,n){const e=t.insertBeforeIndex;Array.isArray(e)?e[0]=n:(Rm(CE,DE),t.insertBeforeIndex=n)}function eg(t,n){const e=t.data[n];return null===e||"string"==typeof e?null:e.hasOwnProperty("currentCaseLViewIndex")?e:e.value}function WN(t,n,e){const i=Ny(t,e,64,null,null);return EE(n,i),i}function B_(t,n){const e=n[t.currentCaseLViewIndex];return null===e?e:e<0?~e:e}function TE(t){return t>>>17}function IE(t){return(131070&t)>>>1}let tg=0,ng=0;function kE(t,n,e,i){const o=e[on];let d,s=null;for(let f=0;f<n.length;f++){const _=n[f];if("string"==typeof _){const C=n[++f];null===e[C]&&(e[C]=wp(o,_))}else if("number"==typeof _)switch(1&_){case 0:const C=TE(_);let T,P;if(null===s&&(s=C,d=ll(o,i)),C===s?(T=i,P=d):(T=null,P=Fi(e[C])),null!==P){const be=IE(_);Oc(o,P,e[be],T,!1);const Te=eg(t,be);if(null!==Te&&"object"==typeof Te){const $e=B_(Te,e);null!==$e&&kE(t,Te.create[$e],e,e[Te.anchorIdx])}}break;case 1:const G=n[++f],ae=n[++f];jy(o,Cc(_>>>1,e),null,null,G,ae,null)}else switch(_){case L_:const C=n[++f],T=n[++f];null===e[T]&&zo(e[T]=yy(o,C),e);break;case F_:const P=n[++f],z=n[++f];null===e[z]&&zo(e[z]=Dm(o,P,null),e)}}}function AE(t,n,e,i,o){for(let s=0;s<e.length;s++){const d=e[s],f=e[++s];if(d&o){let _="";for(let C=s+1;C<=s+f;C++){const T=e[C];if("string"==typeof T)_+=T;else if("number"==typeof T)if(T<0)_+=jt(n[i-T]);else{const P=T>>>2;switch(3&T){case 1:const z=e[++C],G=e[++C],ae=t.data[P];"string"==typeof ae?jy(n[on],n[P],null,ae,z,_,G):qs(t,ae,n,z,_,n[on],G,!1);break;case 0:const be=n[P];null!==be&&Cm(n[on],be,_);break;case 2:QN(t,eg(t,P),n,_);break;case 3:OE(t,eg(t,P),i,n)}}}}else{const _=e[s+1];if(_>0&&3==(3&_)){const T=eg(t,_>>>2);n[T.currentCaseLViewIndex]<0&&OE(t,T,i,n)}}s+=f}}function OE(t,n,e,i){let o=i[n.currentCaseLViewIndex];if(null!==o){let s=tg;o<0&&(o=i[n.currentCaseLViewIndex]=~o,s=-1),AE(t,i,n.update[o],e,s)}}function QN(t,n,e,i){const o=function XN(t,n){let e=t.cases.indexOf(n);if(-1===e)switch(t.type){case 1:{const i=function BN(t,n){const e=function vE(t){return ls(t)[xt.PluralCase]}(n)(parseInt(t,10)),i=LN[e];return void 0!==i?i:"other"}(n,function VN(){return xE}());e=t.cases.indexOf(i),-1===e&&"other"!==i&&(e=t.cases.indexOf("other"));break}case 0:e=t.cases.indexOf("other")}return-1===e?null:e}(n,i);if(B_(n,e)!==o&&(PE(t,n,e),e[n.currentCaseLViewIndex]=null===o?null:~o,null!==o)){const d=e[n.anchorIdx];d&&kE(t,n.create[o],e,d)}}function PE(t,n,e){let i=B_(n,e);if(null!==i){const o=n.remove[i];for(let s=0;s<o.length;s++){const d=o[s];if(d>0){const f=Cc(d,e);null!==f&&Ip(e[on],f)}else PE(t,eg(t,~d),e)}}}function JN(){const t=[];let e,i,n=-1;function s(f,_){n=0;const C=B_(f,_);i=null!==C?f.remove[C]:In}function d(){if(n<i.length){const f=i[n++];return f>0?e[f]:(t.push(n,i),s(e[_t].data[~f],e),d())}return 0===t.length?null:(i=t.pop(),n=t.pop(),d())}return function o(f,_){for(e=_;t.length;)t.pop();return s(f.value,_),d}}const z_=/\ufffd(\d+):?\d*\ufffd/gi,tF=/\ufffd(\d+)\ufffd/,NE=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,ig="\ufffd",nF=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,iF=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,oF=/\uE500/g;function FE(t,n,e,i,o,s,d){const f=Wm(t,i,1,null);let _=f<<co.SHIFT,C=F();n===C&&(C=null),null===C&&(_|=co.APPEND_EAGERLY),d&&(_|=co.COMMENT,function vy(t){void 0===ym&&(ym=t())}(JN)),o.push(_,null===s?"":s);const T=Ny(t,f,d?32:1,null===s?"":s,null);EE(e,T);const P=T.index;return N(T,!1),null!==C&&n!==C&&function GN(t,n){let e=t.insertBeforeIndex;null===e?(Rm(CE,DE),e=t.insertBeforeIndex=[null,n]):(function Fr(t,n,e){t!=n&&Zn(e,t,n,"==")}(Array.isArray(e),!0,"Expecting array here"),e.push(n))}(C,P),T}function aF(t,n,e,i,o,s,d){const f=d.match(z_),_=FE(t,n,e,s,i,f?null:d,!1);f&&og(o,d,_.index,null,0,null)}function og(t,n,e,i,o,s){const d=t.length,f=d+1;t.push(null,null);const _=d+2,C=n.split(z_);let T=0;for(let P=0;P<C.length;P++){const z=C[P];if(1&P){const G=o+parseInt(z,10);t.push(-1-G),T|=LE(G)}else""!==z&&t.push(z)}return t.push(e<<2|(i?1:0)),i&&t.push(i,s),t[d]=T,t[f]=t.length-_,T}function LE(t){return 1<<Math.min(t,31)}function BE(t){let n,s,e="",i=0,o=!1;for(;null!==(n=nF.exec(t));)o?n[0]===`${ig}/*${s}${ig}`&&(i=n.index,o=!1):(e+=t.substring(i,n.index+n[0].length),s=n[1],o=!0);return e+=t.slice(i),e}function zE(t,n,e,i,o,s){let d=0;const f={type:o.type,currentCaseLViewIndex:Wm(t,n,1,null),anchorIdx:s,cases:[],create:[],remove:[],update:[]};(function mF(t,n,e){t.push(LE(n.mainBinding),2,-1-n.mainBinding,e<<2|2)})(e,o,s),function $N(t,n,e){const i=t.data[n];null===i?t.data[n]=e:i.value=e}(t,s,f);const _=o.values;for(let C=0;C<_.length;C++){const T=_[C],P=[];for(let z=0;z<T.length;z++){const G=T[z];if("string"!=typeof G){const ae=P.push(G)-1;T[z]=`\x3c!--\ufffd${ae}\ufffd--\x3e`}}d=pF(t,f,n,e,i,o.cases[C],T.join(""),P)|d}d&&function gF(t,n,e){t.push(n,1,e<<2|3)}(e,d,s)}function hF(t){const n=[],e=[];let i=1,o=0;const s=n1(t=t.replace(NE,function(d,f,_){return i="select"===_?0:1,o=parseInt(f.slice(1),10),""}));for(let d=0;d<s.length;){let f=s[d++].trim();1===i&&(f=f.replace(/\s*(?:=)?(\w+)\s*/,"$1")),f.length&&n.push(f);const _=n1(s[d++]);n.length>e.length&&e.push(_)}return{type:i,mainBinding:o,cases:n,values:e}}function n1(t){if(!t)return[];let n=0;const e=[],i=[],o=/[{}]/g;let s;for(o.lastIndex=0;s=o.exec(t);){const f=s.index;if("}"==s[0]){if(e.pop(),0==e.length){const _=t.substring(n,f);NE.test(_)?i.push(hF(_)):i.push(_),n=f+1}}else{if(0==e.length){const _=t.substring(n,f);i.push(_),n=f+1}e.push("{")}}const d=t.substring(n);return i.push(d),i}function pF(t,n,e,i,o,s,d,f){const _=[],C=[],T=[];n.cases.push(s),n.create.push(_),n.remove.push(C),n.update.push(T);const z=_e(zd()).getInertBodyElement(d),G=Uo(z)||z;return G?VE(t,n,e,i,_,C,T,G,o,f,0):0}function VE(t,n,e,i,o,s,d,f,_,C,T){let P=0,z=f.firstChild;for(;z;){const G=Wm(t,e,1,null);switch(z.nodeType){case Node.ELEMENT_NODE:const ae=z,be=ae.tagName.toLowerCase();if(Dt.hasOwnProperty(be)){o1(o,F_,be,_,G),t.data[G]=be;const Pe=ae.attributes;for(let at=0;at<Pe.length;at++){const Mt=Pe.item(at),Lt=Mt.name.toLowerCase();Mt.value.match(z_)?ci.hasOwnProperty(Lt)&&og(d,Mt.value,G,Mt.name,0,yt[Lt]?Be:null):bF(o,G,Mt)}P=VE(t,n,e,i,o,s,d,z,G,C,T+1)|P,UE(s,G,T)}break;case Node.TEXT_NODE:const Ce=z.textContent||"",Te=Ce.match(z_);o1(o,null,Te?"":Ce,_,G),UE(s,G,T),Te&&(P=og(d,Ce,G,null,0,null)|P);break;case Node.COMMENT_NODE:const $e=tF.exec(z.textContent||"");if($e){const at=C[parseInt($e[1],10)];o1(o,L_,"",_,G),zE(t,e,i,_,at,G),fF(s,G,T)}}z=z.nextSibling}return P}function UE(t,n,e){0===e&&t.push(n)}function fF(t,n,e){0===e&&(t.push(~n),t.push(n))}function o1(t,n,e,i,o){null!==n&&t.push(n),t.push(e,o,function qN(t,n,e){return t|n<<17|e<<1}(0,i,o))}function bF(t,n,e){t.push(n<<1|1,e.name,e.value)}function jE(t,n,e=-1){const i=x(),o=m(),s=fn+t,d=js(i.consts,n),f=F();i.firstCreatePass&&function sF(t,n,e,i,o,s){const d=F(),f=[],_=[],C=[[]];o=function uF(t,n){if(function dF(t){return-1===t}(n))return BE(t);{const e=t.indexOf(`:${n}${ig}`)+2+n.toString().length,i=t.search(new RegExp(`${ig}\\/\\*\\d+:${n}${ig}`));return BE(t.substring(e,i))}}(o,s);const T=function rF(t){return t.replace(oF," ")}(o).split(iF);for(let P=0;P<T.length;P++){let z=T[P];if(1&P){const G=47===z.charCodeAt(0),be=(z.charCodeAt(G?1:0),fn+Number.parseInt(z.substring(G?2:1)));if(G)C.shift(),N(F(),!1);else{const Ce=WN(t,C[0],be);C.unshift([]),N(Ce,!0)}}else{const G=n1(z);for(let ae=0;ae<G.length;ae++){let be=G[ae];if(1&ae){const Ce=be;if("object"!=typeof Ce)throw new Error(`Unable to parse ICU expression in "${o}" message.`);zE(t,e,_,n,Ce,FE(t,d,C[0],e,f,"",!0).index)}else""!==be&&aF(t,d,C[0],f,_,e,be)}}}t.data[i]={create:f,update:_}}(i,null===f?0:f.index,o,s,d,e);const _=i.data[s],T=l_(i,f===o[Ci]?null:f,o);(function YN(t,n,e,i){const o=t[on];for(let s=0;s<n.length;s++){const d=n[s++],f=n[s],C=(d&co.APPEND_EAGERLY)===co.APPEND_EAGERLY,T=d>>>co.SHIFT;let P=t[T];null===P&&(P=t[T]=(d&co.COMMENT)===co.COMMENT?o.createComment(f):wp(o,f)),C&&null!==e&&Oc(o,e,P,i,!1)}})(o,_.create,T,f&&8&f.type?o[f.index]:null),Ne(!0)}function Tr(t,n,e){jE(t,n,e),function $E(){Ne(!1)}()}function Xp(t){return function ZN(t){t&&(tg|=1<<Math.min(ng,31)),ng++}(Kr(m(),ve(),t)),Xp}function rg(t){!function KN(t,n,e){if(ng>0){const i=t.data[e];AE(t,n,Array.isArray(i)?i:i.update,he()-ng-1,tg)}tg=0,ng=0}(x(),m(),t+fn)}function r1(t,n,e,i,o){if(t=It(t),Array.isArray(t))for(let s=0;s<t.length;s++)r1(t[s],n,e,i,o);else{const s=x(),d=m();let f=Rc(t)?t:It(t.provide),_=Ws(t);const C=M(),T=1048575&C.providerIndexes,P=C.directiveStart,z=C.providerIndexes>>20;if(Rc(t)||!t.multi){const G=new ya(_,o,J),ae=a1(f,n,o?T:T+z,P);-1===ae?(im(wa(C,d),s,f),s1(s,t,n.length),n.push(f),C.directiveStart++,C.directiveEnd++,o&&(C.providerIndexes+=1048576),e.push(G),d.push(G)):(e[ae]=G,d[ae]=G)}else{const G=a1(f,n,T+z,P),ae=a1(f,n,T,T+z),Ce=ae>=0&&e[ae];if(o&&!Ce||!o&&!(G>=0&&e[G])){im(wa(C,d),s,f);const Te=function AF(t,n,e,i,o){const s=new ya(t,e,J);return s.multi=[],s.index=n,s.componentProviders=0,GE(s,o,i&&!e),s}(o?kF:MF,e.length,o,i,_);!o&&Ce&&(e[ae].providerFactory=Te),s1(s,t,n.length,0),n.push(f),C.directiveStart++,C.directiveEnd++,o&&(C.providerIndexes+=1048576),e.push(Te),d.push(Te)}else s1(s,t,G>-1?G:ae,GE(e[o?ae:G],_,!o&&i));!o&&i&&Ce&&e[ae].componentProviders++}}}function s1(t,n,e,i){const o=Rc(n),s=function Dy(t){return!!t.useClass}(n);if(o||s){const _=(s?It(n.useClass):n).prototype.ngOnDestroy;if(_){const C=t.destroyHooks||(t.destroyHooks=[]);if(!o&&n.multi){const T=C.indexOf(e);-1===T?C.push(e,[i,_]):C[T+1].push(i,_)}else C.push(e,_)}}}function GE(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function a1(t,n,e,i){for(let o=e;o<i;o++)if(n[o]===t)return o;return-1}function MF(t,n,e,i){return l1(this.multi,[])}function kF(t,n,e,i){const o=this.multi;let s;if(this.providerFactory){const d=this.providerFactory.componentProviders,f=Ec(e,e[_t],this.providerFactory.index,i);s=f.slice(0,d),l1(o,s);for(let _=d;_<f.length;_++)s.push(f[_])}else s=[],l1(o,s);return s}function l1(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function jn(t,n=[]){return e=>{e.providersResolver=(i,o)=>function IF(t,n,e){const i=x();if(i.firstCreatePass){const o=or(t);r1(e,i.data,i.blueprint,o,!0),r1(n,i.data,i.blueprint,o,!1)}}(i,o?o(t):t,n)}}class Jp{}class WE{}class qE extends Jp{constructor(n,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fD(this);const i=Ii(n);this._bootstrapComponents=Fc(i.bootstrap),this._r3Injector=WC(n,e,[{provide:Jp,useValue:this},{provide:Rp,useValue:this.componentFactoryResolver}],Fn(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class c1 extends WE{constructor(n){super(),this.moduleType=n}create(n){return new qE(this.moduleType,n)}}class PF extends Jp{constructor(n,e,i){super(),this.componentFactoryResolver=new fD(this),this.instance=null;const o=new Es([...n,{provide:Jp,useValue:this},{provide:Rp,useValue:this.componentFactoryResolver}],e||Pp(),i,new Set(["environment"]));this.injector=o,o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function V_(t,n,e=null){return new PF(t,n,e).injector}let RF=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const i=Ud(0,e.type),o=i.length>0?V_([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,o)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=Ue({token:t,providedIn:"environment",factory:()=>new t(Le(Ds))}),t})();function Mo(t){t.getStandaloneInjector=n=>n.get(RF).getOrCreateStandaloneInjector(t)}function Ts(t,n,e,i){return nS(m(),ue(),t,n,e,i)}function Gd(t,n,e,i,o){return iS(m(),ue(),t,n,e,i,o)}function ef(t,n,e,i,o,s){return function oS(t,n,e,i,o,s,d,f){const _=n+e;return function k_(t,n,e,i,o){const s=bh(t,n,e,i);return Kr(t,n+2,o)||s}(t,_,o,s,d)?nc(t,_+3,f?i.call(f,o,s,d):i(o,s,d)):sg(t,_+3)}(m(),ue(),t,n,e,i,o,s)}function U_(t,n,e,i,o,s,d){return function rS(t,n,e,i,o,s,d,f,_){const C=n+e;return Ia(t,C,o,s,d,f)?nc(t,C+4,_?i.call(_,o,s,d,f):i(o,s,d,f)):sg(t,C+4)}(m(),ue(),t,n,e,i,o,s,d)}function sg(t,n){const e=t[n];return e===sn?void 0:e}function nS(t,n,e,i,o,s){const d=n+e;return Kr(t,d,o)?nc(t,d+1,s?i.call(s,o):i(o)):sg(t,d+1)}function iS(t,n,e,i,o,s,d){const f=n+e;return bh(t,f,o,s)?nc(t,f+2,d?i.call(d,o,s):i(o,s)):sg(t,f+2)}function dr(t,n){const e=x();let i;const o=t+fn;e.firstCreatePass?(i=function qF(t,n){if(n)for(let e=n.length-1;e>=0;e--){const i=n[e];if(t===i.name)return i}}(n,e.pipeRegistry),e.data[o]=i,i.onDestroy&&(e.destroyHooks??(e.destroyHooks=[])).push(o,i.onDestroy)):i=e.data[o];const s=i.factory||(i.factory=Us(i.type)),d=tn(J);try{const f=qu(!1),_=s();return qu(f),function qR(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}(e,m(),o,_),_}finally{tn(d)}}function Ir(t,n,e,i){const o=t+fn,s=m(),d=Hs(s,o);return ag(s,o)?iS(s,ue(),n,d.transform,e,i,d):d.transform(e,i)}function ag(t,n){return t[_t].data[n].pure}function u1(t){return n=>{setTimeout(t,void 0,n)}}const Me=class QF extends Ht{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,i){let o=n,s=e||(()=>null),d=i;if(n&&"object"==typeof n){const _=n;o=_.next?.bind(_),s=_.error?.bind(_),d=_.complete?.bind(_)}this.__isAsync&&(s=u1(s),o&&(o=u1(o)),d&&(d=u1(d)));const f=super.subscribe({next:o,error:s,complete:d});return n instanceof di&&n.add(f),f}};function XF(){return this._results[Symbol.iterator]()}class h1{get changes(){return this._changes||(this._changes=new Me)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=h1.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=XF)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const i=this;i.dirty=!1;const o=function is(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Bb(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let o=t[i],s=n[i];if(e&&(o=e(o),s=e(s)),s!==o)return!1}return!0}(i._results,o,e))&&(i._results=o,i.length=o.length,i.last=o[this.length-1],i.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Zt=(()=>{class t{}return t.__NG_ELEMENT_ID__=tL,t})();const JF=Zt,eL=class extends JF{constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}createEmbeddedView(n,e){const i=this._declarationTContainer.tView,o=C_(this._declarationLView,i,n,16,null,i.declTNode,null,null,null,null,e||null);o[Eo]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[Br];return null!==d&&(o[Br]=d.createEmbeddedView(i)),Fy(i,o,n),new qm(o)}};function tL(){return H_(M(),m())}function H_(t,n){return 4&t.type?new eL(n,t,Np(t,n)):null}let Ma=(()=>{class t{}return t.__NG_ELEMENT_ID__=nL,t})();function nL(){return dS(M(),m())}const iL=Ma,lS=class extends iL{constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return Np(this._hostTNode,this._hostLView)}get injector(){return new ol(this._hostTNode,this._hostLView)}get parentInjector(){const n=nm(this._hostTNode,this._hostLView);if(ap(n)){const e=Ql(n,this._hostLView),i=Wu(n);return new ol(e[_t].data[i+8],e)}return new ol(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=cS(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-ii}createEmbeddedView(n,e,i){let o,s;"number"==typeof i?o=i:null!=i&&(o=i.index,s=i.injector);const d=n.createEmbeddedView(e||{},s);return this.insert(d,o),d}createComponent(n,e,i,o,s){const d=n&&!function Xu(t){return"function"==typeof t}(n);let f;if(d)f=e;else{const P=e||{};f=P.index,i=P.injector,o=P.projectableNodes,s=P.environmentInjector||P.ngModuleRef}const _=d?n:new Zm(Hn(n)),C=i||this.parentInjector;if(!s&&null==_.ngModule){const z=(d?C:this.parentInjector).get(Ds,null);z&&(s=z)}const T=_.create(C,o,void 0,s);return this.insert(T.hostView,f),T}insert(n,e){const i=n._lView,o=i[_t];if(function Yl(t){return ir(t[Jn])}(i)){const T=this.indexOf(n);if(-1!==T)this.detach(T);else{const P=i[Jn],z=new lS(P,P[Ci],P[Jn]);z.detach(z.indexOf(n))}}const s=this._adjustIndex(e),d=this._lContainer;!function Sm(t,n,e,i){const o=ii+i,s=e.length;i>0&&(e[o-1][ot]=n),i<s-ii?(n[ot]=e[o],zb(e,ii+i,n)):(e.push(n),n[ot]=null),n[Jn]=e;const d=n[Eo];null!==d&&e!==d&&function Tm(t,n){const e=t[Xa];n[ji]!==n[Jn][Jn][ji]&&(t[ql]=!0),null===e?t[Xa]=[n]:e.push(n)}(d,n);const f=n[Br];null!==f&&f.insertView(t),n[$t]|=64}(o,i,d,s);const f=hh(s,d),_=i[on],C=ll(_,d[Zl]);return null!==C&&function Cp(t,n,e,i,o,s){i[zs]=o,i[Ci]=n,cl(t,i,e,1,o,s)}(o,d[Ci],_,i,C,f),n.attachToViewContainerRef(),zb(p1(d),s,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=cS(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),i=Im(this._lContainer,e);i&&(up(p1(this._lContainer),e),Dp(i[_t],i))}detach(n){const e=this._adjustIndex(n,-1),i=Im(this._lContainer,e);return i&&null!=up(p1(this._lContainer),e)?new qm(i):null}_adjustIndex(n,e=0){return n??this.length+e}};function cS(t){return t[xs]}function p1(t){return t[xs]||(t[xs]=[])}function dS(t,n){let e;const i=n[t.index];if(ir(i))e=i;else{let o;if(8&t.type)o=Fi(i);else{const s=n[on];o=s.createComment("");const d=Bo(t,n);Oc(s,ll(s,d),o,function u_(t,n){return t.nextSibling(n)}(s,d),!1)}n[t.index]=e=cD(i,n,o,t),E_(n,e)}return new lS(e,t,n)}class f1{constructor(n){this.queryList=n,this.matches=null}clone(){return new f1(this.queryList)}setDirty(){this.queryList.setDirty()}}class m1{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const i=null!==n.contentQueries?n.contentQueries[0]:e.length,o=[];for(let s=0;s<i;s++){const d=e.getByIndex(s);o.push(this.queries[d.indexInDeclarationView].clone())}return new m1(o)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==mS(n,e).matches&&this.queries[e].setDirty()}}class uS{constructor(n,e,i=null){this.predicate=n,this.flags=e,this.read=i}}class g1{constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){const o=null!==e?e.length:0,s=this.getByIndex(i).embeddedTView(n,o);s&&(s.indexInDeclarationView=i,null!==e?e.push(s):e=[s])}return null!==e?new g1(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class b1{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new b1(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let o=0;o<i.length;o++){const s=i[o];this.matchTNodeWithReadOption(n,e,oL(e,s)),this.matchTNodeWithReadOption(n,e,il(e,n,s,!1,!1))}else i===Zt?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,il(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(null!==i){const o=this.metadata.read;if(null!==o)if(o===qt||o===Ma||o===Zt&&4&e.type)this.addMatch(e.index,-2);else{const s=il(e,n,o,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,i)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function oL(t,n){const e=t.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1];return null}function sL(t,n,e,i){return-1===e?function rL(t,n){return 11&t.type?Np(t,n):4&t.type?H_(t,n):null}(n,t):-2===e?function aL(t,n,e){return e===qt?Np(n,t):e===Zt?H_(n,t):e===Ma?dS(n,t):void 0}(t,n,i):Ec(t,t[_t],e,n)}function hS(t,n,e,i){const o=n[Br].queries[i];if(null===o.matches){const s=t.data,d=e.matches,f=[];for(let _=0;_<d.length;_+=2){const C=d[_];f.push(C<0?null:sL(n,s[C],d[_+1],e.metadata.read))}o.matches=f}return o.matches}function _1(t,n,e,i){const o=t.queries.getByIndex(e),s=o.matches;if(null!==s){const d=hS(t,n,o,e);for(let f=0;f<s.length;f+=2){const _=s[f];if(_>0)i.push(d[f/2]);else{const C=s[f+1],T=n[-_];for(let P=ii;P<T.length;P++){const z=T[P];z[Eo]===z[Jn]&&_1(z[_t],z,C,i)}if(null!==T[Xa]){const P=T[Xa];for(let z=0;z<P.length;z++){const G=P[z];_1(G[_t],G,C,i)}}}}}return i}function Et(t){const n=m(),e=x(),i=ft();Ot(i+1);const o=mS(e,i);if(t.dirty&&function tl(t){return 4==(4&t[$t])}(n)===(2==(2&o.metadata.flags))){if(null===o.matches)t.reset([]);else{const s=o.crossesNgTemplate?_1(e,n,i,[]):hS(e,n,o,i);t.reset(s,dP),t.notifyOnChanges()}return!0}return!1}function gi(t,n,e){const i=x();i.firstCreatePass&&(fS(i,new uS(t,n,e),-1),2==(2&n)&&(i.staticViewQueries=!0)),pS(i,m(),n)}function Sn(t,n,e,i){const o=x();if(o.firstCreatePass){const s=M();fS(o,new uS(n,e,i),s.index),function cL(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(o,t),2==(2&e)&&(o.staticContentQueries=!0)}pS(o,m(),e)}function St(){return function lL(t,n){return t[Br].queries[n].queryList}(m(),ft())}function pS(t,n,e){const i=new h1(4==(4&e));iD(t,n,i,i.destroy),null===n[Br]&&(n[Br]=new m1),n[Br].queries.push(new f1(i))}function fS(t,n,e){null===t.queries&&(t.queries=new g1),t.queries.track(new b1(n,e))}function mS(t,n){return t.queries.getByIndex(n)}function Ki(t,n){return H_(t,n)}function $_(...t){}const G_=new vt("Application Initializer");let W_=(()=>{class t{constructor(e){this.appInits=e,this.resolve=$_,this.reject=$_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o})}runInitializers(){if(this.initialized)return;const e=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const s=this.appInits[o]();if(Qm(s))e.push(s);else if(Qy(s)){const d=new Promise((f,_)=>{s.subscribe({complete:f,error:_})});e.push(d)}}Promise.all(e).then(()=>{i()}).catch(o=>{this.reject(o)}),0===e.length&&i(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Le(G_,8))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const cg=new vt("AppId",{providedIn:"root",factory:function PS(){return`${D1()}${D1()}${D1()}`}});function D1(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const RS=new vt("Platform Initializer"),rf=new vt("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let ML=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Ys=new vt("LocaleId",{providedIn:"root",factory:()=>Qt(Ys,At.Optional|At.SkipSelf)||function kL(){return typeof $localize<"u"&&$localize.locale||Qp}()});class OL{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let NS=(()=>{class t{compileModuleSync(e){return new c1(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),s=Fc(Ii(e).declarations).reduce((d,f)=>{const _=Hn(f);return _&&d.push(new Zm(_)),d},[]);return new OL(i,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const NL=(()=>Promise.resolve(0))();function E1(t){typeof Zone>"u"?NL.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class _n{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Me(!1),this.onMicrotaskEmpty=new Me(!1),this.onStable=new Me(!1),this.onError=new Me(!1),typeof Zone>"u")throw new Ye(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&e,o.shouldCoalesceRunChangeDetection=i,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function FL(){let t=li.requestAnimationFrame,n=li.cancelAnimationFrame;if(typeof Zone<"u"&&t&&n){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function zL(t){const n=()=>{!function BL(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(li,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,T1(t),t.isCheckStableRunning=!0,S1(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),T1(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,o,s,d,f)=>{try{return BS(t),e.invokeTask(o,s,d,f)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&n(),zS(t)}},onInvoke:(e,i,o,s,d,f,_)=>{try{return BS(t),e.invoke(o,s,d,f,_)}finally{t.shouldCoalesceRunChangeDetection&&n(),zS(t)}},onHasTask:(e,i,o,s)=>{e.hasTask(o,s),i===o&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,T1(t),S1(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,i,o,s)=>(e.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_n.isInAngularZone())throw new Ye(909,!1)}static assertNotInAngularZone(){if(_n.isInAngularZone())throw new Ye(909,!1)}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,o){const s=this._inner,d=s.scheduleEventTask("NgZoneEvent: "+o,n,LL,$_,$_);try{return s.runTask(d,e,i)}finally{s.cancelTask(d)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const LL={};function S1(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function T1(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function BS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function zS(t){t._nesting--,S1(t)}class VL{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Me,this.onMicrotaskEmpty=new Me,this.onStable=new Me,this.onError=new Me}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,o){return n.apply(e,i)}}const VS=new vt(""),q_=new vt("");let k1,I1=(()=>{class t{constructor(e,i,o){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,k1||(function UL(t){k1=t}(o),o.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_n.assertNotInAngularZone(),E1(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())E1(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==s),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:o})}whenStable(e,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,o){return[]}}return t.\u0275fac=function(e){return new(e||t)(Le(_n),Le(M1),Le(q_))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),M1=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return k1?.findTestabilityInTree(this,e,i)??null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Bc=!1;let Wd=null;const US=new vt("AllowMultipleToken"),A1=new vt("PlatformDestroyListeners"),HS=new vt("appBootstrapListener");class jS{constructor(n,e){this.name=n,this.token=e}}function GS(t,n,e=[]){const i=`Platform: ${n}`,o=new vt(i);return(s=[])=>{let d=O1();if(!d||d.injector.get(US,!1)){const f=[...e,...s,{provide:o,useValue:!0}];t?t(f):function $L(t){if(Wd&&!Wd.get(US,!1))throw new Ye(400,!1);Wd=t;const n=t.get(qS);(function $S(t){const n=t.get(RS,null);n&&n.forEach(e=>e())})(t)}(function WS(t=[],n){return Zr.create({name:n,providers:[{provide:Hm,useValue:"platform"},{provide:A1,useValue:new Set([()=>Wd=null])},...t]})}(f,i))}return function WL(t){const n=O1();if(!n)throw new Ye(401,!1);return n}()}}function O1(){return Wd?.get(qS)??null}let qS=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const o=function KS(t,n){let e;return e="noop"===t?new VL:("zone.js"===t?void 0:t)||new _n(n),e}(i?.ngZone,function ZS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:_n,useValue:o}];return o.run(()=>{const d=Zr.create({providers:s,parent:this.injector,name:e.moduleType.name}),f=e.create(d),_=f.injector.get(Fp,null);if(!_)throw new Ye(402,!1);return o.runOutsideAngular(()=>{const C=o.onError.subscribe({next:T=>{_.handleError(T)}});f.onDestroy(()=>{Z_(this._modules,f),C.unsubscribe()})}),function YS(t,n,e){try{const i=e();return Qm(i)?i.catch(o=>{throw n.runOutsideAngular(()=>t.handleError(o)),o}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(_,o,()=>{const C=f.injector.get(W_);return C.runInitializers(),C.donePromise.then(()=>(wE(f.injector.get(Ys,Qp)||Qp),this._moduleDoBootstrap(f),f))})})}bootstrapModule(e,i=[]){const o=QS({},i);return function HL(t,n,e){const i=new c1(e);return Promise.resolve(i)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(e){const i=e.injector.get(sf);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(o=>i.bootstrap(o));else{if(!e.instance.ngDoBootstrap)throw new Ye(-403,!1);e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ye(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const e=this._injector.get(A1,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Le(Zr))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function QS(t,n){return Array.isArray(n)?n.reduce(QS,t):{...t,...n}}let sf=(()=>{class t{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(e,i,o){this._zone=e,this._injector=i,this._exceptionHandler=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new cn(f=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{f.next(this._stable),f.complete()})}),d=new cn(f=>{let _;this._zone.runOutsideAngular(()=>{_=this._zone.onStable.subscribe(()=>{_n.assertNotInAngularZone(),E1(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,f.next(!0))})})});const C=this._zone.onUnstable.subscribe(()=>{_n.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{f.next(!1)}))});return()=>{_.unsubscribe(),C.unsubscribe()}});this.isStable=Qr(s,d.pipe(function fu(t={}){const{connector:n=(()=>new Ht),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:o=!0}=t;return s=>{let d,f,_,C=0,T=!1,P=!1;const z=()=>{f?.unsubscribe(),f=void 0},G=()=>{z(),d=_=void 0,T=P=!1},ae=()=>{const be=d;G(),be?.unsubscribe()};return Gn((be,Ce)=>{C++,!P&&!T&&z();const Te=_=_??n();Ce.add(()=>{C--,0===C&&!P&&!T&&(f=Fl(ae,o))}),Te.subscribe(Ce),!d&&C>0&&(d=new mr({next:$e=>Te.next($e),error:$e=>{P=!0,z(),f=Fl(G,e,$e),Te.error($e)},complete:()=>{T=!0,z(),f=Fl(G,i),Te.complete()}}),te(be).subscribe(d))})(s)}}()))}bootstrap(e,i){const o=e instanceof OC;if(!this._injector.get(W_).done){!o&&function qa(t){const n=Hn(t)||hi(t)||wi(t);return null!==n&&n.standalone}(e);throw new Ye(405,Bc)}let d;d=o?e:this._injector.get(Rp).resolveComponentFactory(e),this.componentTypes.push(d.componentType);const f=function jL(t){return t.isBoundToModule}(d)?void 0:this._injector.get(Jp),C=d.create(Zr.NULL,[],i||d.selector,f),T=C.location.nativeElement,P=C.injector.get(VS,null);return P?.registerApplication(T),C.onDestroy(()=>{this.detachView(C.hostView),Z_(this.components,C),P?.unregisterApplication(T)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Ye(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;Z_(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(HS,[]);i.push(...this._bootstrapListeners),i.forEach(o=>o(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Z_(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Ye(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(e){return new(e||t)(Le(_n),Le(Ds),Le(Fp))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Z_(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}let ko=(()=>{class t{}return t.__NG_ELEMENT_ID__=ZL,t})();function ZL(t){return function KL(t,n,e){if(Kl(t)&&!e){const i=rr(t.index,n);return new qm(i,i)}return 47&t.type?new qm(n[ji],n):null}(M(),m(),16==(16&t))}class nT{constructor(){}supports(n){return M_(n)}create(n){return new tB(n)}}const eB=(t,n)=>n;class tB{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||eB}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,o=0,s=null;for(;e||i;){const d=!i||e&&e.currentIndex<oT(i,o,s)?e:i,f=oT(d,o,s),_=d.currentIndex;if(d===i)o--,i=i._nextRemoved;else if(e=e._next,null==d.previousIndex)o++;else{s||(s=[]);const C=f-o,T=_-o;if(C!=T){for(let z=0;z<C;z++){const G=z<s.length?s[z]:s[z]=0,ae=G+z;T<=ae&&ae<C&&(s[z]=G+1)}s[d.previousIndex]=T-C}}f!==_&&n(d,f,_)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!M_(n))throw new Ye(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let o,s,d,e=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let f=0;f<this.length;f++)s=n[f],d=this._trackByFn(f,s),null!==e&&Object.is(e.trackById,d)?(i&&(e=this._verifyReinsertion(e,s,d,f)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,d,f),i=!0),e=e._next}else o=0,function jR(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Symbol.iterator]();let i;for(;!(i=e.next()).done;)n(i.value)}}(n,f=>{d=this._trackByFn(o,f),null!==e&&Object.is(e.trackById,d)?(i&&(e=this._verifyReinsertion(e,f,d,o)),Object.is(e.item,f)||this._addIdentityChange(e,f)):(e=this._mismatch(e,f,d,o),i=!0),e=e._next,o++}),this.length=o;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,o){let s;return null===n?s=this._itTail:(s=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,s,o)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,o))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,s,o)):n=this._addAfter(new nB(e,i),s,o),n}_verifyReinsertion(n,e,i,o){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?n=this._reinsertAfter(s,n._prev,o):n.currentIndex!=o&&(n.currentIndex=o,this._addToMoves(n,o)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const o=n._prevRemoved,s=n._nextRemoved;return null===o?this._removalsHead=s:o._nextRemoved=s,null===s?this._removalsTail=o:s._prevRemoved=o,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){const o=null===e?this._itHead:e._next;return n._next=o,n._prev=e,null===o?this._itTail=n:o._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new iT),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,i=n._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new iT),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class nB{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class iB{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const e=n._prevDup,i=n._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class iT{constructor(){this.map=new Map}put(n){const e=n.trackById;let i=this.map.get(e);i||(i=new iB,this.map.set(e,i)),i.add(n)}get(n,e){const o=this.map.get(n);return o?o.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function oT(t,n,e){const i=t.previousIndex;if(null===i)return i;let o=0;return e&&i<e.length&&(o=e[i]),i+n+o}class rT{constructor(){}supports(n){return n instanceof Map||Ky(n)}create(){return new oB}}class oB{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||Ky(n)))throw new Ye(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,o)=>{if(e&&e.key===o)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(o,i);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const i=n._prev;return e._next=n,e._prev=i,n._prev=e,i&&(i._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const o=this._records.get(n);this._maybeAddToChanges(o,e);const s=o._prev,d=o._next;return s&&(s._next=d),d&&(d._prev=s),o._next=null,o._prev=null,o}const i=new rB(n);return this._records.set(n,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(i=>e(n[i],i))}}class rB{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sT(){return new Q_([new nT])}let Q_=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(null!=i){const o=i.factories.slice();e=e.concat(o)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||sT()),deps:[[t,new th,new Ad]]}}find(e){const i=this.factories.find(o=>o.supports(e));if(null!=i)return i;throw new Ye(901,!1)}}return t.\u0275prov=Ue({token:t,providedIn:"root",factory:sT}),t})();function aT(){return new dg([new rT])}let dg=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(i){const o=i.factories.slice();e=e.concat(o)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||aT()),deps:[[t,new th,new Ad]]}}find(e){const i=this.factories.find(o=>o.supports(e));if(i)return i;throw new Ye(901,!1)}}return t.\u0275prov=Ue({token:t,providedIn:"root",factory:aT}),t})();const lB=GS(null,"core",[]);let cB=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(Le(sf))},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({}),t})();function af(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function L1(t,n){const e=Hn(t),i=n.elementInjector||Pp();return new Zm(e).create(i,n.projectableNodes,n.hostElement,n.environmentInjector)}let B1=null;function zc(){return B1}class hB{}const Si=new vt("DocumentToken");let z1=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:function(){return function pB(){return Le(lT)}()},providedIn:"platform"}),t})();const fB=new vt("Location Initialized");let lT=(()=>{class t extends z1{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return zc().getBaseHref(this._doc)}onPopState(e){const i=zc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=zc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,o){cT()?this._history.pushState(e,i,o):this._location.hash=o}replaceState(e,i,o){cT()?this._history.replaceState(e,i,o):this._location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Le(Si))},t.\u0275prov=Ue({token:t,factory:function(){return function mB(){return new lT(Le(Si))}()},providedIn:"platform"}),t})();function cT(){return!!window.history.pushState}function V1(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function dT(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function Vc(t){return t&&"?"!==t[0]?"?"+t:t}let xh=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:function(){return Qt(hT)},providedIn:"root"}),t})();const uT=new vt("appBaseHref");let hT=(()=>{class t extends xh{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Qt(Si).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return V1(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+Vc(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${i}${o}`:i}pushState(e,i,o,s){const d=this.prepareExternalUrl(o+Vc(s));this._platformLocation.pushState(e,i,d)}replaceState(e,i,o,s){const d=this.prepareExternalUrl(o+Vc(s));this._platformLocation.replaceState(e,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)(Le(z1),Le(uT,8))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),gB=(()=>{class t extends xh{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=V1(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,o,s){let d=this.prepareExternalUrl(o+Vc(s));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(e,i,d)}replaceState(e,i,o,s){let d=this.prepareExternalUrl(o+Vc(s));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)(Le(z1),Le(uT,8))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),U1=(()=>{class t{constructor(e){this._subject=new Me,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function vB(t){if(new RegExp("^(https?:)?//").test(t)){const[,e]=t.split(/\/\/[^\/]+/);return e}return t}(dT(pT(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Vc(i))}normalize(e){return t.stripTrailingSlash(function _B(t,n){if(!t||!n.startsWith(t))return n;const e=n.substring(t.length);return""===e||["/",";","?","#"].includes(e[0])?e:n}(this._basePath,pT(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",o=null){this._locationStrategy.pushState(o,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Vc(i)),o)}replaceState(e,i="",o=null){this._locationStrategy.replaceState(o,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Vc(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(o=>o(e,i))}subscribe(e,i,o){return this._subject.subscribe({next:e,error:i,complete:o})}}return t.normalizeQueryParams=Vc,t.joinWithSlash=V1,t.stripTrailingSlash=dT,t.\u0275fac=function(e){return new(e||t)(Le(xh))},t.\u0275prov=Ue({token:t,factory:function(){return function bB(){return new U1(Le(xh))}()},providedIn:"root"}),t})();function pT(t){return t.replace(/\/index.html$/,"")}var Is=(()=>((Is=Is||{})[Is.Decimal=0]="Decimal",Is[Is.Percent=1]="Percent",Is[Is.Currency=2]="Currency",Is[Is.Scientific=3]="Scientific",Is))(),Oi=(()=>((Oi=Oi||{})[Oi.Format=0]="Format",Oi[Oi.Standalone=1]="Standalone",Oi))(),ln=(()=>((ln=ln||{})[ln.Narrow=0]="Narrow",ln[ln.Abbreviated=1]="Abbreviated",ln[ln.Wide=2]="Wide",ln[ln.Short=3]="Short",ln))(),Yi=(()=>((Yi=Yi||{})[Yi.Short=0]="Short",Yi[Yi.Medium=1]="Medium",Yi[Yi.Long=2]="Long",Yi[Yi.Full=3]="Full",Yi))(),Vt=(()=>((Vt=Vt||{})[Vt.Decimal=0]="Decimal",Vt[Vt.Group=1]="Group",Vt[Vt.List=2]="List",Vt[Vt.PercentSign=3]="PercentSign",Vt[Vt.PlusSign=4]="PlusSign",Vt[Vt.MinusSign=5]="MinusSign",Vt[Vt.Exponential=6]="Exponential",Vt[Vt.SuperscriptingExponent=7]="SuperscriptingExponent",Vt[Vt.PerMille=8]="PerMille",Vt[Vt.Infinity=9]="Infinity",Vt[Vt.NaN=10]="NaN",Vt[Vt.TimeSeparator=11]="TimeSeparator",Vt[Vt.CurrencyDecimal=12]="CurrencyDecimal",Vt[Vt.CurrencyGroup=13]="CurrencyGroup",Vt))();function mT(t,n,e){const i=ls(t),s=Aa([i[xt.DayPeriodsFormat],i[xt.DayPeriodsStandalone]],n);return Aa(s,e)}function gT(t,n,e){const i=ls(t),s=Aa([i[xt.DaysFormat],i[xt.DaysStandalone]],n);return Aa(s,e)}function H1(t,n,e){const i=ls(t),s=Aa([i[xt.MonthsFormat],i[xt.MonthsStandalone]],n);return Aa(s,e)}function X_(t,n){return Aa(ls(t)[xt.DateFormat],n)}function J_(t,n){return Aa(ls(t)[xt.TimeFormat],n)}function e0(t,n){return Aa(ls(t)[xt.DateTimeFormat],n)}function ka(t,n){const e=ls(t),i=e[xt.NumberSymbols][n];if(typeof i>"u"){if(n===Vt.CurrencyDecimal)return e[xt.NumberSymbols][Vt.Decimal];if(n===Vt.CurrencyGroup)return e[xt.NumberSymbols][Vt.Group]}return i}function j1(t,n){return ls(t)[xt.NumberFormats][n]}function bT(t){if(!t[xt.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[xt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Aa(t,n){for(let e=n;e>-1;e--)if(typeof t[e]<"u")return t[e];throw new Error("Locale data API: locale data undefined")}function $1(t){const[n,e]=t.split(":");return{hours:+n,minutes:+e}}const MB=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ug={},kB=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var jo=(()=>((jo=jo||{})[jo.Short=0]="Short",jo[jo.ShortGMT=1]="ShortGMT",jo[jo.Long=2]="Long",jo[jo.Extended=3]="Extended",jo))(),Kt=(()=>((Kt=Kt||{})[Kt.FullYear=0]="FullYear",Kt[Kt.Month=1]="Month",Kt[Kt.Date=2]="Date",Kt[Kt.Hours=3]="Hours",Kt[Kt.Minutes=4]="Minutes",Kt[Kt.Seconds=5]="Seconds",Kt[Kt.FractionalSeconds=6]="FractionalSeconds",Kt[Kt.Day=7]="Day",Kt))(),vn=(()=>((vn=vn||{})[vn.DayPeriods=0]="DayPeriods",vn[vn.Days=1]="Days",vn[vn.Months=2]="Months",vn[vn.Eras=3]="Eras",vn))();function _T(t,n,e,i){let o=function zB(t){if(xT(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[o,s=1,d=1]=t.split("-").map(f=>+f);return t0(o,s-1,d)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let i;if(i=t.match(MB))return function VB(t){const n=new Date(0);let e=0,i=0;const o=t[8]?n.setUTCFullYear:n.setFullYear,s=t[8]?n.setUTCHours:n.setHours;t[9]&&(e=Number(t[9]+t[10]),i=Number(t[9]+t[11])),o.call(n,Number(t[1]),Number(t[2])-1,Number(t[3]));const d=Number(t[4]||0)-e,f=Number(t[5]||0)-i,_=Number(t[6]||0),C=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return s.call(n,d,f,_,C),n}(i)}const n=new Date(t);if(!xT(n))throw new Error(`Unable to convert "${t}" into a date`);return n}(t);n=Uc(e,n)||n;let f,d=[];for(;n;){if(f=kB.exec(n),!f){d.push(n);break}{d=d.concat(f.slice(1));const T=d.pop();if(!T)break;n=T}}let _=o.getTimezoneOffset();i&&(_=yT(i,_),o=function BB(t,n,e){const i=e?-1:1,o=t.getTimezoneOffset();return function LB(t,n){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+n),t}(t,i*(yT(n,o)-o))}(o,i,!0));let C="";return d.forEach(T=>{const P=function FB(t){if(W1[t])return W1[t];let n;switch(t){case"G":case"GG":case"GGG":n=Ti(vn.Eras,ln.Abbreviated);break;case"GGGG":n=Ti(vn.Eras,ln.Wide);break;case"GGGGG":n=Ti(vn.Eras,ln.Narrow);break;case"y":n=Oo(Kt.FullYear,1,0,!1,!0);break;case"yy":n=Oo(Kt.FullYear,2,0,!0,!0);break;case"yyy":n=Oo(Kt.FullYear,3,0,!1,!0);break;case"yyyy":n=Oo(Kt.FullYear,4,0,!1,!0);break;case"Y":n=s0(1);break;case"YY":n=s0(2,!0);break;case"YYY":n=s0(3);break;case"YYYY":n=s0(4);break;case"M":case"L":n=Oo(Kt.Month,1,1);break;case"MM":case"LL":n=Oo(Kt.Month,2,1);break;case"MMM":n=Ti(vn.Months,ln.Abbreviated);break;case"MMMM":n=Ti(vn.Months,ln.Wide);break;case"MMMMM":n=Ti(vn.Months,ln.Narrow);break;case"LLL":n=Ti(vn.Months,ln.Abbreviated,Oi.Standalone);break;case"LLLL":n=Ti(vn.Months,ln.Wide,Oi.Standalone);break;case"LLLLL":n=Ti(vn.Months,ln.Narrow,Oi.Standalone);break;case"w":n=G1(1);break;case"ww":n=G1(2);break;case"W":n=G1(1,!0);break;case"d":n=Oo(Kt.Date,1);break;case"dd":n=Oo(Kt.Date,2);break;case"c":case"cc":n=Oo(Kt.Day,1);break;case"ccc":n=Ti(vn.Days,ln.Abbreviated,Oi.Standalone);break;case"cccc":n=Ti(vn.Days,ln.Wide,Oi.Standalone);break;case"ccccc":n=Ti(vn.Days,ln.Narrow,Oi.Standalone);break;case"cccccc":n=Ti(vn.Days,ln.Short,Oi.Standalone);break;case"E":case"EE":case"EEE":n=Ti(vn.Days,ln.Abbreviated);break;case"EEEE":n=Ti(vn.Days,ln.Wide);break;case"EEEEE":n=Ti(vn.Days,ln.Narrow);break;case"EEEEEE":n=Ti(vn.Days,ln.Short);break;case"a":case"aa":case"aaa":n=Ti(vn.DayPeriods,ln.Abbreviated);break;case"aaaa":n=Ti(vn.DayPeriods,ln.Wide);break;case"aaaaa":n=Ti(vn.DayPeriods,ln.Narrow);break;case"b":case"bb":case"bbb":n=Ti(vn.DayPeriods,ln.Abbreviated,Oi.Standalone,!0);break;case"bbbb":n=Ti(vn.DayPeriods,ln.Wide,Oi.Standalone,!0);break;case"bbbbb":n=Ti(vn.DayPeriods,ln.Narrow,Oi.Standalone,!0);break;case"B":case"BB":case"BBB":n=Ti(vn.DayPeriods,ln.Abbreviated,Oi.Format,!0);break;case"BBBB":n=Ti(vn.DayPeriods,ln.Wide,Oi.Format,!0);break;case"BBBBB":n=Ti(vn.DayPeriods,ln.Narrow,Oi.Format,!0);break;case"h":n=Oo(Kt.Hours,1,-12);break;case"hh":n=Oo(Kt.Hours,2,-12);break;case"H":n=Oo(Kt.Hours,1);break;case"HH":n=Oo(Kt.Hours,2);break;case"m":n=Oo(Kt.Minutes,1);break;case"mm":n=Oo(Kt.Minutes,2);break;case"s":n=Oo(Kt.Seconds,1);break;case"ss":n=Oo(Kt.Seconds,2);break;case"S":n=Oo(Kt.FractionalSeconds,1);break;case"SS":n=Oo(Kt.FractionalSeconds,2);break;case"SSS":n=Oo(Kt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":n=o0(jo.Short);break;case"ZZZZZ":n=o0(jo.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=o0(jo.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":n=o0(jo.Long);break;default:return null}return W1[t]=n,n}(T);C+=P?P(o,e,_):"''"===T?"'":T.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),C}function t0(t,n,e){const i=new Date(0);return i.setFullYear(t,n,e),i.setHours(0,0,0),i}function Uc(t,n){const e=function yB(t){return ls(t)[xt.LocaleId]}(t);if(ug[e]=ug[e]||{},ug[e][n])return ug[e][n];let i="";switch(n){case"shortDate":i=X_(t,Yi.Short);break;case"mediumDate":i=X_(t,Yi.Medium);break;case"longDate":i=X_(t,Yi.Long);break;case"fullDate":i=X_(t,Yi.Full);break;case"shortTime":i=J_(t,Yi.Short);break;case"mediumTime":i=J_(t,Yi.Medium);break;case"longTime":i=J_(t,Yi.Long);break;case"fullTime":i=J_(t,Yi.Full);break;case"short":const o=Uc(t,"shortTime"),s=Uc(t,"shortDate");i=n0(e0(t,Yi.Short),[o,s]);break;case"medium":const d=Uc(t,"mediumTime"),f=Uc(t,"mediumDate");i=n0(e0(t,Yi.Medium),[d,f]);break;case"long":const _=Uc(t,"longTime"),C=Uc(t,"longDate");i=n0(e0(t,Yi.Long),[_,C]);break;case"full":const T=Uc(t,"fullTime"),P=Uc(t,"fullDate");i=n0(e0(t,Yi.Full),[T,P])}return i&&(ug[e][n]=i),i}function n0(t,n){return n&&(t=t.replace(/\{([^}]+)}/g,function(e,i){return null!=n&&i in n?n[i]:e})),t}function vl(t,n,e="-",i,o){let s="";(t<0||o&&t<=0)&&(o?t=1-t:(t=-t,s=e));let d=String(t);for(;d.length<n;)d="0"+d;return i&&(d=d.slice(d.length-n)),s+d}function Oo(t,n,e=0,i=!1,o=!1){return function(s,d){let f=function OB(t,n){switch(t){case Kt.FullYear:return n.getFullYear();case Kt.Month:return n.getMonth();case Kt.Date:return n.getDate();case Kt.Hours:return n.getHours();case Kt.Minutes:return n.getMinutes();case Kt.Seconds:return n.getSeconds();case Kt.FractionalSeconds:return n.getMilliseconds();case Kt.Day:return n.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,s);if((e>0||f>-e)&&(f+=e),t===Kt.Hours)0===f&&-12===e&&(f=12);else if(t===Kt.FractionalSeconds)return function AB(t,n){return vl(t,3).substring(0,n)}(f,n);const _=ka(d,Vt.MinusSign);return vl(f,n,_,i,o)}}function Ti(t,n,e=Oi.Format,i=!1){return function(o,s){return function PB(t,n,e,i,o,s){switch(e){case vn.Months:return H1(n,o,i)[t.getMonth()];case vn.Days:return gT(n,o,i)[t.getDay()];case vn.DayPeriods:const d=t.getHours(),f=t.getMinutes();if(s){const C=function DB(t){const n=ls(t);return bT(n),(n[xt.ExtraData][2]||[]).map(i=>"string"==typeof i?$1(i):[$1(i[0]),$1(i[1])])}(n),T=function EB(t,n,e){const i=ls(t);bT(i);const s=Aa([i[xt.ExtraData][0],i[xt.ExtraData][1]],n)||[];return Aa(s,e)||[]}(n,o,i),P=C.findIndex(z=>{if(Array.isArray(z)){const[G,ae]=z,be=d>=G.hours&&f>=G.minutes,Ce=d<ae.hours||d===ae.hours&&f<ae.minutes;if(G.hours<ae.hours){if(be&&Ce)return!0}else if(be||Ce)return!0}else if(z.hours===d&&z.minutes===f)return!0;return!1});if(-1!==P)return T[P]}return mT(n,o,i)[d<12?0:1];case vn.Eras:return function xB(t,n){return Aa(ls(t)[xt.Eras],n)}(n,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(o,s,t,n,e,i)}}function o0(t){return function(n,e,i){const o=-1*i,s=ka(e,Vt.MinusSign),d=o>0?Math.floor(o/60):Math.ceil(o/60);switch(t){case jo.Short:return(o>=0?"+":"")+vl(d,2,s)+vl(Math.abs(o%60),2,s);case jo.ShortGMT:return"GMT"+(o>=0?"+":"")+vl(d,1,s);case jo.Long:return"GMT"+(o>=0?"+":"")+vl(d,2,s)+":"+vl(Math.abs(o%60),2,s);case jo.Extended:return 0===i?"Z":(o>=0?"+":"")+vl(d,2,s)+":"+vl(Math.abs(o%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}const RB=0,r0=4;function vT(t){return t0(t.getFullYear(),t.getMonth(),t.getDate()+(r0-t.getDay()))}function G1(t,n=!1){return function(e,i){let o;if(n){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,d=e.getDate();o=1+Math.floor((d+s)/7)}else{const s=vT(e),d=function NB(t){const n=t0(t,RB,1).getDay();return t0(t,0,1+(n<=r0?r0:r0+7)-n)}(s.getFullYear()),f=s.getTime()-d.getTime();o=1+Math.round(f/6048e5)}return vl(o,t,ka(i,Vt.MinusSign))}}function s0(t,n=!1){return function(e,i){return vl(vT(e).getFullYear(),t,ka(i,Vt.MinusSign),n)}}const W1={};function yT(t,n){t=t.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(e)?n:e}function xT(t){return t instanceof Date&&!isNaN(t.valueOf())}const UB=/^(\d+)?\.((\d+)(-(\d+))?)?$/,wT=22,a0=".",hg="0",HB=";",jB=",",q1="#";function Z1(t,n,e,i,o,s,d=!1){let f="",_=!1;if(isFinite(t)){let C=function KB(t){let i,o,s,d,f,n=Math.abs(t)+"",e=0;for((o=n.indexOf(a0))>-1&&(n=n.replace(a0,"")),(s=n.search(/e/i))>0?(o<0&&(o=s),o+=+n.slice(s+1),n=n.substring(0,s)):o<0&&(o=n.length),s=0;n.charAt(s)===hg;s++);if(s===(f=n.length))i=[0],o=1;else{for(f--;n.charAt(f)===hg;)f--;for(o-=s,i=[],d=0;s<=f;s++,d++)i[d]=Number(n.charAt(s))}return o>wT&&(i=i.splice(0,wT-1),e=o-1,o=1),{digits:i,exponent:e,integerLen:o}}(t);d&&(C=function ZB(t){if(0===t.digits[0])return t;const n=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===n?t.digits.push(0,0):1===n&&t.digits.push(0),t.integerLen+=2),t}(C));let T=n.minInt,P=n.minFrac,z=n.maxFrac;if(s){const $e=s.match(UB);if(null===$e)throw new Error(`${s} is not a valid digit info`);const Pe=$e[1],at=$e[3],Mt=$e[5];null!=Pe&&(T=Y1(Pe)),null!=at&&(P=Y1(at)),null!=Mt?z=Y1(Mt):null!=at&&P>z&&(z=P)}!function YB(t,n,e){if(n>e)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${e}).`);let i=t.digits,o=i.length-t.integerLen;const s=Math.min(Math.max(n,o),e);let d=s+t.integerLen,f=i[d];if(d>0){i.splice(Math.max(t.integerLen,d));for(let P=d;P<i.length;P++)i[P]=0}else{o=Math.max(0,o),t.integerLen=1,i.length=Math.max(1,d=s+1),i[0]=0;for(let P=1;P<d;P++)i[P]=0}if(f>=5)if(d-1<0){for(let P=0;P>d;P--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[d-1]++;for(;o<Math.max(0,s);o++)i.push(0);let _=0!==s;const C=n+t.integerLen,T=i.reduceRight(function(P,z,G,ae){return ae[G]=(z+=P)<10?z:z-10,_&&(0===ae[G]&&G>=C?ae.pop():_=!1),z>=10?1:0},0);T&&(i.unshift(T),t.integerLen++)}(C,P,z);let G=C.digits,ae=C.integerLen;const be=C.exponent;let Ce=[];for(_=G.every($e=>!$e);ae<T;ae++)G.unshift(0);for(;ae<0;ae++)G.unshift(0);ae>0?Ce=G.splice(ae,G.length):(Ce=G,G=[0]);const Te=[];for(G.length>=n.lgSize&&Te.unshift(G.splice(-n.lgSize,G.length).join(""));G.length>n.gSize;)Te.unshift(G.splice(-n.gSize,G.length).join(""));G.length&&Te.unshift(G.join("")),f=Te.join(ka(e,i)),Ce.length&&(f+=ka(e,o)+Ce.join("")),be&&(f+=ka(e,Vt.Exponential)+"+"+be)}else f=ka(e,Vt.Infinity);return f=t<0&&!_?n.negPre+f+n.negSuf:n.posPre+f+n.posSuf,f}function K1(t,n="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(HB),o=i[0],s=i[1],d=-1!==o.indexOf(a0)?o.split(a0):[o.substring(0,o.lastIndexOf(hg)+1),o.substring(o.lastIndexOf(hg)+1)],f=d[0],_=d[1]||"";e.posPre=f.substring(0,f.indexOf(q1));for(let T=0;T<_.length;T++){const P=_.charAt(T);P===hg?e.minFrac=e.maxFrac=T+1:P===q1?e.maxFrac=T+1:e.posSuf+=P}const C=f.split(jB);if(e.gSize=C[1]?C[1].length:0,e.lgSize=C[2]||C[1]?(C[2]||C[1]).length:0,s){const T=o.length-e.posPre.length-e.posSuf.length,P=s.indexOf(q1);e.negPre=s.substring(0,P).replace(/'/g,""),e.negSuf=s.slice(P+T).replace(/'/g,"")}else e.negPre=n+e.posPre,e.negSuf=e.posSuf;return e}function Y1(t){const n=parseInt(t);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+t);return n}function ET(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[o,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(o.trim()===n)return decodeURIComponent(s)}return null}const X1=/\s+/,ST=[];let qd=(()=>{class t{constructor(e,i,o,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=o,this._renderer=s,this.initialClasses=ST,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(X1):ST}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(X1):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,Boolean(e[i]));this._applyStateDiff()}_updateState(e,i){const o=this.stateMap.get(e);void 0!==o?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],o=e[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(X1).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return t.\u0275fac=function(e){return new(e||t)(J(Q_),J(dg),J(qt),J(lo))},t.\u0275dir=We({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),t})();class JB{constructor(n,e,i,o){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Mr=(()=>{class t{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,o){this._viewContainer=e,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((o,s,d)=>{if(null==o.previousIndex)i.createEmbeddedView(this._template,new JB(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)i.remove(null===s?void 0:s);else if(null!==s){const f=i.get(s);i.move(f,d),MT(f,o)}});for(let o=0,s=i.length;o<s;o++){const f=i.get(o).context;f.index=o,f.count=s,f.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{MT(i.get(o.currentIndex),o)})}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(J(Ma),J(Zt),J(Q_))},t.\u0275dir=We({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function MT(t,n){t.context.$implicit=n.item}let Pi=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new t5,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){kT("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){kT("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(J(Ma),J(Zt))},t.\u0275dir=We({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),t})();class t5{constructor(){this.$implicit=null,this.ngIf=null}}function kT(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Fn(n)}'.`)}let OT=(()=>{class t{constructor(e,i,o){this._ngEl=e,this._differs=i,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[o,s]=e.split("."),d=-1===o.indexOf("-")?void 0:$r.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,o,s?`${i}${s}`:i,d):this._renderer.removeStyle(this._ngEl.nativeElement,o,d)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(J(qt),J(dg),J(lo))},t.\u0275dir=We({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),t})(),Qs=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:o,ngTemplateOutletContext:s,ngTemplateOutletInjector:d}=this;this._viewRef=i.createEmbeddedView(o,s,d?{injector:d}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(J(Ma))},t.\u0275dir=We({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Mn]}),t})();function yl(t,n){return new Ye(2100,!1)}let RT=(()=>{class t{constructor(e){this._locale=e}transform(e,i,o){if(!tx(e))return null;o=o||this._locale;try{return function qB(t,n,e){return Z1(t,K1(j1(n,Is.Decimal),ka(n,Vt.MinusSign)),n,Vt.Group,Vt.Decimal,e)}(nx(e),o,i)}catch(s){throw yl()}}}return t.\u0275fac=function(e){return new(e||t)(J(Ys,16))},t.\u0275pipe=io({name:"number",type:t,pure:!0,standalone:!0}),t})(),NT=(()=>{class t{constructor(e){this._locale=e}transform(e,i,o){if(!tx(e))return null;o=o||this._locale;try{return function WB(t,n,e){return Z1(t,K1(j1(n,Is.Percent),ka(n,Vt.MinusSign)),n,Vt.Group,Vt.Decimal,e,!0).replace(new RegExp("%","g"),ka(n,Vt.PercentSign))}(nx(e),o,i)}catch(s){throw yl()}}}return t.\u0275fac=function(e){return new(e||t)(J(Ys,16))},t.\u0275pipe=io({name:"percent",type:t,pure:!0,standalone:!0}),t})();function tx(t){return!(null==t||""===t||t!=t)}function nx(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}let Ut=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({}),t})();const FT="browser";function ix(t){return t===FT}let I5=(()=>{class t{}return t.\u0275prov=Ue({token:t,providedIn:"root",factory:()=>new M5(Le(Si),window)}),t})();class M5{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function k5(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let o=i.currentNode;for(;o;){const s=o.shadowRoot;if(s){const d=s.getElementById(n)||s.querySelector(`[name="${n}"]`);if(d)return d}o=i.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=n)}}scrollToElement(n){const e=n.getBoundingClientRect(),i=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],o-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=LT(this.window.history)||LT(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function LT(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class BT{}class i3 extends hB{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class sx extends i3{static makeCurrent(){!function uB(t){B1||(B1=t)}(new sx)}onAndCancel(n,e,i){return n.addEventListener(e,i,!1),()=>{n.removeEventListener(e,i,!1)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function o3(){return fg=fg||document.querySelector("base"),fg?fg.getAttribute("href"):null}();return null==e?null:function r3(t){d0=d0||document.createElement("a"),d0.setAttribute("href",t);const n=d0.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){fg=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return ET(document.cookie,n)}}let d0,fg=null;const jT=new vt("TRANSITION_ID"),a3=[{provide:G_,useFactory:function s3(t,n,e){return()=>{e.get(W_).donePromise.then(()=>{const i=zc(),o=n.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<o.length;s++)i.remove(o[s])})}},deps:[jT,Si,Zr],multi:!0}];let c3=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();const u0=new vt("EventManagerPlugins");let h0=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,o){return this._findPluginFor(i).addEventListener(e,i,o)}addGlobalEventListener(e,i,o){return this._findPluginFor(i).addGlobalEventListener(e,i,o)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const o=this._plugins;for(let s=0;s<o.length;s++){const d=o[s];if(d.supports(e))return this._eventNameToPlugin.set(e,d),d}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(Le(u0),Le(_n))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();class $T{constructor(n){this._doc=n}addGlobalEventListener(n,e,i){const o=zc().getGlobalEventTarget(this._doc,n);if(!o)throw new Error(`Unsupported event target ${o} for event ${e}`);return this.addEventListener(o,e,i)}}let GT=(()=>{class t{constructor(){this.usageCount=new Map}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,i){const o=this.usageCount;let s=o.get(e)??0;return s+=i,s>0?o.set(e,s):o.delete(e),s}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),mg=(()=>{class t extends GT{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.forEach(s=>s.remove()),i.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,i){const o=this.doc.createElement("style");o.textContent=i,e.appendChild(o);const s=this.styleRef.get(i);s?s.push(o):this.styleRef.set(i,[o])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return t.\u0275fac=function(e){return new(e||t)(Le(Si))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();const ax={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},lx=/%COMP%/g,ZT=new vt("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function KT(t,n){return n.flat(100).map(e=>e.replace(lx,t))}function YT(t){return n=>{if("__ngUnwrap__"===n)return t;!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}let cx=(()=>{class t{constructor(e,i,o,s){this.eventManager=e,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new dx(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;const o=this.getOrCreateRenderer(e,i);return o instanceof JT?o.applyToHost(e):o instanceof ux&&o.applyStyles(),o}getOrCreateRenderer(e,i){const o=this.rendererByCompId;let s=o.get(i.id);if(!s){const d=this.eventManager,f=this.sharedStylesHost,_=this.removeStylesOnCompDestory;switch(i.encapsulation){case vr.Emulated:s=new JT(d,f,i,this.appId,_);break;case vr.ShadowDom:return new g3(d,f,e,i);default:s=new ux(d,f,i,_)}s.onDestroy=()=>o.delete(i.id),o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Le(h0),Le(mg),Le(cg),Le(ZT))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();class dx{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?document.createElementNS(ax[e]||e,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,e){(XT(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(XT(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?document.querySelector(n):n;if(!i)throw new Error(`The selector "${n}" did not match any elements`);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,o){if(o){e=o+":"+e;const s=ax[o];s?n.setAttributeNS(s,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const o=ax[i];o?n.removeAttributeNS(o,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,o){o&($r.DashCase|$r.Important)?n.style.setProperty(e,i,o&$r.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&$r.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n[e]=i}setValue(n,e){n.nodeValue=e}listen(n,e,i){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,e,YT(i)):this.eventManager.addEventListener(n,e,YT(i))}}function XT(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class g3 extends dx{constructor(n,e,i,o){super(n),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=KT(o.id,o.styles);for(const d of s){const f=document.createElement("style");f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ux extends dx{constructor(n,e,i,o,s=i.id){super(n),this.sharedStylesHost=e,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=KT(s,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class JT extends ux{constructor(n,e,i,o,s){const d=o+"-"+i.id;super(n,e,i,s,d),this.contentAttr=function p3(t){return"_ngcontent-%COMP%".replace(lx,t)}(d),this.hostAttr=function f3(t){return"_nghost-%COMP%".replace(lx,t)}(d)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}let b3=(()=>{class t extends $T{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,o){return e.addEventListener(i,o,!1),()=>this.removeEventListener(e,i,o)}removeEventListener(e,i,o){return e.removeEventListener(i,o)}}return t.\u0275fac=function(e){return new(e||t)(Le(Si))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();const eI=["alt","control","meta","shift"],_3={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},v3={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let y3=(()=>{class t extends $T{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,o){const s=t.parseEventName(i),d=t.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zc().onAndCancel(e,s.domEventName,d))}static parseEventName(e){const i=e.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const s=t._normalizeKey(i.pop());let d="",f=i.indexOf("code");if(f>-1&&(i.splice(f,1),d="code."),eI.forEach(C=>{const T=i.indexOf(C);T>-1&&(i.splice(T,1),d+=C+".")}),d+=s,0!=i.length||0===s.length)return null;const _={};return _.domEventName=o,_.fullKey=d,_}static matchEventFullKeyCode(e,i){let o=_3[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(o=e.code,s="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),eI.forEach(d=>{d!==o&&(0,v3[d])(e)&&(s+=d+".")}),s+=o,s===i)}static eventCallback(e,i,o){return s=>{t.matchEventFullKeyCode(s,e)&&o.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(Le(Si))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();const nI=[{provide:rf,useValue:FT},{provide:RS,useValue:function x3(){sx.makeCurrent()},multi:!0},{provide:Si,useFactory:function C3(){return function kp(t){ph=t}(document),document},deps:[]}],D3=GS(lB,"browser",nI),iI=new vt(""),oI=[{provide:q_,useClass:class l3{addToWindow(n){li.getAngularTestability=(i,o=!0)=>{const s=n.findTestabilityInTree(i,o);if(null==s)throw new Error("Could not find testability for element.");return s},li.getAllAngularTestabilities=()=>n.getAllTestabilities(),li.getAllAngularRootElements=()=>n.getAllRootElements(),li.frameworkStabilizers||(li.frameworkStabilizers=[]),li.frameworkStabilizers.push(i=>{const o=li.getAllAngularTestabilities();let s=o.length,d=!1;const f=function(_){d=d||_,s--,0==s&&i(d)};o.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(n,e,i){return null==e?null:n.getTestability(e)??(i?zc().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:VS,useClass:I1,deps:[_n,M1,q_]},{provide:I1,useClass:I1,deps:[_n,M1,q_]}],rI=[{provide:Hm,useValue:"root"},{provide:Fp,useFactory:function w3(){return new Fp},deps:[]},{provide:u0,useClass:b3,multi:!0,deps:[Si,_n,rf]},{provide:u0,useClass:y3,multi:!0,deps:[Si]},{provide:cx,useClass:cx,deps:[h0,mg,cg,ZT]},{provide:$m,useExisting:cx},{provide:GT,useExisting:mg},{provide:mg,useClass:mg,deps:[Si]},{provide:h0,useClass:h0,deps:[u0,_n]},{provide:BT,useClass:c3,deps:[]},[]];let E3=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:cg,useValue:e.appId},{provide:jT,useExisting:cg},a3]}}}return t.\u0275fac=function(e){return new(e||t)(Le(iI,12))},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({providers:[...rI,...oI],imports:[Ut,cB]}),t})(),sI=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return t.\u0275fac=function(e){return new(e||t)(Le(Si))},t.\u0275prov=Ue({token:t,factory:function(e){let i=null;return i=e?new e:function T3(){return new sI(Le(Si))}(),i},providedIn:"root"}),t})();function Ft(...t){return xi(t,ui(t))}function Kd(t,n){return Nn(n)?ht(t,n,1):ht(t,1)}function uo(t,n){return Gn((e,i)=>{let o=0;e.subscribe(xn(i,s=>t.call(n,s,o++)&&i.next(s)))})}typeof window<"u"&&window;class p0{}class fx{}class Hc{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const o=e.slice(0,i),s=o.toLowerCase(),d=e.slice(i+1).trim();this.maybeSetNormalizedName(o,s),this.headers.has(s)?this.headers.get(s).push(d):this.headers.set(s,[d])}})}:()=>{this.headers=new Map,Object.keys(n).forEach(e=>{let i=n[e];const o=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(o,i),this.maybeSetNormalizedName(e,o))})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof Hc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new Hc;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Hc?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,e);const o=("a"===n.op?this.headers.get(e):void 0)||[];o.push(...i),this.headers.set(e,o);break;case"d":const s=n.value;if(s){let d=this.headers.get(e);if(!d)return;d=d.filter(f=>-1===s.indexOf(f)),0===d.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class P3{encodeKey(n){return cI(n)}encodeValue(n){return cI(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const N3=/%(\d[a-f0-9])/gi,F3={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function cI(t){return encodeURIComponent(t).replace(N3,(n,e)=>F3[e]??n)}function f0(t){return`${t}`}class rc{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new P3,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function R3(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(o=>{const s=o.indexOf("="),[d,f]=-1==s?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,s)),n.decodeValue(o.slice(s+1))],_=e.get(d)||[];_.push(f),e.set(d,_)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const i=n.fromObject[e],o=Array.isArray(i)?i.map(f0):[f0(i)];this.map.set(e,o)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(i=>{const o=n[i];Array.isArray(o)?o.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:o,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new rc({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(f0(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const o=i.indexOf(f0(n.value));-1!==o&&i.splice(o,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class L3{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function dI(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function uI(t){return typeof Blob<"u"&&t instanceof Blob}function hI(t){return typeof FormData<"u"&&t instanceof FormData}class gg{constructor(n,e,i,o){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function B3(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==i?i:null,s=o):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Hc),this.context||(this.context=new L3),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=e;else{const f=e.indexOf("?");this.urlWithParams=e+(-1===f?"?":f<e.length-1?"&":"")+d}}else this.params=new rc,this.urlWithParams=e}serializeBody(){return null===this.body?null:dI(this.body)||uI(this.body)||hI(this.body)||function z3(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof rc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||hI(this.body)?null:uI(this.body)?this.body.type||null:dI(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof rc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,i=n.url||this.url,o=n.responseType||this.responseType,s=void 0!==n.body?n.body:this.body,d=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,f=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let _=n.headers||this.headers,C=n.params||this.params;const T=n.context??this.context;return void 0!==n.setHeaders&&(_=Object.keys(n.setHeaders).reduce((P,z)=>P.set(z,n.setHeaders[z]),_)),n.setParams&&(C=Object.keys(n.setParams).reduce((P,z)=>P.set(z,n.setParams[z]),C)),new gg(e,i,s,{params:C,headers:_,context:T,reportProgress:f,responseType:o,withCredentials:d})}}var Po=(()=>((Po=Po||{})[Po.Sent=0]="Sent",Po[Po.UploadProgress=1]="UploadProgress",Po[Po.ResponseHeader=2]="ResponseHeader",Po[Po.DownloadProgress=3]="DownloadProgress",Po[Po.Response=4]="Response",Po[Po.User=5]="User",Po))();class mx{constructor(n,e=200,i="OK"){this.headers=n.headers||new Hc,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class gx extends mx{constructor(n={}){super(n),this.type=Po.ResponseHeader}clone(n={}){return new gx({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class m0 extends mx{constructor(n={}){super(n),this.type=Po.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new m0({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class pI extends mx{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function bx(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let _x=(()=>{class t{constructor(e){this.handler=e}request(e,i,o={}){let s;if(e instanceof gg)s=e;else{let _,C;_=o.headers instanceof Hc?o.headers:new Hc(o.headers),o.params&&(C=o.params instanceof rc?o.params:new rc({fromObject:o.params})),s=new gg(e,i,void 0!==o.body?o.body:null,{headers:_,context:o.context,params:C,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const d=Ft(s).pipe(Kd(_=>this.handler.handle(_)));if(e instanceof gg||"events"===o.observe)return d;const f=d.pipe(uo(_=>_ instanceof m0));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return f.pipe(ke(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return f.pipe(ke(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return f.pipe(ke(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return f.pipe(ke(_=>_.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new rc).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,o={}){return this.request("PATCH",e,bx(o,i))}post(e,i,o={}){return this.request("POST",e,bx(o,i))}put(e,i,o={}){return this.request("PUT",e,bx(o,i))}}return t.\u0275fac=function(e){return new(e||t)(Le(p0))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();function fI(t,n){return n(t)}function V3(t,n){return(e,i)=>n.intercept(e,{handle:o=>t(o,i)})}const mI=new vt("HTTP_INTERCEPTORS"),bg=new vt("HTTP_INTERCEPTOR_FNS");function H3(){let t=null;return(n,e)=>(null===t&&(t=(Qt(mI,{optional:!0})??[]).reduceRight(V3,fI)),t(n,e))}let gI=(()=>{class t extends p0{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null}handle(e){if(null===this.chain){const i=Array.from(new Set(this.injector.get(bg)));this.chain=i.reduceRight((o,s)=>function U3(t,n,e){return(i,o)=>e.runInContext(()=>n(i,s=>t(s,o)))}(o,s,this.injector),fI)}return this.chain(e,i=>this.backend.handle(i))}}return t.\u0275fac=function(e){return new(e||t)(Le(fx),Le(Ds))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();const W3=/^\)\]\}',?\n/;let _I=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new cn(i=>{const o=this.xhrFactory.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((G,ae)=>o.setRequestHeader(G,ae.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const G=e.detectContentTypeHeader();null!==G&&o.setRequestHeader("Content-Type",G)}if(e.responseType){const G=e.responseType.toLowerCase();o.responseType="json"!==G?G:"text"}const s=e.serializeBody();let d=null;const f=()=>{if(null!==d)return d;const G=o.statusText||"OK",ae=new Hc(o.getAllResponseHeaders()),be=function q3(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(o)||e.url;return d=new gx({headers:ae,status:o.status,statusText:G,url:be}),d},_=()=>{let{headers:G,status:ae,statusText:be,url:Ce}=f(),Te=null;204!==ae&&(Te=typeof o.response>"u"?o.responseText:o.response),0===ae&&(ae=Te?200:0);let $e=ae>=200&&ae<300;if("json"===e.responseType&&"string"==typeof Te){const Pe=Te;Te=Te.replace(W3,"");try{Te=""!==Te?JSON.parse(Te):null}catch(at){Te=Pe,$e&&($e=!1,Te={error:at,text:Te})}}$e?(i.next(new m0({body:Te,headers:G,status:ae,statusText:be,url:Ce||void 0})),i.complete()):i.error(new pI({error:Te,headers:G,status:ae,statusText:be,url:Ce||void 0}))},C=G=>{const{url:ae}=f(),be=new pI({error:G,status:o.status||0,statusText:o.statusText||"Unknown Error",url:ae||void 0});i.error(be)};let T=!1;const P=G=>{T||(i.next(f()),T=!0);let ae={type:Po.DownloadProgress,loaded:G.loaded};G.lengthComputable&&(ae.total=G.total),"text"===e.responseType&&o.responseText&&(ae.partialText=o.responseText),i.next(ae)},z=G=>{let ae={type:Po.UploadProgress,loaded:G.loaded};G.lengthComputable&&(ae.total=G.total),i.next(ae)};return o.addEventListener("load",_),o.addEventListener("error",C),o.addEventListener("timeout",C),o.addEventListener("abort",C),e.reportProgress&&(o.addEventListener("progress",P),null!==s&&o.upload&&o.upload.addEventListener("progress",z)),o.send(s),i.next({type:Po.Sent}),()=>{o.removeEventListener("error",C),o.removeEventListener("abort",C),o.removeEventListener("load",_),o.removeEventListener("timeout",C),e.reportProgress&&(o.removeEventListener("progress",P),null!==s&&o.upload&&o.upload.removeEventListener("progress",z)),o.readyState!==o.DONE&&o.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(Le(BT))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();const vx=new vt("XSRF_ENABLED"),vI=new vt("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),yI=new vt("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class xI{}let Y3=(()=>{class t{constructor(e,i,o){this.doc=e,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=ET(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(Le(Si),Le(rf),Le(vI))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();function Q3(t,n){const e=t.url.toLowerCase();if(!Qt(vx)||"GET"===t.method||"HEAD"===t.method||e.startsWith("http://")||e.startsWith("https://"))return n(t);const i=Qt(xI).getToken(),o=Qt(yI);return null!=i&&!t.headers.has(o)&&(t=t.clone({headers:t.headers.set(o,i)})),n(t)}var vo=(()=>((vo=vo||{})[vo.Interceptors=0]="Interceptors",vo[vo.LegacyInterceptors=1]="LegacyInterceptors",vo[vo.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",vo[vo.NoXsrfProtection=3]="NoXsrfProtection",vo[vo.JsonpSupport=4]="JsonpSupport",vo[vo.RequestsMadeViaParent=5]="RequestsMadeViaParent",vo))();function lf(t,n){return{\u0275kind:t,\u0275providers:n}}function X3(...t){const n=[_x,_I,gI,{provide:p0,useExisting:gI},{provide:fx,useExisting:_I},{provide:bg,useValue:Q3,multi:!0},{provide:vx,useValue:!0},{provide:xI,useClass:Y3}];for(const e of t)n.push(...e.\u0275providers);return function Er(t){return{\u0275providers:t}}(n)}const wI=new vt("LEGACY_INTERCEPTOR_FN");let CI=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({providers:[X3(lf(vo.LegacyInterceptors,[{provide:wI,useFactory:H3},{provide:bg,useExisting:wI,multi:!0}]))]}),t})();const{isArray:e4}=Array,{getPrototypeOf:t4,prototype:n4,keys:i4}=Object;function DI(t){if(1===t.length){const n=t[0];if(e4(n))return{args:n,keys:null};if(function o4(t){return t&&"object"==typeof t&&t4(t)===n4}(n)){const e=i4(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}const{isArray:r4}=Array;function yx(t){return ke(n=>function s4(t,n){return r4(n)?t(...n):t(n)}(t,n))}function EI(t,n){return t.reduce((e,i,o)=>(e[i]=n[o],e),{})}let SI=(()=>{class t{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(J(lo),J(qt))},t.\u0275dir=We({type:t}),t})(),wh=(()=>{class t extends SI{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=_i(t)))(i||t)}}(),t.\u0275dir=We({type:t,features:[si]}),t})();const $o=new vt("NgValueAccessor"),c4={provide:$o,useExisting:Nt(()=>Ch),multi:!0},u4=new vt("CompositionEventMode");let Ch=(()=>{class t extends SI{constructor(e,i,o){super(e,i),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function d4(){const t=zc()?zc().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(J(lo),J(qt),J(u4,8))},t.\u0275dir=We({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&Xe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[jn([c4]),si]}),t})();const h4=!1;function Yd(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function II(t){return null!=t&&"number"==typeof t.length}const kr=new vt("NgValidators"),Qd=new vt("NgAsyncValidators"),p4=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Go{static min(n){return function MI(t){return n=>{if(Yd(n.value)||Yd(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}(n)}static max(n){return function kI(t){return n=>{if(Yd(n.value)||Yd(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}(n)}static required(n){return function AI(t){return Yd(t.value)?{required:!0}:null}(n)}static requiredTrue(n){return function OI(t){return!0===t.value?null:{required:!0}}(n)}static email(n){return function PI(t){return Yd(t.value)||p4.test(t.value)?null:{email:!0}}(n)}static minLength(n){return function RI(t){return n=>Yd(n.value)||!II(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null}(n)}static maxLength(n){return function NI(t){return n=>II(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null}(n)}static pattern(n){return function FI(t){if(!t)return g0;let n,e;return"string"==typeof t?(e="","^"!==t.charAt(0)&&(e+="^"),e+=t,"$"!==t.charAt(t.length-1)&&(e+="$"),n=new RegExp(e)):(e=t.toString(),n=t),i=>{if(Yd(i.value))return null;const o=i.value;return n.test(o)?null:{pattern:{requiredPattern:e,actualValue:o}}}}(n)}static nullValidator(n){return null}static compose(n){return HI(n)}static composeAsync(n){return jI(n)}}function g0(t){return null}function LI(t){return null!=t}function BI(t){const n=Qm(t)?xi(t):t;if(h4&&!Qy(n)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof t&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new Ye(-1101,e)}return n}function zI(t){let n={};return t.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function VI(t,n){return n.map(e=>e(t))}function UI(t){return t.map(n=>function f4(t){return!t.validate}(n)?n:e=>n.validate(e))}function HI(t){if(!t)return null;const n=t.filter(LI);return 0==n.length?null:function(e){return zI(VI(e,n))}}function xx(t){return null!=t?HI(UI(t)):null}function jI(t){if(!t)return null;const n=t.filter(LI);return 0==n.length?null:function(e){return function a4(...t){const n=qn(t),{args:e,keys:i}=DI(t),o=new cn(s=>{const{length:d}=e;if(!d)return void s.complete();const f=new Array(d);let _=d,C=d;for(let T=0;T<d;T++){let P=!1;te(e[T]).subscribe(xn(s,z=>{P||(P=!0,C--),f[T]=z},()=>_--,void 0,()=>{(!_||!P)&&(C||s.next(i?EI(i,f):f),s.complete())}))}});return n?o.pipe(yx(n)):o}(VI(e,n).map(BI)).pipe(ke(zI))}}function wx(t){return null!=t?jI(UI(t)):null}function $I(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function GI(t){return t._rawValidators}function WI(t){return t._rawAsyncValidators}function Cx(t){return t?Array.isArray(t)?t:[t]:[]}function b0(t,n){return Array.isArray(t)?t.includes(n):t===n}function qI(t,n){const e=Cx(n);return Cx(t).forEach(o=>{b0(e,o)||e.push(o)}),e}function ZI(t,n){return Cx(n).filter(e=>!b0(t,e))}class KI{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=xx(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=wx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class ds extends KI{get formDirective(){return null}get path(){return null}}class Xd extends KI{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class YI{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let cf=(()=>{class t extends YI{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(J(Xd,2))},t.\u0275dir=We({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&ut("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[si]}),t})(),_g=(()=>{class t extends YI{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(J(ds,10))},t.\u0275dir=We({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&ut("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[si]}),t})();function QI(t,n){return t?`with name: '${n}'`:`at index: ${n}`}const Sx=!1,vg="VALID",v0="INVALID",df="PENDING",yg="DISABLED";function Tx(t){return(y0(t)?t.validators:t)||null}function Ix(t,n){return(y0(n)?n.asyncValidators:t)||null}function y0(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function XI(t,n,e){const i=t.controls;if(!(n?Object.keys(i):i).length)throw new Ye(1e3,Sx?function _4(t){return`\n    There are no form controls registered with this ${t?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(n):"");if(!i[e])throw new Ye(1001,Sx?function v4(t,n){return`Cannot find form control ${QI(t,n)}`}(n,e):"")}function JI(t,n,e){t._forEachChild((i,o)=>{if(void 0===e[o])throw new Ye(1002,Sx?function y4(t,n){return`Must supply a value for form control ${QI(t,n)}`}(n,o):"")})}class x0{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===vg}get invalid(){return this.status===v0}get pending(){return this.status==df}get disabled(){return this.status===yg}get enabled(){return this.status!==yg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(qI(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(qI(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(ZI(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(ZI(n,this._rawAsyncValidators))}hasValidator(n){return b0(this._rawValidators,n)}hasAsyncValidator(n){return b0(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=df,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=yg,this.errors=null,this._forEachChild(i=>{i.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=vg,this._forEachChild(i=>{i.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vg||this.status===df)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yg:vg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=df,this._hasOwnPendingAsyncValidator=!0;const e=BI(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,o)=>i&&i._find(o),this)}getError(n,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new Me,this.statusChanges=new Me}_calculateStatus(){return this._allControlsDisabled()?yg:this.errors?v0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(df)?df:this._anyControlsHaveStatus(v0)?v0:vg}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){y0(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function x4(t){return Array.isArray(t)?xx(t):t||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function w4(t){return Array.isArray(t)?wx(t):t||null}(this._rawAsyncValidators)}}class uf extends x0{constructor(n,e,i){super(Tx(e),Ix(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){JI(this,!0,n),Object.keys(n).forEach(i=>{XI(this,!0,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(i=>{const o=this.controls[i];o&&o.patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,o)=>{i.reset(n[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&n(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,o)=>((i.enabled||this.disabled)&&(e[o]=i.value),e))}_reduceChildren(n,e){let i=n;return this._forEachChild((o,s)=>{i=e(i,o,s)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}class eM extends uf{}const Dh=new vt("CallSetDisabledState",{providedIn:"root",factory:()=>xg}),xg="always";function w0(t,n){return[...n.path,t]}function wg(t,n,e=xg){Mx(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||"always"===e)&&n.valueAccessor.setDisabledState?.(t.disabled),function D4(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&tM(t,n)})}(t,n),function S4(t,n){const e=(i,o)=>{n.valueAccessor.writeValue(i),o&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function E4(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&tM(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function C4(t,n){if(n.valueAccessor.setDisabledState){const e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function C0(t,n,e=!0){const i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),E0(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function D0(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function Mx(t,n){const e=GI(t);null!==n.validator?t.setValidators($I(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const i=WI(t);null!==n.asyncValidator?t.setAsyncValidators($I(i,n.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const o=()=>t.updateValueAndValidity();D0(n._rawValidators,o),D0(n._rawAsyncValidators,o)}function E0(t,n){let e=!1;if(null!==t){if(null!==n.validator){const o=GI(t);if(Array.isArray(o)&&o.length>0){const s=o.filter(d=>d!==n.validator);s.length!==o.length&&(e=!0,t.setValidators(s))}}if(null!==n.asyncValidator){const o=WI(t);if(Array.isArray(o)&&o.length>0){const s=o.filter(d=>d!==n.asyncValidator);s.length!==o.length&&(e=!0,t.setAsyncValidators(s))}}}const i=()=>{};return D0(n._rawValidators,i),D0(n._rawAsyncValidators,i),e}function tM(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Ax(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}function Ox(t,n){if(!n)return null;let e,i,o;return Array.isArray(n),n.forEach(s=>{s.constructor===Ch?e=s:function M4(t){return Object.getPrototypeOf(t.constructor)===wh}(s)?i=s:o=s}),o||i||e||null}function oM(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function rM(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const hf=class extends x0{constructor(n=null,e,i){super(Tx(e),Ix(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),y0(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=rM(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){oM(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){oM(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){rM(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},R4={provide:Xd,useExisting:Nt(()=>Rx)},lM=(()=>Promise.resolve())();let Rx=(()=>{class t extends Xd{constructor(e,i,o,s,d,f){super(),this._changeDetectorRef=d,this.callSetDisabledState=f,this.control=new hf,this._registered=!1,this.update=new Me,this._parent=e,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=Ox(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Ax(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){wg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){lM.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,o=0!==i&&af(i);lM.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?w0(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(J(ds,9),J(kr,10),J(Qd,10),J($o,10),J(ko,8),J(Dh,8))},t.\u0275dir=We({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[jn([R4]),si,Mn]}),t})(),Dg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=We({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const N4={provide:$o,useExisting:Nt(()=>S0),multi:!0};let S0=(()=>{class t extends wh{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=_i(t)))(i||t)}}(),t.\u0275dir=We({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,i){1&e&&Xe("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[jn([N4]),si]}),t})(),cM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({}),t})();const Nx=new vt("NgModelWithFormControlWarning"),V4={provide:ds,useExisting:Nt(()=>Eh)};let Eh=(()=>{class t extends ds{constructor(e,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Me,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(E0(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return wg(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){C0(e.control||null,e,!1),function k4(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,function iM(t,n){t._syncPendingControls(),n.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,o=this.form.get(e.path);i!==o&&(C0(i||null,e),(t=>t instanceof hf)(o)&&(wg(o,e,this.callSetDisabledState),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);(function nM(t,n){Mx(t,n)})(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function T4(t,n){return E0(t,n)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Mx(this.form,this),this._oldForm&&E0(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(J(kr,10),J(Qd,10),J(Dh,8))},t.\u0275dir=We({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&Xe("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[jn([V4]),si,Mn]}),t})();const j4={provide:Xd,useExisting:Nt(()=>pf)};let pf=(()=>{class t extends Xd{set isDisabled(e){}constructor(e,i,o,s,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new Me,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=Ox(0,s)}ngOnChanges(e){this._added||this._setUpControl(),Ax(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return w0(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(J(ds,13),J(kr,10),J(Qd,10),J($o,10),J(Nx,8))},t.\u0275dir=We({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[jn([j4]),si,Mn]}),t})(),EM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[cM]}),t})();class SM extends x0{constructor(n,e,i){super(Tx(e),Ix(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[this._adjustIndex(n)]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,i={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(n,e={}){let i=this._adjustIndex(n);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,i={}){let o=this._adjustIndex(n);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),e&&(this.controls.splice(o,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){JI(this,!1,n),n.forEach((i,o)=>{XI(this,!1,o),this.at(o).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(n.forEach((i,o)=>{this.at(o)&&this.at(o).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((i,o)=>{i.reset(n[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((e,i)=>{n(e,i)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}}function TM(t){return!!t&&(void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn)}let T0=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new t;return e.useNonNullable=!0,e}group(e,i=null){const o=this._reduceControls(e);let s={};return TM(i)?s=i:null!==i&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new uf(o,s)}record(e,i=null){const o=this._reduceControls(e);return new eM(o,i)}control(e,i,o){let s={};return this.useNonNullable?(TM(i)?s=i:(s.validators=i,s.asyncValidators=o),new hf(e,{...s,nonNullable:!0})):new hf(e,i,o)}array(e,i,o){const s=e.map(d=>this._createControl(d));return new SM(s,i,o)}_reduceControls(e){const i={};return Object.keys(e).forEach(o=>{i[o]=this._createControl(e[o])}),i}_createControl(e){return e instanceof hf||e instanceof x0?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),IM=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Dh,useValue:e.callSetDisabledState??xg}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[EM]}),t})(),oz=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Nx,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Dh,useValue:e.callSetDisabledState??xg}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[EM]}),t})();class ur extends Ht{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}const I0=pu(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Eg(...t){const n=ui(t),e=qn(t),{args:i,keys:o}=DI(t);if(0===i.length)return xi([],n);const s=new cn(function rz(t,n,e=Ri){return i=>{MM(n,()=>{const{length:o}=t,s=new Array(o);let d=o,f=o;for(let _=0;_<o;_++)MM(n,()=>{const C=xi(t[_],n);let T=!1;C.subscribe(xn(i,P=>{s[_]=P,T||(T=!0,f--),f||i.next(e(s.slice()))},()=>{--d||i.complete()}))},i)},i)}}(i,n,o?d=>EI(o,d):Ri));return e?s.pipe(yx(e)):s}function MM(t,n,e){t?Ae(e,t,n):n()}function ff(...t){return function sz(){return pt(1)}()(xi(t,ui(t)))}function kM(t){return new cn(n=>{te(t()).subscribe(n)})}function Sg(t,n){const e=Nn(t)?t:()=>t,i=o=>o.error(e());return new cn(n?o=>n.schedule(i,0,o):i)}function Ux(){return Gn((t,n)=>{let e=null;t._refCount++;const i=xn(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const o=t._connection,s=e;e=null,o&&(!s||o===s)&&o.unsubscribe(),n.unsubscribe()});t.subscribe(i),i.closed||(e=t.connect())})}class AM extends cn{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,sa(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new di;const e=this.getSubject();n.add(this.source.subscribe(xn(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=di.EMPTY)}return n}refCount(){return Ux()(this)}}function Oa(t,n){return Gn((e,i)=>{let o=null,s=0,d=!1;const f=()=>d&&!o&&i.complete();e.subscribe(xn(i,_=>{o?.unsubscribe();let C=0;const T=s++;te(t(_,T)).subscribe(o=xn(i,P=>i.next(n?n(_,P,T,C++):P),()=>{o=null,f()}))},()=>{d=!0,f()}))})}function Qi(t){return t<=0?()=>gt:Gn((n,e)=>{let i=0;n.subscribe(xn(e,o=>{++i<=t&&(e.next(o),t<=i&&e.complete())}))})}function mf(...t){const n=ui(t);return Gn((e,i)=>{(n?ff(t,e,n):ff(t,e)).subscribe(i)})}function M0(t){return Gn((n,e)=>{let i=!1;n.subscribe(xn(e,o=>{i=!0,e.next(o)},()=>{i||e.next(t),e.complete()}))})}function OM(t=az){return Gn((n,e)=>{let i=!1;n.subscribe(xn(e,o=>{i=!0,e.next(o)},()=>i?e.complete():e.error(t())))})}function az(){return new I0}function jc(t,n){const e=arguments.length>=2;return i=>i.pipe(t?uo((o,s)=>t(o,s,i)):Ri,Qi(1),e?M0(n):OM(()=>new I0))}function Ro(t,n,e){const i=Nn(t)||n||e?{next:t,error:n,complete:e}:t;return i?Gn((o,s)=>{var d;null===(d=i.subscribe)||void 0===d||d.call(i);let f=!0;o.subscribe(xn(s,_=>{var C;null===(C=i.next)||void 0===C||C.call(i,_),s.next(_)},()=>{var _;f=!1,null===(_=i.complete)||void 0===_||_.call(i),s.complete()},_=>{var C;f=!1,null===(C=i.error)||void 0===C||C.call(i,_),s.error(_)},()=>{var _,C;f&&(null===(_=i.unsubscribe)||void 0===_||_.call(i)),null===(C=i.finalize)||void 0===C||C.call(i)}))}):Ri}function xl(t){return Gn((n,e)=>{let s,i=null,o=!1;i=n.subscribe(xn(e,void 0,void 0,d=>{s=te(t(d,xl(t)(n))),i?(i.unsubscribe(),i=null,s.subscribe(e)):o=!0})),o&&(i.unsubscribe(),i=null,s.subscribe(e))})}function PM(t,n){return Gn(function lz(t,n,e,i,o){return(s,d)=>{let f=e,_=n,C=0;s.subscribe(xn(d,T=>{const P=C++;_=f?t(_,T,P):(f=!0,T),i&&d.next(_)},o&&(()=>{f&&d.next(_),d.complete()})))}}(t,n,arguments.length>=2,!0))}function Hx(t){return t<=0?()=>gt:Gn((n,e)=>{let i=[];n.subscribe(xn(e,o=>{i.push(o),t<i.length&&i.shift()},()=>{for(const o of i)e.next(o);e.complete()},void 0,()=>{i=null}))})}function RM(t,n){const e=arguments.length>=2;return i=>i.pipe(t?uo((o,s)=>t(o,s,i)):Ri,Hx(1),e?M0(n):OM(()=>new I0))}function jx(t){return Gn((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}const hn="primary",Tg=Symbol("RouteTitle");class dz{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function gf(t){return new dz(t)}function uz(t,n,e){const i=e.path.split("/");if(i.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<t.length))return null;const o={};for(let s=0;s<i.length;s++){const d=i[s],f=t[s];if(d.startsWith(":"))o[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:t.slice(0,i.length),posParams:o}}function sc(t,n){const e=t?Object.keys(t):void 0,i=n?Object.keys(n):void 0;if(!e||!i||e.length!=i.length)return!1;let o;for(let s=0;s<e.length;s++)if(o=e[s],!FM(t[o],n[o]))return!1;return!0}function FM(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),i=[...n].sort();return e.every((o,s)=>i[s]===o)}return t===n}function LM(t){return Array.prototype.concat.apply([],t)}function BM(t){return t.length>0?t[t.length-1]:null}function Ar(t,n){for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function Jd(t){return Qy(t)?t:Qm(t)?xi(Promise.resolve(t)):Ft(t)}const k0=!1,pz={exact:function UM(t,n,e){if(!Th(t.segments,n.segments)||!A0(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!UM(t.children[i],n.children[i],e))return!1;return!0},subset:HM},zM={exact:function fz(t,n){return sc(t,n)},subset:function mz(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>FM(t[e],n[e]))},ignored:()=>!0};function VM(t,n,e){return pz[e.paths](t.root,n.root,e.matrixParams)&&zM[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function HM(t,n,e){return jM(t,n,n.segments,e)}function jM(t,n,e,i){if(t.segments.length>e.length){const o=t.segments.slice(0,e.length);return!(!Th(o,e)||n.hasChildren()||!A0(o,e,i))}if(t.segments.length===e.length){if(!Th(t.segments,e)||!A0(t.segments,e,i))return!1;for(const o in n.children)if(!t.children[o]||!HM(t.children[o],n.children[o],i))return!1;return!0}{const o=e.slice(0,t.segments.length),s=e.slice(t.segments.length);return!!(Th(t.segments,o)&&A0(t.segments,o,i)&&t.children[hn])&&jM(t.children[hn],n,s,i)}}function A0(t,n,e){return n.every((i,o)=>zM[e](t[o].parameters,i.parameters))}class eu{constructor(n=new Tn([],{}),e={},i=null){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gf(this.queryParams)),this._queryParamMap}toString(){return _z.serialize(this)}}class Tn{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Ar(e,(i,o)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return O0(this)}}class Ig{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=gf(this.parameters)),this._parameterMap}toString(){return WM(this)}}function Th(t,n){return t.length===n.length&&t.every((e,i)=>e.path===n[i].path)}let Mg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:function(){return new $x},providedIn:"root"}),t})();class $x{parse(n){const e=new Tz(n);return new eu(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${kg(n.root,!0)}`,i=function xz(t){const n=Object.keys(t).map(e=>{const i=t[e];return Array.isArray(i)?i.map(o=>`${P0(e)}=${P0(o)}`).join("&"):`${P0(e)}=${P0(i)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${i}${"string"==typeof n.fragment?`#${function vz(t){return encodeURI(t)}(n.fragment)}`:""}`}}const _z=new $x;function O0(t){return t.segments.map(n=>WM(n)).join("/")}function kg(t,n){if(!t.hasChildren())return O0(t);if(n){const e=t.children[hn]?kg(t.children[hn],!1):"",i=[];return Ar(t.children,(o,s)=>{s!==hn&&i.push(`${s}:${kg(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function bz(t,n){let e=[];return Ar(t.children,(i,o)=>{o===hn&&(e=e.concat(n(i,o)))}),Ar(t.children,(i,o)=>{o!==hn&&(e=e.concat(n(i,o)))}),e}(t,(i,o)=>o===hn?[kg(t.children[hn],!1)]:[`${o}:${kg(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[hn]?`${O0(t)}/${e[0]}`:`${O0(t)}/(${e.join("//")})`}}function $M(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function P0(t){return $M(t).replace(/%3B/gi,";")}function Gx(t){return $M(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function R0(t){return decodeURIComponent(t)}function GM(t){return R0(t.replace(/\+/g,"%20"))}function WM(t){return`${Gx(t.path)}${function yz(t){return Object.keys(t).map(n=>`;${Gx(n)}=${Gx(t[n])}`).join("")}(t.parameters)}`}const wz=/^[^\/()?;=#]+/;function N0(t){const n=t.match(wz);return n?n[0]:""}const Cz=/^[^=?&#]+/,Ez=/^[^&#]+/;class Tz{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tn([],{}):new Tn([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[hn]=new Tn(n,e)),i}parseSegment(){const n=N0(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Ye(4009,k0);return this.capture(n),new Ig(R0(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=N0(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=N0(this.remaining);o&&(i=o,this.capture(i))}n[R0(e)]=R0(i)}parseQueryParam(n){const e=function Dz(t){const n=t.match(Cz);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const d=function Sz(t){const n=t.match(Ez);return n?n[0]:""}(this.remaining);d&&(i=d,this.capture(i))}const o=GM(e),s=GM(i);if(n.hasOwnProperty(o)){let d=n[o];Array.isArray(d)||(d=[d],n[o]=d),d.push(s)}else n[o]=s}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=N0(this.remaining),o=this.remaining[i.length];if("/"!==o&&")"!==o&&";"!==o)throw new Ye(4010,k0);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):n&&(s=hn);const d=this.parseChildren();e[s]=1===Object.keys(d).length?d[hn]:new Tn([],d),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Ye(4011,k0)}}function Wx(t){return t.segments.length>0?new Tn([],{[hn]:t}):t}function F0(t){const n={};for(const i of Object.keys(t.children)){const s=F0(t.children[i]);(s.segments.length>0||s.hasChildren())&&(n[i]=s)}return function Iz(t){if(1===t.numberOfChildren&&t.children[hn]){const n=t.children[hn];return new Tn(t.segments.concat(n.segments),n.children)}return t}(new Tn(t.segments,n))}function Ih(t){return t instanceof eu}const qx=!1;function Mz(t,n,e,i,o){if(0===e.length)return bf(n.root,n.root,n.root,i,o);const s=function QM(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new YM(!0,0,t);let n=0,e=!1;const i=t.reduce((o,s,d)=>{if("object"==typeof s&&null!=s){if(s.outlets){const f={};return Ar(s.outlets,(_,C)=>{f[C]="string"==typeof _?_.split("/"):_}),[...o,{outlets:f}]}if(s.segmentPath)return[...o,s.segmentPath]}return"string"!=typeof s?[...o,s]:0===d?(s.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?e=!0:".."===f?n++:""!=f&&o.push(f))}),o):[...o,s]},[]);return new YM(e,n,i)}(e);return s.toRoot()?bf(n.root,n.root,new Tn([],{}),i,o):function d(_){const C=function Az(t,n,e,i){if(t.isAbsolute)return new _f(n.root,!0,0);if(-1===i)return new _f(e,e===n.root,0);return function XM(t,n,e){let i=t,o=n,s=e;for(;s>o;){if(s-=o,i=i.parent,!i)throw new Ye(4005,qx&&"Invalid number of '../'");o=i.segments.length}return new _f(i,!1,o-s)}(e,i+(Ag(t.commands[0])?0:1),t.numberOfDoubleDots)}(s,n,t.snapshot?._urlSegment,_),T=C.processChildren?vf(C.segmentGroup,C.index,s.commands):Zx(C.segmentGroup,C.index,s.commands);return bf(n.root,C.segmentGroup,T,i,o)}(t.snapshot?._lastPathIndex)}function Ag(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Og(t){return"object"==typeof t&&null!=t&&t.outlets}function bf(t,n,e,i,o){let d,s={};i&&Ar(i,(_,C)=>{s[C]=Array.isArray(_)?_.map(T=>`${T}`):`${_}`}),d=t===n?e:KM(t,n,e);const f=Wx(F0(d));return new eu(f,s,o)}function KM(t,n,e){const i={};return Ar(t.children,(o,s)=>{i[s]=o===n?e:KM(o,n,e)}),new Tn(t.segments,i)}class YM{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&Ag(i[0]))throw new Ye(4003,qx&&"Root segment cannot have matrix parameters");const o=i.find(Og);if(o&&o!==BM(i))throw new Ye(4004,qx&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class _f{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function Zx(t,n,e){if(t||(t=new Tn([],{})),0===t.segments.length&&t.hasChildren())return vf(t,n,e);const i=function Pz(t,n,e){let i=0,o=n;const s={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(i>=e.length)return s;const d=t.segments[o],f=e[i];if(Og(f))break;const _=`${f}`,C=i<e.length-1?e[i+1]:null;if(o>0&&void 0===_)break;if(_&&C&&"object"==typeof C&&void 0===C.outlets){if(!e2(_,C,d))return s;i+=2}else{if(!e2(_,{},d))return s;i++}o++}return{match:!0,pathIndex:o,commandIndex:i}}(t,n,e),o=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const s=new Tn(t.segments.slice(0,i.pathIndex),{});return s.children[hn]=new Tn(t.segments.slice(i.pathIndex),t.children),vf(s,0,o)}return i.match&&0===o.length?new Tn(t.segments,{}):i.match&&!t.hasChildren()?Kx(t,n,e):i.match?vf(t,0,o):Kx(t,n,e)}function vf(t,n,e){if(0===e.length)return new Tn(t.segments,{});{const i=function Oz(t){return Og(t[0])?t[0].outlets:{[hn]:t}}(e),o={};if(!i[hn]&&t.children[hn]&&1===t.numberOfChildren&&0===t.children[hn].segments.length){const s=vf(t.children[hn],n,e);return new Tn(t.segments,s.children)}return Ar(i,(s,d)=>{"string"==typeof s&&(s=[s]),null!==s&&(o[d]=Zx(t.children[d],n,s))}),Ar(t.children,(s,d)=>{void 0===i[d]&&(o[d]=s)}),new Tn(t.segments,o)}}function Kx(t,n,e){const i=t.segments.slice(0,n);let o=0;for(;o<e.length;){const s=e[o];if(Og(s)){const _=Rz(s.outlets);return new Tn(i,_)}if(0===o&&Ag(e[0])){i.push(new Ig(t.segments[n].path,JM(e[0]))),o++;continue}const d=Og(s)?s.outlets[hn]:`${s}`,f=o<e.length-1?e[o+1]:null;d&&f&&Ag(f)?(i.push(new Ig(d,JM(f))),o+=2):(i.push(new Ig(d,{})),o++)}return new Tn(i,{})}function Rz(t){const n={};return Ar(t,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(n[i]=Kx(new Tn([],{}),0,e))}),n}function JM(t){const n={};return Ar(t,(e,i)=>n[i]=`${e}`),n}function e2(t,n,e){return t==e.path&&sc(n,e.parameters)}const Pg="imperative";class ac{constructor(n,e){this.id=n,this.url=e}}class Yx extends ac{constructor(n,e,i="imperative",o=null){super(n,e),this.type=0,this.navigationTrigger=i,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class tu extends ac{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class L0 extends ac{constructor(n,e,i,o){super(n,e),this.reason=i,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class B0 extends ac{constructor(n,e,i,o){super(n,e),this.reason=i,this.code=o,this.type=16}}class Qx extends ac{constructor(n,e,i,o){super(n,e),this.error=i,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Nz extends ac{constructor(n,e,i,o){super(n,e),this.urlAfterRedirects=i,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fz extends ac{constructor(n,e,i,o){super(n,e),this.urlAfterRedirects=i,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lz extends ac{constructor(n,e,i,o,s){super(n,e),this.urlAfterRedirects=i,this.state=o,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Bz extends ac{constructor(n,e,i,o){super(n,e),this.urlAfterRedirects=i,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zz extends ac{constructor(n,e,i,o){super(n,e),this.urlAfterRedirects=i,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vz{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Uz{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Hz{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jz{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $z{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gz{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t2{constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Zz=(()=>{class t{createUrlTree(e,i,o,s,d,f){return Mz(e||i.root,o,s,d,f)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),Yz=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:function(n){return Zz.\u0275fac(n)},providedIn:"root"}),t})();class n2{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=Xx(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=Xx(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=Jx(n,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==n)}pathFromRoot(n){return Jx(n,this._root).map(e=>e.value)}}function Xx(t,n){if(t===n.value)return n;for(const e of n.children){const i=Xx(t,e);if(i)return i}return null}function Jx(t,n){if(t===n.value)return[n];for(const e of n.children){const i=Jx(t,e);if(i.length)return i.unshift(n),i}return[]}class $c{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function yf(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class o2 extends n2{constructor(n,e){super(n),this.snapshot=e,ew(this,n)}toString(){return this.snapshot.toString()}}function r2(t,n){const e=function Qz(t,n){const d=new z0([],{},{},"",{},hn,n,null,t.root,-1,{});return new a2("",new $c(d,[]))}(t,n),i=new ur([new Ig("",{})]),o=new ur({}),s=new ur({}),d=new ur({}),f=new ur(""),_=new nu(i,o,d,f,s,hn,n,e.root);return _.snapshot=e.root,new o2(new $c(_,[]),e)}class nu{constructor(n,e,i,o,s,d,f,_){this.url=n,this.params=e,this.queryParams=i,this.fragment=o,this.data=s,this.outlet=d,this.component=f,this.title=this.data?.pipe(ke(C=>C[Tg]))??Ft(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ke(n=>gf(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ke(n=>gf(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function s2(t,n="emptyOnly"){const e=t.pathFromRoot;let i=0;if("always"!==n)for(i=e.length-1;i>=1;){const o=e[i],s=e[i-1];if(o.routeConfig&&""===o.routeConfig.path)i--;else{if(s.component)break;i--}}return function Xz(t){return t.reduce((n,e)=>({params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class z0{get title(){return this.data?.[Tg]}constructor(n,e,i,o,s,d,f,_,C,T,P){this.url=n,this.params=e,this.queryParams=i,this.fragment=o,this.data=s,this.outlet=d,this.component=f,this.routeConfig=_,this._urlSegment=C,this._lastPathIndex=T,this._resolve=P}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class a2 extends n2{constructor(n,e){super(e),this.url=n,ew(this,e)}toString(){return l2(this._root)}}function ew(t,n){n.value._routerState=t,n.children.forEach(e=>ew(t,e))}function l2(t){const n=t.children.length>0?` { ${t.children.map(l2).join(", ")} } `:"";return`${t.value}${n}`}function tw(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,sc(n.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),n.fragment!==e.fragment&&t.fragment.next(e.fragment),sc(n.params,e.params)||t.params.next(e.params),function hz(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!sc(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.url.next(e.url),sc(n.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function nw(t,n){const e=sc(t.params,n.params)&&function gz(t,n){return Th(t,n)&&t.every((e,i)=>sc(e.parameters,n[i].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||nw(t.parent,n.parent))}function Rg(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const o=function eV(t,n,e){return n.children.map(i=>{for(const o of e.children)if(t.shouldReuseRoute(i.value,o.value.snapshot))return Rg(t,i,o);return Rg(t,i)})}(t,n,e);return new $c(i,o)}{if(t.shouldAttach(n.value)){const s=t.retrieve(n.value);if(null!==s){const d=s.route;return d.value._futureSnapshot=n.value,d.children=n.children.map(f=>Rg(t,f)),d}}const i=function tV(t){return new nu(new ur(t.url),new ur(t.params),new ur(t.queryParams),new ur(t.fragment),new ur(t.data),t.outlet,t.component,t)}(n.value),o=n.children.map(s=>Rg(t,s));return new $c(i,o)}}const iw="ngNavigationCancelingError";function c2(t,n){const{redirectTo:e,navigationBehaviorOptions:i}=Ih(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,o=d2(!1,0,n);return o.url=e,o.navigationBehaviorOptions=i,o}function d2(t,n,e){const i=new Error("NavigationCancelingError: "+(t||""));return i[iw]=!0,i.cancellationCode=n,e&&(i.url=e),i}function u2(t){return h2(t)&&Ih(t.url)}function h2(t){return t&&t[iw]}class nV{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ng,this.attachRef=null}}let Ng=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const o=this.getOrCreateContext(e);o.outlet=i,this.contexts.set(e,o)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new nV,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const V0=!1;let ow=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=hn,this.activateEvents=new Me,this.deactivateEvents=new Me,this.attachEvents=new Me,this.detachEvents=new Me,this.parentContexts=Qt(Ng),this.location=Qt(Ma),this.changeDetector=Qt(ko),this.environmentInjector=Qt(Ds)}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:o}=e.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ye(4012,V0);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ye(4012,V0);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ye(4012,V0);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Ye(4013,V0);this._activatedRoute=e;const o=this.location,d=e.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,_=new iV(e,f,o.injector);if(i&&function oV(t){return!!t.resolveComponentFactory}(i)){const C=i.resolveComponentFactory(d);this.activated=o.createComponent(C,o.length,_)}else this.activated=o.createComponent(d,{index:o.length,injector:_,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=We({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Mn]}),t})();class iV{constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===nu?this.route:n===Ng?this.childContexts:this.parent.get(n,e)}}let rw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Wt({type:t,selectors:[["ng-component"]],standalone:!0,features:[Mo],decls:1,vars:0,template:function(e,i){1&e&&lt(0,"router-outlet")},dependencies:[ow],encapsulation:2}),t})();function p2(t,n){return t.providers&&!t._injector&&(t._injector=V_(t.providers,n,`Route: ${t.path}`)),t._injector??n}function aw(t){const n=t.children&&t.children.map(aw),e=n?{...t,children:n}:{...t};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==hn&&(e.component=rw),e}function Pa(t){return t.outlet||hn}function f2(t,n){const e=t.filter(i=>Pa(i)===n);return e.push(...t.filter(i=>Pa(i)!==n)),e}function Fg(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class cV{constructor(n,e,i,o){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=o}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),tw(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const o=yf(e);n.children.forEach(s=>{const d=s.value.outlet;this.deactivateRoutes(s,o[d],i),delete o[d]}),Ar(o,(s,d)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(n,e,i){const o=n.value,s=e?e.value:null;if(o===s)if(o.component){const d=i.getContext(o.outlet);d&&this.deactivateChildRoutes(n,e,d.children)}else this.deactivateChildRoutes(n,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet),o=i&&n.value.component?i.children:e,s=yf(n);for(const d of Object.keys(s))this.deactivateRouteAndItsChildren(s[d],o);if(i&&i.outlet){const d=i.outlet.detach(),f=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:d,route:n,contexts:f})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),o=i&&n.value.component?i.children:e,s=yf(n);for(const d of Object.keys(s))this.deactivateRouteAndItsChildren(s[d],o);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(n,e,i){const o=yf(e);n.children.forEach(s=>{this.activateRoutes(s,o[s.value.outlet],i),this.forwardEvent(new Gz(s.value.snapshot))}),n.children.length&&this.forwardEvent(new jz(n.value.snapshot))}activateRoutes(n,e,i){const o=n.value,s=e?e.value:null;if(tw(o),o===s)if(o.component){const d=i.getOrCreateContext(o.outlet);this.activateChildRoutes(n,e,d.children)}else this.activateChildRoutes(n,e,i);else if(o.component){const d=i.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const f=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),tw(f.route.value),this.activateChildRoutes(n,null,d.children)}else{const f=Fg(o.snapshot),_=f?.get(Rp)??null;d.attachRef=null,d.route=o,d.resolver=_,d.injector=f,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(n,null,d.children)}}else this.activateChildRoutes(n,null,i)}}class m2{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class U0{constructor(n,e){this.component=n,this.route=e}}function dV(t,n,e){const i=t._root;return Lg(i,n?n._root:null,e,[i.value])}function xf(t,n){const e=Symbol(),i=n.get(t,e);return i===e?"function"!=typeof t||function wu(t){return null!==Wa(t)}(t)?n.get(t):t:i}function Lg(t,n,e,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=yf(n);return t.children.forEach(d=>{(function hV(t,n,e,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,d=n?n.value:null,f=e?e.getContext(t.value.outlet):null;if(d&&s.routeConfig===d.routeConfig){const _=function pV(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!Th(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Th(t.url,n.url)||!sc(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nw(t,n)||!sc(t.queryParams,n.queryParams);default:return!nw(t,n)}}(d,s,s.routeConfig.runGuardsAndResolvers);_?o.canActivateChecks.push(new m2(i)):(s.data=d.data,s._resolvedData=d._resolvedData),Lg(t,n,s.component?f?f.children:null:e,i,o),_&&f&&f.outlet&&f.outlet.isActivated&&o.canDeactivateChecks.push(new U0(f.outlet.component,d))}else d&&Bg(n,f,o),o.canActivateChecks.push(new m2(i)),Lg(t,null,s.component?f?f.children:null:e,i,o)})(d,s[d.value.outlet],e,i.concat([d.value]),o),delete s[d.value.outlet]}),Ar(s,(d,f)=>Bg(d,e.getContext(f),o)),o}function Bg(t,n,e){const i=yf(t),o=t.value;Ar(i,(s,d)=>{Bg(s,o.component?n?n.children.getContext(d):null:n,e)}),e.canDeactivateChecks.push(new U0(o.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,o))}function zg(t){return"function"==typeof t}function lw(t){return t instanceof I0||"EmptyError"===t?.name}const H0=Symbol("INITIAL_VALUE");function wf(){return Oa(t=>Eg(t.map(n=>n.pipe(Qi(1),mf(H0)))).pipe(ke(n=>{for(const e of n)if(!0!==e){if(e===H0)return H0;if(!1===e||e instanceof eu)return e}return!0}),uo(n=>n!==H0),Qi(1)))}function g2(t){return function La(...t){return Os(t)}(Ro(n=>{if(Ih(n))throw c2(0,n)}),ke(n=>!0===n))}const cw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function b2(t,n,e,i,o){const s=dw(t,n,e);return s.matched?function kV(t,n,e,i){const o=n.canMatch;return o&&0!==o.length?Ft(o.map(d=>{const f=xf(d,t);return Jd(function vV(t){return t&&zg(t.canMatch)}(f)?f.canMatch(n,e):t.runInContext(()=>f(n,e)))})).pipe(wf(),g2()):Ft(!0)}(i=p2(n,i),n,e).pipe(ke(d=>!0===d?s:{...cw})):Ft(s)}function dw(t,n,e){if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?{...cw}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(n.matcher||uz)(e,t,n);if(!o)return{...cw};const s={};Ar(o.posParams,(f,_)=>{s[_]=f.path});const d=o.consumed.length>0?{...s,...o.consumed[o.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function j0(t,n,e,i){if(e.length>0&&function PV(t,n,e){return e.some(i=>$0(t,n,i)&&Pa(i)!==hn)}(t,e,i)){const s=new Tn(n,function OV(t,n,e,i){const o={};o[hn]=i,i._sourceSegment=t,i._segmentIndexShift=n.length;for(const s of e)if(""===s.path&&Pa(s)!==hn){const d=new Tn([],{});d._sourceSegment=t,d._segmentIndexShift=n.length,o[Pa(s)]=d}return o}(t,n,i,new Tn(e,t.children)));return s._sourceSegment=t,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:[]}}if(0===e.length&&function RV(t,n,e){return e.some(i=>$0(t,n,i))}(t,e,i)){const s=new Tn(t.segments,function AV(t,n,e,i,o){const s={};for(const d of i)if($0(t,e,d)&&!o[Pa(d)]){const f=new Tn([],{});f._sourceSegment=t,f._segmentIndexShift=n.length,s[Pa(d)]=f}return{...o,...s}}(t,n,e,i,t.children));return s._sourceSegment=t,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:e}}const o=new Tn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:e}}function $0(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}function _2(t,n,e,i){return!!(Pa(t)===i||i!==hn&&$0(n,e,t))&&("**"===t.path||dw(n,t,e).matched)}function v2(t,n,e){return 0===n.length&&!t.children[e]}const G0=!1;class W0{constructor(n){this.segmentGroup=n||null}}class y2{constructor(n){this.urlTree=n}}function Vg(t){return Sg(new W0(t))}function x2(t){return Sg(new y2(t))}class BV{constructor(n,e,i,o,s){this.injector=n,this.configLoader=e,this.urlSerializer=i,this.urlTree=o,this.config=s,this.allowRedirects=!0}apply(){const n=j0(this.urlTree.root,[],[],this.config).segmentGroup,e=new Tn(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,e,hn).pipe(ke(s=>this.createUrlTree(F0(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(xl(s=>{if(s instanceof y2)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof W0?this.noMatchError(s):s}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,hn).pipe(ke(o=>this.createUrlTree(F0(o),n.queryParams,n.fragment))).pipe(xl(o=>{throw o instanceof W0?this.noMatchError(o):o}))}noMatchError(n){return new Ye(4002,G0)}createUrlTree(n,e,i){const o=Wx(n);return new eu(o,e,i)}expandSegmentGroup(n,e,i,o){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(n,e,i).pipe(ke(s=>new Tn([],s))):this.expandSegment(n,i,e,i.segments,o,!0)}expandChildren(n,e,i){const o=[];for(const s of Object.keys(i.children))"primary"===s?o.unshift(s):o.push(s);return xi(o).pipe(Kd(s=>{const d=i.children[s],f=f2(e,s);return this.expandSegmentGroup(n,f,d,s).pipe(ke(_=>({segment:_,outlet:s})))}),PM((s,d)=>(s[d.outlet]=d.segment,s),{}),RM())}expandSegment(n,e,i,o,s,d){return xi(i).pipe(Kd(f=>this.expandSegmentAgainstRoute(n,e,i,f,o,s,d).pipe(xl(C=>{if(C instanceof W0)return Ft(null);throw C}))),jc(f=>!!f),xl((f,_)=>{if(lw(f))return v2(e,o,s)?Ft(new Tn([],{})):Vg(e);throw f}))}expandSegmentAgainstRoute(n,e,i,o,s,d,f){return _2(o,e,s,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(n,e,o,s,d):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,e,i,o,s,d):Vg(e):Vg(e)}expandSegmentAgainstRouteUsingRedirect(n,e,i,o,s,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,o,s,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,i,o){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?x2(s):this.lineralizeSegments(i,s).pipe(ht(d=>{const f=new Tn(d,{});return this.expandSegment(n,f,e,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,o,s,d){const{matched:f,consumedSegments:_,remainingSegments:C,positionalParamSegments:T}=dw(e,o,s);if(!f)return Vg(e);const P=this.applyRedirectCommands(_,o.redirectTo,T);return o.redirectTo.startsWith("/")?x2(P):this.lineralizeSegments(o,P).pipe(ht(z=>this.expandSegment(n,e,i,z.concat(C),d,!1)))}matchSegmentAgainstRoute(n,e,i,o,s){return"**"===i.path?(n=p2(i,n),i.loadChildren?(i._loadedRoutes?Ft({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(n,i)).pipe(ke(f=>(i._loadedRoutes=f.routes,i._loadedInjector=f.injector,new Tn(o,{})))):Ft(new Tn(o,{}))):b2(e,i,o,n).pipe(Oa(({matched:d,consumedSegments:f,remainingSegments:_})=>d?this.getChildConfig(n=i._injector??n,i,o).pipe(ht(T=>{const P=T.injector??n,z=T.routes,{segmentGroup:G,slicedSegments:ae}=j0(e,f,_,z),be=new Tn(G.segments,G.children);if(0===ae.length&&be.hasChildren())return this.expandChildren(P,z,be).pipe(ke(Pe=>new Tn(f,Pe)));if(0===z.length&&0===ae.length)return Ft(new Tn(f,{}));const Ce=Pa(i)===s;return this.expandSegment(P,be,z,ae,Ce?hn:s,!0).pipe(ke($e=>new Tn(f.concat($e.segments),$e.children)))})):Vg(e)))}getChildConfig(n,e,i){return e.children?Ft({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?Ft({routes:e._loadedRoutes,injector:e._loadedInjector}):function MV(t,n,e,i){const o=n.canLoad;return void 0===o||0===o.length?Ft(!0):Ft(o.map(d=>{const f=xf(d,t);return Jd(function mV(t){return t&&zg(t.canLoad)}(f)?f.canLoad(n,e):t.runInContext(()=>f(n,e)))})).pipe(wf(),g2())}(n,e,i).pipe(ht(o=>o?this.configLoader.loadChildren(n,e).pipe(Ro(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function FV(t){return Sg(d2(G0,3))}())):Ft({routes:[],injector:n})}lineralizeSegments(n,e){let i=[],o=e.root;for(;;){if(i=i.concat(o.segments),0===o.numberOfChildren)return Ft(i);if(o.numberOfChildren>1||!o.children[hn])return n.redirectTo,Sg(new Ye(4e3,G0));o=o.children[hn]}}applyRedirectCommands(n,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,i)}applyRedirectCreateUrlTree(n,e,i,o){const s=this.createSegmentGroup(n,e.root,i,o);return new eu(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return Ar(n,(o,s)=>{if("string"==typeof o&&o.startsWith(":")){const f=o.substring(1);i[s]=e[f]}else i[s]=o}),i}createSegmentGroup(n,e,i,o){const s=this.createSegments(n,e.segments,i,o);let d={};return Ar(e.children,(f,_)=>{d[_]=this.createSegmentGroup(n,f,i,o)}),new Tn(s,d)}createSegments(n,e,i,o){return e.map(s=>s.path.startsWith(":")?this.findPosParam(n,s,o):this.findOrReturn(s,i))}findPosParam(n,e,i){const o=i[e.path.substring(1)];if(!o)throw new Ye(4001,G0);return o}findOrReturn(n,e){let i=0;for(const o of e){if(o.path===n.path)return e.splice(i),o;i++}return n}}class VV{}class jV{constructor(n,e,i,o,s,d,f){this.injector=n,this.rootComponentType=e,this.config=i,this.urlTree=o,this.url=s,this.paramsInheritanceStrategy=d,this.urlSerializer=f}recognize(){const n=j0(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,hn).pipe(ke(e=>{if(null===e)return null;const i=new z0([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},hn,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new $c(i,e),s=new a2(this.url,o);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(n){const e=n.value,i=s2(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),n.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(n,e,i,o){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,e,i):this.processSegment(n,e,i,i.segments,o)}processChildren(n,e,i){return xi(Object.keys(i.children)).pipe(Kd(o=>{const s=i.children[o],d=f2(e,o);return this.processSegmentGroup(n,d,s,o)}),PM((o,s)=>o&&s?(o.push(...s),o):null),function cz(t,n=!1){return Gn((e,i)=>{let o=0;e.subscribe(xn(i,s=>{const d=t(s,o++);(d||n)&&i.next(s),!d&&i.complete()}))})}(o=>null!==o),M0(null),RM(),ke(o=>{if(null===o)return null;const s=C2(o);return function $V(t){t.sort((n,e)=>n.value.outlet===hn?-1:e.value.outlet===hn?1:n.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(n,e,i,o,s){return xi(e).pipe(Kd(d=>this.processSegmentAgainstRoute(d._injector??n,d,i,o,s)),jc(d=>!!d),xl(d=>{if(lw(d))return v2(i,o,s)?Ft([]):Ft(null);throw d}))}processSegmentAgainstRoute(n,e,i,o,s){if(e.redirectTo||!_2(e,i,o,s))return Ft(null);let d;if("**"===e.path){const f=o.length>0?BM(o).parameters:{},_=E2(i)+o.length;d=Ft({snapshot:new z0(o,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,S2(e),Pa(e),e.component??e._loadedComponent??null,e,D2(i),_,T2(e)),consumedSegments:[],remainingSegments:[]})}else d=b2(i,e,o,n).pipe(ke(({matched:f,consumedSegments:_,remainingSegments:C,parameters:T})=>{if(!f)return null;const P=E2(i)+_.length;return{snapshot:new z0(_,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,S2(e),Pa(e),e.component??e._loadedComponent??null,e,D2(i),P,T2(e)),consumedSegments:_,remainingSegments:C}}));return d.pipe(Oa(f=>{if(null===f)return Ft(null);const{snapshot:_,consumedSegments:C,remainingSegments:T}=f;n=e._injector??n;const P=e._loadedInjector??n,z=function GV(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(e),{segmentGroup:G,slicedSegments:ae}=j0(i,C,T,z.filter(Ce=>void 0===Ce.redirectTo));if(0===ae.length&&G.hasChildren())return this.processChildren(P,z,G).pipe(ke(Ce=>null===Ce?null:[new $c(_,Ce)]));if(0===z.length&&0===ae.length)return Ft([new $c(_,[])]);const be=Pa(e)===s;return this.processSegment(P,z,G,ae,be?hn:s).pipe(ke(Ce=>null===Ce?null:[new $c(_,Ce)]))}))}}function WV(t){const n=t.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function C2(t){const n=[],e=new Set;for(const i of t){if(!WV(i)){n.push(i);continue}const o=n.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==o?(o.children.push(...i.children),e.add(o)):n.push(i)}for(const i of e){const o=C2(i.children);n.push(new $c(i.value,o))}return n.filter(i=>!e.has(i))}function D2(t){let n=t;for(;n._sourceSegment;)n=n._sourceSegment;return n}function E2(t){let n=t,e=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,e+=n._segmentIndexShift??0;return e-1}function S2(t){return t.data||{}}function T2(t){return t.resolve||{}}function KV(t,n){return ht(e=>{const{targetSnapshot:i,guards:{canActivateChecks:o}}=e;if(!o.length)return Ft(e);let s=0;return xi(o).pipe(Kd(d=>function YV(t,n,e,i){const o=t.routeConfig,s=t._resolve;return void 0!==o?.title&&!I2(o)&&(s[Tg]=o.title),function QV(t,n,e,i){const o=function XV(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===o.length)return Ft({});const s={};return xi(o).pipe(ht(d=>function JV(t,n,e,i){const o=Fg(n)??i,s=xf(t,o);return Jd(s.resolve?s.resolve(n,e):o.runInContext(()=>s(n,e)))}(t[d],n,e,i).pipe(jc(),Ro(f=>{s[d]=f}))),Hx(1),function NM(t){return ke(()=>t)}(s),xl(d=>lw(d)?gt:Sg(d)))}(s,t,n,i).pipe(ke(d=>(t._resolvedData=d,t.data=s2(t,e).resolve,o&&I2(o)&&(t.data[Tg]=o.title),null)))}(d.route,i,t,n)),Ro(()=>s++),Hx(1),ht(d=>s===o.length?Ft(e):gt))})}function I2(t){return"string"==typeof t.title||null===t.title}function uw(t){return Oa(n=>{const e=t(n);return e?xi(e).pipe(ke(()=>n)):Ft(n)})}const Cf=new vt("ROUTES");let hw=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Qt(NS)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Ft(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Jd(e.loadComponent()).pipe(ke(k2),Ro(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),jx(()=>{this.componentLoaders.delete(e)})),o=new AM(i,()=>new Ht).pipe(Ux());return this.componentLoaders.set(e,o),o}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ft({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(ke(f=>{this.onLoadEndListener&&this.onLoadEndListener(i);let _,C,T=!1;Array.isArray(f)?C=f:(_=f.create(e).injector,C=LM(_.get(Cf,[],At.Self|At.Optional)));return{routes:C.map(aw),injector:_}}),jx(()=>{this.childrenLoaders.delete(i)})),d=new AM(s,()=>new Ht).pipe(Ux());return this.childrenLoaders.set(i,d),d}loadModuleFactoryOrRoutes(e){return Jd(e()).pipe(ke(k2),ht(i=>i instanceof WE||Array.isArray(i)?Ft(i):xi(this.compiler.compileModuleAsync(i))))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function k2(t){return function e6(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Z0=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ht,this.configLoader=Qt(hw),this.environmentInjector=Qt(Ds),this.urlSerializer=Qt(Mg),this.rootContexts=Qt(Ng),this.navigationId=0,this.afterPreactivation=()=>Ft(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new Uz(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new Vz(o))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e){return this.transitions=new ur({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Pg,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(uo(i=>0!==i.id),ke(i=>({...i,extractedUrl:e.urlHandlingStrategy.extract(i.rawUrl)})),Oa(i=>{let o=!1,s=!1;return Ft(i).pipe(Ro(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Oa(d=>{const f=e.browserUrlTree.toString(),_=!e.navigated||d.extractedUrl.toString()!==f||f!==e.currentUrlTree.toString();if(!_&&"reload"!==(d.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const T="";return this.events.next(new B0(d.id,e.serializeUrl(i.rawUrl),T,0)),e.rawUrlTree=d.rawUrl,d.resolve(null),gt}if(e.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return A2(d.source)&&(e.browserUrlTree=d.extractedUrl),Ft(d).pipe(Oa(T=>{const P=this.transitions?.getValue();return this.events.next(new Yx(T.id,this.urlSerializer.serialize(T.extractedUrl),T.source,T.restoredState)),P!==this.transitions?.getValue()?gt:Promise.resolve(T)}),function zV(t,n,e,i){return Oa(o=>function LV(t,n,e,i,o){return new BV(t,n,e,i,o).apply()}(t,n,e,o.extractedUrl,i).pipe(ke(s=>({...o,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),Ro(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},i.urlAfterRedirects=T.urlAfterRedirects}),function ZV(t,n,e,i,o){return ht(s=>function HV(t,n,e,i,o,s,d="emptyOnly"){return new jV(t,n,e,i,o,d,s).recognize().pipe(Oa(f=>null===f?function UV(t){return new cn(n=>n.error(t))}(new VV):Ft(f)))}(t,n,e,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,o).pipe(ke(d=>({...s,targetSnapshot:d}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),Ro(T=>{if(i.targetSnapshot=T.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!T.extras.skipLocationChange){const z=e.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);e.setBrowserUrl(z,T)}e.browserUrlTree=T.urlAfterRedirects}const P=new Nz(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(P)}));if(_&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:T,extractedUrl:P,source:z,restoredState:G,extras:ae}=d,be=new Yx(T,this.urlSerializer.serialize(P),z,G);this.events.next(be);const Ce=r2(P,this.rootComponentType).snapshot;return Ft(i={...d,targetSnapshot:Ce,urlAfterRedirects:P,extras:{...ae,skipLocationChange:!1,replaceUrl:!1}})}{const T="";return this.events.next(new B0(d.id,e.serializeUrl(i.extractedUrl),T,1)),e.rawUrlTree=d.rawUrl,d.resolve(null),gt}}),Ro(d=>{const f=new Fz(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),ke(d=>i={...d,guards:dV(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function xV(t,n){return ht(e=>{const{targetSnapshot:i,currentSnapshot:o,guards:{canActivateChecks:s,canDeactivateChecks:d}}=e;return 0===d.length&&0===s.length?Ft({...e,guardsResult:!0}):function wV(t,n,e,i){return xi(t).pipe(ht(o=>function IV(t,n,e,i,o){const s=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return s&&0!==s.length?Ft(s.map(f=>{const _=Fg(n)??o,C=xf(f,_);return Jd(function _V(t){return t&&zg(t.canDeactivate)}(C)?C.canDeactivate(t,n,e,i):_.runInContext(()=>C(t,n,e,i))).pipe(jc())})).pipe(wf()):Ft(!0)}(o.component,o.route,e,n,i)),jc(o=>!0!==o,!0))}(d,i,o,t).pipe(ht(f=>f&&function fV(t){return"boolean"==typeof t}(f)?function CV(t,n,e,i){return xi(n).pipe(Kd(o=>ff(function EV(t,n){return null!==t&&n&&n(new Hz(t)),Ft(!0)}(o.route.parent,i),function DV(t,n){return null!==t&&n&&n(new $z(t)),Ft(!0)}(o.route,i),function TV(t,n,e){const i=n[n.length-1],s=n.slice(0,n.length-1).reverse().map(d=>function uV(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(d)).filter(d=>null!==d).map(d=>kM(()=>Ft(d.guards.map(_=>{const C=Fg(d.node)??e,T=xf(_,C);return Jd(function bV(t){return t&&zg(t.canActivateChild)}(T)?T.canActivateChild(i,t):C.runInContext(()=>T(i,t))).pipe(jc())})).pipe(wf())));return Ft(s).pipe(wf())}(t,o.path,e),function SV(t,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return Ft(!0);const o=i.map(s=>kM(()=>{const d=Fg(n)??e,f=xf(s,d);return Jd(function gV(t){return t&&zg(t.canActivate)}(f)?f.canActivate(n,t):d.runInContext(()=>f(n,t))).pipe(jc())}));return Ft(o).pipe(wf())}(t,o.route,e))),jc(o=>!0!==o,!0))}(i,s,t,n):Ft(f)),ke(f=>({...e,guardsResult:f})))})}(this.environmentInjector,d=>this.events.next(d)),Ro(d=>{if(i.guardsResult=d.guardsResult,Ih(d.guardsResult))throw c2(0,d.guardsResult);const f=new Lz(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(f)}),uo(d=>!!d.guardsResult||(e.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),uw(d=>{if(d.guards.canActivateChecks.length)return Ft(d).pipe(Ro(f=>{const _=new Bz(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}),Oa(f=>{let _=!1;return Ft(f).pipe(KV(e.paramsInheritanceStrategy,this.environmentInjector),Ro({next:()=>_=!0,complete:()=>{_||(e.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),Ro(f=>{const _=new zz(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}))}),uw(d=>{const f=_=>{const C=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(_.routeConfig).pipe(Ro(T=>{_.component=T}),ke(()=>{})));for(const T of _.children)C.push(...f(T));return C};return Eg(f(d.targetSnapshot.root)).pipe(M0(),Qi(1))}),uw(()=>this.afterPreactivation()),ke(d=>{const f=function Jz(t,n,e){const i=Rg(t,n._root,e?e._root:void 0);return new o2(i,n)}(e.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:f}}),Ro(d=>{e.currentUrlTree=d.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),e.routerState=d.targetRouterState,"deferred"===e.urlUpdateStrategy&&(d.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,d),e.browserUrlTree=d.urlAfterRedirects)}),((t,n,e)=>ke(i=>(new cV(n,i.targetRouterState,i.currentRouterState,e).activate(t),i)))(this.rootContexts,e.routeReuseStrategy,d=>this.events.next(d)),Qi(1),Ro({next:d=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new tu(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{o=!0}}),jx(()=>{o||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),xl(d=>{if(s=!0,h2(d)){u2(d)||(e.navigated=!0,e.restoreHistory(i,!0));const f=new L0(i.id,this.urlSerializer.serialize(i.extractedUrl),d.message,d.cancellationCode);if(this.events.next(f),u2(d)){const _=e.urlHandlingStrategy.merge(d.url,e.rawUrlTree),C={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||A2(i.source)};e.scheduleNavigation(_,Pg,null,C,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{e.restoreHistory(i,!0);const f=new Qx(i.id,this.urlSerializer.serialize(i.extractedUrl),d,i.targetSnapshot??void 0);this.events.next(f);try{i.resolve(e.errorHandler(d))}catch(_){i.reject(_)}}return gt}))}))}cancelNavigationTransition(e,i,o){const s=new L0(e.id,this.urlSerializer.serialize(e.extractedUrl),i,o);this.events.next(s),e.resolve(!1)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function A2(t){return t!==Pg}let O2=(()=>{class t{buildTitle(e){let i,o=e.root;for(;void 0!==o;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===hn);return i}getResolvedTitleForRoute(e){return e.data[Tg]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:function(){return Qt(t6)},providedIn:"root"}),t})(),t6=(()=>{class t extends O2{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return t.\u0275fac=function(e){return new(e||t)(Le(sI))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),n6=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:function(){return Qt(o6)},providedIn:"root"}),t})();class i6{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}let o6=(()=>{class t extends i6{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=_i(t)))(i||t)}}(),t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const K0=new vt("",{providedIn:"root",factory:()=>({})});let s6=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:function(){return Qt(a6)},providedIn:"root"}),t})(),a6=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function l6(t){throw t}function c6(t,n,e){return n.parse("/")}const d6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},u6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Xi=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Qt(ML),this.isNgZoneEnabled=!1,this.options=Qt(K0,{optional:!0})||{},this.errorHandler=this.options.errorHandler||l6,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||c6,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Qt(s6),this.routeReuseStrategy=Qt(n6),this.urlCreationStrategy=Qt(Yz),this.titleStrategy=Qt(O2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=LM(Qt(Cf,{optional:!0})??[]),this.navigationTransitions=Qt(Z0),this.urlSerializer=Qt(Mg),this.location=Qt(U1),this.isNgZoneEnabled=Qt(_n)instanceof _n&&_n.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new eu,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=r2(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Pg,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,o){const s={replaceUrl:!0},d=o?.navigationId?o:null;if(o){const _={...o};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(s.state=_)}const f=this.parseUrl(e);this.scheduleNavigation(f,i,d,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(aw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:o,queryParams:s,fragment:d,queryParamsHandling:f,preserveFragment:_}=i,C=_?this.currentUrlTree.fragment:d;let T=null;switch(f){case"merge":T={...this.currentUrlTree.queryParams,...s};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=s||null}return null!==T&&(T=this.removeEmptyProps(T)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,e,T,C??null)}navigateByUrl(e,i={skipLocationChange:!1}){const o=Ih(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Pg,null,i)}navigate(e,i={skipLocationChange:!1}){return function h6(t){for(let n=0;n<t.length;n++){const e=t[n];if(null==e)throw new Ye(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(o){i=this.malformedUriErrorHandler(o,this.urlSerializer,e)}return i}isActive(e,i){let o;if(o=!0===i?{...d6}:!1===i?{...u6}:i,Ih(e))return VM(this.currentUrlTree,e,o);const s=this.parseUrl(e);return VM(this.currentUrlTree,s,o)}removeEmptyProps(e){return Object.keys(e).reduce((i,o)=>{const s=e[o];return null!=s&&(i[o]=s),i},{})}scheduleNavigation(e,i,o,s,d){if(this.disposed)return Promise.resolve(!1);let f,_,C,T;return d?(f=d.resolve,_=d.reject,C=d.promise):C=new Promise((P,z)=>{f=P,_=z}),T="computed"===this.canceledNavigationResolution?o&&o.\u0275routerPageId?o.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:T,source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:f,reject:_,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(P=>Promise.reject(P))}setBrowserUrl(e,i){const o=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl?this.location.replaceState(o,"",s):this.location.go(o,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===o?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Mh=(()=>{class t{constructor(e,i,o,s,d,f){this.router=e,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=d,this.locationStrategy=f,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Ht;const _=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=e.events.subscribe(C=>{C instanceof tu&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=af(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=af(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=af(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,i,o,s,d){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||i||o||s||d||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:function bo(t,n,e){return function Gr(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?lr:ar}(n,e)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,i){const o=this.renderer,s=this.el.nativeElement;null!==i?o.setAttribute(s,e,i):o.removeAttribute(s,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return t.\u0275fac=function(e){return new(e||t)(J(Xi),J(nu),Cs("tabindex"),J(lo),J(qt),J(xh))},t.\u0275dir=We({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(e,i){1&e&&Xe("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&an("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Mn]}),t})();class P2{}let m6=(()=>{class t{constructor(e,i,o,s,d){this.router=e,this.injector=o,this.preloadingStrategy=s,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(uo(e=>e instanceof tu),Kd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const o=[];for(const s of i){s.providers&&!s._injector&&(s._injector=V_(s.providers,e,`Route: ${s.path}`));const d=s._injector??e,f=s._loadedInjector??d;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(d,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(f,s.children??s._loadedRoutes))}return xi(o).pipe(pt())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let o;o=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):Ft(null);const s=o.pipe(ht(d=>null===d?Ft(void 0):(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,this.processRoutes(d.injector??e,d.routes))));return i.loadComponent&&!i._loadedComponent?xi([s,this.loader.loadComponent(i)]).pipe(pt()):s})}}return t.\u0275fac=function(e){return new(e||t)(Le(Xi),Le(NS),Le(Ds),Le(P2),Le(hw))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const fw=new vt("");let R2=(()=>{class t{constructor(e,i,o,s,d={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration=d.scrollPositionRestoration||"disabled",d.anchorScrolling=d.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Yx?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof tu&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof t2&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new t2(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return t.\u0275fac=function(e){!function JC(){throw new Error("invalid")}()},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();var Xs=(()=>((Xs=Xs||{})[Xs.COMPLETE=0]="COMPLETE",Xs[Xs.FAILED=1]="FAILED",Xs[Xs.REDIRECTING=2]="REDIRECTING",Xs))();const Df=!1;function iu(t,n){return{\u0275kind:t,\u0275providers:n}}const mw=new vt("",{providedIn:"root",factory:()=>!1});function F2(){const t=Qt(Zr);return n=>{const e=t.get(sf);if(n!==e.components[0])return;const i=t.get(Xi),o=t.get(L2);1===t.get(gw)&&i.initialNavigation(),t.get(B2,null,At.Optional)?.setUpPreloading(),t.get(fw,null,At.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const L2=new vt(Df?"bootstrap done indicator":"",{factory:()=>new Ht}),gw=new vt(Df?"initial navigation":"",{providedIn:"root",factory:()=>1});function y6(){let t=[];return t=Df?[{provide:Wr,multi:!0,useFactory:()=>{const n=Qt(Xi);return()=>n.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function Wz(t){if(!("type"in t))return`Unknown Router Event: ${t.constructor.name}`;switch(t.type){case 14:return`ActivationEnd(path: '${t.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${t.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${t.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${t.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state}, shouldActivate: ${t.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 2:return`NavigationCancel(id: ${t.id}, url: '${t.url}')`;case 16:return`NavigationSkipped(id: ${t.id}, url: '${t.url}')`;case 1:return`NavigationEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${t.id}, url: '${t.url}', error: ${t.error})`;case 0:return`NavigationStart(id: ${t.id}, url: '${t.url}')`;case 6:return`ResolveEnd(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 5:return`ResolveStart(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 10:return`RouteConfigLoadEnd(path: ${t.route.path})`;case 9:return`RouteConfigLoadStart(path: ${t.route.path})`;case 4:return`RoutesRecognized(id: ${t.id}, url: '${t.url}', urlAfterRedirects: '${t.urlAfterRedirects}', state: ${t.state})`;case 15:return`Scroll(anchor: '${t.anchor}', position: '${t.position?`${t.position[0]}, ${t.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],iu(1,t)}const B2=new vt(Df?"router preloader":"");function x6(t){return iu(0,[{provide:B2,useExisting:m6},{provide:P2,useExisting:t}])}const Ug=!1,z2=new vt(Ug?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),w6=[U1,{provide:Mg,useClass:$x},Xi,Ng,{provide:nu,useFactory:function N2(t){return t.routerState.root},deps:[Xi]},hw,Ug?{provide:mw,useValue:!0}:[]];function C6(){return new jS("Router",Xi)}let Hg=(()=>{class t{constructor(e){}static forRoot(e,i){return{ngModule:t,providers:[w6,Ug&&i?.enableTracing?y6().\u0275providers:[],{provide:Cf,multi:!0,useValue:e},{provide:z2,useFactory:T6,deps:[[Xi,new Ad,new th]]},{provide:K0,useValue:i||{}},i?.useHash?{provide:xh,useClass:gB}:{provide:xh,useClass:hT},{provide:fw,useFactory:()=>{const t=Qt(I5),n=Qt(_n),e=Qt(K0),i=Qt(Z0),o=Qt(Mg);return e.scrollOffset&&t.setOffset(e.scrollOffset),new R2(o,i,t,n,e)}},i?.preloadingStrategy?x6(i.preloadingStrategy).\u0275providers:[],{provide:jS,multi:!0,useFactory:C6},i?.initialNavigation?I6(i):[],[{provide:V2,useFactory:F2},{provide:HS,multi:!0,useExisting:V2}]]}}static forChild(e){return{ngModule:t,providers:[{provide:Cf,multi:!0,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)(Le(z2,8))},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[rw]}),t})();function T6(t){if(Ug&&t)throw new Ye(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function I6(t){return["disabled"===t.initialNavigation?iu(3,[{provide:G_,multi:!0,useFactory:()=>{const n=Qt(Xi);return()=>{n.setUpLocationChangeListener()}}},{provide:gw,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?iu(2,[{provide:gw,useValue:0},{provide:G_,multi:!0,deps:[Zr],useFactory:n=>{const e=n.get(fB,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const o=n.get(Xi),s=n.get(L2);(function g6(t,n){t.events.pipe(uo(e=>e instanceof tu||e instanceof L0||e instanceof Qx||e instanceof B0),ke(e=>e instanceof tu||e instanceof B0?Xs.COMPLETE:e instanceof L0&&(0===e.code||1===e.code)?Xs.REDIRECTING:Xs.FAILED),uo(e=>e!==Xs.REDIRECTING),Qi(1)).subscribe(()=>{n()})})(o,()=>{i(!0)}),n.get(Z0).afterPreactivation=()=>(i(!0),s.closed?Ft(void 0):s),o.initialNavigation()}))}}]).\u0275providers:[]]}const V2=new vt(Ug?"Router Initializer":"");let Ef=(()=>{class t{constructor(e){this.http=e,this.baseUrl="https://localhost:44302/api"}getUsers(){return this.http.get(this.baseUrl)}getStationDetails(e,i){let o=new rc;return o=o.append("id",e.toString()),o=o.append("month",i.toString()),this.http.get(`${this.baseUrl}/Singleview/${e}`,{params:o}).pipe(ke(s=>({name:s.name,address:s.address,location:s.location,departureJourneyCount:s.departureJourneyCount,returnJourneyCount:s.returnJourneyCount,averageDistanceOfDepartureJourneys:s.averageDistanceOfDepartureJourneys,averageDistanceOfReturnJourneys:s.averageDistanceOfReturnJourneys,top5DepartureStations:s.top5DepartureStations,top5ReturnStations:s.top5ReturnStations})))}getSingleStations(e){const i=(new rc).set("ids",e.join(","));return this.http.get(`${this.baseUrl}/StationList`,{params:i}).pipe(ke(o=>o.map(s=>({id:s.id?.toString(),name:s.name,address:s.address}))))}listStations(e=100,i=0,o="name",s=""){const d={limit:e.toString(),offset:i.toString(),orderBy:o,search:s};return this.http.get(`${this.baseUrl}/StationList/Filter`,{params:d})}getStation(e){return this.http.get(`${this.baseUrl}/${e}`)}fetchStation(e){return this.http.get(`${this.baseUrl}/Station/${e}`)}createStation(e){return this.http.post(`${this.baseUrl}/Station/Create`,e)}deleteStation(e){return this.http.delete(`${this.baseUrl}/station/${e}`)}updateStation(e,i){return this.http.put(`${this.baseUrl}/station/${e}`,i)}importData(e,i){return this.http.post(`${this.baseUrl}/Import/${i}`,e)}getDepartureStations(){return this.http.get(`${this.baseUrl}/stations`)}startJourney(e,i,o){return this.http.post(`${this.baseUrl}/JourneyList/Add`,{departureStationId:e,departureDateTime:i,userId:o})}getUserJourneys(e){return this.http.get(`${this.baseUrl}/JourneyList/${e}/User`)}returnJourney(e,i,o){const s={returnStationId:e,returnDateTime:i.toISOString()};return this.http.put(`${this.baseUrl}/JourneyList/${o}/return`,s)}getJourneysByLoginId(e){return this.http.get(`${this.baseUrl}/JourneyList/${e}/User`)}}return t.\u0275fac=function(e){return new(e||t)(Le(_x))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ou=(()=>{class t{constructor(e,i){this.http=e,this.router=i,this.baseUrl="https://localhost:44302/api/User",this.userIdKey="id",this.userNameKey="username"}signUp(e){return this.http.post(`${this.baseUrl}/register`,e)}login(e){return this.http.post(`${this.baseUrl}/authenticate`,e).pipe(Ro(i=>{this.storeToken(i.token),this.storeUserId(i.id),this.setUserName(i.username)}))}signOut(){localStorage.clear(),sessionStorage.clear(),this.router.navigate(["/login"])}storeToken(e){localStorage.setItem("token",e)}getToken(){return localStorage.getItem("token")}storeUserId(e){sessionStorage.setItem(this.userIdKey,e.toString())}getUserId(){const e=sessionStorage.getItem(this.userIdKey);return e?+e:0}updateUserId(e){sessionStorage.setItem(this.userIdKey,e.toString())}getUserName(){const e=sessionStorage.getItem(this.userNameKey);return null===e?"":e}setUserName(e){sessionStorage.setItem(this.userNameKey,e.toString())}isLoggedIn(){return!!localStorage.getItem("token")}}return t.\u0275fac=function(e){return new(e||t)(Le(_x),Le(Xi))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),k6=(()=>{class t{constructor(e,i){this.api=e,this.auth=i,this.users=[],this.stations=[],this.journeys=[],this.currentDate=new Date,this.weekStartDate=new Date,this.monthStartDate=new Date,this.yearStartDate=new Date,this.weekEndDate=new Date,this.monthEndDate=new Date,this.yearEndDate=new Date,this.dailyStats={},this.weeklyStats={},this.monthlyStats={},this.yearlyStats={}}ngOnInit(){this.loginId=Number(this.auth.getUserId()),this.weekStartDate.setDate(this.currentDate.getDate()-this.currentDate.getDay()+1),this.weekEndDate.setDate(this.weekStartDate.getDate()+6),this.monthStartDate.setDate(1),this.yearStartDate.setDate(1),this.yearEndDate.setMonth(11,31),this.api.getJourneysByLoginId(this.loginId).subscribe({next:e=>{this.journeys=e,this.dailyStats=this.calculateStats("day"),this.weeklyStats=this.calculateStats("week"),this.monthlyStats=this.calculateStats("month"),this.yearlyStats=this.calculateStats("year"),console.log("Data:",e),console.log("Daily stats:",this.dailyStats),console.log("Weekly stats:",this.weeklyStats),console.log("Monthly stats:",this.monthlyStats),console.log("Yearly stats:",this.yearlyStats)},error:e=>console.log(e)})}calculateStats(e){const i=this.getStartDate(e),o=this.getEndDate(e),s=this.journeys.filter(P=>i&&o&&new Date(P.departure)>=i&&new Date(P.departure)<=o);let d=0,f=0,_=0;for(const P of s)d+=P.coveredDistanceInMeters/1e3,f+=P.durationInSeconds/3600,_++;return{period:e,startDate:i,endDate:o,totalDistance:d,totalDuration:f,averageDistance:d/s.length||0,averageDuration:f/s.length||0,count:_}}getStartDate(e){switch(e){case"day":return new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate());case"week":const i=new Date(this.currentDate);return i.setDate(this.currentDate.getDate()-this.currentDate.getDay()+1),new Date(i.getFullYear(),i.getMonth(),i.getDate());case"month":return new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),1);case"year":return new Date(this.currentDate.getFullYear(),0,1);default:return null}}getEndDate(e){switch(e){case"day":return new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),23,59,59,999);case"week":const i=new Date(this.currentDate);return i.setDate(this.currentDate.getDate()-this.currentDate.getDay()+7),new Date(i.getFullYear(),i.getMonth(),i.getDate(),23,59,59,999);case"month":const o=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+1,0);return new Date(o.getFullYear(),o.getMonth(),o.getDate(),23,59,59,999);case"year":const s=new Date(this.currentDate.getFullYear(),11,31);return new Date(s.getFullYear(),s.getMonth(),s.getDate(),23,59,59,999);default:return null}}}return t.\u0275fac=function(e){return new(e||t)(J(Ef),J(ou))},t.\u0275cmp=Wt({type:t,selectors:[["app-dashboard"]],decls:86,vars:68,consts:[[1,"container-fluid"],[1,"mt-3","mb-5"],[1,"row"],[1,"col-md-4"],[1,"card","mb-4"],[1,"card-header","bg-primary","text-white"],[1,"card-body"],[1,"card-header","bg-secondary","text-white"],[1,"card-header","bg-info","text-white"],[1,"card-header","bg-warning","text-white"],[1,"card-header","bg-success","text-white"]],template:function(e,i){1&e&&(W(0,"div",0)(1,"h1",1),ge(2,"Finland Bike Station Operation Reading Dashboard"),Y(),W(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),ge(7,"Daily Stats"),Y(),W(8,"div",6)(9,"p"),ge(10),dr(11,"number"),Y(),W(12,"p"),ge(13),dr(14,"number"),Y(),W(15,"p"),ge(16),dr(17,"number"),Y(),W(18,"p"),ge(19),dr(20,"number"),Y()()()(),W(21,"div",3)(22,"div",4)(23,"div",7),ge(24,"Weekly Stats"),Y(),W(25,"div",6)(26,"p"),ge(27),dr(28,"number"),Y(),W(29,"p"),ge(30),dr(31,"number"),Y(),W(32,"p"),ge(33),dr(34,"number"),Y(),W(35,"p"),ge(36),dr(37,"number"),Y()()()(),W(38,"div",3)(39,"div",4)(40,"div",8),ge(41,"Monthly Stats"),Y(),W(42,"div",6)(43,"p"),ge(44),dr(45,"number"),Y(),W(46,"p"),ge(47),dr(48,"number"),Y(),W(49,"p"),ge(50),dr(51,"number"),Y(),W(52,"p"),ge(53),dr(54,"number"),Y()()()()(),W(55,"div",2)(56,"div",3)(57,"div",4)(58,"div",9),ge(59,"Yearly Stats"),Y(),W(60,"div",6)(61,"p"),ge(62),dr(63,"number"),Y(),W(64,"p"),ge(65),dr(66,"number"),Y(),W(67,"p"),ge(68),dr(69,"number"),Y(),W(70,"p"),ge(71),dr(72,"number"),Y()()()(),W(73,"div",3)(74,"div",4)(75,"div",10),ge(76,"Departure Count"),Y(),W(77,"div",6)(78,"p"),ge(79),Y(),W(80,"p"),ge(81),Y(),W(82,"p"),ge(83),Y(),W(84,"p"),ge(85),Y()()()()()()),2&e&&(ne(10),Rn("Total distance: ",Ir(11,20,i.dailyStats.totalDistance,"1.2-3")," km"),ne(3),Rn("Total duration: ",Ir(14,23,i.dailyStats.totalDuration,"1.2-3")," hours"),ne(3),Rn("Average distance: ",Ir(17,26,i.dailyStats.averageDistance,"1.2-3")," km"),ne(3),Rn("Average duration: ",Ir(20,29,i.dailyStats.averageDuration,"1.2-3")," hours"),ne(8),Rn("Total distance: ",Ir(28,32,i.weeklyStats.totalDistance,"1.2-3")," km"),ne(3),Rn("Total duration: ",Ir(31,35,i.weeklyStats.totalDuration,"1.2-3")," hours"),ne(3),Rn("Average distance: ",Ir(34,38,i.weeklyStats.averageDistance,"1.2-3")," km"),ne(3),Rn("Average duration: ",Ir(37,41,i.weeklyStats.averageDuration,"1.2-3")," hours"),ne(8),Rn("Total distance: ",Ir(45,44,i.monthlyStats.totalDistance,"1.2-3")," km"),ne(3),Rn("Total duration: ",Ir(48,47,i.monthlyStats.totalDuration,"1.2-3")," hours"),ne(3),Rn("Average distance: ",Ir(51,50,i.monthlyStats.averageDistance,"1.2-3")," km"),ne(3),Rn("Average duration: ",Ir(54,53,i.monthlyStats.averageDuration,"1.2-3")," hours"),ne(9),Rn("Total distance: ",Ir(63,56,i.yearlyStats.totalDistance,"1.2-3")," km"),ne(3),Rn("Total duration: ",Ir(66,59,i.yearlyStats.totalDuration,"1.2-3")," hours"),ne(3),Rn("Average distance: ",Ir(69,62,i.yearlyStats.averageDistance,"1.2-3")," km"),ne(3),Rn("Average duration: ",Ir(72,65,i.yearlyStats.averageDuration,"1.2-3")," hours"),ne(8),Rn("Today (",i.dailyStats.count,")"),ne(2),Rn("This Week (",i.weeklyStats.count,")"),ne(2),Rn("This Month (",i.monthlyStats.count,")"),ne(2),Rn("This year (",i.yearlyStats.count,")"))},dependencies:[RT]}),t})();function A6(t,n){if(1&t){const e=Xn();W(0,"button",5),Xe("click",function(){return D(e),S(Fe().closeToast())}),ge(1,"\xd7"),Y()}}const O6=function(t,n,e,i){return{"fa-times-circle":t,"fa-check-circle":n,"fa-exclamation-circle":e,"fa-info-circle":i}};let ru=(()=>{class t{constructor(){this.toastDetails$=new Ht}getToastDetails(){return this.toastDetails$.asObservable()}success(e){this.toastDetails$.next({type:"success",detail:e.detail,position:e.position,summary:e.summary,duration:e.duration,sticky:e.sticky})}error(e){this.toastDetails$.next({type:"error",detail:e.detail,position:e.position,summary:e.summary,duration:e.duration,sticky:e.sticky})}info(e){this.toastDetails$.next({type:"info",detail:e.detail,position:e.position,summary:e.summary,duration:e.duration,sticky:e.sticky})}warning(e){this.toastDetails$.next({type:"warning",detail:e.detail,summary:e.summary,position:e.position,duration:e.duration,sticky:e.sticky})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),P6=(()=>{class t{constructor(e){this.toastService=e,this.show=!1}ngOnInit(){this.toastService.getToastDetails().subscribe(e=>{this.show=!0,clearTimeout(this.timeoutRef),this.toastDetails=e,this.toastDetails.duration&&(this.timeoutRef=setTimeout(()=>{this.show=!1},this.toastDetails.duration)),this.toastDetails.sticky&&(clearTimeout(this.timeoutRef),this.show=!0),!this.toastDetails.duration&&!this.toastDetails.sticky&&(this.timeoutRef=setTimeout(()=>{this.show=!1},5e3))})}closeToast(){clearTimeout(this.timeoutRef),this.show=!1}loadPosition(){let e="";if(void 0!==this.toastDetails?.position)switch(this.toastDetails.position){case"tr":default:e="toast-right-top";break;case"tl":e="toast-left-top";break;case"br":e="toast-right-bottom";break;case"bl":e="toast-left-bottom"}else e="toast-right-top";if(void 0!==this.toastDetails?.type)switch(this.toastDetails.type){case"success":e+=" success";break;case"error":e+=" error";break;case"info":e+=" info";break;case"warning":e+=" warning";break;default:e="toast-right-top"}return e}}return t.\u0275fac=function(e){return new(e||t)(J(ru))},t.\u0275cmp=Wt({type:t,selectors:[["lib-ng-toast"]],decls:9,vars:12,consts:[[3,"ngClass"],[1,"container-1"],[1,"fa",3,"ngClass"],[1,"container-2"],["id","close",3,"click",4,"ngIf"],["id","close",3,"click"]],template:function(e,i){1&e&&(W(0,"div",0)(1,"div",1),lt(2,"i",2),Y(),W(3,"div",3)(4,"p"),ge(5),Y(),W(6,"p"),ge(7),Y()(),Ee(8,A6,2,0,"button",4),Y()),2&e&&(ut("active",i.show),me("ngClass",i.loadPosition()),ne(2),me("ngClass",U_(7,O6,"error"===(null==i.toastDetails?null:i.toastDetails.type),"success"===(null==i.toastDetails?null:i.toastDetails.type),"warning"===(null==i.toastDetails?null:i.toastDetails.type),"info"===(null==i.toastDetails?null:i.toastDetails.type))),ne(3),nn(null==i.toastDetails?null:i.toastDetails.detail),ne(2),nn(null==i.toastDetails?null:i.toastDetails.summary),ne(1),me("ngIf",i.show))},dependencies:[qd,Pi],styles:["*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box;border:none}.show-toast[_ngcontent-%COMP%]{margin:10px;background-color:#101020;color:#fff;padding:20px;border-radius:5px;cursor:pointer}.toast-right-top[_ngcontent-%COMP%]{width:380px;height:80px;padding:20px;box-shadow:0 10px 20px #4b32320d;border-radius:7px;position:fixed;right:1%;top:5%;transform:translate(400px);display:grid;grid-template-columns:1.2fr 6fr .5fr;transition:.5s;z-index:9999}.toast-right-top.active[_ngcontent-%COMP%]{transform:translate(0)}.toast-right-top.error[_ngcontent-%COMP%]{border-left:8px solid #ff355b;background-color:#ffe7e6}.toast-right-top.warning[_ngcontent-%COMP%]{border-left:8px solid #ffc021;background-color:#fff2e2}.toast-right-top.success[_ngcontent-%COMP%]{border-left:8px solid #47d764;background-color:#e4f8f0}.toast-right-top.info[_ngcontent-%COMP%]{border-left:8px solid #2f86eb;background-color:#e9e9ff}.toast-right-bottom[_ngcontent-%COMP%]{width:380px;height:80px;padding:20px;box-shadow:0 10px 20px #4b32320d;border-radius:7px;position:fixed;right:1%;bottom:5%;transform:translate(400px);display:grid;grid-template-columns:1.2fr 6fr .5fr;transition:.5s;z-index:9999}.toast-right-bottom.active[_ngcontent-%COMP%]{transform:translate(0)}.toast-right-bottom.error[_ngcontent-%COMP%]{border-left:8px solid #ff355b;background-color:#ffe7e6}.toast-right-bottom.warning[_ngcontent-%COMP%]{border-left:8px solid #ffc021;background-color:#fff2e2}.toast-right-bottom.success[_ngcontent-%COMP%]{border-left:8px solid #47d764;background-color:#e4f8f0}.toast-right-bottom.info[_ngcontent-%COMP%]{border-left:8px solid #2f86eb;background-color:#e9e9ff}.toast-left-top[_ngcontent-%COMP%]{width:380px;height:80px;padding:20px;box-shadow:0 10px 20px #4b32320d;border-radius:7px;position:fixed;left:1%;top:5%;transform:translate(-400px);display:grid;grid-template-columns:1.2fr 6fr .5fr;transition:.5s;z-index:9999}.toast-left-top.active[_ngcontent-%COMP%]{transform:translate(0)}.toast-left-top.error[_ngcontent-%COMP%]{border-left:8px solid #ff355b;background-color:#ffe7e6}.toast-left-top.warning[_ngcontent-%COMP%]{border-left:8px solid #ffc021;background-color:#fff2e2}.toast-left-top.success[_ngcontent-%COMP%]{border-left:8px solid #47d764;background-color:#e4f8f0}.toast-left-top.info[_ngcontent-%COMP%]{border-left:8px solid #2f86eb;background-color:#e9e9ff}.toast-left-bottom[_ngcontent-%COMP%]{width:380px;height:80px;padding:20px;box-shadow:0 10px 20px #4b32320d;border-radius:7px;position:fixed;left:1%;bottom:5%;transform:translate(-400px);display:grid;grid-template-columns:1.2fr 6fr .5fr;transition:.5s;z-index:9999}.toast-left-bottom.active[_ngcontent-%COMP%]{transform:translate(0)}.toast-left-bottom.error[_ngcontent-%COMP%]{border-left:8px solid #ff355b;background-color:#ffe7e6}.toast-left-bottom.warning[_ngcontent-%COMP%]{border-left:8px solid #ffc021;background-color:#fff2e2}.toast-left-bottom.success[_ngcontent-%COMP%]{border-left:8px solid #47d764;background-color:#e4f8f0}.toast-left-bottom.info[_ngcontent-%COMP%]{border-left:8px solid #2f86eb;background-color:#e9e9ff}.container-1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:40px}.fa-times-circle[_ngcontent-%COMP%]{color:#ff355b}.fa-check-circle[_ngcontent-%COMP%]{color:#47d764}.fa-exclamation-circle[_ngcontent-%COMP%]{color:#ffc021}.fa-info-circle[_ngcontent-%COMP%]{color:#2f86eb}.container-2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{color:#101020;font-weight:600;font-size:16px;font-family:roboto,sans-serif}.container-2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{font-size:14px;color:#656565;font-weight:400;font-family:roboto,sans-serif}#close[_ngcontent-%COMP%]{align-self:flex-start;background-color:transparent;font-size:25px;line-height:0;color:#656565;cursor:pointer}"]}),t})(),R6=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[Ut]}),t})(),N6=(()=>{class t{constructor(){this.deleteClicked=new Me}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Wt({type:t,selectors:[["app-deletestation"]],inputs:{row:"row"},outputs:{deleteClicked:"deleteClicked"},decls:2,vars:0,consts:[["title","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"bi","bi-trash"]],template:function(e,i){1&e&&(W(0,"button",0),Xe("click",function(){return i.deleteClicked.emit()}),lt(1,"span",1),Y())}}),t})();function F6(t,n){if(1&t){const e=Xn();W(0,"tr")(1,"td"),ge(2),Y(),W(3,"td"),ge(4),Y(),W(5,"td"),ge(6),Y(),W(7,"td"),ge(8),Y(),W(9,"td"),ge(10),Y(),W(11,"td"),ge(12),Y(),W(13,"td")(14,"button",15),Xe("click",function(){const s=D(e).$implicit;return S(Fe().view(s))}),lt(15,"i",16),Y(),W(16,"button",17),Xe("click",function(){const s=D(e).$implicit;return S(Fe().edit(s))}),lt(17,"span",18),Y(),W(18,"app-deletestation",19),Xe("deleteClicked",function(){const s=D(e).$implicit;return S(Fe().delete(s))}),lt(19,"span",20),Y()()()}if(2&t){const e=n.$implicit;ne(2),nn(e.id),ne(2),nn(e.name),ne(2),nn(e.address),ne(2),nn(e.kaupunki),ne(2),nn(e.x),ne(2),nn(e.y),ne(6),me("row",e)}}let L6=(()=>{class t{constructor(e,i,o){this.api=e,this.router=i,this.toast=o,this.rowLimit=100,this.limit=5,this.page=3,this.orderBy="name",this.search="",this.rows=[],this.columns=[{name:"ID",prop:"id"},{name:"Name",prop:"name"},{name:"Address",prop:"address"},{name:"City",prop:"kaupunki"},{name:"X",prop:"x"},{name:"Y",prop:"y"},{name:"Actions"}],this.currentPage=1,this.totalPages=1,this.sortDirection="asc",this.searchValue=""}view(e){this.router.navigate(["/report",e.id])}create(){this.router.navigate(["/creat-station"])}edit(e){this.router.navigate(["/update-station",e.id])}delete(e){confirm("Are you sure you want to delete this station?")&&this.api.deleteStation(e.id).subscribe({next:()=>{this.toast.success({detail:"SUCCESS",summary:"Success",duration:5e3}),this.listStations=this.listStations.filter(i=>i.id!==e.id),this.applyFilter()},error:i=>{console.log(i),this.toast.error({detail:"Failed to delete station",summary:"Error",duration:5e3})}})}ngOnInit(){this.getStations(),this.api.listStations().subscribe(e=>{this.listStations=e,this.rowLimit=e.length})}getStations(){this.api.listStations(this.rowLimit,this.page,this.orderBy,this.search).subscribe(e=>{let i=e.filter(o=>o.name.toLowerCase().includes(this.search.toLowerCase()));i.sort((o,s)=>{let d=o[this.orderBy],f=s[this.orderBy];return"string"==typeof d&&(d=d.toLowerCase(),f=f.toLowerCase()),d<f?"asc"===this.sortDirection?-1:1:d>f?"asc"===this.sortDirection?1:-1:0}),this.rows=i.slice(this.page,this.page+this.limit),this.totalPages=Math.ceil(i.length/this.limit)})}applyFilter(){this.rowLimit=this.rowLimit,this.page=0,this.currentPage=1,this.search=this.searchValue,this.getStations()}onRowLimitChange(){this.rowLimit=this.rowLimit,this.page=0,this.currentPage=1,this.getStations()}prevPage(){this.currentPage>1&&(this.page-=this.limit,this.currentPage--,this.getStations())}nextPage(){this.currentPage<this.totalPages&&(this.page+=this.limit,this.currentPage++,this.getStations())}sort(e){e===this.orderBy?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.orderBy=e,this.sortDirection="asc"),this.rows.sort((i,o)=>{const s="string"==typeof i[e]?i[e].toLowerCase():i[e],d="string"==typeof o[e]?o[e].toLowerCase():o[e];return s<d?"asc"===this.sortDirection?-1:1:s>d?"asc"===this.sortDirection?1:-1:0})}}return t.\u0275fac=function(e){return new(e||t)(J(Ef),J(Xi),J(ru))},t.\u0275cmp=Wt({type:t,selectors:[["app-list-station"]],decls:49,vars:25,consts:[[1,"container-fluid","g-0"],[1,"row"],[1,"col-md-4"],[1,"form-group"],["for","search"],["type","text",1,"form-control",3,"ngModel","ngModelChange","keyup"],["for","limit"],["type","number","id","limit",1,"form-control",3,"ngModel","ngModelChange","keyup"],["title","Create",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],[1,"table-responsive"],[1,"table"],[3,"click"],[4,"ngFor","ngForOf"],[1,"pagination"],[3,"disabled","click"],["title","View",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],[1,"fas","fa-map-marker-alt"],["title","Edit",1,"btn","btn-sm","btn-success","mr-2",3,"click"],[1,"bi","bi-pencil"],[1,"delete-button",3,"row","deleteClicked"],[1,"bi","bi-trash"]],template:function(e,i){1&e&&(W(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),ge(5,"Search:"),Y(),W(6,"input",5),Xe("ngModelChange",function(s){return i.searchValue=s})("keyup",function(){return i.applyFilter()}),Y()()(),W(7,"div",2)(8,"div",3)(9,"label",6),ge(10,"Row Limit:"),Y(),W(11,"input",7),Xe("ngModelChange",function(s){return i.rowLimit=s})("ngModelChange",function(){return i.onRowLimitChange()})("keyup",function(){return i.applyFilter()}),Y()()(),W(12,"div",2)(13,"div",3)(14,"button",8),Xe("click",function(){return i.create()}),ge(15," Create "),Y()()()(),W(16,"div",9)(17,"table",10)(18,"thead")(19,"tr")(20,"th",11),Xe("click",function(){return i.sort("id")}),ge(21,"Station ID "),lt(22,"i"),Y(),W(23,"th",11),Xe("click",function(){return i.sort("name")}),ge(24,"Name "),lt(25,"i"),Y(),W(26,"th",11),Xe("click",function(){return i.sort("address")}),ge(27,"Address "),lt(28,"i"),Y(),W(29,"th",11),Xe("click",function(){return i.sort("kaupunki")}),ge(30,"City "),lt(31,"i"),Y(),W(32,"th",11),Xe("click",function(){return i.sort("x")}),ge(33,"Latitude "),lt(34,"i"),Y(),W(35,"th",11),Xe("click",function(){return i.sort("y")}),ge(36,"Longitude "),lt(37,"i"),Y(),W(38,"th"),ge(39,"Actions"),Y()()(),W(40,"tbody"),Ee(41,F6,20,7,"tr",12),Y()()(),W(42,"div",13)(43,"button",14),Xe("click",function(){return i.prevPage()}),ge(44,"Previous"),Y(),W(45,"span"),ge(46),Y(),W(47,"button",14),Xe("click",function(){return i.nextPage()}),ge(48,"Next"),Y()()()),2&e&&(ne(6),me("ngModel",i.searchValue),ne(5),me("ngModel",i.rowLimit),ne(11),oc("fas fa-sort-","id"===i.orderBy?i.sortDirection:"both",""),ne(3),oc("fas fa-sort-","name"===i.orderBy?i.sortDirection:"both",""),ne(3),oc("fas fa-sort-","address"===i.orderBy?i.sortDirection:"both",""),ne(3),oc("fas fa-sort-","kaupunki"===i.orderBy?i.sortDirection:"both",""),ne(3),oc("fas fa-sort-","x"===i.orderBy?i.sortDirection:"both",""),ne(3),oc("fas fa-sort-","y"===i.orderBy?i.sortDirection:"both",""),ne(4),me("ngForOf",i.rows),ne(2),me("disabled",1===i.currentPage),ne(3),N_("",i.currentPage," of ",i.totalPages,""),ne(1),me("disabled",i.currentPage===i.totalPages||0===i.totalPages))},dependencies:[Mr,Ch,S0,cf,Rx,N6],styles:['.table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem;color:#212529;border-collapse:collapse}.th-heading[_ngcontent-%COMP%]{text-align:left;background-color:#f2f2f2;font-size:16px;font-weight:600;color:#444;padding:12px 16px}.tbody[_ngcontent-%COMP%]{font-size:14px;font-weight:300;color:#444}.tfoot[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#444;background-color:#f2f2f2;border-top:1px solid #dee2e6;padding:12px 16px}input[type=text][_ngcontent-%COMP%]{width:100%;padding:12px 16px;font-size:16px;font-weight:600;color:#444;border:1px solid #ccc;border-radius:4px;outline:none}button[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px;font-weight:600;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#0069d9}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:default}.delete-button[_ngcontent-%COMP%]{position:relative;padding-bottom:0%;font-size:14px;font-weight:600;color:#fff;background-color:#dc3545;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease}.delete-button[_ngcontent-%COMP%]   .bi-trash[_ngcontent-%COMP%]{display:block;margin:auto}.delete-button[_ngcontent-%COMP%]:hover{background-color:#c82333}.delete-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:default}.content[_ngcontent-%COMP%]{margin:0;padding:16px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px 16px;vertical-align:middle;text-align:left}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{padding-left:0}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{padding-right:0;line-height:normal}@media only screen and (max-width: 768px){.table[_ngcontent-%COMP%]{font-size:12px}.th-heading[_ngcontent-%COMP%]{font-size:14px;padding:8px 12px}.tbody[_ngcontent-%COMP%], .tfoot[_ngcontent-%COMP%]{font-size:12px;padding:8px 12px}input[type=text][_ngcontent-%COMP%]{font-size:14px}button[_ngcontent-%COMP%]{font-size:12px;padding:8px 12px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px 12px}}.fa-sort-up[_ngcontent-%COMP%]:before{content:"\\f0de"}.fa-sort-down[_ngcontent-%COMP%]:before{content:"\\f0dd"}.fa-sort-both[_ngcontent-%COMP%]:before{content:"\\f0dc"}']}),t})();class Y0{static validateAllFormFields(n){Object.keys(n.controls).forEach(e=>{const i=n.get(e);i instanceof hf?i.markAsDirty({onlySelf:!0}):i instanceof uf&&this.validateAllFormFields(i)})}}function B6(t,n){1&t&&(W(0,"small",30),ge(1," User name is required! "),Y())}function z6(t,n){1&t&&(W(0,"small",30),ge(1," Password is required! "),Y())}let V6=(()=>{class t{constructor(e,i,o,s){this.fb=e,this.auth=i,this.router=o,this.toast=s,this.type="password",this.isText=!1,this.eyeIcon="fa-eye-slash"}ngOnInit(){this.loginForm=this.fb.group({username:["",Go.required],password:["",Go.required]})}hideShowPass(){this.isText=!this.isText,this.eyeIcon=this.isText?"fa-eye":"fa-eye-slash",this.type=this.isText?"text":"password"}onLogin(){this.loginForm.valid?(console.log(this.loginForm.value),this.auth.login(this.loginForm.value).subscribe({next:e=>{console.log(e.message),this.loginForm.reset(),this.auth.storeToken(e.token),this.toast.success({detail:"SUCCESS",summary:e.message,duration:5e3}),this.router.navigate(["dashboard"])},error:e=>{this.toast.error({detail:"ERROR",summary:"Somthing went wrong",duration:5e3}),console.log(e)}})):(Y0.validateAllFormFields(this.loginForm),this.toast.error({detail:"ERROR",summary:"Your form is Invalid",duration:5e3}))}}return t.\u0275fac=function(e){return new(e||t)(J(T0),J(ou),J(Xi),J(ru))},t.\u0275cmp=Wt({type:t,selectors:[["app-login"]],decls:38,vars:11,consts:[[1,"outer"],[1,"container"],[1,"row"],[1,"offset-md-2","col-lg-5","col-md-7","offset-lg-4","offset-md-3"],[1,"panel","border","bg-white"],[1,"panel-heading"],[1,"pt-3","font-weight-bold"],[1,"panel-body","p-3"],[3,"formGroup"],[1,"form-group","pt-3"],[1,"input-field"],[1,"fa","fa-user","p-2"],["formControlName","username","type","text","placeholder","Username"],["class","text-danger",4,"ngIf"],[1,"fa","fa-lock","p-2"],["formControlName","password","placeholder","Password",3,"type"],[3,"click"],[1,"form-inline","fr","mt-4"],["herf","","id","forget",1,"font-weight-bold"],["type","submit",1,"btn","btn-primary","btn-block","mt-4","w-100",3,"click"],[1,"text-center","pt-4","text-muted"],["id","forget","routerLink","/signup",1,"font-weight-bold"],[1,"mx-3","my-2","py-2","bordert"],[1,"text-center","py-3"],["href","https://www.facebook.com","target","_blank",1,"px-2"],["src","https://www.dpreview.com/files/p/articles/4698742202/facebook.jpeg","alt",""],["href","https://www.google.com","target","_blank",1,"px-2"],["src","https://www.freepnglogos.com/uploads/google-logo-png/google-logo-png-suite-everything-you-need-know-about-google-newest-0.png","alt",""],["href","https://www.github.com","target","_blank",1,"px-2"],["src","https://www.freepnglogos.com/uploads/512x512-logo-png/512x512-logo-github-icon-35.png","alt",""],[1,"text-danger"]],template:function(e,i){1&e&&(W(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),ge(7,"Login"),Y()(),W(8,"div",7)(9,"form",8)(10,"div",9)(11,"div",10),lt(12,"span",11)(13,"input",12),Y(),Ee(14,B6,2,0,"small",13),W(15,"div",9)(16,"div",10),lt(17,"span",14)(18,"input",15),W(19,"span",16),Xe("click",function(){return i.hideShowPass()}),Y()()()(),Ee(20,z6,2,0,"small",13),W(21,"div",17)(22,"a",18),ge(23,"Forget Password?"),Y()(),W(24,"button",19),Xe("click",function(){return i.onLogin()}),ge(25,"Login"),Y(),W(26,"div",20),ge(27,"Don't have account? "),W(28,"a",21),ge(29,"Sign Up"),Y()()()(),W(30,"div",22)(31,"div",23)(32,"a",24),lt(33,"img",25),Y(),W(34,"a",26),lt(35,"img",27),Y(),W(36,"a",28),lt(37,"img",29),Y()()()()()()()()),2&e&&(ne(9),me("formGroup",i.loginForm),ne(2),ut("error",i.loginForm.controls.username.dirty&&i.loginForm.hasError("required","username")),ne(3),me("ngIf",i.loginForm.controls.username.dirty&&i.loginForm.hasError("required","username")),ne(2),ut("error",i.loginForm.controls.password.dirty&&i.loginForm.hasError("required","password")),ne(2),me("type",i.type),ne(1),oc("fa ",i.eyeIcon,""),ne(1),me("ngIf",i.loginForm.controls.password.dirty&&i.loginForm.hasError("required","password")))},dependencies:[Pi,Mh,Dg,Ch,cf,_g,Eh,pf]}),t})();function U6(t,n){1&t&&(W(0,"small",27),ge(1," First name is required! "),Y())}function H6(t,n){1&t&&(W(0,"small",27),ge(1," Last name is required! "),Y())}function j6(t,n){1&t&&(W(0,"small",27),ge(1," Email is required! "),Y())}function $6(t,n){1&t&&(W(0,"small",27),ge(1," User name is required! "),Y())}function G6(t,n){1&t&&(W(0,"small",27),ge(1," Password is required! "),Y())}function W6(t,n){1&t&&(W(0,"small",27),ge(1," Confirm Password is required! "),Y())}let q6=(()=>{class t{constructor(e,i,o){this.fb=e,this.auth=i,this.router=o,this.type="password",this.isText=!1,this.eyeIcon="fa-eye-slash"}ngOnInit(){this.signUpForm=this.fb.group({firstname:["",Go.required],lastname:["",Go.required],username:["",Go.required],email:["",Go.required],password:["",Go.required],confirmPassword:["",Go.required]})}hideShowPass(){this.isText=!this.isText,this.eyeIcon=this.isText?"fa-eye":"fa-eye-slash",this.type=this.isText?"text":"password"}onSignUp(){this.signUpForm.valid?(console.log(this.signUpForm.value),this.auth.signUp(this.signUpForm.value).subscribe({next:e=>{alert(e.message),this.signUpForm.reset(),this.router.navigate(["login"])},error:e=>{alert(e?.error.message)}})):(Y0.validateAllFormFields(this.signUpForm),alert("Your form is Invalid"))}}return t.\u0275fac=function(e){return new(e||t)(J(T0),J(ou),J(Xi))},t.\u0275cmp=Wt({type:t,selectors:[["app-signup"]],decls:49,vars:27,consts:[[1,"outer"],[1,"container"],[1,"row"],[1,"offset-md-2","col-lg-5","col-md-7","offset-lg-4","offset-md-3"],[1,"panel","border","bg-white"],[1,"panel-heading"],[1,"pt-3","font-weight-bold"],[1,"panel-body","p-3"],[3,"formGroup"],[1,"form-group","pt-3"],[1,"input-field"],["formControlName","firstname","type","text","placeholder","First Name"],["class","text-danger",4,"ngIf"],["formControlName","lastname","type","text","placeholder","Last Name"],[1,"fa","fa-envelope-o"],["formControlName","email","type","text","placeholder","Email"],[1,"fa","fa-user","p-2"],["formControlName","username","type","text","placeholder","Username"],[1,"fa","fa-lock","p-2"],["formControlName","password","placeholder","Password",3,"type"],[3,"click"],["formControlName","confirmPassword","placeholder","Confirm Password",3,"type"],[1,"form-inline","fr","mt-4"],["herf","","id","forget",1,"font-weight-bold"],["type","submit",1,"btn","btn-primary","btn-block","mt-4","w-100",3,"click"],[1,"text-center","pt-4","text-muted"],["id","forget","routerLink","/login",1,"font-weight-bold"],[1,"text-danger"]],template:function(e,i){1&e&&(W(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),ge(7,"Sign Up"),Y()(),W(8,"div",7)(9,"form",8)(10,"div",9)(11,"div",10),lt(12,"input",11),Y()(),Ee(13,U6,2,0,"small",12),W(14,"div",9)(15,"div",10),lt(16,"input",13),Y()(),Ee(17,H6,2,0,"small",12),W(18,"div",9)(19,"div",10),lt(20,"span",14)(21,"input",15),Y()(),Ee(22,j6,2,0,"small",12),W(23,"div",9)(24,"div",10),lt(25,"span",16)(26,"input",17),Y()(),Ee(27,$6,2,0,"small",12),W(28,"div",9)(29,"div",10),lt(30,"span",18)(31,"input",19),W(32,"span",20),Xe("click",function(){return i.hideShowPass()}),Y()()(),Ee(33,G6,2,0,"small",12),W(34,"div",9)(35,"div",10),lt(36,"span",18)(37,"input",21),W(38,"span",20),Xe("click",function(){return i.hideShowPass()}),Y()()(),Ee(39,W6,2,0,"small",12),W(40,"div",22)(41,"a",23),ge(42,"Forget Password?"),Y()(),W(43,"button",24),Xe("click",function(){return i.onSignUp()}),ge(44,"Sign Up"),Y(),W(45,"div",25),ge(46,"Already have account? "),W(47,"a",26),ge(48,"Login"),Y()()()()()()()()()),2&e&&(ne(9),me("formGroup",i.signUpForm),ne(2),ut("error",i.signUpForm.controls.firstname.dirty&&i.signUpForm.hasError("required","firstname")),ne(2),me("ngIf",i.signUpForm.controls.firstname.dirty&&i.signUpForm.hasError("required","firstname")),ne(2),ut("error",i.signUpForm.controls.lastname.dirty&&i.signUpForm.hasError("required","lastname")),ne(2),me("ngIf",i.signUpForm.controls.lastname.dirty&&i.signUpForm.hasError("required","lastname")),ne(2),ut("error",i.signUpForm.controls.email.dirty&&i.signUpForm.hasError("required","email")),ne(3),me("ngIf",i.signUpForm.controls.email.dirty&&i.signUpForm.hasError("required","email")),ne(2),ut("error",i.signUpForm.controls.username.dirty&&i.signUpForm.hasError("required","username")),ne(3),me("ngIf",i.signUpForm.controls.username.dirty&&i.signUpForm.hasError("required","username")),ne(2),ut("error",i.signUpForm.controls.password.dirty&&i.signUpForm.hasError("required","password")),ne(2),me("type",i.type),ne(1),oc("fa ",i.eyeIcon,""),ne(1),me("ngIf",i.signUpForm.controls.password.dirty&&i.signUpForm.hasError("required","password")),ne(2),ut("error",i.signUpForm.controls.confirmPassword.dirty&&i.signUpForm.hasError("required","confirmPassword")),ne(2),me("type",i.type),ne(1),oc("fa ",i.eyeIcon,""),ne(1),me("ngIf",i.signUpForm.controls.confirmPassword.dirty&&i.signUpForm.hasError("required","confirmPassword")))},dependencies:[Pi,Mh,Dg,Ch,cf,_g,Eh,pf]}),t})();function U2(t,n,e,i,o,s,d){try{var f=t[s](d),_=f.value}catch(C){return void e(C)}f.done?n(_):Promise.resolve(_).then(i,o)}function H2(t){return function(){var n=this,e=arguments;return new Promise(function(i,o){var s=t.apply(n,e);function d(_){U2(s,i,o,d,f,"next",_)}function f(_){U2(s,i,o,d,f,"throw",_)}d(void 0)})}}var Q0=qc(943);class j2 extends Ht{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(n){const{hasError:e,_hasValue:i,_value:o,thrownError:s,isStopped:d,_isComplete:f}=this;e?n.error(s):(d||f)&&(i&&n.next(o),n.complete())}next(n){this.isStopped||(this._value=n,this._hasValue=!0)}complete(){const{_hasValue:n,_value:e,_isComplete:i}=this;i||(this._isComplete=!0,n&&super.next(e),super.complete())}}const $2=["content"],G2=["*"],Z6=["container"];let jg=(()=>{class t{constructor(e){this.zone=e,this.mapCreated=new j2,this.mapLoaded=new j2,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new di,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(e){this.zone.onStable.pipe(jc()).subscribe(()=>{this.createMap(e.mapOptions),this.hookEvents(e.mapEvents),this.mapEvents=e.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete()})}destroyMap(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}updateMinZoom(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(e)})}updateMaxZoom(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(e)})}updateMinPitch(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(e)})}updateMaxPitch(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(e)})}updateRenderWorldCopies(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(e)})}updateScrollZoom(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(e){return this.zone.runOutsideAngular(()=>{e?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(e)})}updateMaxBounds(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(e)})}changeCanvasCursor(e){this.mapInstance.getCanvasContainer().style.cursor=e}queryRenderedFeatures(e,i){return this.mapInstance.queryRenderedFeatures(e,i)}panTo(e,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(e,i)})}move(e,i,o,s,d,f){return this.zone.runOutsideAngular(()=>{this.mapInstance[e]({...i,zoom:o??this.mapInstance.getZoom(),center:s??this.mapInstance.getCenter(),bearing:d??this.mapInstance.getBearing(),pitch:f??this.mapInstance.getPitch()})})}addLayer(e,i,o){this.zone.runOutsideAngular(()=>{Object.keys(e.layerOptions).forEach(s=>{void 0===e.layerOptions[s]&&delete e.layerOptions[s]}),this.mapInstance.addLayer(e.layerOptions,o),i&&(e.layerEvents.layerClick.observers.length&&this.mapInstance.on("click",e.layerOptions.id,s=>{this.zone.run(()=>{e.layerEvents.layerClick.emit(s)})}),e.layerEvents.layerDblClick.observers.length&&this.mapInstance.on("dblclick",e.layerOptions.id,s=>{this.zone.run(()=>{e.layerEvents.layerDblClick.emit(s)})}),e.layerEvents.layerMouseDown.observers.length&&this.mapInstance.on("mousedown",e.layerOptions.id,s=>{this.zone.run(()=>{e.layerEvents.layerMouseDown.emit(s)})}),e.layerEvents.layerMouseUp.observers.length&&this.mapInstance.on("mouseup",e.layerOptions.id,s=>{this.zone.run(()=>{e.layerEvents.layerMouseUp.emit(s)})}),e.layerEvents.layerMouseEnter.observers.length&&this.mapInstance.on("mouseenter",e.layerOptions.id,s=>{this.zone.run(()=>{e.layerEvents.layerMouseEnter.emit(s)})}),e.layerEvents.layerMouseLeave.observers.length&&this.mapInstance.on("mouseleave",e.layerOptions.id,s=>{this.zone.run(()=>{e.layerEvents.layerMouseLeave.emit(s)})}),e.layerEvents.layerMouseMove.observers.length&&this.mapInstance.on("mousemove",e.layerOptions.id,s=>{this.zone.run(()=>{e.layerEvents.layerMouseMove.emit(s)})}),e.layerEvents.layerMouseOver.observers.length&&this.mapInstance.on("mouseover",e.layerOptions.id,s=>{this.zone.run(()=>{e.layerEvents.layerMouseOver.emit(s)})}),e.layerEvents.layerMouseOut.observers.length&&this.mapInstance.on("mouseout",e.layerOptions.id,s=>{this.zone.run(()=>{e.layerEvents.layerMouseOut.emit(s)})}),e.layerEvents.layerContextMenu.observers.length&&this.mapInstance.on("contextmenu",e.layerOptions.id,s=>{this.zone.run(()=>{e.layerEvents.layerContextMenu.emit(s)})}),e.layerEvents.layerTouchStart.observers.length&&this.mapInstance.on("touchstart",e.layerOptions.id,s=>{this.zone.run(()=>{e.layerEvents.layerTouchStart.emit(s)})}),e.layerEvents.layerTouchEnd.observers.length&&this.mapInstance.on("touchend",e.layerOptions.id,s=>{this.zone.run(()=>{e.layerEvents.layerTouchEnd.emit(s)})}),e.layerEvents.layerTouchCancel.observers.length&&this.mapInstance.on("touchcancel",e.layerOptions.id,s=>{this.zone.run(()=>{e.layerEvents.layerTouchCancel.emit(s)})}))})}removeLayer(e){this.zone.runOutsideAngular(()=>{null!=this.mapInstance.getLayer(e)&&this.mapInstance.removeLayer(e)})}addMarker(e){const i={offset:e.markersOptions.offset,anchor:e.markersOptions.anchor,draggable:!!e.markersOptions.draggable,rotationAlignment:e.markersOptions.rotationAlignment,pitchAlignment:e.markersOptions.pitchAlignment,clickTolerance:e.markersOptions.clickTolerance};e.markersOptions.element.childNodes.length>0&&(i.element=e.markersOptions.element);const o=new Q0.Marker(i);return e.markersEvents.markerDragStart.observers.length&&o.on("dragstart",d=>{if(d){const{target:f}=d;this.zone.run(()=>{e.markersEvents.markerDragStart.emit(f)})}}),e.markersEvents.markerDrag.observers.length&&o.on("drag",d=>{if(d){const{target:f}=d;this.zone.run(()=>{e.markersEvents.markerDrag.emit(f)})}}),e.markersEvents.markerDragEnd.observers.length&&o.on("dragend",d=>{if(d){const{target:f}=d;this.zone.run(()=>{e.markersEvents.markerDragEnd.emit(f)})}}),o.setLngLat(e.markersOptions.feature?e.markersOptions.feature.geometry.coordinates:e.markersOptions.lngLat),this.zone.runOutsideAngular(()=>(o.addTo(this.mapInstance),o))}removeMarker(e){this.markersToRemove.push(e)}createPopup(e,i){return this.zone.runOutsideAngular(()=>{Object.keys(e.popupOptions).forEach(s=>void 0===e.popupOptions[s]&&delete e.popupOptions[s]);const o=new Q0.Popup(e.popupOptions);return o.setDOMContent(i),e.popupEvents.popupClose.observers.length&&o.on("close",()=>{this.zone.run(()=>{e.popupEvents.popupClose.emit()})}),e.popupEvents.popupOpen.observers.length&&o.on("open",()=>{this.zone.run(()=>{e.popupEvents.popupOpen.emit()})}),o})}addPopupToMap(e,i,o=!1){return this.zone.runOutsideAngular(()=>{o&&e._listeners&&delete e._listeners.open,e.setLngLat(i),e.addTo(this.mapInstance)})}addPopupToMarker(e,i){return this.zone.runOutsideAngular(()=>{e.setPopup(i)})}removePopupFromMap(e,i=!1){i&&e._listeners&&delete e._listeners.close,this.popupsToRemove.push(e)}removePopupFromMarker(e){return this.zone.runOutsideAngular(()=>{e.setPopup(void 0)})}addControl(e,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(e,i)})}removeControl(e){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(e)})}loadAndAddImage(e,i,o){var s=this;return H2(function*(){return s.zone.runOutsideAngular(()=>new Promise((d,f)=>{s.mapInstance.loadImage(i,(_,C)=>{_?f(_):(s.addImage(e,C,o),d())})}))})()}addImage(e,i,o){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(e,i,o)})}removeImage(e){this.imageIdsToRemove.push(e)}addSource(e,i){return this.zone.runOutsideAngular(()=>{Object.keys(i).forEach(o=>void 0===i[o]&&delete i[o]),this.mapInstance.addSource(e,i)})}getSource(e){return this.mapInstance.getSource(e)}removeSource(e){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(e).forEach(i=>this.mapInstance.removeLayer(i.id)),this.mapInstance.removeSource(e)})}setAllLayerPaintProperty(e,i){return this.zone.runOutsideAngular(()=>{Object.keys(i).forEach(o=>{this.mapInstance.setPaintProperty(e,o,i[o])})})}setAllLayerLayoutProperty(e,i){return this.zone.runOutsideAngular(()=>{Object.keys(i).forEach(o=>{this.mapInstance.setLayoutProperty(e,o,i[o])})})}setLayerFilter(e,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(e,i)})}setLayerBefore(e,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(e,i)})}setLayerZoomRange(e,i,o){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(e,i||0,o||20)})}fitBounds(e,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(e,i)})}fitScreenCoordinates(e,i,o){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(e[0],e[1],i,o)})}applyChanges(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(e){_n.assertNotInAngularZone(),Object.keys(e).forEach(o=>{void 0===e[o]&&delete e[o]}),this.mapInstance=new Q0.Map(e),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(e.style),this.subscription.add(this.zone.onMicrotaskEmpty.subscribe(()=>this.applyChanges()))}removeMarkers(){for(const e of this.markersToRemove)e.remove();this.markersToRemove=[]}removePopups(){for(const e of this.popupsToRemove)e.remove();this.popupsToRemove=[]}removeImages(){for(const e of this.imageIdsToRemove)this.mapInstance.removeImage(e);this.imageIdsToRemove=[]}findLayersBySourceId(e){const i=this.mapInstance.getStyle().layers;return null==i?[]:i.filter(o=>"source"in o&&o.source===e)}hookEvents(e){this.mapInstance.on("load",i=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{e.mapLoad.emit(i.target)})}),e.mapResize.observers.length&&this.mapInstance.on("resize",i=>this.zone.run(()=>{e.mapResize.emit(i)})),e.mapRemove.observers.length&&this.mapInstance.on("remove",i=>this.zone.run(()=>{e.mapRemove.emit(i)})),e.mapMouseDown.observers.length&&this.mapInstance.on("mousedown",i=>this.zone.run(()=>{e.mapMouseDown.emit(i)})),e.mapMouseUp.observers.length&&this.mapInstance.on("mouseup",i=>this.zone.run(()=>{e.mapMouseUp.emit(i)})),e.mapMouseMove.observers.length&&this.mapInstance.on("mousemove",i=>this.zone.run(()=>{e.mapMouseMove.emit(i)})),e.mapClick.observers.length&&this.mapInstance.on("click",i=>this.zone.run(()=>{e.mapClick.emit(i)})),e.mapDblClick.observers.length&&this.mapInstance.on("dblclick",i=>this.zone.run(()=>{e.mapDblClick.emit(i)})),e.mapMouseOver.observers.length&&this.mapInstance.on("mouseover",i=>this.zone.run(()=>{e.mapMouseOver.emit(i)})),e.mapMouseOut.observers.length&&this.mapInstance.on("mouseout",i=>this.zone.run(()=>{e.mapMouseOut.emit(i)})),e.mapContextMenu.observers.length&&this.mapInstance.on("contextmenu",i=>this.zone.run(()=>{e.mapContextMenu.emit(i)})),e.mapTouchStart.observers.length&&this.mapInstance.on("touchstart",i=>this.zone.run(()=>{e.mapTouchStart.emit(i)})),e.mapTouchEnd.observers.length&&this.mapInstance.on("touchend",i=>this.zone.run(()=>{e.mapTouchEnd.emit(i)})),e.mapTouchMove.observers.length&&this.mapInstance.on("touchmove",i=>this.zone.run(()=>{e.mapTouchMove.emit(i)})),e.mapTouchCancel.observers.length&&this.mapInstance.on("touchcancel",i=>this.zone.run(()=>{e.mapTouchCancel.emit(i)})),e.mapWheel.observers.length&&this.mapInstance.on("wheel",i=>this.zone.run(()=>{e.mapWheel.emit(i)})),e.moveStart.observers.length&&this.mapInstance.on("movestart",i=>this.zone.run(()=>e.moveStart.emit(i))),e.move.observers.length&&this.mapInstance.on("move",i=>this.zone.run(()=>e.move.emit(i))),e.moveEnd.observers.length&&this.mapInstance.on("moveend",i=>this.zone.run(()=>e.moveEnd.emit(i))),e.mapDragStart.observers.length&&this.mapInstance.on("dragstart",i=>this.zone.run(()=>{e.mapDragStart.emit(i)})),e.mapDrag.observers.length&&this.mapInstance.on("drag",i=>this.zone.run(()=>{e.mapDrag.emit(i)})),e.mapDragEnd.observers.length&&this.mapInstance.on("dragend",i=>this.zone.run(()=>{e.mapDragEnd.emit(i)})),e.zoomStart.observers.length&&this.mapInstance.on("zoomstart",i=>this.zone.run(()=>e.zoomStart.emit(i))),e.zoomEvt.observers.length&&this.mapInstance.on("zoom",i=>this.zone.run(()=>e.zoomEvt.emit(i))),e.zoomEnd.observers.length&&this.mapInstance.on("zoomend",i=>this.zone.run(()=>e.zoomEnd.emit(i))),e.rotateStart.observers.length&&this.mapInstance.on("rotatestart",i=>this.zone.run(()=>e.rotateStart.emit(i))),e.rotate.observers.length&&this.mapInstance.on("rotate",i=>this.zone.run(()=>e.rotate.emit(i))),e.rotateEnd.observers.length&&this.mapInstance.on("rotateend",i=>this.zone.run(()=>e.rotateEnd.emit(i))),e.pitchStart.observers.length&&this.mapInstance.on("pitchstart",i=>this.zone.run(()=>e.pitchStart.emit(i))),e.pitchEvt.observers.length&&this.mapInstance.on("pitch",i=>this.zone.run(()=>e.pitchEvt.emit(i))),e.pitchEnd.observers.length&&this.mapInstance.on("pitchend",i=>this.zone.run(()=>e.pitchEnd.emit(i))),e.boxZoomStart.observers.length&&this.mapInstance.on("boxzoomstart",i=>this.zone.run(()=>e.boxZoomStart.emit(i))),e.boxZoomEnd.observers.length&&this.mapInstance.on("boxzoomend",i=>this.zone.run(()=>e.boxZoomEnd.emit(i))),e.boxZoomCancel.observers.length&&this.mapInstance.on("boxzoomcancel",i=>this.zone.run(()=>e.boxZoomCancel.emit(i))),e.webGlContextLost.observers.length&&this.mapInstance.on("webglcontextlost",i=>this.zone.run(()=>e.webGlContextLost.emit(i))),e.webGlContextRestored.observers.length&&this.mapInstance.on("webglcontextrestored",i=>this.zone.run(()=>e.webGlContextRestored.emit(i))),e.render.observers.length&&this.mapInstance.on("render",i=>this.zone.run(()=>e.render.emit(i))),e.mapError.observers.length&&this.mapInstance.on("error",i=>this.zone.run(()=>{e.mapError.emit(i)})),e.data.observers.length&&this.mapInstance.on("data",i=>this.zone.run(()=>e.data.emit(i))),e.styleData.observers.length&&this.mapInstance.on("styledata",i=>this.zone.run(()=>e.styleData.emit(i))),e.sourceData.observers.length&&this.mapInstance.on("sourcedata",i=>this.zone.run(()=>e.sourceData.emit(i))),e.dataLoading.observers.length&&this.mapInstance.on("dataloading",i=>this.zone.run(()=>e.dataLoading.emit(i))),e.styleDataLoading.observers.length&&this.mapInstance.on("styledataloading",i=>this.zone.run(()=>e.styleDataLoading.emit(i))),e.sourceDataLoading.observers.length&&this.mapInstance.on("sourcedataloading",i=>this.zone.run(()=>e.sourceDataLoading.emit(i))),e.styleImageMissing.observers.length&&this.mapInstance.on("styleimagemissing",i=>this.zone.run(()=>e.styleImageMissing.emit(i))),e.idle.observers.length&&this.mapInstance.on("idle",i=>this.zone.run(()=>e.idle.emit(i)))}}return t.\u0275fac=function(e){return new(e||t)(Le(_n))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();class J6{constructor(n){this.container=n}onAdd(){return this.container}onRemove(){return this.container.parentNode.removeChild(this.container)}getDefaultPosition(){return"top-right"}}let q2=(()=>{class t{constructor(e){this.mapService=e,this.controlAdded=!1}ngAfterContentInit(){this.content.nativeElement.childNodes.length&&(this.control=new J6(this.content.nativeElement),this.mapService.mapCreated$.subscribe(()=>{this.mapService.addControl(this.control,this.position),this.controlAdded=!0}))}ngOnDestroy(){this.controlAdded&&this.mapService.removeControl(this.control)}}return t.\u0275fac=function(e){return new(e||t)(J(jg))},t.\u0275cmp=Wt({type:t,selectors:[["mgl-control"]],viewQuery:function(e,i){if(1&e&&gi($2,7),2&e){let o;Et(o=St())&&(i.content=o.first)}},inputs:{position:"position"},ngContentSelectors:G2,decls:3,vars:0,consts:[[1,"maplibregl-ctrl"],["content",""]],template:function(e,i){1&e&&(hl(),W(0,"div",0,1),pl(2),Y())},encapsulation:2,changeDetection:0}),t})(),eU=(()=>{class t{constructor(e,i){this.mapService=e,this.controlComponent=i}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const e={};void 0!==this.showCompass&&(e.showCompass=this.showCompass),void 0!==this.showZoom&&(e.showZoom=this.showZoom),this.controlComponent.control=new Q0.NavigationControl(e),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return t.\u0275fac=function(e){return new(e||t)(J(jg),J(q2,1))},t.\u0275dir=We({type:t,selectors:[["","mglNavigation",""]],inputs:{showCompass:"showCompass",showZoom:"showZoom"}}),t})(),tU=(()=>{class t{constructor(e){this.mapService=e,this.movingMethod="flyTo",this.mapResize=new Me,this.mapRemove=new Me,this.mapMouseDown=new Me,this.mapMouseUp=new Me,this.mapMouseMove=new Me,this.mapClick=new Me,this.mapDblClick=new Me,this.mapMouseOver=new Me,this.mapMouseOut=new Me,this.mapContextMenu=new Me,this.mapTouchStart=new Me,this.mapTouchEnd=new Me,this.mapTouchMove=new Me,this.mapTouchCancel=new Me,this.mapWheel=new Me,this.moveStart=new Me,this.move=new Me,this.moveEnd=new Me,this.mapDragStart=new Me,this.mapDrag=new Me,this.mapDragEnd=new Me,this.zoomStart=new Me,this.zoomEvt=new Me,this.zoomEnd=new Me,this.rotateStart=new Me,this.rotate=new Me,this.rotateEnd=new Me,this.pitchStart=new Me,this.pitchEvt=new Me,this.pitchEnd=new Me,this.boxZoomStart=new Me,this.boxZoomEnd=new Me,this.boxZoomCancel=new Me,this.webGlContextLost=new Me,this.webGlContextRestored=new Me,this.mapLoad=new Me,this.idle=new Me,this.render=new Me,this.mapError=new Me,this.data=new Me,this.styleData=new Me,this.sourceData=new Me,this.dataLoading=new Me,this.styleDataLoading=new Me,this.sourceDataLoading=new Me,this.styleImageMissing=new Me}get mapInstance(){return this.mapService.mapInstance}ngAfterViewInit(){this.mapService.setup({mapOptions:{collectResourceTiming:this.collectResourceTiming,container:this.mapContainer.nativeElement,crossSourceCollisions:this.crossSourceCollisions,fadeDuration:this.fadeDuration,minZoom:this.minZoom,maxZoom:this.maxZoom,minPitch:this.minPitch,maxPitch:this.maxPitch,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchPitch:this.touchPitch,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale,cooperativeGestures:this.cooperativeGestures},mapEvents:this}),this.cursorStyle&&this.mapService.changeCanvasCursor(this.cursorStyle)}ngOnDestroy(){this.mapService.destroyMap()}ngOnChanges(e){var i=this;return H2(function*(){yield i.mapService.mapCreated$.toPromise(),e.cursorStyle&&!e.cursorStyle.isFirstChange()&&i.mapService.changeCanvasCursor(e.cursorStyle.currentValue),e.minZoom&&!e.minZoom.isFirstChange()&&i.mapService.updateMinZoom(e.minZoom.currentValue),e.maxZoom&&!e.maxZoom.isFirstChange()&&i.mapService.updateMaxZoom(e.maxZoom.currentValue),e.minPitch&&!e.minPitch.isFirstChange()&&i.mapService.updateMinPitch(e.minPitch.currentValue),e.maxPitch&&!e.maxPitch.isFirstChange()&&i.mapService.updateMaxPitch(e.maxPitch.currentValue),e.renderWorldCopies&&!e.renderWorldCopies.isFirstChange()&&i.mapService.updateRenderWorldCopies(e.renderWorldCopies.currentValue),e.scrollZoom&&!e.scrollZoom.isFirstChange()&&i.mapService.updateScrollZoom(e.scrollZoom.currentValue),e.dragRotate&&!e.dragRotate.isFirstChange()&&i.mapService.updateDragRotate(e.dragRotate.currentValue),e.touchPitch&&!e.touchPitch.isFirstChange()&&i.mapService.updateTouchPitch(e.touchPitch.currentValue),e.touchZoomRotate&&!e.touchZoomRotate.isFirstChange()&&i.mapService.updateTouchZoomRotate(e.touchZoomRotate.currentValue),e.doubleClickZoom&&!e.doubleClickZoom.isFirstChange()&&i.mapService.updateDoubleClickZoom(e.doubleClickZoom.currentValue),e.keyboard&&!e.keyboard.isFirstChange()&&i.mapService.updateKeyboard(e.keyboard.currentValue),e.dragPan&&!e.dragPan.isFirstChange()&&i.mapService.updateDragPan(e.dragPan.currentValue),e.boxZoom&&!e.boxZoom.isFirstChange()&&i.mapService.updateBoxZoom(e.boxZoom.currentValue),e.style&&!e.style.isFirstChange()&&i.mapService.updateStyle(e.style.currentValue),e.maxBounds&&!e.maxBounds.isFirstChange()&&i.mapService.updateMaxBounds(e.maxBounds.currentValue),e.fitBounds&&e.fitBounds.currentValue&&!e.fitBounds.isFirstChange()&&i.mapService.fitBounds(e.fitBounds.currentValue,i.fitBoundsOptions),e.fitScreenCoordinates&&e.fitScreenCoordinates.currentValue&&((i.center||i.zoom||i.pitch||i.fitBounds)&&e.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-mapbox-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),i.mapService.fitScreenCoordinates(e.fitScreenCoordinates.currentValue,i.bearing?i.bearing[0]:0,i.movingOptions)),!i.centerWithPanTo||!e.center||e.center.isFirstChange()||e.zoom||e.bearing||e.pitch?(e.center&&!e.center.isFirstChange()||e.zoom&&!e.zoom.isFirstChange()||e.bearing&&!e.bearing.isFirstChange()&&!e.fitScreenCoordinates||e.pitch&&!e.pitch.isFirstChange())&&i.mapService.move(i.movingMethod,i.movingOptions,e.zoom&&i.zoom?i.zoom[0]:void 0,e.center?i.center:void 0,e.bearing&&i.bearing?i.bearing[0]:void 0,e.pitch&&i.pitch?i.pitch[0]:void 0):i.mapService.panTo(i.center,i.panToOptions)})()}}return t.\u0275fac=function(e){return new(e||t)(J(jg))},t.\u0275cmp=Wt({type:t,selectors:[["mgl-map"]],viewQuery:function(e,i){if(1&e&&gi(Z6,7),2&e){let o;Et(o=St())&&(i.mapContainer=o.first)}},inputs:{collectResourceTiming:"collectResourceTiming",crossSourceCollisions:"crossSourceCollisions",customMapboxApiUrl:"customMapboxApiUrl",fadeDuration:"fadeDuration",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",cooperativeGestures:"cooperativeGestures",minZoom:"minZoom",maxZoom:"maxZoom",minPitch:"minPitch",maxPitch:"maxPitch",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchPitch:"touchPitch",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",renderWorldCopies:"renderWorldCopies",movingMethod:"movingMethod",movingOptions:"movingOptions",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing"},features:[jn([jg]),Mn],decls:2,vars:0,consts:[["container",""]],template:function(e,i){1&e&&lt(0,"div",null,0)},styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0}),t})(),nU=(()=>{class t{constructor(e){this.mapService=e,this.markerDragStart=new Me,this.markerDragEnd=new Me,this.markerDrag=new Me}ngOnInit(){if(this.feature&&this.lngLat)throw new Error("feature and lngLat input are mutually exclusive")}ngOnChanges(e){e.lngLat&&!e.lngLat.isFirstChange()&&this.markerInstance.setLngLat(this.lngLat),e.feature&&!e.feature.isFirstChange()&&this.markerInstance.setLngLat(this.feature.geometry.coordinates),e.draggable&&!e.draggable.isFirstChange()&&this.markerInstance.setDraggable(!!this.draggable),e.popupShown&&!e.popupShown.isFirstChange()&&(e.popupShown.currentValue?this.markerInstance.getPopup().addTo(this.mapService.mapInstance):this.markerInstance.getPopup().remove()),e.pitchAlignment&&!e.pitchAlignment.isFirstChange()&&this.markerInstance.setPitchAlignment(e.pitchAlignment.currentValue),e.rotationAlignment&&!e.rotationAlignment.isFirstChange()&&this.markerInstance.setRotationAlignment(e.rotationAlignment.currentValue)}ngAfterViewInit(){this.mapService.mapCreated$.subscribe(()=>{this.markerInstance=this.mapService.addMarker({markersOptions:{offset:this.offset,anchor:this.anchor,pitchAlignment:this.pitchAlignment,rotationAlignment:this.rotationAlignment,draggable:!!this.draggable,element:this.content.nativeElement,feature:this.feature,lngLat:this.lngLat,clickTolerance:this.clickTolerance},markersEvents:{markerDragStart:this.markerDragStart,markerDrag:this.markerDrag,markerDragEnd:this.markerDragEnd}})})}ngOnDestroy(){this.mapService.removeMarker(this.markerInstance),this.markerInstance=void 0}togglePopup(){this.markerInstance.togglePopup()}updateCoordinates(e){this.markerInstance.setLngLat(e)}}return t.\u0275fac=function(e){return new(e||t)(J(jg))},t.\u0275cmp=Wt({type:t,selectors:[["mgl-marker"]],viewQuery:function(e,i){if(1&e&&gi($2,7),2&e){let o;Et(o=St())&&(i.content=o.first)}},inputs:{offset:"offset",anchor:"anchor",clickTolerance:"clickTolerance",feature:"feature",lngLat:"lngLat",draggable:"draggable",popupShown:"popupShown",className:"className",pitchAlignment:"pitchAlignment",rotationAlignment:"rotationAlignment"},outputs:{markerDragStart:"markerDragStart",markerDragEnd:"markerDragEnd",markerDrag:"markerDrag"},features:[Mn],ngContentSelectors:G2,decls:3,vars:2,consts:[["content",""]],template:function(e,i){1&e&&(hl(),W(0,"div",null,0),pl(2),Y()),2&e&&ml(i.className)},encapsulation:2,changeDetection:0}),t})(),iU=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[Ut]}),t})();function oU(t,n){if(1&t&&(W(0,"tr")(1,"td"),ge(2),Y(),W(3,"td"),ge(4),Y(),W(5,"td"),ge(6),Y(),W(7,"td"),ge(8),Y()()),2&t){const e=n.$implicit;ne(2),nn(e.id),ne(2),nn(e.name),ne(2),nn(e.address),ne(2),nn(e.count)}}function rU(t,n){if(1&t&&(W(0,"tr")(1,"td"),ge(2),Y(),W(3,"td"),ge(4),Y(),W(5,"td"),ge(6),Y(),W(7,"td"),ge(8),Y()()),2&t){const e=n.$implicit;ne(2),nn(e.id),ne(2),nn(e.name),ne(2),nn(e.address),ne(2),nn(e.count)}}const sU=function(){return[20]},Z2=function(t,n){return[t,n]};let aU=(()=>{class t{constructor(e,i,o,s){this.api=e,this.route=i,this.router=o,this.toast=s,this.stationDetails=null,this.stationAddr=null,this.displayedColumns=["id","count","name","address"],this.departureStationsData=[],this.returnStationsData=[],this.stationName="",this.stationAddress="",this.stationLocation="",this.departureJourneyCount=0,this.returnJourneyCount=0,this.averageDistanceOfDepartureJourneys=0,this.averageDistanceOfReturnJourneys=0,this.top5DepartureStations=[],this.top5ReturnStations=[],this.selectedMonth=""}ngOnInit(){const e=this.route.snapshot.paramMap.get("id"),i=e?+e:0;this.route.snapshot.queryParamMap.get("month"),console.log("Report ID:",i),this.api.getStationDetails(i.toString(),6..toString()).pipe(xl(()=>(this.toast.error({detail:"Failed to fetch station details",summary:"Error",duration:5e3}),gt))).subscribe(d=>{this.stationDetails=d,this.stationName=d.name,this.stationAddress=d.address,this.stationLocation=`(${d.location.x}, ${d.location.y})`,this.departureJourneyCount=d.departureJourneyCount,this.returnJourneyCount=d.returnJourneyCount,this.averageDistanceOfDepartureJourneys=d.averageDistanceOfDepartureJourneys,this.averageDistanceOfReturnJourneys=d.averageDistanceOfReturnJourneys,this.top5DepartureStations=this.getEntries(d.top5DepartureStations).map(([f,_])=>({id:f,count:_,name:"",address:""})),this.api.getSingleStations(this.top5DepartureStations.map(f=>f.id)).pipe(xl(()=>(this.toast.error({detail:"No journey",summary:"Error",duration:5e3}),gt))).subscribe(f=>{console.log("Top 5 Departure Stations",f),this.top5DepartureStations=this.top5DepartureStations.map(_=>({id:_.id?.toString()||"",count:_.count,name:f.find(C=>C.id===_.id)?.name||"",address:f.find(C=>C.id===_.id)?.address||""}))}),this.top5ReturnStations=this.getEntries(d.top5ReturnStations).map(([f,_])=>({id:f,count:_,name:"",address:""})),this.api.getSingleStations(this.top5ReturnStations.map(f=>f.id)).pipe(xl(()=>(this.toast.error({detail:"No journey",summary:"Error",duration:5e3}),gt))).subscribe(f=>{this.top5ReturnStations=this.top5ReturnStations.map(_=>({id:_.id?.toString()||"",count:_.count,name:f.find(C=>C.id===_.id)?.name||"",address:f.find(C=>C.id===_.id)?.address||""}))})})}getEntries(e){return Object.entries(e).sort((i,o)=>o[1]-i[1]).slice(0,5)}}return t.\u0275fac=function(e){return new(e||t)(J(Ef),J(nu),J(Xi),J(ru))},t.\u0275cmp=Wt({type:t,selectors:[["app-station-details"]],decls:78,vars:24,consts:[[1,"container-fluid","g-0"],[1,"row"],[1,"col-lg-6","col-md-12","col-sm-12"],[1,"map-container"],[1,"map-wrapper"],[3,"zoom","center"],[3,"lngLat"],[1,"marker-label"],[1,"marker-icon"],[1,"fas","fa-bicycle"],["mglNavigation","","position","top-left"],[1,"station-details-container"],[1,"property-value-container"],[1,"property-value"],[1,"value"],[1,"property"],[1,"table","table-dark","table-borderless"],[4,"ngFor","ngForOf"]],template:function(e,i){1&e&&(W(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),ge(5,"Station location on the map "),W(6,"strong"),ge(7,": "),Y(),ge(8),W(9,"strong"),ge(10,"Address: "),Y(),ge(11),Y(),W(12,"div",4)(13,"mgl-map",5)(14,"mgl-marker",6)(15,"div",7)(16,"p"),ge(17),Y(),W(18,"p"),ge(19),Y()(),W(20,"div",8),lt(21,"i",9),Y()(),lt(22,"mgl-control",10),Y()()()(),W(23,"div",2)(24,"div",11)(25,"h2"),ge(26),Y(),W(27,"div",12)(28,"div",13)(29,"div",14),ge(30,"Total number of journeys starting from the station:"),Y(),W(31,"div",15),ge(32),Y()(),W(33,"div",13)(34,"div",14),ge(35,"Total number of journeys ending at the station:"),Y(),W(36,"div",15),ge(37),Y()(),W(38,"div",13)(39,"div",14),ge(40,"The average distance of a journey starting from the station:"),Y(),W(41,"div",15),ge(42),Y()(),W(43,"div",13)(44,"div",14),ge(45,"The average distance of a journey ending at the station:"),Y(),W(46,"div",15),ge(47),Y()(),W(48,"div",14),ge(49," Top 5 most popular return stations for journeys starting from the station "),W(50,"table",16)(51,"thead")(52,"tr")(53,"th"),ge(54,"Station ID"),Y(),W(55,"th"),ge(56,"Name"),Y(),W(57,"th"),ge(58,"Address"),Y(),W(59,"th"),ge(60,"Count"),Y()()(),W(61,"tbody"),Ee(62,oU,9,4,"tr",17),Y()()(),W(63,"div",14),ge(64," Top 5 most popular departure stations for journeys ending at the station "),W(65,"table",16)(66,"thead")(67,"tr")(68,"th"),ge(69,"Station ID"),Y(),W(70,"th"),ge(71,"Name"),Y(),W(72,"th"),ge(73,"Address"),Y(),W(74,"th"),ge(75,"Count"),Y()()(),W(76,"tbody"),Ee(77,rU,9,4,"tr",17),Y()()()()()()()()),2&e&&(ne(8),N_("(",null==i.stationDetails||null==i.stationDetails.location?null:i.stationDetails.location.x,", ",null==i.stationDetails||null==i.stationDetails.location?null:i.stationDetails.location.y,"),"),ne(3),Rn("",null==i.stationDetails?null:i.stationDetails.address," "),ne(2),function fl(t){bl(QD,dN,t,!1)}("https://api.maptiler.com/maps/streets/style.json?key=sfuWk9tJycblOOcoICP2"),me("zoom",function eS(t,n,e){const i=ue()+t,o=m();return o[i]===sn?nc(o,i,e?n.call(e):n()):Ym(o,i)}(17,sU))("center",Gd(18,Z2,(null==i.stationDetails||null==i.stationDetails.location?null:i.stationDetails.location.x)||0,(null==i.stationDetails||null==i.stationDetails.location?null:i.stationDetails.location.y)||0)),ne(1),me("lngLat",Gd(21,Z2,(null==i.stationDetails||null==i.stationDetails.location?null:i.stationDetails.location.x)||0,(null==i.stationDetails||null==i.stationDetails.location?null:i.stationDetails.location.y)||0)),ne(3),nn(null==i.stationDetails?null:i.stationDetails.name),ne(2),nn(null==i.stationDetails?null:i.stationDetails.address),ne(7),nn(null==i.stationDetails?null:i.stationDetails.name),ne(6),nn(null==i.stationDetails?null:i.stationDetails.departureJourneyCount),ne(5),nn(null==i.stationDetails?null:i.stationDetails.returnJourneyCount),ne(5),nn(null==i.stationDetails?null:i.stationDetails.averageDistanceOfDepartureJourneys),ne(5),nn(null==i.stationDetails?null:i.stationDetails.averageDistanceOfReturnJourneys),ne(15),me("ngForOf",i.top5DepartureStations),ne(15),me("ngForOf",i.top5ReturnStations))},dependencies:[Mr,tU,nU,q2,eU],styles:[".value[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem}th[_ngcontent-%COMP%]{color:red}th[_ngcontent-%COMP%]{color:#0f6}.value[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .value[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0rem;text-align:left}mgl-map[_ngcontent-%COMP%]{width:100%;height:70vh}.container-fluid[_ngcontent-%COMP%]{height:100%;padding:1rem;background-color:#f7f7f7}.row[_ngcontent-%COMP%], .col-lg-6[_ngcontent-%COMP%]{height:100%}.map-container[_ngcontent-%COMP%]{height:100%;padding:1rem;background-color:#fff;border-radius:.5rem;box-shadow:0 .25rem .5rem #0000001a}.map-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:1rem;background-color:#007bff;color:#fff;padding:.5rem 1rem;border-radius:.25rem .25rem 0 0}.map-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin-bottom:1rem}.map-wrapper[_ngcontent-%COMP%]{height:calc(100% - 3rem);border-radius:.25rem;overflow:hidden}.mgl-map-container[_ngcontent-%COMP%], .mgl-map-container[_ngcontent-%COMP%]   .mapboxgl-map[_ngcontent-%COMP%]{height:100%}.marker-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:3rem;height:3rem;border-radius:50%;background-color:#007bff;color:#fff}.marker-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.col-lg-6[_ngcontent-%COMP%]{height:100%}.station-details-container[_ngcontent-%COMP%]{height:100%;padding:1rem;background-color:#fff;border-radius:.5rem;box-shadow:0 .25rem .5rem #0000001a}.station-details-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:1rem;background-color:#007bff;color:#fff;padding:.5rem 1rem;border-radius:.25rem .25rem 0 0}.station-details-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:.5rem}.station-details-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.station-details-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.875rem;margin-bottom:1rem;margin-right:.5rem;border-radius:.25rem;transition:all .2s ease-in-out}.station-details-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#0e0707}.property-value-container[_ngcontent-%COMP%]{font-size:1rem}.property-value-container[_ngcontent-%COMP%]   .property-value[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.5rem}.property-value-container[_ngcontent-%COMP%]   .property-value[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{font-weight:600;margin-right:.5rem;width:14rem}.property-value-container[_ngcontent-%COMP%]   .property-value[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{width:calc(100% - 14rem)}.property-value-container[_ngcontent-%COMP%]   .top-stations[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.property-value-container[_ngcontent-%COMP%]   .top-stations[_ngcontent-%COMP%]   .station[_ngcontent-%COMP%]{flex-basis:50%;margin-bottom:.5rem}.property-value-container[_ngcontent-%COMP%]   .top-stations[_ngcontent-%COMP%]   .station[_ngcontent-%COMP%]   .station-info[_ngcontent-%COMP%]{display:flex;align-items:left}.property-value-container[_ngcontent-%COMP%]   .top-stations[_ngcontent-%COMP%]   .station[_ngcontent-%COMP%]   .station-info[_ngcontent-%COMP%]   .station-id[_ngcontent-%COMP%]{font-weight:600;margin-right:.5rem;width:6rem}.property-value-container[_ngcontent-%COMP%]   .top-stations[_ngcontent-%COMP%]   .station[_ngcontent-%COMP%]   .station-info[_ngcontent-%COMP%]   .station-name[_ngcontent-%COMP%]{margin-right:.1rem;font-weight:600}.property-value-container[_ngcontent-%COMP%]   .top-stations[_ngcontent-%COMP%]   .station[_ngcontent-%COMP%]   .station-info[_ngcontent-%COMP%]   .station-address[_ngcontent-%COMP%]{font-style:italic;margin-right:.5rem}.property-value-container[_ngcontent-%COMP%]   .top-stations[_ngcontent-%COMP%]   .station[_ngcontent-%COMP%]   .station-info[_ngcontent-%COMP%]   .station-count[_ngcontent-%COMP%]{font-weight:300}@media (max-width: 767.98px){.col-lg-6[_ngcontent-%COMP%]{height:auto}.map-container[_ngcontent-%COMP%]{height:30vh;margin-bottom:1rem}.station-details-container[_ngcontent-%COMP%]{height:auto}.property-value-container[_ngcontent-%COMP%]   .top-stations[_ngcontent-%COMP%]   .station[_ngcontent-%COMP%]{flex-basis:100%}}"]}),t})(),kh=(()=>{class t{constructor(e,i,o){this.auth=e,this.router=i,this.toast=o}canActivate(){return!!this.auth.isLoggedIn()||(this.toast.error({detail:"ERROR",summary:"Login first"}),this.router.navigate(["/login"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(Le(ou),Le(Xi),Le(ru))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const lU=["addListener","removeListener"],cU=["addEventListener","removeEventListener"],dU=["on","off"];function Ji(t,n,e,i){if(Nn(e)&&(i=e,e=void 0),i)return Ji(t,n,e).pipe(yx(i));const[o,s]=function pU(t){return Nn(t.addEventListener)&&Nn(t.removeEventListener)}(t)?cU.map(d=>f=>t[d](n,f,e)):function uU(t){return Nn(t.addListener)&&Nn(t.removeListener)}(t)?lU.map(K2(t,n)):function hU(t){return Nn(t.on)&&Nn(t.off)}(t)?dU.map(K2(t,n)):[];if(!o&&tr(t))return ht(d=>Ji(d,n,e))(te(t));if(!o)throw new TypeError("Invalid event target");return new cn(d=>{const f=(..._)=>d.next(1<_.length?_:_[0]);return o(f),()=>s(f)})}function K2(t,n){return e=>i=>t[e](n,i)}class fU extends di{constructor(n,e){super()}schedule(n,e=0){return this}}const X0={setInterval(t,n,...e){const{delegate:i}=X0;return i?.setInterval?i.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){const{delegate:n}=X0;return(n?.clearInterval||clearInterval)(t)},delegate:void 0};class bw extends fU{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var i;if(this.closed)return this;this.state=n;const o=this.id,s=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(s,o,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,e),this}requestAsyncId(n,e,i=0){return X0.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&X0.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let o,i=!1;try{this.work(n)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,v(i,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}const Y2={now:()=>(Y2.delegate||Date).now(),delegate:void 0};class $g{constructor(n,e=$g.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}}$g.now=Y2.now;class _w extends $g{constructor(n,e=$g.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}const J0=new _w(bw),mU=J0;function Gg(t=0,n,e=mU){let i=-1;return null!=n&&(dn(n)?e=n:i=n),new cn(o=>{let s=function gU(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;s<0&&(s=0);let d=0;return e.schedule(function(){o.closed||(o.next(d++),0<=i?this.schedule(void 0,i):o.complete())},s)})}const{isArray:bU}=Array;function Q2(t){return 1===t.length&&bU(t[0])?t[0]:t}const J2=new cn(pr);function ev(...t){const n=qn(t),e=Q2(t);return e.length?new cn(i=>{let o=e.map(()=>[]),s=e.map(()=>!1);i.add(()=>{o=s=null});for(let d=0;!i.closed&&d<e.length;d++)te(e[d]).subscribe(xn(i,f=>{if(o[d].push(f),o.every(_=>_.length)){const _=o.map(C=>C.shift());i.next(n?n(..._):_),o.some((C,T)=>!C.length&&s[T])&&i.complete()}},()=>{s[d]=!0,!o[d].length&&i.complete()}));return()=>{o=s=null}}):gt}function bi(t){return Gn((n,e)=>{te(t).subscribe(xn(e,()=>e.complete(),pr)),!e.closed&&n.subscribe(e)})}function vw(t,n=Ri){return t=t??yU,Gn((e,i)=>{let o,s=!0;e.subscribe(xn(i,d=>{const f=n(d);(s||!t(o,f))&&(s=!1,o=f,i.next(d))}))})}function yU(t,n){return t===n}function yw(...t){const n=qn(t);return Gn((e,i)=>{const o=t.length,s=new Array(o);let d=t.map(()=>!1),f=!1;for(let _=0;_<o;_++)te(t[_]).subscribe(xn(i,C=>{s[_]=C,!f&&!d[_]&&(d[_]=!0,(f=d.every(Ri))&&(d=null))},pr));e.subscribe(xn(i,_=>{if(f){const C=[_,...s];i.next(n?n(...C):C)}}))})}function tk(t){return uo((n,e)=>t<=e)}function S8(t,n){}function T8(t,n){if(1&t&&(W(0,"button",3),ge(1),Ee(2,S8,0,0,"ng-template",4),Y()),2&t){const e=n.$implicit;me("ngbPanelToggle",e),ne(1),Rn(" ",e.title," "),ne(1),me("ngTemplateOutlet",null==e.titleTpl?null:e.titleTpl.templateRef)}}function I8(t,n){}function M8(t,n){}function k8(t,n){if(1&t){const e=Xn();W(0,"div",8),Xe("ngbRef",function(o){return D(e),S(Fe().$implicit.panelDiv=o)}),W(1,"div",9),Ee(2,M8,0,0,"ng-template",4),Y()()}if(2&t){const e=Fe().$implicit;Xm("id",e.id),an("aria-labelledby",e.id+"-header"),ne(2),me("ngTemplateOutlet",(null==e.contentTpl?null:e.contentTpl.templateRef)||null)}}Math,Math,Math;const A8=function(t,n){return{$implicit:t,opened:n}};function O8(t,n){if(1&t&&(W(0,"div")(1,"div",5),Ee(2,I8,0,0,"ng-template",6),Y(),Ee(3,k8,3,3,"div",7),Y()),2&t){const e=n.$implicit,i=Fe(),o=Vi(1);ml("accordion-item "+(e.cardClass||"")),ne(1),ml("accordion-header "+(e.type?"bg-"+e.type:i.type?"bg-"+i.type:"")),O_("id","",e.id,"-header"),ne(1),me("ngTemplateOutlet",(null==e.headerTpl?null:e.headerTpl.templateRef)||o)("ngTemplateOutletContext",Gd(8,A8,e,e.isOpen)),ne(1),me("ngIf",!i.destroyOnHide||e.isOpen||e.transitionRunning)}}const P8=["ngbAccordionBody",""];function R8(t,n){}function N8(t,n){if(1&t){const e=Xn();W(0,"button",1),Xe("click",function(){return D(e),S(Fe().close())}),Y()}}const rv=["*"];function F8(t,n){if(1&t){const e=Xn();W(0,"button",6),Xe("click",function(){const s=D(e).$implicit,d=Fe();return d.focus(),S(d.select(s.id,d.NgbSlideEventSource.INDICATOR))}),Y()}if(2&t){const e=n.$implicit,i=Fe();ut("active",e.id===i.activeId),an("aria-labelledby","slide-"+e.id)("aria-controls","slide-"+e.id)("aria-selected",e.id===i.activeId)}}function L8(t,n){}function B8(t,n){if(1&t&&(W(0,"div",7)(1,"span",8),Tr(2,9),Y(),Ee(3,L8,0,0,"ng-template",10),Y()),2&t){const e=n.$implicit,i=n.index,o=n.count;me("id","slide-"+e.id),ne(2),Xp(i+1)(o),rg(2),ne(1),me("ngTemplateOutlet",e.tplRef)}}function z8(t,n){if(1&t){const e=Xn();W(0,"button",11),Xe("click",function(){return D(e),S(Fe().arrowLeft())}),lt(1,"span",12),W(2,"span",8),Tr(3,13),Y()()}}function V8(t,n){if(1&t){const e=Xn();W(0,"button",14),Xe("click",function(){return D(e),S(Fe().arrowRight())}),lt(1,"span",15),W(2,"span",8),Tr(3,16),Y()()}}const U8=["ngbDatepickerDayView",""],H8=["month"],j8=["year"];function $8(t,n){if(1&t&&(W(0,"option",5),ge(1),Y()),2&t){const e=n.$implicit,i=Fe();me("value",e),an("aria-label",i.i18n.getMonthFullName(e,i.date.year)),ne(1),nn(i.i18n.getMonthShortName(e,i.date.year))}}function G8(t,n){if(1&t&&(W(0,"option",5),ge(1),Y()),2&t){const e=n.$implicit,i=Fe();me("value",e),ne(1),nn(i.i18n.getYearNumerals(e))}}function W8(t,n){if(1&t){const e=Xn();W(0,"ngb-datepicker-navigation-select",7),Xe("select",function(o){return D(e),S(Fe().select.emit(o))}),Y()}if(2&t){const e=Fe();me("date",e.date)("disabled",e.disabled)("months",e.selectBoxes.months)("years",e.selectBoxes.years)}}function q8(t,n){1&t&&lt(0,"div",0)}function Z8(t,n){1&t&&lt(0,"div",0)}function K8(t,n){if(1&t&&(Ee(0,q8,1,0,"div",9),W(1,"div",10),ge(2),Y(),Ee(3,Z8,1,0,"div",9)),2&t){const e=n.$implicit,i=n.index,o=Fe(2);me("ngIf",i>0),ne(2),Rn(" ",o.i18n.getMonthLabel(e.firstDate)," "),ne(1),me("ngIf",i!==o.months.length-1)}}function Y8(t,n){1&t&&Ee(0,K8,4,3,"ng-template",8),2&t&&me("ngForOf",Fe().months)}function Q8(t,n){if(1&t&&(W(0,"div",5),ge(1),Y()),2&t){const e=Fe(2);ne(1),nn(e.i18n.getWeekLabel())}}function X8(t,n){if(1&t&&(W(0,"div",6),ge(1),Y()),2&t){const e=n.$implicit;ne(1),nn(e)}}function J8(t,n){if(1&t&&(W(0,"div",2),Ee(1,Q8,2,1,"div",3),Ee(2,X8,2,1,"div",4),Y()),2&t){const e=Fe();ne(1),me("ngIf",e.datepicker.showWeekNumbers),ne(1),me("ngForOf",e.viewModel.weekdays)}}function eH(t,n){if(1&t&&(W(0,"div",11),ge(1),Y()),2&t){const e=Fe(2).$implicit,i=Fe();ne(1),nn(i.i18n.getWeekNumerals(e.number))}}function tH(t,n){}function nH(t,n){if(1&t&&Ee(0,tH,0,0,"ng-template",14),2&t){const e=Fe().$implicit;me("ngTemplateOutlet",Fe(3).datepicker.dayTemplate)("ngTemplateOutletContext",e.context)}}function iH(t,n){if(1&t){const e=Xn();W(0,"div",12),Xe("click",function(o){const d=D(e).$implicit;return Fe(3).doSelect(d),S(o.preventDefault())}),Ee(1,nH,1,2,"ng-template",13),Y()}if(2&t){const e=n.$implicit;ut("disabled",e.context.disabled)("hidden",e.hidden)("ngb-dp-today",e.context.today),me("tabindex",e.tabindex),an("aria-label",e.ariaLabel),ne(1),me("ngIf",!e.hidden)}}function oH(t,n){if(1&t&&(W(0,"div",8),Ee(1,eH,2,1,"div",9),Ee(2,iH,2,9,"div",10),Y()),2&t){const e=Fe().$implicit,i=Fe();ne(1),me("ngIf",i.datepicker.showWeekNumbers),ne(1),me("ngForOf",e.days)}}function rH(t,n){1&t&&Ee(0,oH,3,2,"div",7),2&t&&me("ngIf",!n.$implicit.collapsed)}const sH=["defaultDayTemplate"],aH=["content"];function lH(t,n){if(1&t&&lt(0,"div",7),2&t){const i=n.currentMonth,o=n.selected,s=n.disabled,d=n.focused;me("date",n.date)("currentMonth",i)("selected",o)("disabled",s)("focused",d)}}function cH(t,n){if(1&t&&(W(0,"div",12),ge(1),Y()),2&t){const e=Fe().$implicit,i=Fe(2);ne(1),Rn(" ",i.i18n.getMonthLabel(e.firstDate)," ")}}function dH(t,n){if(1&t&&(W(0,"div",9),Ee(1,cH,2,1,"div",10),lt(2,"ngb-datepicker-month",11),Y()),2&t){const e=n.$implicit,i=Fe(2);ne(1),me("ngIf","none"===i.navigation||i.displayMonths>1&&"select"===i.navigation),ne(1),me("month",e.firstDate)}}function uH(t,n){1&t&&Ee(0,dH,3,2,"div",8),2&t&&me("ngForOf",Fe().model.months)}function hH(t,n){if(1&t){const e=Xn();W(0,"ngb-datepicker-navigation",13),Xe("navigate",function(o){return D(e),S(Fe().onNavigateEvent(o))})("select",function(o){return D(e),S(Fe().onNavigateDateSelect(o))}),Y()}if(2&t){const e=Fe();me("date",e.model.firstDate)("months",e.model.months)("disabled",e.model.disabled)("showSelect","select"===e.model.navigation)("prevDisabled",e.model.prevDisabled)("nextDisabled",e.model.nextDisabled)("selectBoxes",e.model.selectBoxes)}}function pH(t,n){}function fH(t,n){}const mH=["dialog"],gH=["ngbNavOutlet",""];function bH(t,n){}const _H=function(t){return{$implicit:t}};function vH(t,n){if(1&t&&(W(0,"div",2),Ee(1,bH,0,0,"ng-template",3),Y()),2&t){const e=Fe().$implicit,i=Fe();me("item",e)("nav",i.nav)("role",i.paneRole),ne(1),me("ngTemplateOutlet",(null==e.contentTpl?null:e.contentTpl.templateRef)||null)("ngTemplateOutletContext",Ts(5,_H,e.active||i.isPanelTransitioning(e)))}}function yH(t,n){if(1&t&&Ee(0,vH,2,7,"div",1),2&t){const e=n.$implicit,i=Fe();me("ngIf",e.isPanelInDom()||i.isPanelTransitioning(e))}}function xH(t,n){1&t&&(W(0,"span",9),Tr(1,10),Y())}function wH(t,n){1&t&&(W(0,"span",9),Tr(1,11),Y())}function CH(t,n){1&t&&(W(0,"span",9),Tr(1,12),Y())}function DH(t,n){1&t&&(W(0,"span",9),Tr(1,13),Y())}function EH(t,n){1&t&&ge(0,"...")}function SH(t,n){1&t&&(W(0,"span",15),ge(1,"(current)"),Y())}function TH(t,n){if(1&t&&(ge(0),Ee(1,SH,2,0,"span",14)),2&t){const e=n.$implicit,i=n.currentPage;Rn(" ",e," "),ne(1),me("ngIf",e===i)}}function IH(t,n){}const MH=function(t){return{disabled:!0,currentPage:t}};function kH(t,n){if(1&t&&(W(0,"a",20),Ee(1,IH,0,0,"ng-template",8),Y()),2&t){const e=Fe(2).$implicit,i=Fe(),o=Vi(9);ne(1),me("ngTemplateOutlet",(null==i.tplEllipsis?null:i.tplEllipsis.templateRef)||o)("ngTemplateOutletContext",Ts(2,MH,e))}}function AH(t,n){}const OH=function(t,n,e){return{disabled:t,$implicit:n,currentPage:e}};function PH(t,n){if(1&t){const e=Xn();W(0,"a",21),Xe("click",function(o){D(e);const s=Fe().$implicit;return Fe(2).selectPage(s),S(o.preventDefault())}),Ee(1,AH,0,0,"ng-template",8),Y()}if(2&t){const e=Fe().$implicit,i=Fe(),o=i.disabled,s=i.$implicit,d=Fe(),f=Vi(11);an("tabindex",o?"-1":null)("aria-disabled",o?"true":null),ne(1),me("ngTemplateOutlet",(null==d.tplNumber?null:d.tplNumber.templateRef)||f)("ngTemplateOutletContext",ef(4,OH,o,e,s))}}function RH(t,n){if(1&t&&(W(0,"li",17),Ee(1,kH,2,4,"a",18),Ee(2,PH,2,8,"a",19),Y()),2&t){const e=n.$implicit,i=Fe(),o=i.$implicit,s=i.disabled,d=Fe();ut("active",e===o)("disabled",d.isEllipsis(e)||s),an("aria-current",e===o?"page":null),ne(1),me("ngIf",d.isEllipsis(e)),ne(1),me("ngIf",!d.isEllipsis(e))}}function NH(t,n){1&t&&Ee(0,RH,3,7,"li",16),2&t&&me("ngForOf",n.pages)}function FH(t,n){}const Aw=function(t,n){return{disabled:t,currentPage:n}};function LH(t,n){if(1&t){const e=Xn();W(0,"li",17)(1,"a",22),Xe("click",function(o){return D(e),Fe().selectPage(1),S(o.preventDefault())}),Ee(2,FH,0,0,"ng-template",8),Y()()}if(2&t){const e=Fe(),i=Vi(1);ut("disabled",e.previousDisabled()),ne(1),an("tabindex",e.previousDisabled()?"-1":null)("aria-disabled",e.previousDisabled()?"true":null),ne(1),me("ngTemplateOutlet",(null==e.tplFirst?null:e.tplFirst.templateRef)||i)("ngTemplateOutletContext",Gd(6,Aw,e.previousDisabled(),e.page))}}function BH(t,n){}const zH=function(t){return{disabled:t}};function VH(t,n){if(1&t){const e=Xn();W(0,"li",17)(1,"a",23),Xe("click",function(o){D(e);const s=Fe();return s.selectPage(s.page-1),S(o.preventDefault())}),Ee(2,BH,0,0,"ng-template",8),Y()()}if(2&t){const e=Fe(),i=Vi(3);ut("disabled",e.previousDisabled()),ne(1),an("tabindex",e.previousDisabled()?"-1":null)("aria-disabled",e.previousDisabled()?"true":null),ne(1),me("ngTemplateOutlet",(null==e.tplPrevious?null:e.tplPrevious.templateRef)||i)("ngTemplateOutletContext",Ts(6,zH,e.previousDisabled()))}}function UH(t,n){}function HH(t,n){}function jH(t,n){if(1&t){const e=Xn();W(0,"li",17)(1,"a",24),Xe("click",function(o){D(e);const s=Fe();return s.selectPage(s.page+1),S(o.preventDefault())}),Ee(2,HH,0,0,"ng-template",8),Y()()}if(2&t){const e=Fe(),i=Vi(5);ut("disabled",e.nextDisabled()),ne(1),an("tabindex",e.nextDisabled()?"-1":null)("aria-disabled",e.nextDisabled()?"true":null),ne(1),me("ngTemplateOutlet",(null==e.tplNext?null:e.tplNext.templateRef)||i)("ngTemplateOutletContext",Gd(6,Aw,e.nextDisabled(),e.page))}}function $H(t,n){}function GH(t,n){if(1&t){const e=Xn();W(0,"li",17)(1,"a",25),Xe("click",function(o){D(e);const s=Fe();return s.selectPage(s.pageCount),S(o.preventDefault())}),Ee(2,$H,0,0,"ng-template",8),Y()()}if(2&t){const e=Fe(),i=Vi(7);ut("disabled",e.nextDisabled()),ne(1),an("tabindex",e.nextDisabled()?"-1":null)("aria-disabled",e.nextDisabled()?"true":null),ne(1),me("ngTemplateOutlet",(null==e.tplLast?null:e.tplLast.templateRef)||i)("ngTemplateOutletContext",Gd(6,Aw,e.nextDisabled(),e.page))}}const WH=function(t,n,e){return{$implicit:t,pages:n,disabled:e}};function KH(t,n){if(1&t&&(W(0,"span"),Tr(1,1),dr(2,"percent"),Y()),2&t){const e=Fe();ne(2),Xp(function aS(t,n,e){const i=t+fn,o=m(),s=Hs(o,i);return ag(o,i)?nS(o,ue(),n,s.transform,e,s):s.transform(e)}(2,1,e.getValue()/e.max)),rg(1)}}function YH(t,n){1&t&&ge(0),2&t&&nn(100===n.fill?"\u2605":"\u2606")}function QH(t,n){}function XH(t,n){if(1&t){const e=Xn();W(0,"span",2),ge(1),Y(),W(2,"span",3),Xe("mouseenter",function(){const s=D(e).index;return S(Fe().enter(s+1))})("click",function(){const s=D(e).index;return S(Fe().handleClick(s+1))}),Ee(3,QH,0,0,"ng-template",4),Y()}if(2&t){const e=n.index,i=Fe(),o=Vi(1);ne(1),Rn("(",e<i.nextRate?"*":" ",")"),ne(1),$d("cursor",i.isInteractive()?"pointer":"default"),ne(1),me("ngTemplateOutlet",i.starTemplate||i.starTemplateFromContent||o)("ngTemplateOutletContext",i.contexts[e])}}function JH(t,n){if(1&t){const e=Xn();W(0,"button",11),Xe("click",function(){D(e);const o=Fe();return S(o.changeHour(o.hourStep))}),lt(1,"span",12),W(2,"span",13),Tr(3,14),Y()()}if(2&t){const e=Fe();ut("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),me("disabled",e.disabled)}}function ej(t,n){if(1&t){const e=Xn();W(0,"button",11),Xe("click",function(){D(e);const o=Fe();return S(o.changeHour(-o.hourStep))}),lt(1,"span",15),W(2,"span",13),Tr(3,16),Y()()}if(2&t){const e=Fe();ut("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),me("disabled",e.disabled)}}function tj(t,n){if(1&t){const e=Xn();W(0,"button",11),Xe("click",function(){D(e);const o=Fe();return S(o.changeMinute(o.minuteStep))}),lt(1,"span",12),W(2,"span",13),Tr(3,17),Y()()}if(2&t){const e=Fe();ut("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),me("disabled",e.disabled)}}function nj(t,n){if(1&t){const e=Xn();W(0,"button",11),Xe("click",function(){D(e);const o=Fe();return S(o.changeMinute(-o.minuteStep))}),lt(1,"span",15),W(2,"span",13),Tr(3,18),Y()()}if(2&t){const e=Fe();ut("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),me("disabled",e.disabled)}}function ij(t,n){1&t&&(W(0,"div",5),ge(1,":"),Y())}function oj(t,n){if(1&t){const e=Xn();W(0,"button",11),Xe("click",function(){D(e);const o=Fe(2);return S(o.changeSecond(o.secondStep))}),lt(1,"span",12),W(2,"span",13),Tr(3,21),Y()()}if(2&t){const e=Fe(2);ut("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),me("disabled",e.disabled)}}function rj(t,n){if(1&t){const e=Xn();W(0,"button",11),Xe("click",function(){D(e);const o=Fe(2);return S(o.changeSecond(-o.secondStep))}),lt(1,"span",15),W(2,"span",13),Tr(3,22),Y()()}if(2&t){const e=Fe(2);ut("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),me("disabled",e.disabled)}}function sj(t,n){if(1&t){const e=Xn();W(0,"div",19),Ee(1,oj,4,7,"button",3),W(2,"input",20),Xe("change",function(o){return D(e),S(Fe().updateSecond(o.target.value))})("blur",function(){return D(e),S(Fe().handleBlur())})("input",function(o){return D(e),S(Fe().formatInput(o.target))})("keydown.ArrowUp",function(o){D(e);const s=Fe();return s.changeSecond(s.secondStep),S(o.preventDefault())})("keydown.ArrowDown",function(o){D(e);const s=Fe();return s.changeSecond(-s.secondStep),S(o.preventDefault())}),Y(),Ee(3,rj,4,7,"button",3),Y()}if(2&t){const e=Fe();ne(1),me("ngIf",e.spinners),ne(1),ut("form-control-sm",e.isSmallSize)("form-control-lg",e.isLargeSize),me("value",e.formatMinSec(null==e.model?null:e.model.second))("readOnly",e.readonlyInputs)("disabled",e.disabled),ne(1),me("ngIf",e.spinners)}}function aj(t,n){1&t&&lt(0,"div",5)}function lj(t,n){if(1&t&&(Zs(0),Tr(1,27),Ks()),2&t){const e=Fe(2);ne(1),Xp(e.i18n.getAfternoonPeriod()),rg(1)}}function cj(t,n){1&t&&Tr(0,28),2&t&&(Xp(Fe(2).i18n.getMorningPeriod()),rg(0))}function dj(t,n){if(1&t){const e=Xn();W(0,"div",23)(1,"button",24),Xe("click",function(){return D(e),S(Fe().toggleMeridian())}),Ee(2,lj,2,1,"ng-container",25),Ee(3,cj,1,1,"ng-template",null,26,Ki),Y()()}if(2&t){const e=Vi(4),i=Fe();ne(1),ut("btn-sm",i.isSmallSize)("btn-lg",i.isLargeSize)("disabled",i.disabled),me("disabled",i.disabled),ne(1),me("ngIf",i.model&&i.model.hour>=12)("ngIfElse",e)}}function uj(t,n){if(1&t&&(W(0,"strong",3),ge(1),Y()),2&t){const e=Fe();ne(1),nn(e.header)}}function hj(t,n){}function pj(t,n){if(1&t){const e=Xn();W(0,"div",4),Ee(1,hj,0,0,"ng-template",5),W(2,"button",6),Xe("click",function(){return D(e),S(Fe().hide())}),Y()()}if(2&t){const e=Fe(),i=Vi(1);ne(1),me("ngTemplateOutlet",e.contentHeaderTpl||i)}}function fj(t,n){if(1&t&&(W(0,"span"),ge(1),Y()),2&t){const e=Fe().$implicit;ml(Fe().highlightClass),ne(1),nn(e)}}function mj(t,n){1&t&&ge(0),2&t&&nn(Fe().$implicit)}function gj(t,n){if(1&t&&(Ee(0,fj,2,3,"span",1),Ee(1,mj,1,1,"ng-template",null,2,Ki)),2&t){const e=n.odd,i=Vi(2);me("ngIf",e)("ngIfElse",i)}}function Or(t){return parseInt(`${t}`,10)}function _k(t){return null!=t?`${t}`:""}function sv(t,n,e=0){return Math.max(Math.min(t,n),e)}function kf(t){return"string"==typeof t}function ho(t){return!isNaN(Or(t))}function eo(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}function Ph(t){return null!=t}function Af(t){return ho(t)?`0${t}`.slice(-2):""}function yk(t,n){return t&&t.className&&t.className.split&&t.className.split(/\s+/).indexOf(n)>=0}function Of(t){return(t||document.body).getBoundingClientRect()}function xk(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const wk={animation:!0,transitionTimerDelayMs:5},Cj=()=>{},{transitionTimerDelayMs:Dj}=wk,Xg=new Map,Wo=(t,n,e,i)=>{let o=i.context||{};const s=Xg.get(n);if(s)switch(i.runningTransition){case"continue":return gt;case"stop":t.run(()=>s.transition$.complete()),o=Object.assign(s.context,o),Xg.delete(n)}const d=e(n,i.animation,o)||Cj;if(!i.animation||"none"===window.getComputedStyle(n).transitionProperty)return t.run(()=>d()),Ft(void 0).pipe(function xj(t){return n=>new cn(e=>n.subscribe({next:d=>t.run(()=>e.next(d)),error:d=>t.run(()=>e.error(d)),complete:()=>t.run(()=>e.complete())}))}(t));const f=new Ht,_=new Ht,C=f.pipe(function vU(...t){return n=>ff(n,Ft(...t))}(!0));Xg.set(n,{transition$:f,complete:()=>{_.next(),_.complete()},context:o});const T=function wj(t){const{transitionDelay:n,transitionDuration:e}=window.getComputedStyle(t);return 1e3*(parseFloat(n)+parseFloat(e))}(n);return t.runOutsideAngular(()=>{const P=Ji(n,"transitionend").pipe(bi(C),uo(({target:G})=>G===n));(function X2(...t){return 1===(t=Q2(t)).length?te(t[0]):new cn(function _U(t){return n=>{let e=[];for(let i=0;e&&!n.closed&&i<t.length;i++)e.push(te(t[i]).subscribe(xn(n,o=>{if(e){for(let s=0;s<e.length;s++)s!==i&&e[s].unsubscribe();e=null}n.next(o)})))}}(t))})(Gg(T+Dj).pipe(bi(C)),P,_).pipe(bi(C)).subscribe(()=>{Xg.delete(n),t.run(()=>{d(),f.next(),f.complete()})})}),f.asObservable()},Ow=(t,n,e)=>{let{direction:i,maxSize:o,dimension:s}=e;const{classList:d}=t;function f(){d.add("collapse"),"show"===i?d.add("show"):d.remove("show")}if(n)return o||(o=function Sj(t,n){if(typeof navigator>"u")return"0px";const{classList:e}=t,i=e.contains("show");i||e.add("show"),t.style[n]="";const o=t.getBoundingClientRect()[n]+"px";return i||e.remove("show"),o}(t,s),e.maxSize=o,t.style[s]="show"!==i?o:"0px",d.remove("collapse"),d.remove("collapsing"),d.remove("show"),Of(t),d.add("collapsing")),t.style[s]="show"===i?o:"0px",()=>{f(),d.remove("collapsing"),t.style[s]=""};f()};let Rh=(()=>{class t{constructor(){this.animation=wk.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ck=(()=>{class t{constructor(e){this._ngbConfig=e,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Le(Rh))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Tj=0,Pw=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["ng-template","ngbPanelHeader",""]],standalone:!0}),t})(),Dk=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["ng-template","ngbPanelTitle",""]],standalone:!0}),t})(),Ek=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["ng-template","ngbPanelContent",""]],standalone:!0}),t})(),Rw=(()=>{class t{constructor(){this.disabled=!1,this.id="ngb-panel-"+Tj++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new Me,this.hidden=new Me}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=We({type:t,selectors:[["ngb-panel"]],contentQueries:function(e,i,o){if(1&e&&(Sn(o,Dk,4),Sn(o,Pw,4),Sn(o,Ek,4)),2&e){let s;Et(s=St())&&(i.titleTpls=s),Et(s=St())&&(i.headerTpls=s),Et(s=St())&&(i.contentTpls=s)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"},standalone:!0}),t})(),Ij=(()=>{class t{constructor(e){this._El=e,this.ngbRef=new Me}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return t.\u0275fac=function(e){return new(e||t)(J(qt))},t.\u0275dir=We({type:t,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"},standalone:!0}),t})(),Sk=(()=>{class t{constructor(e,i){this.accordion=e,this.panel=i}set ngbPanelToggle(e){e&&(this.panel=e)}}return t.\u0275fac=function(e){return new(e||t)(J(Nt(()=>Nw)),J(Rw,9))},t.\u0275dir=We({type:t,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(e,i){1&e&&Xe("click",function(){return i.accordion.toggle(i.panel.id)}),2&e&&(Ss("disabled",i.panel.disabled),an("aria-expanded",i.panel.isOpen)("aria-controls",i.panel.id),ut("collapsed",!i.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"},standalone:!0}),t})(),Nw=(()=>{class t{constructor(e,i,o){this._ngZone=i,this._changeDetector=o,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new Me,this.shown=new Me,this.hidden=new Me,this.animation=e.animation,this.type=e.type,this.closeOtherPanels=e.closeOthers}isExpanded(e){return this.activeIds.indexOf(e)>-1}expand(e){this._changeOpenState(this._findPanelById(e),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(e=>this._changeOpenState(e,!0))}collapse(e){this._changeOpenState(this._findPanelById(e),!1)}collapseAll(){this.panels.forEach(e=>{this._changeOpenState(e,!1)})}toggle(e){const i=this._findPanelById(e);i&&this._changeOpenState(i,!i.isOpen)}ngAfterContentChecked(){kf(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(e=>{e.isOpen=!e.disabled&&this.activeIds.indexOf(e.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe(Qi(1)).subscribe(()=>{this.panels.forEach(e=>{const i=e.panelDiv;i?e.initClassDone||(e.initClassDone=!0,Wo(this._ngZone,i,Ow,{animation:!1,runningTransition:"continue",context:{direction:e.isOpen?"show":"hide",dimension:"height"}})):e.initClassDone=!1})})}_changeOpenState(e,i){if(null!=e&&!e.disabled&&e.isOpen!==i){let o=!1;this.panelChange.emit({panelId:e.id,nextState:i,preventDefault:()=>{o=!0}}),o||(e.isOpen=i,e.transitionRunning=!0,i&&this.closeOtherPanels&&this._closeOthers(e.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(e,i=!0){this.panels.forEach(o=>{o.id!==e&&o.isOpen&&(o.isOpen=!1,o.transitionRunning=i)})}_findPanelById(e){return this.panels.find(i=>i.id===e)||null}_updateActiveIds(){this.activeIds=this.panels.filter(e=>e.isOpen&&!e.disabled).map(e=>e.id)}_runTransitions(e){this._changeDetector.detectChanges(),this.panels.forEach(i=>{i.transitionRunning&&Wo(this._ngZone,i.panelDiv,Ow,{animation:e,runningTransition:"stop",context:{direction:i.isOpen?"show":"hide",dimension:"height"}}).subscribe(()=>{i.transitionRunning=!1;const{id:s}=i;i.isOpen?(i.shown.emit(),this.shown.emit(s)):(i.hidden.emit(),this.hidden.emit(s))})})}}return t.\u0275fac=function(e){return new(e||t)(J(Ck),J(_n),J(ko))},t.\u0275cmp=Wt({type:t,selectors:[["ngb-accordion"]],contentQueries:function(e,i,o){if(1&e&&Sn(o,Rw,4),2&e){let s;Et(s=St())&&(i.panels=s)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(e,i){2&e&&an("aria-multiselectable",!i.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0,features:[Mo],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(e,i){1&e&&(Ee(0,T8,3,3,"ng-template",0,1,Ki),Ee(2,O8,4,11,"ng-template",2)),2&e&&(ne(2),me("ngForOf",i.panels))},dependencies:[Mr,Qs,Sk,Ij,Pw,Pi],encapsulation:2}),t})(),Mj=(()=>{class t{constructor(e){this._ngbConfig=e,this.horizontal=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Le(Rh))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Tk=(()=>{class t{constructor(e,i,o){this._element=e,this._zone=o,this._afterInit=!1,this._isCollapsed=!1,this.ngbCollapseChange=new Me,this.shown=new Me,this.hidden=new Me,this.animation=i.animation,this.horizontal=i.horizontal}set collapsed(e){this._isCollapsed!==e&&(this._isCollapsed=e,this._afterInit&&this._runTransitionWithEvents(e,this.animation))}ngOnInit(){this._runTransition(this._isCollapsed,!1),this._afterInit=!0}toggle(e=this._isCollapsed){this.collapsed=!e,this.ngbCollapseChange.next(this._isCollapsed)}_runTransition(e,i){return Wo(this._zone,this._element.nativeElement,Ow,{animation:i,runningTransition:"stop",context:{direction:e?"hide":"show",dimension:this.horizontal?"width":"height"}})}_runTransitionWithEvents(e,i){this._runTransition(e,i).subscribe(()=>{e?this.hidden.emit():this.shown.emit()})}}return t.\u0275fac=function(e){return new(e||t)(J(qt),J(Mj),J(_n))},t.\u0275dir=We({type:t,selectors:[["","ngbCollapse",""]],hostVars:2,hostBindings:function(e,i){2&e&&ut("collapse-horizontal",i.horizontal)},inputs:{animation:"animation",collapsed:["ngbCollapse","collapsed"],horizontal:"horizontal"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],standalone:!0}),t})(),kj=0,Ik=(()=>{class t{constructor(e){this._item=e}template(){return!1===this._item.destroyOnHide||this._item.animatingBodyCollapse?this._bodyTpl:null}}return t.\u0275fac=function(e){return new(e||t)(J(Nt(()=>Nh)))},t.\u0275cmp=Wt({type:t,selectors:[["","ngbAccordionBody",""]],contentQueries:function(e,i,o){if(1&e&&Sn(o,Zt,7),2&e){let s;Et(s=St())&&(i._bodyTpl=s.first)}},hostVars:2,hostBindings:function(e,i){2&e&&ut("accordion-body",!0)},standalone:!0,features:[Mo],attrs:P8,decls:1,vars:1,consts:[[3,"ngTemplateOutlet"]],template:function(e,i){1&e&&Ee(0,R8,0,0,"ng-template",0),2&e&&me("ngTemplateOutlet",i.template())},dependencies:[Qs],encapsulation:2}),t})(),Mk=(()=>{class t{constructor(e,i){this.item=e,this.ngbCollapse=i}}return t.\u0275fac=function(e){return new(e||t)(J(Nt(()=>Nh)),J(Tk))},t.\u0275dir=We({type:t,selectors:[["","ngbAccordionCollapse",""]],hostAttrs:["role","region"],hostVars:4,hostBindings:function(e,i){2&e&&(Ss("id",i.item.collapseId),an("aria-labelledby",i.item.toggleId),ut("accordion-collapse",!0))},exportAs:["ngbAccordionCollapse"],standalone:!0,features:[Km([Tk])]}),t})(),Nh=(()=>{class t{constructor(e,i){this._accordion=e,this._cd=i,this._subscriptions=[],this._collapsed=!0,this._id="ngb-accordion-item-"+kj++,this.animatingBodyCollapse=!1,this.destroyOnHide=this._accordion.destroyOnHide,this.disabled=!1,this.shown=new Me,this.hidden=new Me}set id(e){kf(e)&&""!==e&&(this._id=e)}set collapsed(e){this.collapsed!==e&&(this._collapsed=e,this._cd.markForCheck(),this._collapsed||(this.animatingBodyCollapse=!0,this._cd.detectChanges()),this._collapse.ngbCollapse.animation=this._accordion.animation,this._collapse.ngbCollapse.collapsed=e)}get collapsed(){return this._collapsed}get id(){return`${this._id}`}get toggleId(){return`${this.id}-toggle`}get collapseId(){return`${this.id}-collapse`}ngAfterContentInit(){const{ngbCollapse:e}=this._collapse;e.animation=!1,e.collapsed=this.collapsed,e.animation=this._accordion.animation,this._subscriptions.push(e.hidden.subscribe(()=>{this.animatingBodyCollapse=!1,this.hidden.emit(),this._accordion.hidden.emit(this.id)}),e.shown.subscribe(()=>{this.shown.emit(),this._accordion.shown.emit(this.id)}))}ngOnDestroy(){this._subscriptions.forEach(e=>e.unsubscribe())}toggle(){this.collapsed=!this.collapsed}}return t.\u0275fac=function(e){return new(e||t)(J(Nt(()=>Fw)),J(ko))},t.\u0275dir=We({type:t,selectors:[["","ngbAccordionItem",""]],contentQueries:function(e,i,o){if(1&e&&Sn(o,Mk,7),2&e){let s;Et(s=St())&&(i._collapse=s.first)}},hostVars:3,hostBindings:function(e,i){2&e&&(Ss("id",i.id),ut("accordion-item",!0))},inputs:{id:["ngbAccordionItem","id"],destroyOnHide:"destroyOnHide",disabled:"disabled",collapsed:"collapsed"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbAccordionItem"],standalone:!0}),t})(),Fw=(()=>{class t{constructor(e){this.destroyOnHide=!0,this.shown=new Me,this.hidden=new Me,this.animation=e.animation,this.closeOthers=e.closeOthers}toggle(e){const i=this._getItem(e);if(i){const o=i.collapsed;this._items.forEach(s=>{s===i?s.toggle():this.closeOthers&&o&&(s.collapsed=!0)})}}expand(e){const i=this._getItem(e);i&&this._items.forEach(o=>{o===i?i.collapsed=!1:this.closeOthers&&(o.collapsed=!0)})}expandAll(){this.closeOthers?this._items.find(e=>!e.collapsed)||(this._items.get(0).collapsed=!1):this._items.forEach(e=>{e.collapsed=!1})}collapse(e){const i=this._getItem(e);i&&(i.collapsed=!0)}collapseAll(){this._items.forEach(e=>e.collapsed=!0)}isExpanded(e){const i=this._getItem(e);return!!i&&!i.collapsed}_getItem(e){return this._items.find(i=>i.id===e)}}return t.\u0275fac=function(e){return new(e||t)(J(Ck))},t.\u0275dir=We({type:t,selectors:[["","ngbAccordion",""]],contentQueries:function(e,i,o){if(1&e&&Sn(o,Nh,4),2&e){let s;Et(s=St())&&(i._items=s)}},hostVars:2,hostBindings:function(e,i){2&e&&ut("accordion",!0)},inputs:{animation:"animation",closeOthers:"closeOthers",destroyOnHide:"destroyOnHide"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0}),t})(),Ak=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[Nw,Ik]}),t})();const Pj=({classList:t})=>{t.remove("show")};let Rj=(()=>{class t{constructor(e){this._ngbConfig=e,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Le(Rh))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Nj=(()=>{class t{constructor(e,i,o,s){this._renderer=i,this._element=o,this._zone=s,this.closed=new Me,this.dismissible=e.dismissible,this.type=e.type,this.animation=e.animation}close(){const e=Wo(this._zone,this._element.nativeElement,Pj,{animation:this.animation,runningTransition:"continue"});return e.subscribe(()=>this.closed.emit()),e}ngOnChanges(e){const i=e.type;i&&!i.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${i.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${i.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return t.\u0275fac=function(e){return new(e||t)(J(Rj),J(lo),J(qt),J(_n))},t.\u0275cmp=Wt({type:t,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(e,i){2&e&&ut("fade",i.animation)("alert-dismissible",i.dismissible)},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],standalone:!0,features:[Mn,Mo],ngContentSelectors:rv,decls:2,vars:1,consts:function(){let n;return n=$localize`:@@ngb.alert.close:Close`,[["type","button","class","btn-close","aria-label",n,3,"click",4,"ngIf"],["type","button","aria-label",n,1,"btn-close",3,"click"]]},template:function(e,i){1&e&&(hl(),pl(0),Ee(1,N8,1,0,"button",0)),2&e&&(ne(1),me("ngIf",i.dismissible))},dependencies:[Pi],styles:["ngb-alert{display:block}\n"],encapsulation:2,changeDetection:0}),t})(),Ok=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[Nj]}),t})();var au=(()=>{return(t=au||(au={})).START="start",t.END="end",au;var t})();const Pk=({classList:t})=>t.contains("carousel-item-start")||t.contains("carousel-item-end"),Jg=t=>{t.remove("carousel-item-start"),t.remove("carousel-item-end")},av=t=>{Jg(t),t.remove("carousel-item-prev"),t.remove("carousel-item-next")},Fj=(t,n,{direction:e})=>{const{classList:i}=t;return n?(Pk(t)?Jg(i):(i.add("carousel-item-"+(e===au.START?"next":"prev")),Of(t),i.add("carousel-item-"+e)),()=>{av(i),i.add("active")}):(Jg(i),av(i),void i.add("active"))},Lj=(t,n,{direction:e})=>{const{classList:i}=t;return n?(Pk(t)?Jg(i):i.add("carousel-item-"+e),()=>{av(i),i.remove("active")}):(Jg(i),av(i),void i.remove("active"))};let Bj=(()=>{class t{constructor(e){this._ngbConfig=e,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Le(Rh))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),zj=0,Vj=(()=>{class t{constructor(e){this.tplRef=e,this.id="ngb-slide-"+zj++,this.slid=new Me}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0}),t})(),Uj=(()=>{class t{constructor(e,i,o,s,d){this._platformId=i,this._ngZone=o,this._cd=s,this._container=d,this.NgbSlideEventSource=Fh,this._destroy$=new Ht,this._interval$=new ur(0),this._mouseHover$=new ur(!1),this._focused$=new ur(!1),this._pauseOnHover$=new ur(!1),this._pauseOnFocus$=new ur(!1),this._pause$=new ur(!1),this._wrap$=new ur(!1),this.slide=new Me,this.slid=new Me,this._transitionIds=null,this.animation=e.animation,this.interval=e.interval,this.wrap=e.wrap,this.keyboard=e.keyboard,this.pauseOnHover=e.pauseOnHover,this.pauseOnFocus=e.pauseOnFocus,this.showNavigationArrows=e.showNavigationArrows,this.showNavigationIndicators=e.showNavigationIndicators}set interval(e){this._interval$.next(e)}get interval(){return this._interval$.value}set wrap(e){this._wrap$.next(e)}get wrap(){return this._wrap$.value}set pauseOnHover(e){this._pauseOnHover$.next(e)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(e){this._pauseOnFocus$.next(e)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(e){this._mouseHover$.next(e)}get mouseHover(){return this._mouseHover$.value}set focused(e){this._focused$.next(e)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(Fh.ARROW_LEFT)}arrowRight(){this.focus(),this.next(Fh.ARROW_RIGHT)}ngAfterContentInit(){ix(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const e=Eg([this.slide.pipe(ke(i=>i.current),mf(this.activeId)),this._wrap$,this.slides.changes.pipe(mf(null))]).pipe(ke(([i,o])=>{const s=this.slides.toArray(),d=this._getSlideIdxById(i);return o?s.length>1:d<s.length-1}),vw());Eg([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,e]).pipe(ke(([i,o,s,d,f,_,C])=>i||o&&s||d&&f||!C?0:_),vw(),Oa(i=>i>0?Gg(i,i):J2),bi(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(Fh.TIMER)))}),this.slides.changes.pipe(bi(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(e=>(t=>{Xg.get(t)?.complete()})(this._getSlideElement(e))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe(Qi(1)).subscribe(()=>{for(const{id:e}of this.slides){const i=this._getSlideElement(e);e===this.activeId?i.classList.add("active"):i.classList.remove("active")}})})}ngAfterContentChecked(){let e=this._getSlideById(this.activeId);this.activeId=e?e.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const e=this._getSlideElement(this.activeId);e&&e.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(e,i){this._cycleToSelected(e,this._getSlideEventDirection(this.activeId,e),i)}prev(e){this._cycleToSelected(this._getPrevSlide(this.activeId),au.END,e)}next(e){this._cycleToSelected(this._getNextSlide(this.activeId),au.START,e)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(e,i,o){const s=this._transitionIds;if(s&&(s[0]!==e||s[1]!==this.activeId))return;let d=this._getSlideById(e);if(d&&d.id!==this.activeId){this._transitionIds=[this.activeId,e],this.slide.emit({prev:this.activeId,current:d.id,direction:i,paused:this._pause$.value,source:o});const f={animation:this.animation,runningTransition:"stop",context:{direction:i}},_=[],C=this._getSlideById(this.activeId);if(C){const G=Wo(this._ngZone,this._getSlideElement(C.id),Lj,f);G.subscribe(()=>{C.slid.emit({isShown:!1,direction:i,source:o})}),_.push(G)}const T=this.activeId;this.activeId=d.id;const P=this._getSlideById(this.activeId),z=Wo(this._ngZone,this._getSlideElement(d.id),Fj,f);z.subscribe(()=>{P?.slid.emit({isShown:!0,direction:i,source:o})}),_.push(z),ev(..._).pipe(Qi(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:T,current:d.id,direction:i,paused:this._pause$.value,source:o})})}this._cd.markForCheck()}_getSlideEventDirection(e,i){return this._getSlideIdxById(e)>this._getSlideIdxById(i)?au.END:au.START}_getSlideById(e){return this.slides.find(i=>i.id===e)||null}_getSlideIdxById(e){const i=this._getSlideById(e);return null!=i?this.slides.toArray().indexOf(i):-1}_getNextSlide(e){const i=this.slides.toArray(),o=this._getSlideIdxById(e);return o===i.length-1?this.wrap?i[0].id:i[i.length-1].id:i[o+1].id}_getPrevSlide(e){const i=this.slides.toArray(),o=this._getSlideIdxById(e);return 0===o?this.wrap?i[i.length-1].id:i[0].id:i[o-1].id}_getSlideElement(e){return this._container.nativeElement.querySelector(`#slide-${e}`)}}return t.\u0275fac=function(e){return new(e||t)(J(Bj),J(rf),J(_n),J(ko),J(qt))},t.\u0275cmp=Wt({type:t,selectors:[["ngb-carousel"]],contentQueries:function(e,i,o){if(1&e&&Sn(o,Vj,4),2&e){let s;Et(s=St())&&(i.slides=s)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(e,i){1&e&&Xe("keydown.arrowLeft",function(){return i.keyboard&&i.arrowLeft()})("keydown.arrowRight",function(){return i.keyboard&&i.arrowRight()})("mouseenter",function(){return i.mouseHover=!0})("mouseleave",function(){return i.mouseHover=!1})("focusin",function(){return i.focused=!0})("focusout",function(){return i.focused=!1}),2&e&&(an("aria-activedescendant","slide-"+i.activeId),$d("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[Mo],decls:6,vars:6,consts:function(){let n,e,i;return n=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,e=$localize`:@@ngb.carousel.previous:Previous`,i=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],n,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],e,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],i]},template:function(e,i){1&e&&(W(0,"div",0),Ee(1,F8,1,5,"button",1),Y(),W(2,"div",2),Ee(3,B8,4,4,"div",3),Y(),Ee(4,z8,4,0,"button",4),Ee(5,V8,4,0,"button",5)),2&e&&(ut("visually-hidden",!i.showNavigationIndicators),ne(1),me("ngForOf",i.slides),ne(2),me("ngForOf",i.slides),ne(1),me("ngIf",i.showNavigationArrows),ne(1),me("ngIf",i.showNavigationArrows))},dependencies:[Mr,Qs,Pi],encapsulation:2,changeDetection:0}),t})();var Fh=(()=>{return(t=Fh||(Fh={})).TIMER="timer",t.ARROW_LEFT="arrowLeft",t.ARROW_RIGHT="arrowRight",t.INDICATOR="indicator",Fh;var t})();let Rk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[Uj]}),t})(),Nk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({}),t})();class qo{constructor(n,e,i){this.year=eo(n)?n:null,this.month=eo(e)?e:null,this.day=eo(i)?i:null}static from(n){return n instanceof qo?n:n?new qo(n.year,n.month,n.day):null}equals(n){return null!=n&&this.year===n.year&&this.month===n.month&&this.day===n.day}before(n){return!!n&&(this.year===n.year?this.month===n.month?this.day!==n.day&&this.day<n.day:this.month<n.month:this.year<n.year)}after(n){return!!n&&(this.year===n.year?this.month===n.month?this.day!==n.day&&this.day>n.day:this.month>n.month:this.year>n.year)}}function Pf(t,n){return!function Hj(t,n){return!t&&!n||!!t&&!!n&&t.equals(n)}(t,n)}function Fk(t,n){return!(!t&&!n||t&&n&&t.year===n.year&&t.month===n.month)}function lv(t,n,e){return t&&n&&t.before(n)?n:t&&e&&t.after(e)?e:t||null}function Lw(t,n){const{minDate:e,maxDate:i,disabled:o,markDisabled:s}=n;return!(null==t||o||s&&s(t,{year:t.year,month:t.month})||e&&t.before(e)||i&&t.after(i))}function Lk(t){return new qo(t.getFullYear(),t.getMonth()+1,t.getDate())}function cv(t){const n=new Date(t.year,t.month-1,t.day,12);return isNaN(n.getTime())||n.setFullYear(t.year),n}let dv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:function(){return function Qj(){return new Xj}()},providedIn:"root"}),t})(),Xj=(()=>{class t extends dv{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(e,i="d",o=1){let s=cv(e),d=!0,f=s.getMonth();switch(i){case"y":s.setFullYear(s.getFullYear()+o);break;case"m":f+=o,s.setMonth(f),f%=12,f<0&&(f+=12);break;case"d":s.setDate(s.getDate()+o),d=!1;break;default:return e}return d&&s.getMonth()!==f&&s.setDate(0),Lk(s)}getPrev(e,i="d",o=1){return this.getNext(e,i,-o)}getWeekday(e){let o=cv(e).getDay();return 0===o?7:o}getWeekNumber(e,i){7===i&&(i=0);const d=cv(e[(11-i)%7]);d.setDate(d.getDate()+4-(d.getDay()||7));const f=d.getTime();return d.setMonth(0),d.setDate(1),Math.floor(Math.round((f-d.getTime())/864e5)/7)+1}getToday(){return Lk(new Date)}isValid(e){if(!(e&&eo(e.year)&&eo(e.month)&&eo(e.day)&&0!==e.year))return!1;const i=cv(e);return!isNaN(i.getTime())&&i.getFullYear()===e.year&&i.getMonth()+1===e.month&&i.getDate()===e.day}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=_i(t)))(i||t)}}(),t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),Lh=(()=>{class t{getMonthLabel(e){return`${this.getMonthFullName(e.month,e.year)} ${this.getYearNumerals(e.year)}`}getDayNumerals(e){return`${e.day}`}getWeekNumerals(e){return`${e}`}getYearNumerals(e){return`${e}`}getWeekLabel(){return""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:function(e){let i=null;return i=e?new e:function Jj(t){return new e7(t)}(Le(Ys)),i},providedIn:"root"}),t})(),e7=(()=>{class t extends Lh{constructor(e){super(),this._locale=e,this._monthsShort=H1(e,Oi.Standalone,ln.Abbreviated),this._monthsFull=H1(e,Oi.Standalone,ln.Wide)}getWeekdayLabel(e,i){const o=gT(this._locale,Oi.Standalone,void 0===i?ln.Short:i);return o.map((d,f)=>o[(f+1)%7])[e-1]||""}getMonthShortName(e){return this._monthsShort[e-1]||""}getMonthFullName(e){return this._monthsFull[e-1]||""}getDayAriaLabel(e){return _T(new Date(e.year,e.month-1,e.day),"fullDate",this._locale)}}return t.\u0275fac=function(e){return new(e||t)(Le(Ys))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),Bw=(()=>{class t{constructor(e,i){this._calendar=e,this._i18n=i,this._VALIDATORS={dayTemplateData:o=>{if(this._state.dayTemplateData!==o)return{dayTemplateData:o}},displayMonths:o=>{if(eo(o=Or(o))&&o>0&&this._state.displayMonths!==o)return{displayMonths:o}},disabled:o=>{if(this._state.disabled!==o)return{disabled:o}},firstDayOfWeek:o=>{if(eo(o=Or(o))&&o>=0&&this._state.firstDayOfWeek!==o)return{firstDayOfWeek:o}},focusVisible:o=>{if(this._state.focusVisible!==o&&!this._state.disabled)return{focusVisible:o}},markDisabled:o=>{if(this._state.markDisabled!==o)return{markDisabled:o}},maxDate:o=>{const s=this.toValidDate(o,null);if(Pf(this._state.maxDate,s))return{maxDate:s}},minDate:o=>{const s=this.toValidDate(o,null);if(Pf(this._state.minDate,s))return{minDate:s}},navigation:o=>{if(this._state.navigation!==o)return{navigation:o}},outsideDays:o=>{if(this._state.outsideDays!==o)return{outsideDays:o}},weekdays:o=>{const s=!0===o||!1===o?ln.Short:o,d=!0!==o&&!1!==o||o;if(this._state.weekdayWidth!==s||this._state.weekdaysVisible!==d)return{weekdayWidth:s,weekdaysVisible:d}}},this._model$=new Ht,this._dateSelect$=new Ht,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:ln.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe(uo(e=>e.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(uo(e=>null!==e))}set(e){let i=Object.keys(e).map(o=>this._VALIDATORS[o](e[o])).reduce((o,s)=>({...o,...s}),{});Object.keys(i).length>0&&this._nextState(i)}focus(e){const i=this.toValidDate(e,null);null!=i&&!this._state.disabled&&Pf(this._state.focusDate,i)&&this._nextState({focusDate:e})}focusSelect(){Lw(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(e){const i=this.toValidDate(e,this._calendar.getToday());null!=i&&!this._state.disabled&&(!this._state.firstDate||Fk(this._state.firstDate,i))&&this._nextState({firstDate:i})}select(e,i={}){const o=this.toValidDate(e,null);null!=o&&!this._state.disabled&&(Pf(this._state.selectedDate,o)&&this._nextState({selectedDate:o}),i.emitEvent&&Lw(o,this._state)&&this._dateSelect$.next(o))}toValidDate(e,i){const o=qo.from(e);return void 0===i&&(i=this._calendar.getToday()),this._calendar.isValid(o)?o:i}getMonth(e){for(let i of this._state.months)if(e.month===i.number&&e.year===i.year)return i;throw new Error(`month ${e.month} of year ${e.year} not found`)}_nextState(e){const i=this._updateState(e);this._patchContexts(i),this._state=i,this._model$.next(this._state)}_patchContexts(e){const{months:i,displayMonths:o,selectedDate:s,focusDate:d,focusVisible:f,disabled:_,outsideDays:C}=e;e.months.forEach(T=>{T.weeks.forEach(P=>{P.days.forEach(z=>{d&&(z.context.focused=d.equals(z.date)&&f),z.tabindex=!_&&d&&z.date.equals(d)&&d.month===T.number?0:-1,!0===_&&(z.context.disabled=!0),void 0!==s&&(z.context.selected=null!==s&&s.equals(z.date)),T.number!==z.date.month&&(z.hidden="hidden"===C||"collapsed"===C||o>1&&z.date.after(i[0].firstDate)&&z.date.before(i[o-1].lastDate))})})})}_updateState(e){const i=Object.assign({},this._state,e);let o=i.firstDate;if(("minDate"in e||"maxDate"in e)&&(function jj(t,n){if(n&&t&&n.before(t))throw new Error(`'maxDate' ${n} should be greater than 'minDate' ${t}`)}(i.minDate,i.maxDate),i.focusDate=lv(i.focusDate,i.minDate,i.maxDate),i.firstDate=lv(i.firstDate,i.minDate,i.maxDate),o=i.focusDate),"disabled"in e&&(i.focusVisible=!1),"selectedDate"in e&&0===this._state.months.length&&(o=i.selectedDate),"focusVisible"in e||"focusDate"in e&&(i.focusDate=lv(i.focusDate,i.minDate,i.maxDate),o=i.focusDate,0!==i.months.length&&i.focusDate&&!i.focusDate.before(i.firstDate)&&!i.focusDate.after(i.lastDate)))return i;if("firstDate"in e&&(i.firstDate=lv(i.firstDate,i.minDate,i.maxDate),o=i.firstDate),o){const d=function Zj(t,n,e,i,o){const{displayMonths:s,months:d}=e,f=d.splice(0,d.length);return Array.from({length:s},(C,T)=>{const P=Object.assign(t.getNext(n,"m",T),{day:1});if(d[T]=null,!o){const z=f.findIndex(G=>G.firstDate.equals(P));-1!==z&&(d[T]=f.splice(z,1)[0])}return P}).forEach((C,T)=>{null===d[T]&&(d[T]=function Kj(t,n,e,i,o={}){const{dayTemplateData:s,minDate:d,maxDate:f,firstDayOfWeek:_,markDisabled:C,outsideDays:T,weekdayWidth:P,weekdaysVisible:z}=e,G=t.getToday();o.firstDate=null,o.lastDate=null,o.number=n.month,o.year=n.year,o.weeks=o.weeks||[],o.weekdays=o.weekdays||[],n=function Yj(t,n,e){const i=t.getDaysPerWeek(),o=new qo(n.year,n.month,1),s=t.getWeekday(o)%i;return t.getPrev(o,"d",(i+s-e)%i)}(t,n,_),z||(o.weekdays.length=0);for(let ae=0;ae<t.getWeeksPerMonth();ae++){let be=o.weeks[ae];be||(be=o.weeks[ae]={number:0,days:[],collapsed:!0});const Ce=be.days;for(let Te=0;Te<t.getDaysPerWeek();Te++){0===ae&&z&&(o.weekdays[Te]=i.getWeekdayLabel(t.getWeekday(n),P));const $e=new qo(n.year,n.month,n.day),Pe=t.getNext($e),at=i.getDayAriaLabel($e);let Mt=!!(d&&$e.before(d)||f&&$e.after(f));!Mt&&C&&(Mt=C($e,{month:o.number,year:o.year}));let Lt=$e.equals(G),yi=s?s($e,{month:o.number,year:o.year}):void 0;null===o.firstDate&&$e.month===o.number&&(o.firstDate=$e),$e.month===o.number&&Pe.month!==o.number&&(o.lastDate=$e);let vi=Ce[Te];vi||(vi=Ce[Te]={}),vi.date=$e,vi.context=Object.assign(vi.context||{},{$implicit:$e,date:$e,data:yi,currentMonth:o.number,currentYear:o.year,disabled:Mt,focused:!1,selected:!1,today:Lt}),vi.tabindex=-1,vi.ariaLabel=at,vi.hidden=!1,n=Pe}be.number=t.getWeekNumber(Ce.map(Te=>Te.date),_),be.collapsed="collapsed"===T&&Ce[0].date.month!==o.number&&Ce[Ce.length-1].date.month!==o.number}return o}(t,C,e,i,f.shift()||{}))}),d}(this._calendar,o,i,this._i18n,"dayTemplateData"in e||"firstDayOfWeek"in e||"markDisabled"in e||"minDate"in e||"maxDate"in e||"disabled"in e||"outsideDays"in e||"weekdaysVisible"in e);i.months=d,i.firstDate=d[0].firstDate,i.lastDate=d[d.length-1].lastDate,"selectedDate"in e&&!Lw(i.selectedDate,i)&&(i.selectedDate=null),"firstDate"in e&&(!i.focusDate||i.focusDate.before(i.firstDate)||i.focusDate.after(i.lastDate))&&(i.focusDate=o);const f=!this._state.firstDate||this._state.firstDate.year!==i.firstDate.year,_=!this._state.firstDate||this._state.firstDate.month!==i.firstDate.month;"select"===i.navigation?(("minDate"in e||"maxDate"in e||0===i.selectBoxes.years.length||f)&&(i.selectBoxes.years=function Gj(t,n,e){if(!t)return[];const i=n?Math.max(n.year,t.year-500):t.year-10,s=(e?Math.min(e.year,t.year+500):t.year+10)-i+1,d=Array(s);for(let f=0;f<s;f++)d[f]=i+f;return d}(i.firstDate,i.minDate,i.maxDate)),("minDate"in e||"maxDate"in e||0===i.selectBoxes.months.length||f)&&(i.selectBoxes.months=function $j(t,n,e,i){if(!n)return[];let o=t.getMonths(n.year);if(e&&n.year===e.year){const s=o.findIndex(d=>d===e.month);o=o.slice(s)}if(i&&n.year===i.year){const s=o.findIndex(d=>d===i.month);o=o.slice(0,s+1)}return o}(this._calendar,i.firstDate,i.minDate,i.maxDate))):i.selectBoxes={years:[],months:[]},("arrows"===i.navigation||"select"===i.navigation)&&(_||f||"minDate"in e||"maxDate"in e||"disabled"in e)&&(i.prevDisabled=i.disabled||function qj(t,n,e){const i=Object.assign(t.getPrev(n,"m"),{day:1});return null!=e&&(i.year===e.year&&i.month<e.month||i.year<e.year&&1===e.month)}(this._calendar,i.firstDate,i.minDate),i.nextDisabled=i.disabled||function Wj(t,n,e){const i=Object.assign(t.getNext(n,"m"),{day:1});return null!=e&&i.after(e)}(this._calendar,i.lastDate,i.maxDate))}return i}}return t.\u0275fac=function(e){return new(e||t)(Le(dv),Le(Lh))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();var Rf=(()=>{return(t=Rf||(Rf={}))[t.PREV=0]="PREV",t[t.NEXT=1]="NEXT",Rf;var t})();let t7=(()=>{class t{constructor(e){this.i18n=e}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return t.\u0275fac=function(e){return new(e||t)(J(Lh))},t.\u0275cmp=Wt({type:t,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(e,i){2&e&&ut("bg-primary",i.selected)("text-white",i.selected)("text-muted",i.isMuted())("outside",i.isMuted())("active",i.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[Mo],attrs:U8,decls:1,vars:1,template:function(e,i){1&e&&ge(0),2&e&&nn(i.i18n.getDayNumerals(i.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),t})(),n7=(()=>{class t{constructor(e,i){this.i18n=e,this._renderer=i,this.select=new Me,this._month=-1,this._year=-1}changeMonth(e){this.select.emit(new qo(this.date.year,Or(e),1))}changeYear(e){this.select.emit(new qo(Or(e),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return t.\u0275fac=function(e){return new(e||t)(J(Lh),J(lo))},t.\u0275cmp=Wt({type:t,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(e,i){if(1&e&&(gi(H8,7,qt),gi(j8,7,qt)),2&e){let o;Et(o=St())&&(i.monthSelect=o.first),Et(o=St())&&(i.yearSelect=o.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[Mo],decls:6,vars:4,consts:function(){let n,e,i,o;return n=$localize`:@@ngb.datepicker.select-month:Select month`,e=$localize`:@@ngb.datepicker.select-month:Select month`,i=$localize`:@@ngb.datepicker.select-year:Select year`,o=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",n,"title",e,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",i,"title",o,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(e,i){1&e&&(W(0,"select",0,1),Xe("change",function(s){return i.changeMonth(s.target.value)}),Ee(2,$8,2,3,"option",2),Y(),W(3,"select",3,4),Xe("change",function(s){return i.changeYear(s.target.value)}),Ee(5,G8,2,2,"option",2),Y()),2&e&&(me("disabled",i.disabled),ne(2),me("ngForOf",i.months),ne(1),me("disabled",i.disabled),ne(2),me("ngForOf",i.years))},dependencies:[Mr],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),t})(),i7=(()=>{class t{constructor(e){this.i18n=e,this.navigation=Rf,this.months=[],this.navigate=new Me,this.select=new Me}onClickPrev(e){e.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(e){e.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return t.\u0275fac=function(e){return new(e||t)(J(Lh))},t.\u0275cmp=Wt({type:t,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[Mo],decls:8,vars:4,consts:function(){let n,e,i,o;return n=$localize`:@@ngb.datepicker.previous-month:Previous month`,e=$localize`:@@ngb.datepicker.previous-month:Previous month`,i=$localize`:@@ngb.datepicker.next-month:Next month`,o=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",n,"title",e,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",i,"title",o,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(e,i){1&e&&(W(0,"div",0)(1,"button",1),Xe("click",function(s){return i.onClickPrev(s)}),lt(2,"span",2),Y()(),Ee(3,W8,1,4,"ngb-datepicker-navigation-select",3),Ee(4,Y8,1,1,null,4),W(5,"div",5)(6,"button",6),Xe("click",function(s){return i.onClickNext(s)}),lt(7,"span",2),Y()()),2&e&&(ne(1),me("disabled",i.prevDisabled),ne(2),me("ngIf",i.showSelect),ne(1),me("ngIf",!i.showSelect),ne(2),me("disabled",i.nextDisabled))},dependencies:[Pi,Mr,n7],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),t})();var $n=(()=>{return(t=$n||($n={}))[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",$n;var t})();let o7=(()=>{class t{processKey(e,i){const{state:o,calendar:s}=i;switch(e.which){case $n.PageUp:i.focusDate(s.getPrev(o.focusedDate,e.shiftKey?"y":"m",1));break;case $n.PageDown:i.focusDate(s.getNext(o.focusedDate,e.shiftKey?"y":"m",1));break;case $n.End:i.focusDate(e.shiftKey?o.maxDate:o.lastDate);break;case $n.Home:i.focusDate(e.shiftKey?o.minDate:o.firstDate);break;case $n.ArrowLeft:i.focusDate(s.getPrev(o.focusedDate,"d",1));break;case $n.ArrowUp:i.focusDate(s.getPrev(o.focusedDate,"d",s.getDaysPerWeek()));break;case $n.ArrowRight:i.focusDate(s.getNext(o.focusedDate,"d",1));break;case $n.ArrowDown:i.focusDate(s.getNext(o.focusedDate,"d",s.getDaysPerWeek()));break;case $n.Enter:case $n.Space:i.focusSelect();break;default:return}e.preventDefault(),e.stopPropagation()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),zw=(()=>{class t{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=ln.Short}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Vw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:function(){return function r7(){return new s7}()},providedIn:"root"}),t})(),s7=(()=>{class t extends Vw{fromModel(e){return e&&eo(e.year)&&eo(e.month)&&eo(e.day)?{year:e.year,month:e.month,day:e.day}:null}toModel(e){return e&&eo(e.year)&&eo(e.month)&&eo(e.day)?{year:e.year,month:e.month,day:e.day}:null}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=_i(t)))(i||t)}}(),t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),Bk=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),t})(),Uw=(()=>{class t{constructor(e,i,o,s){this.i18n=e,this.datepicker=i,this._keyboardService=o,this._service=s}set month(e){this.viewModel=this._service.getMonth(e)}onKeyDown(e){this._keyboardService.processKey(e,this.datepicker)}doSelect(e){!e.context.disabled&&!e.hidden&&this.datepicker.onDateSelect(e.date)}}return t.\u0275fac=function(e){return new(e||t)(J(Lh),J(Nt(()=>uv)),J(o7),J(Bw))},t.\u0275cmp=Wt({type:t,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(e,i){1&e&&Xe("keydown",function(s){return i.onKeyDown(s)})},inputs:{month:"month"},standalone:!0,features:[Mo],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(Ee(0,J8,3,2,"div",0),Ee(1,rH,1,1,"ng-template",1)),2&e&&(me("ngIf",i.viewModel.weekdays.length>0),ne(1),me("ngForOf",i.viewModel.weeks))},dependencies:[Pi,Mr,Qs],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),t})(),uv=(()=>{class t{constructor(e,i,o,s,d,f,_,C){this._service=e,this._calendar=i,this.i18n=o,this._elementRef=f,this._ngbDateAdapter=_,this._ngZone=C,this._controlValue=null,this._destroyed$=new Ht,this._publicState={},this.navigate=new Me,this.dateSelect=new Me,this.onChange=T=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(T=>this[T]=s[T]),e.dateSelect$.pipe(bi(this._destroyed$)).subscribe(T=>{this.dateSelect.emit(T)}),e.model$.pipe(bi(this._destroyed$)).subscribe(T=>{const P=T.firstDate,z=this.model?this.model.firstDate:null;this._publicState={maxDate:T.maxDate,minDate:T.minDate,firstDate:T.firstDate,lastDate:T.lastDate,focusedDate:T.focusDate,months:T.months.map(Te=>Te.firstDate)};let G=!1;if(!P.equals(z)&&(this.navigate.emit({current:z?{year:z.year,month:z.month}:null,next:{year:P.year,month:P.month},preventDefault:()=>G=!0}),G&&null!==z))return void this._service.open(z);const ae=T.selectedDate,be=T.focusDate,Ce=this.model?this.model.focusDate:null;this.model=T,Pf(ae,this._controlValue)&&(this._controlValue=ae,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(ae))),Pf(be,Ce)&&Ce&&T.focusVisible&&this.focus(),d.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(e){this._service.focus(qo.from(e))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(Qi(1)).subscribe(()=>{const e=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');e&&e.focus()})}navigateTo(e){this._service.open(qo.from(e?e.day?e:{...e,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const e=Ji(this._contentEl.nativeElement,"focusin"),i=Ji(this._contentEl.nativeElement,"focusout"),{nativeElement:o}=this._elementRef;Qr(e,i).pipe(uo(({target:s,relatedTarget:d})=>!(yk(s,"ngb-dp-day")&&yk(d,"ngb-dp-day")&&o.contains(s)&&o.contains(d))),bi(this._destroyed$)).subscribe(({type:s})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===s})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const e={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(i=>e[i]=this[i]),this._service.set(e),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(e){const i={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(o=>o in e).forEach(o=>i[o]=this[o]),this._service.set(i),"startDate"in e){const{currentValue:o,previousValue:s}=e.startDate;Fk(s,o)&&this.navigateTo(this.startDate)}}onDateSelect(e){this._service.focus(e),this._service.select(e,{emitEvent:!0})}onNavigateDateSelect(e){this._service.open(e)}onNavigateEvent(e){switch(e){case Rf.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case Rf.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._service.set({disabled:e})}writeValue(e){this._controlValue=qo.from(this._ngbDateAdapter.fromModel(e)),this._service.select(this._controlValue)}}return t.\u0275fac=function(e){return new(e||t)(J(Bw),J(dv),J(Lh),J(zw),J(ko),J(qt),J(Vw),J(_n))},t.\u0275cmp=Wt({type:t,selectors:[["ngb-datepicker"]],contentQueries:function(e,i,o){if(1&e&&Sn(o,Bk,7),2&e){let s;Et(s=St())&&(i.contentTemplate=s.first)}},viewQuery:function(e,i){if(1&e&&(gi(sH,7),gi(aH,7)),2&e){let o;Et(o=St())&&(i._defaultDayTemplate=o.first),Et(o=St())&&(i._contentEl=o.first)}},hostVars:2,hostBindings:function(e,i){2&e&&ut("disabled",i.model.disabled)},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[jn([{provide:$o,useExisting:Nt(()=>t),multi:!0},Bw]),Mn,Mo],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(e,i){if(1&e&&(Ee(0,lH,1,5,"ng-template",null,0,Ki),Ee(2,uH,1,1,"ng-template",null,1,Ki),W(4,"div",2),Ee(5,hH,1,7,"ngb-datepicker-navigation",3),Y(),W(6,"div",4,5),Ee(8,pH,0,0,"ng-template",6),Y(),Ee(9,fH,0,0,"ng-template",6)),2&e){const o=Vi(3);ne(5),me("ngIf","none"!==i.navigation),ne(1),ut("ngb-dp-months",!i.contentTemplate),ne(2),me("ngTemplateOutlet",(null==i.contentTemplate?null:i.contentTemplate.templateRef)||o),ne(1),me("ngTemplateOutlet",i.footerTemplate)}},dependencies:[Pi,Mr,Qs,t7,Uw,i7],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),t})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Uk=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Hk(t){const n=Array.from(t.querySelectorAll(Uk)).filter(e=>-1!==e.tabIndex);return[n[0],n[n.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let tA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[uv,Uw]}),t})(),Gw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=We({type:t,selectors:[["",8,"navbar"]],standalone:!0}),t})(),oA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({}),t})();class Vh{constructor(n,e,i){this.nodes=n,this.viewRef=e,this.componentRef=i}}let A7=(()=>{class t{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(Qi(1)).subscribe(()=>{Wo(this._zone,this._el.nativeElement,(e,i)=>{i&&Of(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Wo(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(J(qt),J(_n))},t.\u0275cmp=Wt({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,i){2&e&&(ml("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),ut("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Mo],decls:0,vars:0,template:function(e,i){},encapsulation:2}),t})();class rA{close(n){}dismiss(n){}}class O7{constructor(n,e,i,o){this._windowCmptRef=n,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=o,this._closed=new Ht,this._dismissed=new Ht,this._hidden=new Ht,n.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,d)=>{this._resolve=s,this._reject=d}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(bi(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(bi(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function vk(t){return t&&t.then}(e)?!1!==e&&this._dismiss(n):e.then(i=>{!1!==i&&this._dismiss(n)},()=>{})}else this._dismiss(n)}_removeModalElements(){const n=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Ft(void 0);n.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),ev(n,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var nb=(()=>{return(t=nb||(nb={}))[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",nb;var t})();let P7=(()=>{class t{constructor(e,i,o){this._document=e,this._elRef=i,this._zone=o,this._closed$=new Ht,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Me,this.shown=new Ht,this.hidden=new Ht}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":kf(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Qi(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},d=ev(Wo(this._zone,e,()=>e.classList.remove("show"),i),Wo(this._zone,this._dialogEl.nativeElement,()=>{},i));return d.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),d}_show(){const e={animation:this.animation,runningTransition:"continue"};ev(Wo(this._zone,this._elRef.nativeElement,(s,d)=>{d&&Of(s),s.classList.add("show")},e),Wo(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Ji(e,"keydown").pipe(bi(this._closed$),uo(o=>o.which===$n.Escape)).subscribe(o=>{this.keyboard?requestAnimationFrame(()=>{o.defaultPrevented||this._zone.run(()=>this.dismiss(nb.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Ji(this._dialogEl.nativeElement,"mousedown").pipe(bi(this._closed$),Ro(()=>i=!1),Oa(()=>Ji(e,"mouseup").pipe(bi(this._closed$),Qi(1))),uo(({target:o})=>e===o)).subscribe(()=>{i=!0}),Ji(e,"click").pipe(bi(this._closed$)).subscribe(({target:o})=>{e===o&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(nb.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),o=Hk(e)[0];(i||o||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let o;o=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>o.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Wo(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(J(Si),J(qt),J(_n))},t.\u0275cmp=Wt({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(e,i){if(1&e&&gi(mH,7),2&e){let o;Et(o=St())&&(i._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,i){2&e&&(an("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),ml("modal d-block"+(i.windowClass?" "+i.windowClass:"")),ut("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Mo],ngContentSelectors:rv,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,i){1&e&&(hl(),W(0,"div",0,1)(2,"div",2),pl(3),Y()()),2&e&&ml("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),t})(),R7=(()=>{class t{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,o=i.style,{overflow:s,paddingRight:d}=o;if(e>0){const f=parseFloat(window.getComputedStyle(i).paddingRight);o.paddingRight=`${f+e}px`}return o.overflow="hidden",()=>{e>0&&(o.paddingRight=d),o.overflow=s}}}return t.\u0275fac=function(e){return new(e||t)(Le(Si))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),N7=(()=>{class t{constructor(e,i,o,s,d,f,_){this._applicationRef=e,this._injector=i,this._environmentInjector=o,this._document=s,this._scrollBar=d,this._rendererFactory=f,this._ngZone=_,this._activeWindowCmptHasChanged=new Ht,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new Me,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const C=this._windowCmpts[this._windowCmpts.length-1];((t,n,e,i=!1)=>{t.runOutsideAngular(()=>{const o=Ji(n,"focusin").pipe(bi(e),ke(s=>s.target));Ji(n,"keydown").pipe(bi(e),uo(s=>s.which===$n.Tab),yw(o)).subscribe(([s,d])=>{const[f,_]=Hk(n);(d===f||d===n)&&s.shiftKey&&(_.focus(),s.preventDefault()),d===_&&!s.shiftKey&&(f.focus(),s.preventDefault())}),i&&Ji(n,"click").pipe(bi(e),yw(o),ke(s=>s[1])).subscribe(s=>s.focus())})})(this._ngZone,C.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(C.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,i,o){const s=o.container instanceof HTMLElement?o.container:Ph(o.container)?this._document.querySelector(o.container):this._document.body,d=this._rendererFactory.createRenderer(null,null);if(!s)throw new Error(`The specified modal container "${o.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const f=new rA,_=(e=o.injector||e).get(Ds,null)||this._environmentInjector,C=this._getContentRef(e,_,i,f,o);let T=!1!==o.backdrop?this._attachBackdrop(s):void 0,P=this._attachWindowComponent(s,C.nodes),z=new O7(P,C,T,o.beforeDismiss);return this._registerModalRef(z),this._registerWindowCmpt(P),z.hidden.pipe(Qi(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(d.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),f.close=G=>{z.close(G)},f.dismiss=G=>{z.dismiss(G)},this._applyWindowOptions(P.instance,o),1===this._modalRefs.length&&d.addClass(this._document.body,"modal-open"),T&&T.instance&&(this._applyBackdropOptions(T.instance,o),T.changeDetectorRef.detectChanges()),P.changeDetectorRef.detectChanges(),z}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let i=L1(A7,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,i){let o=L1(P7,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(o.hostView),e.appendChild(o.location.nativeElement),o}_applyWindowOptions(e,i){this._windowAttributes.forEach(o=>{Ph(i[o])&&(e[o]=i[o])})}_applyBackdropOptions(e,i){this._backdropAttributes.forEach(o=>{Ph(i[o])&&(e[o]=i[o])})}_getContentRef(e,i,o,s,d){return o?o instanceof Zt?this._createFromTemplateRef(o,s):kf(o)?this._createFromString(o):this._createFromComponent(e,i,o,s,d):new Vh([])}_createFromTemplateRef(e,i){const s=e.createEmbeddedView({$implicit:i,close(d){i.close(d)},dismiss(d){i.dismiss(d)}});return this._applicationRef.attachView(s),new Vh([s.rootNodes],s)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new Vh([[i]])}_createFromComponent(e,i,o,s,d){const _=L1(o,{environmentInjector:i,elementInjector:Zr.create({providers:[{provide:rA,useValue:s}],parent:e})}),C=_.location.nativeElement;return d.scrollable&&C.classList.add("component-host-scrollable"),this._applicationRef.attachView(_.hostView),new Vh([[C]],_.hostView,_)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(o=>{o!==e&&"SCRIPT"!==o.nodeName&&(this._ariaHiddenValues.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const o=this._modalRefs.indexOf(e);o>-1&&(this._modalRefs.splice(o,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(Le(sf),Le(Zr),Le(Ds),Le(Si),Le(R7),Le($m),Le(_n))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),F7=(()=>{class t{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Le(Rh))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ww=(()=>{class t{constructor(e,i,o){this._injector=e,this._modalStack=i,this._config=o}open(e,i={}){const o={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,e,o)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(Le(Zr),Le(N7),Le(F7))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),sA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({providers:[Ww]}),t})();const H7=({classList:t})=>(t.remove("show"),()=>t.remove("active")),j7=(t,n)=>{n&&Of(t),t.classList.add("show")};let qw=(()=>{class t{constructor(e){this.elRef=e}}return t.\u0275fac=function(e){return new(e||t)(J(qt))},t.\u0275dir=We({type:t,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(e,i){2&e&&(Ss("id",i.item.panelDomId),an("role",i.role?i.role:i.nav.roles?"tabpanel":void 0)("aria-labelledby",i.item.domId),ut("fade",i.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0}),t})(),cA=(()=>{class t{constructor(e,i){this._cd=e,this._ngZone=i,this._activePane=null}isPanelTransitioning(e){return this._activePane?.item===e}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(bi(this.nav.destroy$),mf(this._activePane?.item||null),vw(),tk(1)).subscribe(e=>{const i={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?Wo(this._ngZone,this._activePane.elRef.nativeElement,H7,i).subscribe(()=>{const o=this._activePane?.item;this._activePane=this._getPaneForItem(e),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),Wo(this._ngZone,this._activePane.elRef.nativeElement,j7,i).subscribe(()=>{e&&(e.shown.emit(),this.nav.shown.emit(e.id))})),o&&(o.hidden.emit(),this.nav.hidden.emit(o.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(e){return this._panes&&this._panes.find(i=>i.item===e)||null}_getActivePane(){return this._panes&&this._panes.find(e=>e.item.active)||null}}return t.\u0275fac=function(e){return new(e||t)(J(ko),J(_n))},t.\u0275cmp=Wt({type:t,selectors:[["","ngbNavOutlet",""]],viewQuery:function(e,i){if(1&e&&gi(qw,5),2&e){let o;Et(o=St())&&(i._panes=o)}},hostVars:2,hostBindings:function(e,i){2&e&&ut("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[Mo],attrs:gH,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&Ee(0,yH,1,1,"ng-template",0),2&e&&me("ngForOf",i.nav.items)},dependencies:[qw,Mr,Pi,Qs],encapsulation:2,changeDetection:0}),t})(),dA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[cA]}),t})(),$7=(()=>{class t{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),uA=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0}),t})(),hA=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0}),t})(),pA=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0}),t})(),fA=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0}),t})(),mA=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0}),t})(),gA=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0}),t})(),bA=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0}),t})(),_A=(()=>{class t{constructor(e){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new Me(!0),this.disabled=e.disabled,this.boundaryLinks=e.boundaryLinks,this.directionLinks=e.directionLinks,this.ellipses=e.ellipses,this.maxSize=e.maxSize,this.pageSize=e.pageSize,this.rotate=e.rotate,this.size=e.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(e){this._updatePages(e)}ngOnChanges(e){this._updatePages(this.page)}isEllipsis(e){return-1===e}_applyEllipses(e,i){this.ellipses&&(e>0&&(e>2?this.pages.unshift(-1):2===e&&this.pages.unshift(2),this.pages.unshift(1)),i<this.pageCount&&(i<this.pageCount-2?this.pages.push(-1):i===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let e=0,i=this.pageCount,o=Math.floor(this.maxSize/2);return this.page<=o?i=this.maxSize:this.pageCount-this.page<o?e=this.pageCount-this.maxSize:(e=this.page-o-1,i=this.page+(this.maxSize%2==0?o-1:o)),[e,i]}_applyPagination(){let i=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[i,i+this.maxSize]}_setPageInRange(e){const i=this.page;this.page=sv(e,this.pageCount,1),this.page!==i&&ho(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(e){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),ho(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let i=1;i<=this.pageCount;i++)this.pages.push(i);if(this._setPageInRange(e),this.maxSize>0&&this.pageCount>this.maxSize){let i=0,o=this.pageCount;[i,o]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(i,o),this._applyEllipses(i,o)}}}return t.\u0275fac=function(e){return new(e||t)(J($7))},t.\u0275cmp=Wt({type:t,selectors:[["ngb-pagination"]],contentQueries:function(e,i,o){if(1&e&&(Sn(o,uA,5),Sn(o,hA,5),Sn(o,pA,5),Sn(o,fA,5),Sn(o,mA,5),Sn(o,gA,5),Sn(o,bA,5)),2&e){let s;Et(s=St())&&(i.tplEllipsis=s.first),Et(s=St())&&(i.tplFirst=s.first),Et(s=St())&&(i.tplLast=s.first),Et(s=St())&&(i.tplNext=s.first),Et(s=St())&&(i.tplNumber=s.first),Et(s=St())&&(i.tplPrevious=s.first),Et(s=St())&&(i.tplPages=s.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[Mn,Mo],decls:20,vars:12,consts:function(){let n,e,i,o,s,d,f,_;return n=$localize`:@@ngb.pagination.first:`,e=$localize`:@@ngb.pagination.previous:`,i=$localize`:@@ngb.pagination.next:`,o=$localize`:@@ngb.pagination.last:`,s=$localize`:@@ngb.pagination.first-aria:First`,d=$localize`:@@ngb.pagination.previous-aria:Previous`,f=$localize`:@@ngb.pagination.next-aria:Next`,_=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],["class","page-item",3,"disabled",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],n,e,i,o,["class","visually-hidden",4,"ngIf"],[1,"visually-hidden"],["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["aria-label",s,"href","",1,"page-link",3,"click"],["aria-label",d,"href","",1,"page-link",3,"click"],["aria-label",f,"href","",1,"page-link",3,"click"],["aria-label",_,"href","",1,"page-link",3,"click"]]},template:function(e,i){if(1&e&&(Ee(0,xH,2,0,"ng-template",null,0,Ki),Ee(2,wH,2,0,"ng-template",null,1,Ki),Ee(4,CH,2,0,"ng-template",null,2,Ki),Ee(6,DH,2,0,"ng-template",null,3,Ki),Ee(8,EH,1,0,"ng-template",null,4,Ki),Ee(10,TH,2,2,"ng-template",null,5,Ki),Ee(12,NH,1,1,"ng-template",null,6,Ki),W(14,"ul"),Ee(15,LH,3,9,"li",7),Ee(16,VH,3,8,"li",7),Ee(17,UH,0,0,"ng-template",8),Ee(18,jH,3,9,"li",7),Ee(19,GH,3,9,"li",7),Y()),2&e){const o=Vi(13);ne(14),ml("pagination"+(i.size?" pagination-"+i.size:"")),ne(1),me("ngIf",i.boundaryLinks),ne(1),me("ngIf",i.directionLinks),ne(1),me("ngTemplateOutlet",(null==i.tplPages?null:i.tplPages.templateRef)||o)("ngTemplateOutletContext",ef(8,WH,i.page,i.pages,i.disabled)),ne(1),me("ngIf",i.directionLinks),ne(1),me("ngIf",i.boundaryLinks)}},dependencies:[Pi,Mr,Qs],encapsulation:2,changeDetection:0}),t})(),vA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[_A]}),t})(),xA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({}),t})(),Y7=(()=>{class t{constructor(){this.max=100,this.animated=!1,this.ariaLabel="progress bar",this.striped=!1,this.showValue=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Q7=(()=>{class t{constructor(e){this.value=0,this.max=e.max,this.animated=e.animated,this.ariaLabel=e.ariaLabel,this.striped=e.striped,this.textType=e.textType,this.type=e.type,this.showValue=e.showValue,this.height=e.height}set max(e){this._max=!ho(e)||e<=0?100:e}get max(){return this._max}getValue(){return sv(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return t.\u0275fac=function(e){return new(e||t)(J(Y7))},t.\u0275cmp=Wt({type:t,selectors:[["ngb-progressbar"]],hostAttrs:["role","progressbar","aria-valuemin","0",1,"progress"],hostVars:5,hostBindings:function(e,i){2&e&&(an("aria-valuenow",i.getValue())("aria-valuemax",i.max)("aria-label",i.ariaLabel),$d("height",i.height))},inputs:{max:"max",animated:"animated",ariaLabel:"ariaLabel",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},standalone:!0,features:[Mo],ngContentSelectors:rv,decls:3,vars:11,consts:function(){let n;return n=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[4,"ngIf"],n]},template:function(e,i){1&e&&(hl(),W(0,"div"),Ee(1,KH,3,3,"span",0),pl(2),Y()),2&e&&(function lE(t,n,e,i,o){bl(os,ic,Hp(m(),t,n,e,i,o),!0)}("progress-bar",i.type?i.textType?" bg-"+i.type:" text-bg-"+i.type:"","",i.textType?" text-"+i.textType:"",""),$d("width",i.getPercentValue(),"%"),ut("progress-bar-animated",i.animated)("progress-bar-striped",i.striped),ne(1),me("ngIf",i.showValue))},dependencies:[Pi,NT],encapsulation:2,changeDetection:0}),t})(),wA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[Q7]}),t})(),X7=(()=>{class t{constructor(){this.max=10,this.readonly=!1,this.resettable=!1,this.tabindex=0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),J7=(()=>{class t{constructor(e,i){this._changeDetectorRef=i,this.contexts=[],this.disabled=!1,this.hover=new Me,this.leave=new Me,this.rateChange=new Me(!0),this.onChange=o=>{},this.onTouched=()=>{},this.max=e.max,this.readonly=e.readonly,this.tabindex=e.tabindex}ariaValueText(e,i){return`${e} out of ${i}`}isInteractive(){return!this.readonly&&!this.disabled}enter(e){this.isInteractive()&&this._updateState(e),this.hover.emit(e)}handleBlur(){this.onTouched()}handleClick(e){this.isInteractive()&&this.update(this.resettable&&this.rate===e?0:e)}handleKeyDown(e){switch(e.which){case $n.ArrowDown:case $n.ArrowLeft:this.update(this.rate-1);break;case $n.ArrowUp:case $n.ArrowRight:this.update(this.rate+1);break;case $n.Home:this.update(0);break;case $n.End:this.update(this.max);break;default:return}e.preventDefault()}ngOnChanges(e){e.rate&&this.update(this.rate),e.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(e){this.disabled=e}update(e,i=!0){const o=sv(e,this.max,0);this.isInteractive()&&this.rate!==o&&(this.rate=o,this.rateChange.emit(this.rate)),i&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(e){this.update(e,!1),this._changeDetectorRef.markForCheck()}_updateState(e){this.nextRate=e,this.contexts.forEach((i,o)=>i.fill=Math.round(100*sv(e-o,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(e,i)=>({fill:0,index:i}))}}return t.\u0275fac=function(e){return new(e||t)(J(X7),J(ko))},t.\u0275cmp=Wt({type:t,selectors:[["ngb-rating"]],contentQueries:function(e,i,o){if(1&e&&Sn(o,Zt,5),2&e){let s;Et(s=St())&&(i.starTemplateFromContent=s.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(e,i){1&e&&Xe("blur",function(){return i.handleBlur()})("keydown",function(s){return i.handleKeyDown(s)})("mouseleave",function(){return i.reset()}),2&e&&(Ss("tabindex",i.disabled?-1:i.tabindex),an("aria-valuemax",i.max)("aria-valuenow",i.nextRate)("aria-valuetext",i.ariaValueText(i.nextRate,i.max))("aria-disabled",!!i.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate",tabindex:"tabindex",ariaValueText:"ariaValueText"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},standalone:!0,features:[jn([{provide:$o,useExisting:Nt(()=>t),multi:!0}]),Mn,Mo],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(Ee(0,YH,1,1,"ng-template",null,0,Ki),Ee(2,XH,4,5,"ng-template",1)),2&e&&(ne(2),me("ngForOf",i.contexts))},dependencies:[Mr,Qs],encapsulation:2,changeDetection:0}),t})(),CA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[J7]}),t})();class DA{constructor(n,e,i){this.hour=Or(n),this.minute=Or(e),this.second=Or(i)}changeHour(n=1){this.updateHour((isNaN(this.hour)?0:this.hour)+n)}updateHour(n){this.hour=ho(n)?(n<0?24+n:n)%24:NaN}changeMinute(n=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+n)}updateMinute(n){ho(n)?(this.minute=n%60<0?60+n%60:n%60,this.changeHour(Math.floor(n/60))):this.minute=NaN}changeSecond(n=1){this.updateSecond((isNaN(this.second)?0:this.second)+n)}updateSecond(n){ho(n)?(this.second=n<0?60+n%60:n%60,this.changeMinute(Math.floor(n/60))):this.second=NaN}isValid(n=!0){return ho(this.hour)&&ho(this.minute)&&(!n||ho(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let e$=(()=>{class t{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),EA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:function(){return function t$(){return new n$}()},providedIn:"root"}),t})(),n$=(()=>{class t extends EA{fromModel(e){return e&&eo(e.hour)&&eo(e.minute)?{hour:e.hour,minute:e.minute,second:eo(e.second)?e.second:null}:null}toModel(e){return e&&eo(e.hour)&&eo(e.minute)?{hour:e.hour,minute:e.minute,second:eo(e.second)?e.second:null}:null}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=_i(t)))(i||t)}}(),t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),SA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:function(e){let i=null;return i=e?new e:function i$(t){return new o$(t)}(Le(Ys)),i},providedIn:"root"}),t})(),o$=(()=>{class t extends SA{constructor(e){super(),this._periods=mT(e,Oi.Standalone,ln.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return t.\u0275fac=function(e){return new(e||t)(Le(Ys))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();const r$=/[^0-9]/g;let s$=(()=>{class t{constructor(e,i,o,s){this._config=e,this._ngbTimeAdapter=i,this._cd=o,this.i18n=s,this.onChange=d=>{},this.onTouched=()=>{},this.meridian=e.meridian,this.spinners=e.spinners,this.seconds=e.seconds,this.hourStep=e.hourStep,this.minuteStep=e.minuteStep,this.secondStep=e.secondStep,this.disabled=e.disabled,this.readonlyInputs=e.readonlyInputs,this.size=e.size}set hourStep(e){this._hourStep=eo(e)?e:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(e){this._minuteStep=eo(e)?e:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(e){this._secondStep=eo(e)?e:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(e){const i=this._ngbTimeAdapter.fromModel(e);this.model=i?new DA(i.hour,i.minute,i.second):new DA,!this.seconds&&(!i||!ho(i.second))&&(this.model.second=0),this._cd.markForCheck()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}changeHour(e){this.model?.changeHour(e),this.propagateModelChange()}changeMinute(e){this.model?.changeMinute(e),this.propagateModelChange()}changeSecond(e){this.model?.changeSecond(e),this.propagateModelChange()}updateHour(e){const i=!!this.model&&this.model.hour>=12,o=Or(e);this.model?.updateHour(this.meridian&&(i&&o<12||!i&&12===o)?o+12:o),this.propagateModelChange()}updateMinute(e){this.model?.updateMinute(Or(e)),this.propagateModelChange()}updateSecond(e){this.model?.updateSecond(Or(e)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(e){e.value=e.value.replace(r$,"")}formatHour(e){return ho(e)?Af(this.meridian?e%12==0?12:e%12:e%24):Af(NaN)}formatMinSec(e){return Af(ho(e)?e:NaN)}handleBlur(){this.onTouched()}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(e){e.seconds&&!this.seconds&&this.model&&!ho(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(e=!0){e&&this.onTouched(),this.model?.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return t.\u0275fac=function(e){return new(e||t)(J(e$),J(EA),J(ko),J(SA))},t.\u0275cmp=Wt({type:t,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},exportAs:["ngbTimepicker"],standalone:!0,features:[jn([{provide:$o,useExisting:Nt(()=>t),multi:!0}]),Mn,Mo],decls:16,vars:25,consts:function(){let n,e,i,o,s,d,f,_,C,T,P,z,G,ae;return n=$localize`:@@ngb.timepicker.HH:HH`,e=$localize`:@@ngb.timepicker.hours:Hours`,i=$localize`:@@ngb.timepicker.MM:MM`,o=$localize`:@@ngb.timepicker.minutes:Minutes`,s=$localize`:@@ngb.timepicker.increment-hours:Increment hours`,d=$localize`:@@ngb.timepicker.decrement-hours:Decrement hours`,f=$localize`:@@ngb.timepicker.increment-minutes:Increment minutes`,_=$localize`:@@ngb.timepicker.decrement-minutes:Decrement minutes`,C=$localize`:@@ngb.timepicker.SS:SS`,T=$localize`:@@ngb.timepicker.seconds:Seconds`,P=$localize`:@@ngb.timepicker.increment-seconds:Increment seconds`,z=$localize`:@@ngb.timepicker.decrement-seconds:Decrement seconds`,G=$localize`:@@ngb.timepicker.PM:${"\ufffd0\ufffd"}:INTERPOLATION:`,ae=$localize`:@@ngb.timepicker.AM:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric","placeholder",n,"aria-label",e,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["type","text","maxlength","2","inputmode","numeric","placeholder",i,"aria-label",o,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"visually-hidden"],s,[1,"chevron","ngb-tp-chevron","bottom"],d,f,_,[1,"ngb-tp-input-container","ngb-tp-second"],["type","text","maxlength","2","inputmode","numeric","placeholder",C,"aria-label",T,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],P,z,[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""],G,ae]},template:function(e,i){1&e&&(W(0,"fieldset",0)(1,"div",1)(2,"div",2),Ee(3,JH,4,7,"button",3),W(4,"input",4),Xe("change",function(s){return i.updateHour(s.target.value)})("blur",function(){return i.handleBlur()})("input",function(s){return i.formatInput(s.target)})("keydown.ArrowUp",function(s){return i.changeHour(i.hourStep),s.preventDefault()})("keydown.ArrowDown",function(s){return i.changeHour(-i.hourStep),s.preventDefault()}),Y(),Ee(5,ej,4,7,"button",3),Y(),W(6,"div",5),ge(7,":"),Y(),W(8,"div",6),Ee(9,tj,4,7,"button",3),W(10,"input",7),Xe("change",function(s){return i.updateMinute(s.target.value)})("blur",function(){return i.handleBlur()})("input",function(s){return i.formatInput(s.target)})("keydown.ArrowUp",function(s){return i.changeMinute(i.minuteStep),s.preventDefault()})("keydown.ArrowDown",function(s){return i.changeMinute(-i.minuteStep),s.preventDefault()}),Y(),Ee(11,nj,4,7,"button",3),Y(),Ee(12,ij,2,0,"div",8),Ee(13,sj,4,9,"div",9),Ee(14,aj,1,0,"div",8),Ee(15,dj,5,9,"div",10),Y()()),2&e&&(ut("disabled",i.disabled),me("disabled",i.disabled),ne(3),me("ngIf",i.spinners),ne(1),ut("form-control-sm",i.isSmallSize)("form-control-lg",i.isLargeSize),me("value",i.formatHour(null==i.model?null:i.model.hour))("readOnly",i.readonlyInputs)("disabled",i.disabled),ne(1),me("ngIf",i.spinners),ne(4),me("ngIf",i.spinners),ne(1),ut("form-control-sm",i.isSmallSize)("form-control-lg",i.isLargeSize),me("value",i.formatMinSec(null==i.model?null:i.model.minute))("readOnly",i.readonlyInputs)("disabled",i.disabled),ne(1),me("ngIf",i.spinners),ne(1),me("ngIf",i.seconds),ne(1),me("ngIf",i.seconds),ne(1),me("ngIf",i.meridian),ne(1),me("ngIf",i.meridian))},dependencies:[Pi],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:flex;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron:before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-minute,.ngb-tp-second,.ngb-tp-meridian{display:flex;flex-direction:column;align-items:center;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}\n'],encapsulation:2}),t})(),TA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[s$]}),t})();const a$=(t,n)=>{const{classList:e}=t;if(n)return e.add("fade"),Of(t),e.add("show","showing"),()=>{e.remove("showing")};e.add("show")},l$=({classList:t})=>(t.add("showing"),()=>{t.remove("show","showing")});let c$=(()=>{class t{constructor(e){this._ngbConfig=e,this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Le(Rh))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),d$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=We({type:t,selectors:[["","ngbToastHeader",""]],standalone:!0}),t})(),u$=(()=>{class t{constructor(e,i,o,s){this.ariaLive=e,this._zone=o,this._element=s,this.contentHeaderTpl=null,this.shown=new Me,this.hidden=new Me,null==this.ariaLive&&(this.ariaLive=i.ariaLive),this.delay=i.delay,this.autohide=i.autohide,this.animation=i.animation}ngAfterContentInit(){this._zone.onStable.asObservable().pipe(Qi(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(e){"autohide"in e&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const e=Wo(this._zone,this._element.nativeElement,l$,{animation:this.animation,runningTransition:"stop"});return e.subscribe(()=>{this.hidden.emit()}),e}show(){const e=Wo(this._zone,this._element.nativeElement,a$,{animation:this.animation,runningTransition:"continue"});return e.subscribe(()=>{this.shown.emit()}),e}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}return t.\u0275fac=function(e){return new(e||t)(Cs("aria-live"),J(c$),J(_n),J(qt))},t.\u0275cmp=Wt({type:t,selectors:[["ngb-toast"]],contentQueries:function(e,i,o){if(1&e&&Sn(o,d$,7,Zt),2&e){let s;Et(s=St())&&(i.contentHeaderTpl=s.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(e,i){2&e&&(an("aria-live",i.ariaLive),ut("fade",i.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[Mn,Mo],ngContentSelectors:rv,decls:5,vars:1,consts:function(){let n;return n=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"me-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button","aria-label",n,1,"btn-close",3,"click"]]},template:function(e,i){1&e&&(hl(),Ee(0,uj,2,1,"ng-template",null,0,Ki),Ee(2,pj,3,1,"ng-template",1),W(3,"div",2),pl(4),Y()),2&e&&(ne(2),me("ngIf",i.contentHeaderTpl||i.header))},dependencies:[Pi,Qs],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2}),t})(),IA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[u$]}),t})(),MA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({}),t})(),h$=(()=>{class t{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(e){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);const i=_k(this.result),o=Array.isArray(this.term)?this.term:[this.term],s=C=>this.accentSensitive?C:xk(C),d=o.map(C=>function vj(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(s(_k(C)))).filter(C=>C),f=this.accentSensitive?i:xk(i),_=d.length?f.split(new RegExp(`(${d.join("|")})`,"gmi")):[i];if(this.accentSensitive)this.parts=_;else{let C=0;this.parts=_.map(T=>i.substring(C,C+=T.length))}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Wt({type:t,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[Mn,Mo],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(e,i){1&e&&Ee(0,gj,3,2,"ng-template",0),2&e&&me("ngForOf",i.parts)},dependencies:[Pi,Mr],styles:[".ngb-highlight{font-weight:700}\n"],encapsulation:2,changeDetection:0}),t})();new vt("live announcer delay",{providedIn:"root",factory:function p$(){return 100}});let kA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[h$]}),t})(),AA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({}),t})();const f$=[Ak,Ok,Rk,Nk,tA,oA,sA,dA,AA,vA,xA,wA,CA,TA,IA,MA,kA];let m$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[f$,Ak,Ok,Rk,Nk,tA,oA,sA,dA,AA,vA,xA,wA,CA,TA,IA,MA,kA]}),t})();const g$=["content"];function b$(t,n){1&t&&(W(0,"small",39),ge(1," Password is required! "),Y())}function _$(t,n){1&t&&(W(0,"small",39),ge(1," Namn is required! "),Y())}function v$(t,n){1&t&&(W(0,"small",39),ge(1," Name is required! "),Y())}function y$(t,n){1&t&&(W(0,"small",39),ge(1," City name is required! "),Y())}function x$(t,n){1&t&&(W(0,"small",39),ge(1," Operator is required! "),Y())}function w$(t,n){1&t&&(W(0,"small",39),ge(1," Osoite is required! "),Y())}function C$(t,n){1&t&&(W(0,"small",39),ge(1," Address (street) is required! "),Y())}function D$(t,n){1&t&&(W(0,"small",39),ge(1," Stad is required! "),Y())}function E$(t,n){1&t&&(W(0,"small",39),ge(1," Kapasiteet name is required! "),Y())}let OA=(()=>{class t{constructor(e,i,o,s,d,f){this.fb=e,this.api=i,this.router=o,this.toast=s,this.modalService=d,this.activat=f,this.content={},this.save=new Me,this.cancel=new Me;const _=this.activat.snapshot.paramMap.get("id");let C="";_&&(C=_,this.updateDisabled=!0),this.stationForm=this.fb.group({nimi:["",Go.required],namn:["",Go.required],name:["",Go.required],osoite:["",Go.required],address:["",Go.required],kaupunki:["",Go.required],stad:["",Go.required],operaattor:["",Go.required],kapasiteet:["",Go.required],x:[""],y:[""]}),C&&this.stationForm.addControl("id",this.fb.control(C,Go.required)),this.updateDisabled=!1}ngOnInit(){const e=this.activat.snapshot.paramMap.get("id");console.log("Form Values ID",e),this.activat.params.subscribe(i=>{if(e){this.updateDisabled=!0;const o=e?+e:0;this.ID=o,this.api.fetchStation(o).subscribe(s=>{s&&s.nimi&&this.stationForm.setValue({id:this.ID,nimi:s.nimi,namn:s.namn,name:s.name,osoite:s.osoite,address:s.address,kaupunki:s.kaupunki,stad:s.stad,operaattor:s.operaattor,kapasiteet:s.kapasiteet,x:s.x,y:s.y})})}})}onSubmit(){if(this.stationForm.get("kapasiteet")?.setValue(this.stationForm.get("kapasiteet")?.value.toString()),this.stationForm.valid){const o="https://api.maptiler.com/geocoding/Zurich.json?key=KgIGtpHhW7NoeQ6qFSk4&q="+this.stationForm.get("osoite")?.value+" "+this.stationForm.get("kaupunki")?.value;fetch(o).then(s=>s.json()).then(s=>{if(s.features.length>0){const d=s.features[0].geometry.coordinates[0],f=s.features[0].geometry.coordinates[1];this.stationForm.get("x")?.setValue(d),this.stationForm.get("y")?.setValue(f),console.log(`Latitude: ${f}, Longitude: ${d}`),console.log("Form Values:",this.stationForm.value),this.api.createStation(this.stationForm.value).subscribe({next:_=>{console.log(_),this.toast.success({detail:"SUCCESS",summary:"Success",duration:5e3}),this.router.navigate(["/station-list"])},error:_=>{if(console.log("Error: ",_),400===_.status){let C="";Object.keys(_.error.errors).forEach(T=>{C+=`${T}: ${_.error.errors[T]}<br>`}),this.toast.error({detail:C,summary:"Validation Error",duration:5e3})}else this.toast.error({detail:"Something went wrong",summary:"Error",duration:5e3})}})}else this.toast.error({detail:"Could not find latitude and longitude for the given address",summary:"Error",duration:5e3})}).catch(s=>{console.log(s),this.toast.error({detail:"Could not connect to the MapTiler API",summary:"Error",duration:5e3})})}else Y0.validateAllFormFields(this.stationForm),Object.keys(this.stationForm.controls).forEach(e=>{const i=this.stationForm.get(e);if(i&&i.errors){const o=i.errors;let s="";s=o.required?"One or more fields are required":o.min||o.max?"Value out of range":"Invalid field",this.toast.error({detail:s,summary:"Validation Error",duration:5e3})}})}update(){if(this.stationForm.get("kapasiteet")?.setValue(this.stationForm.get("kapasiteet")?.value.toString()),this.stationForm.valid){const o="https://api.maptiler.com/geocoding/Zurich.json?key=KgIGtpHhW7NoeQ6qFSk4&q="+this.stationForm.get("osoite")?.value+" "+this.stationForm.get("kaupunki")?.value;fetch(o).then(s=>s.json()).then(s=>{if(s.features.length>0){const d=s.features[0].geometry.coordinates[0],f=s.features[0].geometry.coordinates[1];this.stationForm.get("x")?.setValue(d),this.stationForm.get("y")?.setValue(f),console.log(`Latitude: ${f}, Longitude: ${d}`),console.log("Form Values:",this.stationForm.value);const _=this.ID?+this.ID:0;console.log("UpdatSetValue",this.stationForm.value),this.api.updateStation(_,this.stationForm.value).subscribe({next:C=>{console.log(C),this.toast.success({detail:"SUCCESS",summary:"Success",duration:5e3}),this.stationForm.patchValue({id:""}),this.router.navigate(["/station-list"])},error:C=>{if(console.log("Error: ",C),400===C.status){let T="";Object.keys(C.error.errors).forEach(P=>{T+=`${P}: ${C.error.errors[P]}<br>`}),this.toast.error({detail:T,summary:"Validation Error",duration:5e3})}else this.toast.error({detail:"Something went wrong",summary:"Error",duration:5e3})}})}else this.toast.error({detail:"Could not find latitude and longitude for the given address",summary:"Error",duration:5e3})}).catch(s=>{console.log(s),this.toast.error({detail:"Could not connect to the MapTiler API",summary:"Error",duration:5e3})})}else Y0.validateAllFormFields(this.stationForm),Object.keys(this.stationForm.controls).forEach(e=>{const i=this.stationForm.get(e);if(i&&i.errors){const o=i.errors;let s="";s=o.required?"One or more fields are required":o.min||o.max?"Value out of range":"Invalid field",this.toast.error({detail:s,summary:"Validation Error",duration:5e3})}})}gotoList(){this.router.navigate(["/station-list"])}}return t.\u0275fac=function(e){return new(e||t)(J(T0),J(Ef),J(Xi),J(ru),J(Ww),J(nu))},t.\u0275cmp=Wt({type:t,selectors:[["app-creat-station"]],viewQuery:function(e,i){if(1&e&&gi(g$,5),2&e){let o;Et(o=St())&&(i.content=o.first)}},inputs:{updatedValues:"updatedValues"},outputs:{save:"save",cancel:"cancel"},decls:97,vars:30,consts:[[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["for","nimi"],[1,"input-group"],["type","text","id","nimi","formControlName","nimi",1,"form-control"],["class","text-danger",4,"ngIf"],["for","namn"],["type","text","id","namn","formControlName","namn",1,"form-control"],["type","text","id","namn","formControlName","name",1,"form-control"],["for","kaupunki"],["type","text","id","kaupunki","formControlName","kaupunki",1,"form-control"],["for","operaattor"],["type","text","id","operaattor","formControlName","operaattor",1,"form-control"],[1,"input-group-text"],[1,"fas","fa-globe"],["for","osoite"],["type","text","id","osoite","formControlName","osoite",1,"form-control"],["for","address"],["type","text","id","address","formControlName","address",1,"form-control"],[1,"input-group-append"],[1,"fas","fa-map-marker-alt"],["for","stad"],["type","text","id","stad","formControlName","stad",1,"form-control"],[1,"fas","fa-city"],["for","kapasiteet"],["type","number","id","kapasiteet","formControlName","kapasiteet",1,"form-control"],["for","x"],["type","number","id","x","formControlName","x",1,"form-control"],[1,"fas","fa-long-arrow-alt-right"],["for","y"],["type","number","id","y","formControlName","y",1,"form-control"],[1,"fas","fa-long-arrow-alt-up"],["type","submit",1,"btn","btn-primary",3,"hidden"],["type","button",1,"btn","btn-primary",3,"hidden","click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"text-danger"]],template:function(e,i){1&e&&(W(0,"div",0)(1,"div",1)(2,"form",2),Xe("ngSubmit",function(){return i.onSubmit()}),W(3,"div",3)(4,"div",4)(5,"div",5)(6,"label",6),ge(7,"Nimi"),Y(),W(8,"div",7),lt(9,"input",8),Y(),Ee(10,b$,2,0,"small",9),Y(),W(11,"div",5)(12,"label",10),ge(13,"Namn"),Y(),W(14,"div",7),lt(15,"input",11),Y(),Ee(16,_$,2,0,"small",9),Y(),W(17,"div",5)(18,"label",10),ge(19,"Name"),Y(),W(20,"div",7),lt(21,"input",12),Y(),Ee(22,v$,2,0,"small",9),Y(),W(23,"div",5)(24,"label",13),ge(25,"Kaupunki"),Y(),W(26,"div",7),lt(27,"input",14),Y(),Ee(28,y$,2,0,"small",9),Y(),W(29,"div",5)(30,"label",15),ge(31,"Operaattor"),Y(),W(32,"div",7),lt(33,"input",16),W(34,"span",17),lt(35,"i",18),Y()(),Ee(36,x$,2,0,"small",9),Y()(),W(37,"div",4)(38,"div",5)(39,"label",19),ge(40,"Osoite"),Y(),W(41,"div",7),lt(42,"input",20),Y(),Ee(43,w$,2,0,"small",9),Y(),W(44,"div",5)(45,"label",21),ge(46,"Address"),Y(),W(47,"div",7),lt(48,"input",22),W(49,"div",23)(50,"span",17),lt(51,"i",24),Y()()()(),Ee(52,C$,2,0,"small",9),W(53,"div",5)(54,"label",25),ge(55,"Stad"),Y(),W(56,"div",7),lt(57,"input",26),W(58,"div",23)(59,"span",17),lt(60,"i",27),Y()()(),Ee(61,D$,2,0,"small",9),Y(),W(62,"div",5)(63,"label",28),ge(64,"Kapasiteet"),Y(),W(65,"div",7),lt(66,"input",29)(67,"div",23),Y(),Ee(68,E$,2,0,"small",9),Y()(),W(69,"div",3)(70,"div",4)(71,"div",5)(72,"label",30),ge(73,"Longitude"),Y(),W(74,"div",7),lt(75,"input",31),W(76,"div",23)(77,"span",17),lt(78,"i",32),Y()()()()(),W(79,"div",4)(80,"div",5)(81,"label",33),ge(82,"Latitude"),Y(),W(83,"div",7),lt(84,"input",34),W(85,"div",23)(86,"span",17),lt(87,"i",35),Y()()()()()(),W(88,"div",3)(89,"div",4)(90,"button",36),ge(91,"Submit"),Y(),W(92,"button",37),Xe("click",function(){return i.update()}),ge(93,"Update"),Y()(),W(94,"div",4)(95,"button",38),Xe("click",function(){return i.gotoList()}),ge(96,"Go back"),Y()()()()()()()),2&e&&(ne(2),me("formGroup",i.stationForm),ne(6),ut("error",i.stationForm.controls.nimi.dirty&&i.stationForm.hasError("required","nimi")),ne(2),me("ngIf",i.stationForm.controls.nimi.dirty&&i.stationForm.hasError("required","nimi")),ne(4),ut("has-error",i.stationForm.controls.namn.invalid&&(i.stationForm.controls.namn.dirty||i.stationForm.controls.namn.touched)),ne(2),me("ngIf",i.stationForm.controls.namn.invalid&&(i.stationForm.controls.namn.dirty||i.stationForm.controls.namn.touched)),ne(4),ut("has-error",i.stationForm.controls.namn.invalid&&(i.stationForm.controls.namn.dirty||i.stationForm.controls.namn.touched)),ne(2),me("ngIf",i.stationForm.controls.namn.invalid&&(i.stationForm.controls.namn.dirty||i.stationForm.controls.namn.touched)),ne(4),ut("has-error",i.stationForm.controls.kaupunki.invalid&&(i.stationForm.controls.kaupunki.dirty||i.stationForm.controls.kaupunki.touched)),ne(2),me("ngIf",i.stationForm.controls.kaupunki.invalid&&(i.stationForm.controls.kaupunki.dirty||i.stationForm.controls.kaupunki.touched)),ne(4),ut("has-error",i.stationForm.controls.operaattor.invalid&&(i.stationForm.controls.operaattor.dirty||i.stationForm.controls.operaattor.touched)),ne(4),me("ngIf",i.stationForm.controls.operaattor.invalid&&(i.stationForm.controls.operaattor.dirty||i.stationForm.controls.operaattor.touched)),ne(5),ut("has-error",i.stationForm.controls.osoite.invalid&&(i.stationForm.controls.osoite.dirty||i.stationForm.controls.osoite.touched)),ne(2),me("ngIf",i.stationForm.controls.osoite.invalid&&(i.stationForm.controls.osoite.dirty||i.stationForm.controls.osoite.touched)),ne(4),ut("has-error",i.stationForm.controls.address.invalid&&(i.stationForm.controls.address.dirty||i.stationForm.controls.address.touched)),ne(5),me("ngIf",i.stationForm.controls.address.invalid&&(i.stationForm.controls.address.dirty||i.stationForm.controls.address.touched)),ne(4),ut("has-error",i.stationForm.controls.stad.invalid&&(i.stationForm.controls.stad.dirty||i.stationForm.controls.stad.touched)),ne(5),me("ngIf",i.stationForm.controls.stad.invalid&&(i.stationForm.controls.stad.dirty||i.stationForm.controls.stad.touched)),ne(4),ut("has-error",i.stationForm.controls.kapasiteet.invalid&&(i.stationForm.controls.kapasiteet.dirty||i.stationForm.controls.kapasiteet.touched)),ne(3),me("ngIf",i.stationForm.controls.kapasiteet.invalid&&(i.stationForm.controls.kapasiteet.dirty||i.stationForm.controls.kapasiteet.touched)),ne(22),me("hidden",i.updateDisabled),ne(2),me("hidden",!i.updateDisabled))},dependencies:[Pi,Dg,Ch,S0,cf,_g,Eh,pf],styles:["mgl-map[_ngcontent-%COMP%]{height:100vh;width:100%}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;display:block;margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #ddd;padding:.375rem .75rem;font-size:1rem;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 .2rem #007bff40;border-color:#80bdff}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0069d9;border-color:#0062cc}"]}),t})();function S$(t,n){1&t&&(W(0,"div",14)(1,"p"),ge(2,"Loading..."),Y(),lt(3,"i",15),Y())}let T$=(()=>{class t{constructor(e,i){this.api=e,this.toast=i,this.fileSelector="",this.loading=!1,this.selectedFile=null}ngOnInit(){}onFileSelected(e){this.selectedFile=e.target.files[0]}onUpload(){let e="";if(!this.selectedFile)return void this.toast.error({detail:"Please select the file from the device.",summary:"Error",duration:5e4});const i=document.querySelector('input[name="dataType"]:checked');if(!i)return void this.toast.error({detail:"Database entity not selected. Please, select data type",summary:"Error",duration:5e4});"station"===i.value&&(e="Stations"),"journey"===i.value&&(e="Journeys");const o=new FormData;o.append("file",this.selectedFile,this.selectedFile.name),this.loading=!0,this.api.importData(o,e).subscribe({next:s=>{if(this.loading=!1,"message"in s){const d=s.message;console.log(" Handle success",d),this.toast.success({detail:d,summary:"Success",duration:5e3})}else this.loading=!1,this.toast.success({detail:"SUCCESS",summary:"Success",duration:5e3})},error:s=>{this.loading=!1,this.toast.error({detail:s.error,summary:"Error",duration:5e3})}})}}return t.\u0275fac=function(e){return new(e||t)(J(Ef),J(ru))},t.\u0275cmp=Wt({type:t,selectors:[["app-import"]],decls:26,vars:1,consts:[[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"form-check"],["type","radio","name","dataType","id","station","value","station",1,"form-check-input"],["for","station",1,"form-check-label"],["type","radio","name","dataType","id","journey","value","journey",1,"form-check-input"],["for","journey",1,"form-check-label"],["for","journeyFile"],["type","file",1,"form-control-file",3,"change"],["for","instruction"],["class","text-center",4,"ngIf"],[1,"col-md-12"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"text-center"],[1,"fa","fa-spinner","fa-spin","fa-3x"]],template:function(e,i){1&e&&(W(0,"div",0)(1,"div",1)(2,"div",2)(3,"label"),ge(4,"Select Databse Entity:"),Y(),W(5,"div",3),lt(6,"input",4),W(7,"label",5),ge(8," Bike Station "),Y()(),W(9,"div",3),lt(10,"input",6),W(11,"label",7),ge(12," Journey "),Y()()(),W(13,"div",2)(14,"label",8),ge(15,"CSV File:"),Y(),W(16,"input",9),Xe("change",function(s){return i.onFileSelected(s)}),Y()()(),W(17,"div",1)(18,"div",2)(19,"label",10),ge(20,"Progress:"),Y(),Ee(21,S$,4,0,"div",11),Y()()(),W(22,"div",0)(23,"div",12)(24,"button",13),Xe("click",function(){return i.onUpload()}),ge(25,"Upload"),Y()()()),2&e&&(ne(21),me("ngIf",i.loading))},dependencies:[Pi],styles:[".row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-right:15px;margin-left:15px;border-radius:.5rem;background-color:#faf8f8}.col-md-6[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%;padding-right:15px;padding-left:15px}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-check-input[_ngcontent-%COMP%]{position:absolute;margin-top:.3rem;margin-left:-1.25rem}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;border-radius:.25rem;padding:.375rem .75rem;font-size:1rem;line-height:1.5;margin-bottom:20px}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0069d9;border-color:#0062cc}.form-control-file[_ngcontent-%COMP%]{z-index:2;width:100%;height:calc(1.5em + .75rem + 2px);margin:0;opacity:10;border:solid 1px;border-radius:.25rem}.form-control-file[_ngcontent-%COMP%]:hover{background-color:#9a9b9c}label[for=journeyFile][_ngcontent-%COMP%]{position:relative;cursor:pointer;border:1px solid #ccc;padding:.5rem 1rem;border-radius:.25rem}label[for=journeyFile][_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.text-center[_ngcontent-%COMP%]{text-align:center}.fa-spinner[_ngcontent-%COMP%]{color:#007bff;font-size:3em}.fa-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fa-spin 2s infinite linear}@keyframes _ngcontent-%COMP%_fa-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),t})();function PA(t,n=J0){return Gn((e,i)=>{let o=null,s=null,d=null;const f=()=>{if(o){o.unsubscribe(),o=null;const C=s;s=null,i.next(C)}};function _(){const C=d+t,T=n.now();if(T<C)return o=this.schedule(void 0,C-T),void i.add(o);f()}e.subscribe(xn(i,C=>{s=C,d=n.now(),o||(o=n.schedule(_,t),i.add(o))},()=>{f(),i.complete()},void 0,()=>{s=o=null}))})}const ob={schedule(t){let n=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=ob;i&&(n=i.requestAnimationFrame,e=i.cancelAnimationFrame);const o=n(s=>{e=void 0,t(s)});return new di(()=>e?.(o))},requestAnimationFrame(...t){const{delegate:n}=ob;return(n?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:n}=ob;return(n?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0},RA=new class A$ extends _w{flush(n){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let o;n=n||i.shift();do{if(o=n.execute(n.state,n.delay))break}while((n=i[0])&&n.id===e&&i.shift());if(this._active=!1,o){for(;(n=i[0])&&n.id===e&&i.shift();)n.unsubscribe();throw o}}}(class k$ extends bw{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,i=0){return null!==i&&i>0?super.requestAsyncId(n,e,i):(n.actions.push(this),n._scheduled||(n._scheduled=ob.requestAnimationFrame(()=>n.flush(void 0))))}recycleAsyncId(n,e,i=0){var o;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(n,e,i);const{actions:s}=n;null!=e&&(null===(o=s[s.length-1])||void 0===o?void 0:o.id)!==e&&(ob.cancelAnimationFrame(e),n._scheduled=void 0)}});let Zw,O$=1;const vv={};function NA(t){return t in vv&&(delete vv[t],!0)}const P$={setImmediate(t){const n=O$++;return vv[n]=!0,Zw||(Zw=Promise.resolve()),Zw.then(()=>NA(n)&&t()),n},clearImmediate(t){NA(t)}},{setImmediate:R$,clearImmediate:N$}=P$,yv={setImmediate(...t){const{delegate:n}=yv;return(n?.setImmediate||R$)(...t)},clearImmediate(t){const{delegate:n}=yv;return(n?.clearImmediate||N$)(t)},delegate:void 0},B$=new class L$ extends _w{flush(n){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let o;n=n||i.shift();do{if(o=n.execute(n.state,n.delay))break}while((n=i[0])&&n.id===e&&i.shift());if(this._active=!1,o){for(;(n=i[0])&&n.id===e&&i.shift();)n.unsubscribe();throw o}}}(class F$ extends bw{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,i=0){return null!==i&&i>0?super.requestAsyncId(n,e,i):(n.actions.push(this),n._scheduled||(n._scheduled=yv.setImmediate(n.flush.bind(n,void 0))))}recycleAsyncId(n,e,i=0){var o;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(n,e,i);const{actions:s}=n;null!=e&&(null===(o=s[s.length-1])||void 0===o?void 0:o.id)!==e&&(yv.clearImmediate(e),n._scheduled=void 0)}}),z$=["content"],V$=["scroll"],U$=["padding"],rb=function(t){return{searchTerm:t}};function H$(t,n){if(1&t&&(W(0,"div",6),A_(1,7),Y()),2&t){const e=Fe();ne(1),me("ngTemplateOutlet",e.headerTemplate)("ngTemplateOutletContext",Ts(2,rb,e.filterValue))}}function j$(t,n){if(1&t&&(W(0,"div",8),A_(1,7),Y()),2&t){const e=Fe();ne(1),me("ngTemplateOutlet",e.footerTemplate)("ngTemplateOutletContext",Ts(2,rb,e.filterValue))}}const FA=["*"],$$=["searchInput"];function G$(t,n){if(1&t){const e=Xn();W(0,"span",15),Xe("click",function(){D(e);const o=Fe().$implicit;return S(Fe(2).unselect(o))}),ge(1,"\xd7"),Y(),lt(2,"span",16)}if(2&t){const e=Fe().$implicit,i=Fe(2);ne(2),me("ngItemLabel",e.label)("escape",i.escapeHTML)}}function W$(t,n){}const q$=function(t,n,e){return{item:t,clear:n,label:e}};function Z$(t,n){if(1&t&&(W(0,"div",12),Ee(1,G$,3,2,"ng-template",null,13,Ki),Ee(3,W$,0,0,"ng-template",14),Y()),2&t){const e=n.$implicit,i=Vi(2),o=Fe(2);ut("ng-value-disabled",e.disabled),ne(3),me("ngTemplateOutlet",o.labelTemplate||i)("ngTemplateOutletContext",ef(4,q$,e.value,o.clearItem,e.label))}}function K$(t,n){if(1&t&&(Zs(0),Ee(1,Z$,4,8,"div",11),Ks()),2&t){const e=Fe();ne(1),me("ngForOf",e.selectedItems)("ngForTrackBy",e.trackByOption)}}function Y$(t,n){}const Q$=function(t,n){return{items:t,clear:n}};function X$(t,n){if(1&t&&Ee(0,Y$,0,0,"ng-template",14),2&t){const e=Fe();me("ngTemplateOutlet",e.multiLabelTemplate)("ngTemplateOutletContext",Gd(2,Q$,e.selectedValues,e.clearItem))}}function J$(t,n){1&t&&lt(0,"div",19)}function e9(t,n){}function t9(t,n){if(1&t&&(Zs(0),Ee(1,J$,1,0,"ng-template",null,17,Ki),Ee(3,e9,0,0,"ng-template",18),Ks()),2&t){const e=Vi(2),i=Fe();ne(3),me("ngTemplateOutlet",i.loadingSpinnerTemplate||e)}}function n9(t,n){1&t&&(W(0,"span",20)(1,"span",21),ge(2,"\xd7"),Y()()),2&t&&Xm("title",Fe().clearAllText)}function i9(t,n){if(1&t&&lt(0,"span",27),2&t){const e=Fe().$implicit,i=Fe(2);me("ngItemLabel",e.label)("escape",i.escapeHTML)}}function o9(t,n){}const r9=function(t,n,e,i){return{item:t,item$:n,index:e,searchTerm:i}};function s9(t,n){if(1&t){const e=Xn();W(0,"div",25),Xe("click",function(){const s=D(e).$implicit;return S(Fe(2).toggleItem(s))})("mouseover",function(){const s=D(e).$implicit;return S(Fe(2).onItemHover(s))}),Ee(1,i9,1,2,"ng-template",null,26,Ki),Ee(3,o9,0,0,"ng-template",14),Y()}if(2&t){const e=n.$implicit,i=Vi(2),o=Fe(2);ut("ng-option-disabled",e.disabled)("ng-option-selected",e.selected)("ng-optgroup",e.children)("ng-option",!e.children)("ng-option-child",!!e.parent)("ng-option-marked",e===o.itemsList.markedItem),an("role",e.children?"group":"option")("aria-selected",e.selected)("id",null==e?null:e.htmlId),ne(3),me("ngTemplateOutlet",e.children?o.optgroupTemplate||i:o.optionTemplate||i)("ngTemplateOutletContext",U_(17,r9,e.value,e,e.index,o.searchTerm))}}function a9(t,n){if(1&t&&(W(0,"span")(1,"span",30),ge(2),Y(),ge(3),Y()),2&t){const e=Fe(3);ne(2),nn(e.addTagText),ne(1),Rn('"',e.searchTerm,'"')}}function l9(t,n){}function c9(t,n){if(1&t){const e=Xn();W(0,"div",28),Xe("mouseover",function(){return D(e),S(Fe(2).itemsList.unmarkItem())})("click",function(){return D(e),S(Fe(2).selectTag())}),Ee(1,a9,4,2,"ng-template",null,29,Ki),Ee(3,l9,0,0,"ng-template",14),Y()}if(2&t){const e=Vi(2),i=Fe(2);ut("ng-option-marked",!i.itemsList.markedItem),ne(3),me("ngTemplateOutlet",i.tagTemplate||e)("ngTemplateOutletContext",Ts(4,rb,i.searchTerm))}}function d9(t,n){if(1&t&&(W(0,"div",32),ge(1),Y()),2&t){const e=Fe(3);ne(1),nn(e.notFoundText)}}function u9(t,n){}function h9(t,n){if(1&t&&(Zs(0),Ee(1,d9,2,1,"ng-template",null,31,Ki),Ee(3,u9,0,0,"ng-template",14),Ks()),2&t){const e=Vi(2),i=Fe(2);ne(3),me("ngTemplateOutlet",i.notFoundTemplate||e)("ngTemplateOutletContext",Ts(2,rb,i.searchTerm))}}function p9(t,n){if(1&t&&(W(0,"div",32),ge(1),Y()),2&t){const e=Fe(3);ne(1),nn(e.typeToSearchText)}}function f9(t,n){}function m9(t,n){if(1&t&&(Zs(0),Ee(1,p9,2,1,"ng-template",null,33,Ki),Ee(3,f9,0,0,"ng-template",18),Ks()),2&t){const e=Vi(2),i=Fe(2);ne(3),me("ngTemplateOutlet",i.typeToSearchTemplate||e)}}function g9(t,n){if(1&t&&(W(0,"div",32),ge(1),Y()),2&t){const e=Fe(3);ne(1),nn(e.loadingText)}}function b9(t,n){}function _9(t,n){if(1&t&&(Zs(0),Ee(1,g9,2,1,"ng-template",null,34,Ki),Ee(3,b9,0,0,"ng-template",14),Ks()),2&t){const e=Vi(2),i=Fe(2);ne(3),me("ngTemplateOutlet",i.loadingTextTemplate||e)("ngTemplateOutletContext",Ts(2,rb,i.searchTerm))}}function v9(t,n){if(1&t){const e=Xn();W(0,"ng-dropdown-panel",22),Xe("update",function(o){return D(e),S(Fe().viewPortItems=o)})("scroll",function(o){return D(e),S(Fe().scroll.emit(o))})("scrollToEnd",function(o){return D(e),S(Fe().scrollToEnd.emit(o))})("outsideClick",function(){return D(e),S(Fe().close())}),Zs(1),Ee(2,s9,4,22,"div",23),Ee(3,c9,4,6,"div",24),Ks(),Ee(4,h9,4,4,"ng-container",3),Ee(5,m9,4,1,"ng-container",3),Ee(6,_9,4,4,"ng-container",3),Y()}if(2&t){const e=Fe();ut("ng-select-multiple",e.multiple),me("virtualScroll",e.virtualScroll)("bufferAmount",e.bufferAmount)("appendTo",e.appendTo)("position",e.dropdownPosition)("headerTemplate",e.headerTemplate)("footerTemplate",e.footerTemplate)("filterValue",e.searchTerm)("items",e.itemsList.filteredItems)("markedItem",e.itemsList.markedItem)("ngClass",e.appendTo?e.classes:null)("id",e.dropdownId),ne(2),me("ngForOf",e.viewPortItems)("ngForTrackBy",e.trackByOption),ne(1),me("ngIf",e.showAddTag),ne(1),me("ngIf",e.showNoItemsFound()),ne(1),me("ngIf",e.showTypeToSearch()),ne(1),me("ngIf",e.loading&&0===e.itemsList.filteredItems.length)}}const LA=/[&<>"']/g,y9=RegExp(LA.source),x9={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function yo(t){return null!=t}function sb(t){return"object"==typeof t&&yo(t)}function xv(t){return t instanceof Function}let D9=(()=>{class t{constructor(e){this.element=e,this.escape=!0}ngOnChanges(e){this.element.nativeElement.innerHTML=this.escape?function w9(t){return t&&y9.test(t)?t.replace(LA,n=>x9[n]):t}(this.ngItemLabel):this.ngItemLabel}}return t.\u0275fac=function(e){return new(e||t)(J(qt))},t.\u0275dir=We({type:t,selectors:[["","ngItemLabel",""]],inputs:{ngItemLabel:"ngItemLabel",escape:"escape"},features:[Mn]}),t})(),E9=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["","ng-option-tmp",""]]}),t})(),S9=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["","ng-optgroup-tmp",""]]}),t})(),T9=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["","ng-label-tmp",""]]}),t})(),I9=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["","ng-multi-label-tmp",""]]}),t})(),M9=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["","ng-header-tmp",""]]}),t})(),k9=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["","ng-footer-tmp",""]]}),t})(),A9=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["","ng-notfound-tmp",""]]}),t})(),O9=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["","ng-typetosearch-tmp",""]]}),t})(),P9=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["","ng-loadingtext-tmp",""]]}),t})(),R9=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["","ng-tag-tmp",""]]}),t})(),N9=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(J(Zt))},t.\u0275dir=We({type:t,selectors:[["","ng-loadingspinner-tmp",""]]}),t})();function BA(){return"axxxxxxxxxxx".replace(/[x]/g,()=>(16*Math.random()|0).toString(16))}const F9={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"};function wv(t){return t.replace(/[^\u0000-\u007E]/g,e=>F9[e]||e)}class L9{constructor(n,e){this._ngSelect=n,this._selectionModel=e,this._items=[],this._filteredItems=[],this._markedIndex=-1}get items(){return this._items}get filteredItems(){return this._filteredItems}get markedIndex(){return this._markedIndex}get selectedItems(){return this._selectionModel.value}get markedItem(){return this._filteredItems[this._markedIndex]}get noItemsToSelect(){return this._ngSelect.hideSelected&&this._items.length===this.selectedItems.length}get maxItemsSelected(){return this._ngSelect.multiple&&this._ngSelect.maxSelectedItems<=this.selectedItems.length}get lastSelectedItem(){let n=this.selectedItems.length-1;for(;n>=0;n--){const e=this.selectedItems[n];if(!e.disabled)return e}return null}setItems(n){this._items=n.map((e,i)=>this.mapItem(e,i)),this._ngSelect.groupBy?(this._groups=this._groupBy(this._items,this._ngSelect.groupBy),this._items=this._flatten(this._groups)):(this._groups=new Map,this._groups.set(void 0,this._items)),this._filteredItems=[...this._items]}select(n){if(n.selected||this.maxItemsSelected)return;const e=this._ngSelect.multiple;e||this.clearSelected(),this._selectionModel.select(n,e,this._ngSelect.selectableGroupAsModel),this._ngSelect.hideSelected&&this._hideSelected(n)}unselect(n){n.selected&&(this._selectionModel.unselect(n,this._ngSelect.multiple),this._ngSelect.hideSelected&&yo(n.index)&&this._ngSelect.multiple&&this._showSelected(n))}findItem(n){let e;return e=this._ngSelect.compareWith?i=>this._ngSelect.compareWith(i.value,n):this._ngSelect.bindValue?i=>!i.children&&this.resolveNested(i.value,this._ngSelect.bindValue)===n:i=>i.value===n||!i.children&&i.label&&i.label===this.resolveNested(n,this._ngSelect.bindLabel),this._items.find(i=>e(i))}addItem(n){const e=this.mapItem(n,this._items.length);return this._items.push(e),this._filteredItems.push(e),e}clearSelected(n=!1){this._selectionModel.clear(n),this._items.forEach(e=>{e.selected=n&&e.selected&&e.disabled,e.marked=!1}),this._ngSelect.hideSelected&&this.resetFilteredItems()}findByLabel(n){return n=wv(n).toLocaleLowerCase(),this.filteredItems.find(e=>wv(e.label).toLocaleLowerCase().substr(0,n.length)===n)}filter(n){if(!n)return void this.resetFilteredItems();this._filteredItems=[],n=this._ngSelect.searchFn?n:wv(n).toLocaleLowerCase();const e=this._ngSelect.searchFn||this._defaultSearchFn,i=this._ngSelect.hideSelected;for(const o of Array.from(this._groups.keys())){const s=[];for(const d of this._groups.get(o))i&&(d.parent&&d.parent.selected||d.selected)||e(n,this._ngSelect.searchFn?d.value:d)&&s.push(d);if(s.length>0){const[d]=s.slice(-1);if(d.parent){const f=this._items.find(_=>_===d.parent);this._filteredItems.push(f)}this._filteredItems.push(...s)}}}resetFilteredItems(){this._filteredItems.length!==this._items.length&&(this._filteredItems=this._ngSelect.hideSelected&&this.selectedItems.length>0?this._items.filter(n=>!n.selected):this._items)}unmarkItem(){this._markedIndex=-1}markNextItem(){this._stepToItem(1)}markPreviousItem(){this._stepToItem(-1)}markItem(n){this._markedIndex=this._filteredItems.indexOf(n)}markSelectedOrDefault(n){if(0===this._filteredItems.length)return;const e=this._getLastMarkedIndex();this._markedIndex=e>-1?e:n?this.filteredItems.findIndex(i=>!i.disabled):-1}resolveNested(n,e){if(!sb(n))return n;if(-1===e.indexOf("."))return n[e];{const i=e.split(".");let o=n;for(let s=0,d=i.length;s<d;++s){if(null==o)return null;o=o[i[s]]}return o}}mapItem(n,e){const i=yo(n.$ngOptionLabel)?n.$ngOptionLabel:this.resolveNested(n,this._ngSelect.bindLabel),o=yo(n.$ngOptionValue)?n.$ngOptionValue:n;return{index:e,label:yo(i)?i.toString():"",value:o,disabled:n.disabled,htmlId:`${this._ngSelect.dropdownId}-${e}`}}mapSelectedItems(){const n=this._ngSelect.multiple;for(const e of this.selectedItems){const i=this._ngSelect.bindValue?this.resolveNested(e.value,this._ngSelect.bindValue):e.value,o=yo(i)?this.findItem(i):null;this._selectionModel.unselect(e,n),this._selectionModel.select(o||e,n,this._ngSelect.selectableGroupAsModel)}this._ngSelect.hideSelected&&(this._filteredItems=this.filteredItems.filter(e=>-1===this.selectedItems.indexOf(e)))}_showSelected(n){if(this._filteredItems.push(n),n.parent){const e=n.parent;this._filteredItems.find(o=>o===e)||this._filteredItems.push(e)}else if(n.children)for(const e of n.children)e.selected=!1,this._filteredItems.push(e);this._filteredItems=[...this._filteredItems.sort((e,i)=>e.index-i.index)]}_hideSelected(n){this._filteredItems=this._filteredItems.filter(e=>e!==n),n.parent?n.parent.children.every(i=>i.selected)&&(this._filteredItems=this._filteredItems.filter(i=>i!==n.parent)):n.children&&(this._filteredItems=this.filteredItems.filter(e=>e.parent!==n))}_defaultSearchFn(n,e){return wv(e.label).toLocaleLowerCase().indexOf(n)>-1}_getNextItemIndex(n){return n>0?this._markedIndex>=this._filteredItems.length-1?0:this._markedIndex+1:this._markedIndex<=0?this._filteredItems.length-1:this._markedIndex-1}_stepToItem(n){0===this._filteredItems.length||this._filteredItems.every(e=>e.disabled)||(this._markedIndex=this._getNextItemIndex(n),this.markedItem.disabled&&this._stepToItem(n))}_getLastMarkedIndex(){if(this._ngSelect.hideSelected||this._markedIndex>-1&&void 0===this.markedItem)return-1;const n=this._filteredItems.indexOf(this.lastSelectedItem);return this.lastSelectedItem&&n<0?-1:Math.max(this.markedIndex,n)}_groupBy(n,e){const i=new Map;if(0===n.length)return i;if(Array.isArray(n[0].value[e])){for(const d of n){const f=(d.value[e]||[]).map((_,C)=>this.mapItem(_,C));i.set(d,f)}return i}const o=xv(this._ngSelect.groupBy),s=d=>{const f=o?e(d.value):d.value[e];return yo(f)?f:void 0};for(const d of n){const f=s(d),_=i.get(f);_?_.push(d):i.set(f,[d])}return i}_flatten(n){const e=xv(this._ngSelect.groupBy),i=[];for(const o of Array.from(n.keys())){let s=i.length;if(void 0===o){const P=n.get(void 0)||[];i.push(...P.map(z=>(z.index=s++,z)));continue}const d=sb(o),f={label:d?"":String(o),children:void 0,parent:null,index:s++,disabled:!this._ngSelect.selectableGroup,htmlId:BA()},_=e?this._ngSelect.bindLabel:this._ngSelect.groupBy,C=this._ngSelect.groupValue||(()=>d?o.value:{[_]:o}),T=n.get(o).map(P=>(P.parent=f,P.children=void 0,P.index=s++,P));f.children=T,f.value=C(o,T.map(P=>P.value)),i.push(f),i.push(...T)}return i}}var El=(()=>{return(t=El||(El={}))[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Esc=27]="Esc",t[t.Space=32]="Space",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowDown=40]="ArrowDown",t[t.Backspace=8]="Backspace",El;var t})();let zA=(()=>{class t{constructor(){this._dimensions={itemHeight:0,panelHeight:0,itemsPerViewport:0}}get dimensions(){return this._dimensions}calculateItems(e,i,o){const s=this._dimensions,d=s.itemHeight*i,_=Math.max(0,e)/d*i;let C=Math.min(i,Math.ceil(_)+(s.itemsPerViewport+1));const P=Math.max(0,C-s.itemsPerViewport);let z=Math.min(P,Math.floor(_)),G=s.itemHeight*Math.ceil(z)-s.itemHeight*Math.min(z,o);return G=isNaN(G)?0:G,z=isNaN(z)?-1:z,C=isNaN(C)?-1:C,z-=o,z=Math.max(0,z),C+=o,C=Math.min(i,C),{topPadding:G,scrollHeight:d,start:z,end:C}}setDimensions(e,i){const o=Math.max(1,Math.floor(i/e));this._dimensions={itemHeight:e,panelHeight:i,itemsPerViewport:o}}getScrollTo(e,i,o){const{panelHeight:s}=this.dimensions,d=e+i,_=o+s;return s>=d&&o===e?null:d>_?o+d-_:e<=o?e:null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();const VA=["top","right","bottom","left"],B9=typeof requestAnimationFrame<"u"?RA:B$;let UA=(()=>{class t{constructor(e,i,o,s,d){this._renderer=e,this._zone=i,this._panelService=o,this._document=d,this.items=[],this.position="auto",this.virtualScroll=!1,this.filterValue=null,this.update=new Me,this.scroll=new Me,this.scrollToEnd=new Me,this.outsideClick=new Me,this._destroy$=new Ht,this._scrollToEndFired=!1,this._updateScrollHeight=!1,this._lastScrollPosition=0,this._dropdown=s.nativeElement}get currentPosition(){return this._currentPosition}get itemsLength(){return this._itemsLength}set itemsLength(e){e!==this._itemsLength&&(this._itemsLength=e,this._onItemsLengthChanged())}get _startOffset(){if(this.markedItem){const{itemHeight:e,panelHeight:i}=this._panelService.dimensions,o=this.markedItem.index*e;return i>o?0:o}return 0}ngOnInit(){this._select=this._dropdown.parentElement,this._virtualPadding=this.paddingElementRef.nativeElement,this._scrollablePanel=this.scrollElementRef.nativeElement,this._contentPanel=this.contentElementRef.nativeElement,this._handleScroll(),this._handleOutsideClick(),this._appendDropdown(),this._setupMousedownListener()}ngOnChanges(e){if(e.items){const i=e.items;this._onItemsChange(i.currentValue,i.firstChange)}}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._destroy$.unsubscribe(),this.appendTo&&this._renderer.removeChild(this._dropdown.parentNode,this._dropdown)}scrollTo(e,i=!1){if(!e)return;const o=this.items.indexOf(e);if(o<0||o>=this.itemsLength)return;let s;if(this.virtualScroll){const d=this._panelService.dimensions.itemHeight;s=this._panelService.getScrollTo(o*d,d,this._lastScrollPosition)}else{const d=this._dropdown.querySelector(`#${e.htmlId}`);s=this._panelService.getScrollTo(d.offsetTop,d.clientHeight,i?d.offsetTop:this._lastScrollPosition)}yo(s)&&(this._scrollablePanel.scrollTop=s)}scrollToTag(){const e=this._scrollablePanel;e.scrollTop=e.scrollHeight-e.clientHeight}adjustPosition(){this._updateYPosition()}_handleDropdownPosition(){this._currentPosition=this._calculateCurrentPosition(this._dropdown),VA.includes(this._currentPosition)?this._updateDropdownClass(this._currentPosition):this._updateDropdownClass("bottom"),this.appendTo&&this._updateYPosition(),this._dropdown.style.opacity="1"}_updateDropdownClass(e){VA.forEach(o=>{const s=`ng-select-${o}`;this._renderer.removeClass(this._dropdown,s),this._renderer.removeClass(this._select,s)});const i=`ng-select-${e}`;this._renderer.addClass(this._dropdown,i),this._renderer.addClass(this._select,i)}_handleScroll(){this._zone.runOutsideAngular(()=>{Ji(this.scrollElementRef.nativeElement,"scroll").pipe(bi(this._destroy$),function M$(t,n=J0){return function I$(t){return Gn((n,e)=>{let i=!1,o=null,s=null,d=!1;const f=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const C=o;o=null,e.next(C)}d&&e.complete()},_=()=>{s=null,d&&e.complete()};n.subscribe(xn(e,C=>{i=!0,o=C,s||te(t(C)).subscribe(s=xn(e,f,_))},()=>{d=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>Gg(t,n))}(0,B9)).subscribe(e=>{const i=e.path||e.composedPath&&e.composedPath();this._onContentScrolled(i&&0!==i.length?i[0].scrollTop:e.target.scrollTop)})})}_handleOutsideClick(){this._document&&this._zone.runOutsideAngular(()=>{Qr(Ji(this._document,"touchstart",{capture:!0}),Ji(this._document,"mousedown",{capture:!0})).pipe(bi(this._destroy$)).subscribe(e=>this._checkToClose(e))})}_checkToClose(e){if(this._select.contains(e.target)||this._dropdown.contains(e.target))return;const i=e.path||e.composedPath&&e.composedPath();e.target&&e.target.shadowRoot&&i&&i[0]&&this._select.contains(i[0])||this._zone.run(()=>this.outsideClick.emit())}_onItemsChange(e,i){this.items=e||[],this._scrollToEndFired=!1,this.itemsLength=e.length,this.virtualScroll?this._updateItemsRange(i):(this._setVirtualHeight(),this._updateItems(i))}_updateItems(e){this.update.emit(this.items),!1!==e&&this._zone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._panelService.setDimensions(0,this._scrollablePanel.clientHeight),this._handleDropdownPosition(),this.scrollTo(this.markedItem,e)})})}_updateItemsRange(e){this._zone.runOutsideAngular(()=>{this._measureDimensions().then(()=>{e?(this._renderItemsRange(this._startOffset),this._handleDropdownPosition()):this._renderItemsRange()})})}_onContentScrolled(e){this.virtualScroll&&this._renderItemsRange(e),this._lastScrollPosition=e,this._fireScrollToEnd(e)}_updateVirtualHeight(e){this._updateScrollHeight&&(this._virtualPadding.style.height=`${e}px`,this._updateScrollHeight=!1)}_setVirtualHeight(){this._virtualPadding&&(this._virtualPadding.style.height="0px")}_onItemsLengthChanged(){this._updateScrollHeight=!0}_renderItemsRange(e=null){if(e&&this._lastScrollPosition===e)return;const i=this._panelService.calculateItems(e=e||this._scrollablePanel.scrollTop,this.itemsLength,this.bufferAmount);this._updateVirtualHeight(i.scrollHeight),this._contentPanel.style.transform=`translateY(${i.topPadding}px)`,this._zone.run(()=>{this.update.emit(this.items.slice(i.start,i.end)),this.scroll.emit({start:i.start,end:i.end})}),yo(e)&&0===this._lastScrollPosition&&(this._scrollablePanel.scrollTop=e,this._lastScrollPosition=e)}_measureDimensions(){if(this._panelService.dimensions.itemHeight>0||0===this.itemsLength)return Promise.resolve(this._panelService.dimensions);const[e]=this.items;return this.update.emit([e]),Promise.resolve().then(()=>{const o=this._dropdown.querySelector(`#${e.htmlId}`).clientHeight;return this._virtualPadding.style.height=o*this.itemsLength+"px",this._panelService.setDimensions(o,this._scrollablePanel.clientHeight),this._panelService.dimensions})}_fireScrollToEnd(e){this._scrollToEndFired||0===e||e+this._dropdown.clientHeight>=(this.virtualScroll?this._virtualPadding:this._contentPanel).clientHeight-1&&(this._zone.run(()=>this.scrollToEnd.emit()),this._scrollToEndFired=!0)}_calculateCurrentPosition(e){if("auto"!==this.position)return this.position;const i=this._select.getBoundingClientRect(),o=document.documentElement.scrollTop||document.body.scrollTop;return i.top+window.pageYOffset+i.height+e.getBoundingClientRect().height>o+document.documentElement.clientHeight?"top":"bottom"}_appendDropdown(){if(this.appendTo){if(this._parent=document.querySelector(this.appendTo),!this._parent)throw new Error(`appendTo selector ${this.appendTo} did not found any parent element`);this._updateXPosition(),this._parent.appendChild(this._dropdown)}}_updateXPosition(){const e=this._select.getBoundingClientRect(),i=this._parent.getBoundingClientRect();this._dropdown.style.left=e.left-i.left+"px",this._dropdown.style.width=e.width+"px",this._dropdown.style.minWidth=e.width+"px"}_updateYPosition(){const e=this._select.getBoundingClientRect(),i=this._parent.getBoundingClientRect(),o=e.height;"top"===this._currentPosition?(this._dropdown.style.bottom=i.bottom-e.bottom+o+"px",this._dropdown.style.top="auto"):"bottom"===this._currentPosition&&(this._dropdown.style.top=e.top-i.top+o+"px",this._dropdown.style.bottom="auto")}_setupMousedownListener(){this._zone.runOutsideAngular(()=>{Ji(this._dropdown,"mousedown").pipe(bi(this._destroy$)).subscribe(e=>{"INPUT"!==e.target.tagName&&e.preventDefault()})})}}return t.\u0275fac=function(e){return new(e||t)(J(lo),J(_n),J(zA),J(qt),J(Si,8))},t.\u0275cmp=Wt({type:t,selectors:[["ng-dropdown-panel"]],viewQuery:function(e,i){if(1&e&&(gi(z$,7,qt),gi(V$,7,qt),gi(U$,7,qt)),2&e){let o;Et(o=St())&&(i.contentElementRef=o.first),Et(o=St())&&(i.scrollElementRef=o.first),Et(o=St())&&(i.paddingElementRef=o.first)}},inputs:{items:"items",markedItem:"markedItem",position:"position",appendTo:"appendTo",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",headerTemplate:"headerTemplate",footerTemplate:"footerTemplate",filterValue:"filterValue"},outputs:{update:"update",scroll:"scroll",scrollToEnd:"scrollToEnd",outsideClick:"outsideClick"},features:[Mn],ngContentSelectors:FA,decls:9,vars:6,consts:[["class","ng-dropdown-header",4,"ngIf"],[1,"ng-dropdown-panel-items","scroll-host"],["scroll",""],["padding",""],["content",""],["class","ng-dropdown-footer",4,"ngIf"],[1,"ng-dropdown-header"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ng-dropdown-footer"]],template:function(e,i){1&e&&(hl(),Ee(0,H$,2,4,"div",0),W(1,"div",1,2),lt(3,"div",null,3),W(5,"div",null,4),pl(7),Y()(),Ee(8,j$,2,4,"div",5)),2&e&&(me("ngIf",i.headerTemplate),ne(3),ut("total-padding",i.virtualScroll),ne(2),ut("scrollable-content",i.virtualScroll&&i.items.length),ne(3),me("ngIf",i.footerTemplate))},dependencies:[Pi,Qs],encapsulation:2,changeDetection:0}),t})(),z9=(()=>{class t{constructor(e){this.elementRef=e,this.stateChange$=new Ht,this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=this._isDisabled(e)}get label(){return(this.elementRef.nativeElement.textContent||"").trim()}ngOnChanges(e){e.disabled&&this.stateChange$.next({value:this.value,disabled:this._disabled})}ngAfterViewChecked(){this.label!==this._previousLabel&&(this._previousLabel=this.label,this.stateChange$.next({value:this.value,disabled:this._disabled,label:this.elementRef.nativeElement.innerHTML}))}ngOnDestroy(){this.stateChange$.complete()}_isDisabled(e){return null!=e&&"false"!=`${e}`}}return t.\u0275fac=function(e){return new(e||t)(J(qt))},t.\u0275cmp=Wt({type:t,selectors:[["ng-option"]],inputs:{value:"value",disabled:"disabled"},features:[Mn],ngContentSelectors:FA,decls:1,vars:0,template:function(e,i){1&e&&(hl(),pl(0))},encapsulation:2,changeDetection:0}),t})(),V9=(()=>{class t{constructor(){this.notFoundText="No items found",this.typeToSearchText="Type to search",this.addTagText="Add item",this.loadingText="Loading...",this.clearAllText="Clear all",this.disableVirtualScroll=!0,this.openOnEnter=!0,this.appearance="underline"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),U9=(()=>{class t{warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const HA=new vt("ng-select-selection-model");let H9=(()=>{class t{constructor(e,i,o,s,d,f,_){this.classes=e,this.autoFocus=i,this.config=o,this._cd=f,this._console=_,this.markFirst=!0,this.dropdownPosition="auto",this.loading=!1,this.closeOnSelect=!0,this.hideSelected=!1,this.selectOnTab=!1,this.bufferAmount=4,this.selectableGroup=!1,this.selectableGroupAsModel=!0,this.searchFn=null,this.trackByFn=null,this.clearOnBackspace=!0,this.labelForId=null,this.inputAttrs={},this.readonly=!1,this.searchWhileComposing=!0,this.minTermLength=0,this.editableSearchTerm=!1,this.keyDownFn=C=>!0,this.multiple=!1,this.addTag=!1,this.searchable=!0,this.clearable=!0,this.isOpen=!1,this.blurEvent=new Me,this.focusEvent=new Me,this.changeEvent=new Me,this.openEvent=new Me,this.closeEvent=new Me,this.searchEvent=new Me,this.clearEvent=new Me,this.addEvent=new Me,this.removeEvent=new Me,this.scroll=new Me,this.scrollToEnd=new Me,this.useDefaultClass=!0,this.viewPortItems=[],this.searchTerm=null,this.dropdownId=BA(),this.escapeHTML=!0,this._items=[],this._defaultLabel="label",this._pressedKeys=[],this._isComposing=!1,this._destroy$=new Ht,this._keyPress$=new Ht,this._onChange=C=>{},this._onTouched=()=>{},this.clearItem=C=>{const T=this.selectedItems.find(P=>P.value===C);this.unselect(T)},this.trackByOption=(C,T)=>this.trackByFn?this.trackByFn(T.value):T,this._mergeGlobalConfig(o),this.itemsList=new L9(this,s()),this.element=d.nativeElement}get items(){return this._items}set items(e){null===e&&(e=[]),this._itemsAreUsed=!0,this._items=e}get compareWith(){return this._compareWith}set compareWith(e){if(null!=e&&!xv(e))throw Error("`compareWith` must be a function.");this._compareWith=e}get clearSearchOnAdd(){return yo(this._clearSearchOnAdd)?this._clearSearchOnAdd:yo(this.config.clearSearchOnAdd)?this.config.clearSearchOnAdd:this.closeOnSelect}set clearSearchOnAdd(e){this._clearSearchOnAdd=e}get disabled(){return this.readonly||this._disabled}get filtered(){return!!this.searchTerm&&this.searchable||this._isComposing}get single(){return!this.multiple}get _editableSearchTerm(){return this.editableSearchTerm&&!this.multiple}get selectedItems(){return this.itemsList.selectedItems}get selectedValues(){return this.selectedItems.map(e=>e.value)}get hasValue(){return this.selectedItems.length>0}get currentPanelPosition(){if(this.dropdownPanel)return this.dropdownPanel.currentPosition}ngOnInit(){this._handleKeyPresses(),this._setInputAttributes()}ngOnChanges(e){e.multiple&&this.itemsList.clearSelected(),e.items&&this._setItems(e.items.currentValue||[]),e.isOpen&&(this._manualOpen=yo(e.isOpen.currentValue))}ngAfterViewInit(){this._itemsAreUsed||(this.escapeHTML=!1,this._setItemsFromNgOptions()),yo(this.autoFocus)&&this.focus()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}handleKeyDown(e){if(El[e.which]){if(!1===this.keyDownFn(e))return;this.handleKeyCode(e)}else e.key&&1===e.key.length&&this._keyPress$.next(e.key.toLocaleLowerCase())}handleKeyCode(e){switch(e.which){case El.ArrowDown:this._handleArrowDown(e);break;case El.ArrowUp:this._handleArrowUp(e);break;case El.Space:this._handleSpace(e);break;case El.Enter:this._handleEnter(e);break;case El.Tab:this._handleTab(e);break;case El.Esc:this.close(),e.preventDefault();break;case El.Backspace:this._handleBackspace()}}handleMousedown(e){const i=e.target;"INPUT"!==i.tagName&&e.preventDefault(),i.classList.contains("ng-clear-wrapper")?this.handleClearClick():i.classList.contains("ng-arrow-wrapper")?this.handleArrowClick():i.classList.contains("ng-value-icon")||(this.focused||this.focus(),this.searchable?this.open():this.toggle())}handleArrowClick(){this.isOpen?this.close():this.open()}handleClearClick(){this.hasValue&&(this.itemsList.clearSelected(!0),this._updateNgModel()),this._clearSearch(),this.focus(),this.clearEvent.emit(),this._onSelectionChanged()}clearModel(){this.clearable&&(this.itemsList.clearSelected(),this._updateNgModel())}writeValue(e){this.itemsList.clearSelected(),this._handleWriteValue(e),this._cd.markForCheck()}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._disabled=e,this._cd.markForCheck()}toggle(){this.isOpen?this.close():this.open()}open(){this.disabled||this.isOpen||this._manualOpen||!this._isTypeahead&&!this.addTag&&this.itemsList.noItemsToSelect||(this.isOpen=!0,this.itemsList.markSelectedOrDefault(this.markFirst),this.openEvent.emit(),this.searchTerm||this.focus(),this.detectChanges())}close(){!this.isOpen||this._manualOpen||(this.isOpen=!1,this._isComposing=!1,this._editableSearchTerm?this.itemsList.resetFilteredItems():this._clearSearch(),this.itemsList.unmarkItem(),this._onTouched(),this.closeEvent.emit(),this._cd.markForCheck())}toggleItem(e){!e||e.disabled||this.disabled||(this.multiple&&e.selected?this.unselect(e):this.select(e),this._editableSearchTerm&&this._setSearchTermFromItems(),this._onSelectionChanged())}select(e){e.selected||(this.itemsList.select(e),this.clearSearchOnAdd&&!this._editableSearchTerm&&this._clearSearch(),this._updateNgModel(),this.multiple&&this.addEvent.emit(e.value)),(this.closeOnSelect||this.itemsList.noItemsToSelect)&&this.close()}focus(){this.searchInput.nativeElement.readOnly||this.searchInput.nativeElement.focus()}blur(){this.searchInput.nativeElement.blur()}unselect(e){e&&(this.itemsList.unselect(e),this.focus(),this._updateNgModel(),this.removeEvent.emit(e))}selectTag(){let e;e=xv(this.addTag)?this.addTag(this.searchTerm):this._primitive?this.searchTerm:{[this.bindLabel]:this.searchTerm};const i=o=>this._isTypeahead||!this.isOpen?this.itemsList.mapItem(o,null):this.itemsList.addItem(o);!function C9(t){return t instanceof Promise}(e)?e&&this.select(i(e)):e.then(o=>this.select(i(o))).catch(()=>{})}showClear(){return this.clearable&&(this.hasValue||this.searchTerm)&&!this.disabled}get showAddTag(){if(!this._validTerm)return!1;const e=this.searchTerm.toLowerCase().trim();return this.addTag&&!this.itemsList.filteredItems.some(i=>i.label.toLowerCase()===e)&&(!this.hideSelected&&this.isOpen||!this.selectedItems.some(i=>i.label.toLowerCase()===e))&&!this.loading}showNoItemsFound(){const e=0===this.itemsList.filteredItems.length;return(e&&!this._isTypeahead&&!this.loading||e&&this._isTypeahead&&this._validTerm&&!this.loading)&&!this.showAddTag}showTypeToSearch(){return 0===this.itemsList.filteredItems.length&&this._isTypeahead&&!this._validTerm&&!this.loading}onCompositionStart(){this._isComposing=!0}onCompositionEnd(e){this._isComposing=!1,!this.searchWhileComposing&&this.filter(e)}filter(e){this._isComposing&&!this.searchWhileComposing||(this.searchTerm=e,this._isTypeahead&&(this._validTerm||0===this.minTermLength)&&this.typeahead.next(e),this._isTypeahead||(this.itemsList.filter(this.searchTerm),this.isOpen&&this.itemsList.markSelectedOrDefault(this.markFirst)),this.searchEvent.emit({term:e,items:this.itemsList.filteredItems.map(i=>i.value)}),this.open())}onInputFocus(e){this.focused||(this._editableSearchTerm&&this._setSearchTermFromItems(),this.element.classList.add("ng-select-focused"),this.focusEvent.emit(e),this.focused=!0)}onInputBlur(e){this.element.classList.remove("ng-select-focused"),this.blurEvent.emit(e),!this.isOpen&&!this.disabled&&this._onTouched(),this._editableSearchTerm&&this._setSearchTermFromItems(),this.focused=!1}onItemHover(e){e.disabled||this.itemsList.markItem(e)}detectChanges(){this._cd.destroyed||this._cd.detectChanges()}_setSearchTermFromItems(){const e=this.selectedItems&&this.selectedItems[0];this.searchTerm=e&&e.label||null}_setItems(e){const i=e[0];this.bindLabel=this.bindLabel||this._defaultLabel,this._primitive=yo(i)?!sb(i):this._primitive||this.bindLabel===this._defaultLabel,this.itemsList.setItems(e),e.length>0&&this.hasValue&&this.itemsList.mapSelectedItems(),this.isOpen&&yo(this.searchTerm)&&!this._isTypeahead&&this.itemsList.filter(this.searchTerm),(this._isTypeahead||this.isOpen)&&this.itemsList.markSelectedOrDefault(this.markFirst)}_setItemsFromNgOptions(){const e=o=>{this.items=o.map(s=>({$ngOptionValue:s.value,$ngOptionLabel:s.elementRef.nativeElement.innerHTML,disabled:s.disabled})),this.itemsList.setItems(this.items),this.hasValue&&this.itemsList.mapSelectedItems(),this.detectChanges()},i=()=>{const o=Qr(this.ngOptions.changes,this._destroy$);Qr(...this.ngOptions.map(s=>s.stateChange$)).pipe(bi(o)).subscribe(s=>{const d=this.itemsList.findItem(s.value);d.disabled=s.disabled,d.label=s.label||d.label,this._cd.detectChanges()})};this.ngOptions.changes.pipe(mf(this.ngOptions),bi(this._destroy$)).subscribe(o=>{this.bindLabel=this._defaultLabel,e(o),i()})}_isValidWriteValue(e){if(!yo(e)||this.multiple&&""===e||Array.isArray(e)&&0===e.length)return!1;const i=o=>!(!yo(this.compareWith)&&sb(o)&&this.bindValue&&(this._console.warn(`Setting object(${JSON.stringify(o)}) as your model with bindValue is not allowed unless [compareWith] is used.`),1));return this.multiple?Array.isArray(e)?e.every(o=>i(o)):(this._console.warn("Multiple select ngModel should be array."),!1):i(e)}_handleWriteValue(e){if(!this._isValidWriteValue(e))return;const i=o=>{let s=this.itemsList.findItem(o);if(s)this.itemsList.select(s);else{const d=sb(o);d||!d&&!this.bindValue?this.itemsList.select(this.itemsList.mapItem(o,null)):this.bindValue&&(s={[this.bindLabel]:null,[this.bindValue]:o},this.itemsList.select(this.itemsList.mapItem(s,null)))}};this.multiple?e.forEach(o=>i(o)):i(e)}_handleKeyPresses(){this.searchable||this._keyPress$.pipe(bi(this._destroy$),Ro(e=>this._pressedKeys.push(e)),PA(200),uo(()=>this._pressedKeys.length>0),ke(()=>this._pressedKeys.join(""))).subscribe(e=>{const i=this.itemsList.findByLabel(e);i&&(this.isOpen?(this.itemsList.markItem(i),this._scrollToMarked(),this._cd.markForCheck()):this.select(i)),this._pressedKeys=[]})}_setInputAttributes(){const e=this.searchInput.nativeElement,i={type:"text",autocorrect:"off",autocapitalize:"off",autocomplete:this.labelForId?"off":this.dropdownId,...this.inputAttrs};for(const o of Object.keys(i))e.setAttribute(o,i[o])}_updateNgModel(){const e=[];for(const o of this.selectedItems)if(this.bindValue){let s=null;s=o.children?o.value[(this.groupValue?this.bindValue:this.groupBy)||this.groupBy]:this.itemsList.resolveNested(o.value,this.bindValue),e.push(s)}else e.push(o.value);const i=this.selectedItems.map(o=>o.value);this.multiple?(this._onChange(e),this.changeEvent.emit(i)):(this._onChange(yo(e[0])?e[0]:null),this.changeEvent.emit(i[0])),this._cd.markForCheck()}_clearSearch(){this.searchTerm&&(this._changeSearch(null),this.itemsList.resetFilteredItems())}_changeSearch(e){this.searchTerm=e,this._isTypeahead&&this.typeahead.next(e)}_scrollToMarked(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollTo(this.itemsList.markedItem)}_scrollToTag(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollToTag()}_onSelectionChanged(){this.isOpen&&this.multiple&&this.appendTo&&(this._cd.detectChanges(),this.dropdownPanel.adjustPosition())}_handleTab(e){!1===this.isOpen&&!this.addTag||(this.selectOnTab?this.itemsList.markedItem?(this.toggleItem(this.itemsList.markedItem),e.preventDefault()):this.showAddTag?(this.selectTag(),e.preventDefault()):this.close():this.close())}_handleEnter(e){if(this.isOpen||this._manualOpen)this.itemsList.markedItem?this.toggleItem(this.itemsList.markedItem):this.showAddTag&&this.selectTag();else{if(!this.openOnEnter)return;this.open()}e.preventDefault()}_handleSpace(e){this.isOpen||this._manualOpen||(this.open(),e.preventDefault())}_handleArrowDown(e){this._nextItemIsTag(1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markNextItem(),this._scrollToMarked()),this.open(),e.preventDefault()}_handleArrowUp(e){this.isOpen&&(this._nextItemIsTag(-1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markPreviousItem(),this._scrollToMarked()),e.preventDefault())}_nextItemIsTag(e){const i=this.itemsList.markedIndex+e;return this.addTag&&this.searchTerm&&this.itemsList.markedItem&&(i<0||i===this.itemsList.filteredItems.length)}_handleBackspace(){this.searchTerm||!this.clearable||!this.clearOnBackspace||!this.hasValue||(this.multiple?this.unselect(this.itemsList.lastSelectedItem):this.clearModel())}get _isTypeahead(){return this.typeahead&&this.typeahead.observers.length>0}get _validTerm(){const e=this.searchTerm&&this.searchTerm.trim();return e&&e.length>=this.minTermLength}_mergeGlobalConfig(e){this.placeholder=this.placeholder||e.placeholder,this.notFoundText=this.notFoundText||e.notFoundText,this.typeToSearchText=this.typeToSearchText||e.typeToSearchText,this.addTagText=this.addTagText||e.addTagText,this.loadingText=this.loadingText||e.loadingText,this.clearAllText=this.clearAllText||e.clearAllText,this.virtualScroll=yo(this.virtualScroll)?this.virtualScroll:!!yo(e.disableVirtualScroll)&&!e.disableVirtualScroll,this.openOnEnter=yo(this.openOnEnter)?this.openOnEnter:e.openOnEnter,this.appendTo=this.appendTo||e.appendTo,this.bindValue=this.bindValue||e.bindValue,this.bindLabel=this.bindLabel||e.bindLabel,this.appearance=this.appearance||e.appearance}}return t.\u0275fac=function(e){return new(e||t)(Cs("class"),Cs("autofocus"),J(V9),J(HA),J(qt),J(ko),J(U9))},t.\u0275cmp=Wt({type:t,selectors:[["ng-select"]],contentQueries:function(e,i,o){if(1&e&&(Sn(o,E9,5,Zt),Sn(o,S9,5,Zt),Sn(o,T9,5,Zt),Sn(o,I9,5,Zt),Sn(o,M9,5,Zt),Sn(o,k9,5,Zt),Sn(o,A9,5,Zt),Sn(o,O9,5,Zt),Sn(o,P9,5,Zt),Sn(o,R9,5,Zt),Sn(o,N9,5,Zt),Sn(o,z9,5)),2&e){let s;Et(s=St())&&(i.optionTemplate=s.first),Et(s=St())&&(i.optgroupTemplate=s.first),Et(s=St())&&(i.labelTemplate=s.first),Et(s=St())&&(i.multiLabelTemplate=s.first),Et(s=St())&&(i.headerTemplate=s.first),Et(s=St())&&(i.footerTemplate=s.first),Et(s=St())&&(i.notFoundTemplate=s.first),Et(s=St())&&(i.typeToSearchTemplate=s.first),Et(s=St())&&(i.loadingTextTemplate=s.first),Et(s=St())&&(i.tagTemplate=s.first),Et(s=St())&&(i.loadingSpinnerTemplate=s.first),Et(s=St())&&(i.ngOptions=s)}},viewQuery:function(e,i){if(1&e&&(gi(UA,5),gi($$,7)),2&e){let o;Et(o=St())&&(i.dropdownPanel=o.first),Et(o=St())&&(i.searchInput=o.first)}},hostVars:20,hostBindings:function(e,i){1&e&&Xe("keydown",function(s){return i.handleKeyDown(s)}),2&e&&ut("ng-select-typeahead",i.typeahead)("ng-select-multiple",i.multiple)("ng-select-taggable",i.addTag)("ng-select-searchable",i.searchable)("ng-select-clearable",i.clearable)("ng-select-opened",i.isOpen)("ng-select",i.useDefaultClass)("ng-select-disabled",i.disabled)("ng-select-filtered",i.filtered)("ng-select-single",i.single)},inputs:{bindLabel:"bindLabel",bindValue:"bindValue",markFirst:"markFirst",placeholder:"placeholder",notFoundText:"notFoundText",typeToSearchText:"typeToSearchText",addTagText:"addTagText",loadingText:"loadingText",clearAllText:"clearAllText",appearance:"appearance",dropdownPosition:"dropdownPosition",appendTo:"appendTo",loading:"loading",closeOnSelect:"closeOnSelect",hideSelected:"hideSelected",selectOnTab:"selectOnTab",openOnEnter:"openOnEnter",maxSelectedItems:"maxSelectedItems",groupBy:"groupBy",groupValue:"groupValue",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",selectableGroup:"selectableGroup",selectableGroupAsModel:"selectableGroupAsModel",searchFn:"searchFn",trackByFn:"trackByFn",clearOnBackspace:"clearOnBackspace",labelForId:"labelForId",inputAttrs:"inputAttrs",tabIndex:"tabIndex",readonly:"readonly",searchWhileComposing:"searchWhileComposing",minTermLength:"minTermLength",editableSearchTerm:"editableSearchTerm",keyDownFn:"keyDownFn",typeahead:"typeahead",multiple:"multiple",addTag:"addTag",searchable:"searchable",clearable:"clearable",isOpen:"isOpen",items:"items",compareWith:"compareWith",clearSearchOnAdd:"clearSearchOnAdd"},outputs:{blurEvent:"blur",focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear",addEvent:"add",removeEvent:"remove",scroll:"scroll",scrollToEnd:"scrollToEnd"},features:[jn([{provide:$o,useExisting:Nt(()=>t),multi:!0},zA]),Mn],decls:14,vars:19,consts:[[1,"ng-select-container",3,"mousedown"],[1,"ng-value-container"],[1,"ng-placeholder"],[4,"ngIf"],["role","combobox","aria-haspopup","listbox",1,"ng-input"],["aria-autocomplete","list",3,"readOnly","disabled","value","input","compositionstart","compositionend","focus","blur","change"],["searchInput",""],["class","ng-clear-wrapper",3,"title",4,"ngIf"],[1,"ng-arrow-wrapper"],[1,"ng-arrow"],["class","ng-dropdown-panel","role","listbox","aria-label","Options list",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ng-select-multiple","ngClass","id","update","scroll","scrollToEnd","outsideClick",4,"ngIf"],["class","ng-value",3,"ng-value-disabled",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ng-value"],["defaultLabelTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label",3,"ngItemLabel","escape"],["defaultLoadingSpinnerTemplate",""],[3,"ngTemplateOutlet"],[1,"ng-spinner-loader"],[1,"ng-clear-wrapper",3,"title"],["aria-hidden","true",1,"ng-clear"],["role","listbox","aria-label","Options list",1,"ng-dropdown-panel",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ngClass","id","update","scroll","scrollToEnd","outsideClick"],["class","ng-option",3,"ng-option-disabled","ng-option-selected","ng-optgroup","ng-option","ng-option-child","ng-option-marked","click","mouseover",4,"ngFor","ngForOf","ngForTrackBy"],["class","ng-option","role","option",3,"ng-option-marked","mouseover","click",4,"ngIf"],[1,"ng-option",3,"click","mouseover"],["defaultOptionTemplate",""],[1,"ng-option-label",3,"ngItemLabel","escape"],["role","option",1,"ng-option",3,"mouseover","click"],["defaultTagTemplate",""],[1,"ng-tag-label"],["defaultNotFoundTemplate",""],[1,"ng-option","ng-option-disabled"],["defaultTypeToSearchTemplate",""],["defaultLoadingTextTemplate",""]],template:function(e,i){if(1&e){const o=Xn();W(0,"div",0),Xe("mousedown",function(d){return i.handleMousedown(d)}),W(1,"div",1)(2,"div",2),ge(3),Y(),Ee(4,K$,2,2,"ng-container",3),Ee(5,X$,1,5,null,3),W(6,"div",4)(7,"input",5,6),Xe("input",function(){D(o);const d=Vi(8);return S(i.filter(d.value))})("compositionstart",function(){return i.onCompositionStart()})("compositionend",function(){D(o);const d=Vi(8);return S(i.onCompositionEnd(d.value))})("focus",function(d){return i.onInputFocus(d)})("blur",function(d){return i.onInputBlur(d)})("change",function(d){return d.stopPropagation()}),Y()()(),Ee(9,t9,4,1,"ng-container",3),Ee(10,n9,3,1,"span",7),W(11,"span",8),lt(12,"span",9),Y()(),Ee(13,v9,7,19,"ng-dropdown-panel",10)}2&e&&(ut("ng-appearance-outline","outline"===i.appearance)("ng-has-value",i.hasValue),ne(3),nn(i.placeholder),ne(1),me("ngIf",(!i.multiLabelTemplate||!i.multiple)&&i.selectedItems.length>0),ne(1),me("ngIf",i.multiple&&i.multiLabelTemplate&&i.selectedValues.length>0),ne(1),an("aria-expanded",i.isOpen)("aria-owns",i.isOpen?i.dropdownId:null),ne(1),me("readOnly",!i.searchable||i.itemsList.maxItemsSelected)("disabled",i.disabled)("value",i.searchTerm?i.searchTerm:""),an("id",i.labelForId)("tabindex",i.tabIndex)("aria-activedescendant",i.isOpen?null==i.itemsList||null==i.itemsList.markedItem?null:i.itemsList.markedItem.htmlId:null)("aria-controls",i.isOpen?i.dropdownId:null),ne(2),me("ngIf",i.loading),ne(1),me("ngIf",i.showClear()),ne(3),me("ngIf",i.isOpen))},dependencies:[qd,Mr,Pi,Qs,UA,D9],styles:['@charset "UTF-8";.ng-select{position:relative;display:block;box-sizing:border-box}.ng-select div,.ng-select input,.ng-select span{box-sizing:border-box}.ng-select [hidden]{display:none}.ng-select.ng-select-searchable .ng-select-container .ng-value-container .ng-input{opacity:1}.ng-select.ng-select-opened .ng-select-container{z-index:1001}.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-placeholder,.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-value{-webkit-user-select:none;user-select:none;cursor:default}.ng-select.ng-select-disabled .ng-arrow-wrapper{cursor:default}.ng-select.ng-select-filtered .ng-placeholder{display:none}.ng-select .ng-select-container{cursor:default;display:flex;outline:none;overflow:hidden;position:relative;width:100%}.ng-select .ng-select-container .ng-value-container{display:flex;flex:1}.ng-select .ng-select-container .ng-value-container .ng-input{opacity:0}.ng-select .ng-select-container .ng-value-container .ng-input>input{box-sizing:content-box;background:none transparent;border:0 none;box-shadow:none;outline:none;padding:0;cursor:default;width:100%}.ng-select .ng-select-container .ng-value-container .ng-input>input::-ms-clear{display:none}.ng-select .ng-select-container .ng-value-container .ng-input>input[readonly]{-webkit-user-select:none;user-select:none;width:0;padding:0}.ng-select.ng-select-single.ng-select-filtered .ng-select-container .ng-value-container .ng-value{visibility:hidden}.ng-select.ng-select-single .ng-select-container .ng-value-container,.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{position:absolute;left:0;width:100%}.ng-select.ng-select-multiple.ng-select-disabled>.ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container{flex-wrap:wrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{position:absolute}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{white-space:nowrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value.ng-value-disabled .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon{cursor:pointer}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-input{flex:1;z-index:2}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{z-index:1}.ng-select .ng-clear-wrapper{cursor:pointer;position:relative;width:17px;-webkit-user-select:none;user-select:none}.ng-select .ng-clear-wrapper .ng-clear{display:inline-block;font-size:18px;line-height:1;pointer-events:none}.ng-select .ng-spinner-loader{border-radius:50%;width:17px;height:17px;margin-right:5px;font-size:10px;position:relative;text-indent:-9999em;border-top:2px solid rgba(66,66,66,.2);border-right:2px solid rgba(66,66,66,.2);border-bottom:2px solid rgba(66,66,66,.2);border-left:2px solid #424242;transform:translateZ(0);animation:load8 .8s infinite linear}.ng-select .ng-spinner-loader:after{border-radius:50%;width:17px;height:17px}@keyframes load8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.ng-select .ng-arrow-wrapper{cursor:pointer;position:relative;text-align:center;-webkit-user-select:none;user-select:none}.ng-select .ng-arrow-wrapper .ng-arrow{pointer-events:none;display:inline-block;height:0;width:0;position:relative}.ng-dropdown-panel{box-sizing:border-box;position:absolute;opacity:0;width:100%;z-index:1050;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .ng-dropdown-panel-items{display:block;height:auto;box-sizing:border-box;max-height:240px;overflow-y:auto}.ng-dropdown-panel .ng-dropdown-panel-items .ng-optgroup{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{box-sizing:border-box;cursor:pointer;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .ng-option-label:empty:before{content:"\\200b"}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .highlighted{font-weight:700;text-decoration:underline}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option.disabled{cursor:default}.ng-dropdown-panel .scroll-host{overflow:hidden;overflow-y:auto;position:relative;display:block;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .scrollable-content{top:0;left:0;width:100%;height:100%;position:absolute}.ng-dropdown-panel .total-padding{width:1px;opacity:0}\n'],encapsulation:2,changeDetection:0}),t})();function j9(){return new $9}class $9{constructor(){this._selected=[]}get value(){return this._selected}select(n,e,i){if(n.selected=!0,(!n.children||!e&&i)&&this._selected.push(n),e)if(n.parent){const o=n.parent.children.length,s=n.parent.children.filter(d=>d.selected).length;n.parent.selected=o===s}else n.children&&(this._setChildrenSelectedState(n.children,!0),this._removeChildren(n),this._selected=i&&this._activeChildren(n)?[...this._selected.filter(o=>o.parent!==n),n]:[...this._selected,...n.children.filter(o=>!o.disabled)])}unselect(n,e){if(this._selected=this._selected.filter(i=>i!==n),n.selected=!1,e)if(n.parent&&n.parent.selected){const i=n.parent.children;this._removeParent(n.parent),this._removeChildren(n.parent),this._selected.push(...i.filter(o=>o!==n&&!o.disabled)),n.parent.selected=!1}else n.children&&(this._setChildrenSelectedState(n.children,!1),this._removeChildren(n))}clear(n){this._selected=n?this._selected.filter(e=>e.disabled):[]}_setChildrenSelectedState(n,e){for(const i of n)i.disabled||(i.selected=e)}_removeChildren(n){this._selected=[...this._selected.filter(e=>e.parent!==n),...n.children.filter(e=>e.parent===n&&e.disabled&&e.selected)]}_removeParent(n){this._selected=this._selected.filter(e=>e!==n)}_activeChildren(n){return n.children.every(e=>!e.disabled||e.selected)}}let G9=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({providers:[{provide:HA,useValue:j9}],imports:[Ut]}),t})();function W9(t,n){1&t&&(W(0,"button",15),ge(1,"Start"),Y())}function q9(t,n){if(1&t&&(W(0,"button",16),ge(1),Y()),2&t){const e=Fe();ne(1),Rn("Started (",e.completedJourneysCount,")")}}function Z9(t,n){1&t&&(Zs(0),W(1,"span",21),ge(2,"."),Y(),W(3,"span",21),ge(4,"."),Y(),W(5,"span",21),ge(6,"."),Y(),W(7,"span",21),ge(8,"."),Y(),W(9,"span",21),ge(10,"."),Y(),W(11,"span",21),ge(12,"."),Y(),lt(13,"i",22),Ks())}function K9(t,n){if(1&t){const e=Xn();W(0,"button",23),Xe("click",function(){D(e);const o=Fe().$implicit;return S(Fe().startReturn(null==o.trip?null:o.trip.id))}),ge(1,"Return"),Y()}}function Y9(t,n){1&t&&(W(0,"button"),ge(1,"Complete"),Y())}function Q9(t,n){if(1&t&&(W(0,"button",24),ge(1),Y()),2&t){const e=Fe().$implicit;ne(1),Rn("Completed ",e.formattedTime,"")}}const X9=function(t){return{"in-progress":t}};function J9(t,n){if(1&t&&(W(0,"div",12)(1,"div",13),ge(2),Y(),W(3,"div",13)(4,"b"),ge(5),Y()(),W(6,"div",13)(7,"b"),ge(8),Y()(),W(9,"div",17),ge(10),Ee(11,Z9,14,0,"ng-container",18),Y(),W(12,"div",13),ge(13),Y(),W(14,"div",13),Ee(15,K9,2,0,"button",19),Ee(16,Y9,2,0,"button",18),Ee(17,Q9,2,1,"button",20),Y()()),2&t){const e=n.$implicit,i=Fe();ne(2),Rn(" ",null==e.trip?null:e.trip.departure,""),ne(3),nn(null==e.departureStation?null:e.departureStation.name),ne(3),nn(null==e.returnStation?null:e.returnStation.name),ne(1),me("ngClass",Ts(10,X9,!e.completed)),ne(1),Rn(" ",e.completed?null==e.trip?null:e.trip.return:"On Journey"," "),ne(1),me("ngIf",!e.completed),ne(2),Rn(" ",e.completed?e.lengthInKiloMeters:"",""),ne(2),me("ngIf",!e.completed),ne(1),me("ngIf",!e.completed&&null!==e.returnStationId&&e.users.Id===i.currentUserId),ne(1),me("ngIf",e.completed)}}const eG=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:V6,data:{title:"User Login"}},{path:"signup",component:q6,data:{title:"User SignUp"}},{path:"dashboard",component:k6,canActivate:[kh],data:{title:"User Dashboard"}},{path:"",redirectTo:"login",pathMatch:"full",data:{title:"User Login"}},{path:"report/:id",component:aU,canActivate:[kh],data:{title:"Single view and Location on the map"}},{path:"station-list",component:L6,canActivate:[kh],data:{title:"Bike station list"}},{path:"creat-station",component:OA,canActivate:[kh],data:{title:"Create new station"}},{path:"update-station/:id",component:OA,canActivate:[kh],data:{title:"Update existing Station Details"}},{path:"import",component:T$,canActivate:[kh],data:{title:"Import station or Journey"}},{path:"journey",component:(()=>{class t{constructor(e,i,o,s,d){this.fb=e,this.api=i,this.toast=o,this.auth=s,this.router=d,this.journeys=[],this.limit=50,this.page=0,this.orderBy="name",this.search="",this.currentUserId=Number(this.auth.getUserId()),this.departureStationOptions=[],this.formattedTime="",this.started=!1,this.timeFormat="00:00:00",this.selectedStation={id:0,nimi:"",namn:"",name:"",osoite:"",address:"",kaupunki:"",stad:"",operaattor:"",kapasiteet:"",message:()=>{}},this.form=this.fb.group({departureStationId:["",Go.required]});const f=localStorage.getItem("elapsedSeconds");f&&(this.timeFormat=this.formatTime(Number(f)))}ngOnInit(){this.onStatus(),this.api.listStations(this.limit,this.page,this.orderBy,this.search).subscribe(e=>{this.stations=e,this.listStations=e,this.departureStationOptions=e,this.departureStationOptions=e.map(i=>({id:i.id,name:i.name}))})}startReturn(e){const o=this.form.get("departureStationId")?.value.id,s=new Date;window.confirm("Are you sure you want to return the station?")?o?this.api.returnJourney(o,s,e).subscribe({next:d=>{this.toast.success({detail:"SUCCESS",summary:"Success",duration:5e3}),this.form.reset(),this.stopTimer(),this.onStatus()},error:d=>{if(console.log("Error: ",d),400===d.status){let f="";d.error&&d.error.errors&&"object"==typeof d.error.errors?Object.keys(d.error.errors).forEach(_=>{f+=`${_}: ${d.error.errors[_]}<br>`}):f="Validation error",this.toast.error({detail:f,summary:"Validation Error",duration:5e3})}else this.toast.error({detail:"Error occurred while returning journey. Please try again later.",summary:"Error",duration:5e3})}}):this.toast.error({detail:" Please search your return location and try again.",summary:"Error",duration:5e3}):this.toast.error({detail:"Operation cancelled by customer!.",summary:"Error",duration:5e3})}onSubmit(){const e=this.form.get("departureStationId")?.value;e.id?this.api.startJourney(e.id,new Date,this.currentUserId).subscribe({next:s=>{console.log(s),this.toast.success({detail:"SUCCESS",summary:"Success",duration:5e3}),this.form.reset(),this.startTimer(),this.onStatus(),this.form.patchValue({departureStationId:""})},error:s=>{if(console.log("Error: ",s),400===s.status){let d="";s.error&&s.error.errors&&"object"==typeof s.error.errors?Object.keys(s.error.errors).forEach(f=>{d+=`${f}: ${s.error.errors[f]}<br>`}):d="Validation error",this.toast.error({detail:d,summary:"Validation Error",duration:5e3})}else this.toast.error({detail:"Something went wrong",summary:"Error",duration:5e3})}}):this.toast.error({detail:"Please search your location.",summary:"Error",duration:5e3})}onSelectStation(e){const i=e.target;if(!i||!i.value)return;const s=+i.value;this.stations.find(f=>f.id==s)}onStatus(){this.api.getJourneysByLoginId(this.currentUserId).subscribe({next:e=>{const i=e.map(d=>{const f={id:d.departureStationId||0,nimi:d.departureStation?d.departureStation.nimi:"",namn:d.departureStation?d.departureStation.namn:"",name:d.departureStation?d.departureStation.name:"",osoite:"",address:d.departureStation?d.departureStation.address:"",kaupunki:"",stad:"",operaattor:"",kapasiteet:"",message:()=>{}},_={id:d.returnStationId||0,nimi:d.returnStation?d.returnStation.nimi:"",namn:d.returnStation?d.returnStation.namn:"",name:d.returnStation?d.returnStation.name:"",osoite:"",address:d.returnStation?d.returnStation.address:"",kaupunki:"",stad:"",operaattor:"",kapasiteet:"",message:()=>{}},C={id:d.users?.id||0,firstname:d.users?d.users.firstname:"",lastname:d.users?d.users.lastname:"",username:d.users?d.users.username:"",email:d.users?d.users.email:""},T={id:d.id||0,departureStationId:d.departureStationId||0,returnStationId:d.returnStationId||0,coveredDistanceInMeters:d.coveredDistanceInMeters||0,durationInSeconds:d.durationInSeconds||0,departure:d.departure||null,return:d.return||null,users:d.users||null},P=new Date(1e3*d.durationInSeconds).toLocaleTimeString("en-US",{hour12:!1}),z=d.coveredDistanceInMeters>1e3?`${(d.coveredDistanceInMeters/1e3).toFixed(2)} KM`:`${d.coveredDistanceInMeters.toFixed(2)} M`;return{departureStation:f,returnStation:_,users:C,completed:null!==d.returnStationId&&null!==d.return&&0!==d.returnStationId,trip:T,formattedTime:P,lengthInKiloMeters:z}});i.sort((d,f)=>f.trip?.id-d.trip?.id);const o=i.slice(0,5);this.journeys=o;const s=i.reduce((d,f)=>f.completed?d:d+1,0);this.completedJourneysCount=s,s>0&&(this.pouseTimer(),this.startTimer())},error:e=>{this.toast.error({detail:e.error,summary:"Error",duration:5e3})}})}startTimer(){this.started=!0;const e=Number(localStorage.getItem("lastStopTime"));this.startTime=e||(new Date).getTime();const i=Number(localStorage.getItem("elapsedSeconds"))||0;this.timeFormat=this.formatTime(i),setInterval(()=>{if(this.started){const o=(new Date).getTime(),s=Math.floor((o-this.startTime)/1e3)+i;this.timeFormat=this.formatTime(s)}},1e3)}stopTimer(){this.started=!1;const e=(new Date).getTime(),i=Math.floor((e-this.startTime)/1e3);localStorage.setItem("elapsedSeconds",i.toString()),localStorage.setItem("lastStopTime",e.toString()),localStorage.removeItem("elapsedSeconds"),localStorage.removeItem("lastStopTime")}pouseTimer(){this.started=!0;const e=(new Date).getTime(),i=Math.floor((e-this.startTime)/1e3);localStorage.setItem("elapsedSeconds",i.toString()),localStorage.setItem("lastStopTime",e.toString())}formatTime(e){const i=Math.floor(e/3600),o=Math.floor(e%3600/60),s=e%60;return`${this.padTime(i)}:${this.padTime(o)}:${this.padTime(s)}`}padTime(e){return e<10?`0${e}`:`${e}`}}return t.\u0275fac=function(e){return new(e||t)(J(T0),J(Ef),J(ru),J(ou),J(Xi))},t.\u0275cmp=Wt({type:t,selectors:[["app-journeys"]],decls:41,vars:7,consts:[[1,"session-container"],[1,"row"],[1,"col-6","cell1"],[3,"formGroup","ngSubmit"],[1,"form-group"],["formControlName","departureStationId","bindLabel","name","placeholder","Search station",1,"custom",3,"items","clearSearchOnAdd","change"],["type","submit","class","btn btn-primary","id","startButton",4,"ngIf","ngIfElse"],["startTimerButton",""],[1,"col-6","cell3"],[1,"timer"],[1,"row","cell2"],[1,"journey-list"],[1,"journey-item"],[1,"journey-id"],["class","journey-item",4,"ngFor","ngForOf"],["type","submit","id","startButton",1,"btn","btn-primary"],["type","submit","id","startButton","disabled","",1,"btn","btn-primary"],[1,"journey-id",3,"ngClass"],[4,"ngIf"],["class","btn btn-secondary",3,"click",4,"ngIf"],["disabled","",4,"ngIf"],[1,"dot-animation"],[1,"fas","fa-biking"],[1,"btn","btn-secondary",3,"click"],["disabled",""]],template:function(e,i){if(1&e&&(W(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),ge(4,"Journey Start"),Y(),W(5,"form",3),Xe("ngSubmit",function(){return i.onSubmit()}),W(6,"div",4)(7,"ng-select",5),Xe("change",function(s){return i.onSelectStation(s)}),Y()(),Ee(8,W9,2,0,"button",6),Ee(9,q9,2,1,"ng-template",null,7,Ki),Y()(),W(11,"div",8)(12,"h2"),ge(13,"Timer"),Y(),W(14,"div",9),ge(15),Y()()(),W(16,"div",10)(17,"h2"),ge(18,"Journey History"),Y(),W(19,"div",11)(20,"div",12)(21,"div",13)(22,"b"),ge(23,"Started Time"),Y(),ge(24," \xa0\xa0 "),Y(),W(25,"div",13)(26,"b"),ge(27,"Started Station"),Y()(),W(28,"div",13)(29,"b"),ge(30,"Retruned Time"),Y()(),W(31,"div",13)(32,"b"),ge(33,"Returned Station"),Y()(),W(34,"div",13)(35,"b"),ge(36,"Distance"),Y()(),W(37,"div",13)(38,"b"),ge(39,"Completed hours"),Y()()(),Ee(40,J9,18,12,"div",14),Y()()()),2&e){const o=Vi(10);ne(5),me("formGroup",i.form),ne(2),me("items",i.departureStationOptions)("clearSearchOnAdd",!0),ne(1),me("ngIf",0===i.completedJourneysCount)("ngIfElse",o),ne(7),nn(i.timeFormat),ne(25),me("ngForOf",i.journeys)}},dependencies:[qd,Mr,Pi,Dg,cf,_g,Eh,pf,H9],styles:[".session-container[_ngcontent-%COMP%]{position:relative;background-color:#f7f7f7;border-radius:5px;box-shadow:0 0 5px #0000001a;padding:20px;margin:20px auto;width:100%}.cell1[_ngcontent-%COMP%]{background-color:#fffc;border-radius:5px;padding:20px;box-shadow:0 0 5px #0000001a}.cell1[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}.cell1[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.cell1[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}.cell1[_ngcontent-%COMP%]   .custom[_ngcontent-%COMP%]{width:100%}.cell1[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:10px}.cell2[_ngcontent-%COMP%]{background-color:#fffc;border-radius:5px;padding:20px;box-shadow:0 0 5px #0000001a}.cell2[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.cell2[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]{width:100%}.cell2[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]:last-child{padding-left:2%}.cell2[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:10px}.cell2[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%}.cell2[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]{display:flex;background-color:#f7f7f7;font-weight:700}.cell2[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{padding:10px;text-align:left}.cell2[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #f7f7f7}.cell2[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.cell2[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{padding:10px;text-align:left;width:20%}.cell2[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]:last-child{width:40%}.cell2[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:0}.cell3[_ngcontent-%COMP%]{background-color:#fffc;border-radius:5px;padding:20px;box-shadow:0 0 5px #0000001a}.cell3[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}.timer[_ngcontent-%COMP%]{background-color:#f7f7f7;border-radius:5px;box-shadow:0 0 5px #0000001a;padding:20px;font-size:24px;text-align:center}.cell4[_ngcontent-%COMP%]{background-color:#fffc;border-radius:5px;padding:20px;box-shadow:0 0 5px #0000001a}.cell4[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}.cell1[_ngcontent-%COMP%], .cell2[_ngcontent-%COMP%], .cell3[_ngcontent-%COMP%], .cell4[_ngcontent-%COMP%]{background-color:#ffffffe6;border-radius:5px;box-shadow:0 0 #f7f5f5d5;padding:20px;margin-bottom:20px}.cell1[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .cell2[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .cell3[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .cell4[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{background-color:#555;color:#fff;padding:10px;margin-top:0;border-radius:5px 5px 0 0}.cell2[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .cell2[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]:last-child   button[_ngcontent-%COMP%]{margin-top:20px}@media (max-width: 767px){.session-container[_ngcontent-%COMP%], .cell1[_ngcontent-%COMP%], .cell2[_ngcontent-%COMP%], .cell3[_ngcontent-%COMP%], .cell4[_ngcontent-%COMP%]{padding:10px}.cell1[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .cell2[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .cell3[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .cell4[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;padding:5px}.cell2[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{flex-wrap:wrap}.cell2[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]{width:100%;padding-right:10;margin-bottom:30px}}"]}),t})(),canActivate:[kh],data:{title:"Customer Service"}}];let tG=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[Hg.forRoot(eG),Hg]}),t})();function nG(t,n){1&t&&(W(0,"li",3)(1,"a",15),lt(2,"i",16),ge(3," Login"),Y()())}function iG(t,n){if(1&t){const e=Xn();W(0,"li",3)(1,"a",17),Xe("click",function(){return D(e),S(Fe().logOut())}),lt(2,"i",18),ge(3," Logout"),Y()()}}function oG(t,n){1&t&&(W(0,"li",3)(1,"a",19),lt(2,"i",20),ge(3," Signup"),Y()())}function rG(t,n){1&t&&(W(0,"li",3)(1,"a",21),ge(2,"Profile"),Y()())}let sG=(()=>{class t{constructor(e){this.auth=e,this.sideNavToggled=new Me,this.menuStatus=!1}ngOnInit(){console.log("IsLoggedIn:",this.auth.isLoggedIn()),console.log("UserName:",this.auth.getUserName())}SideNavToggle(){this.menuStatus=!this.menuStatus,this.sideNavToggled.emit(this.menuStatus)}isLoggedIn(){return this.auth.isLoggedIn()}getUserName(){return this.auth.getUserName()}logOut(){this.auth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(J(ou))},t.\u0275cmp=Wt({type:t,selectors:[["app-header"]],outputs:{sideNavToggled:"sideNavToggled"},decls:21,vars:5,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],["href","#",1,"navbar-brand"],[1,"navbar-nav"],[1,"nav-item"],["data-widget","pushmenu",1,"nav-link",3,"click"],[1,"fa","fa-bars"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],["class","nav-item",4,"ngIf"],[1,"navbar-text"],[1,"dropdown"],["href","#","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle"],[1,"fa","fa-user"],["aria-labelledby","navbarDropdown",1,"dropdown-menu","dropdown-menu-right"],["href","#",1,"dropdown-item"],["routerLink","login",1,"nav-link"],[1,"fa","fa-lock"],["href","#",1,"nav-link",3,"click"],[1,"fa","fa-power-off"],["routerLink","signup",1,"nav-link"],[1,"fa","fa-user-plus"],["href","#",1,"nav-link"]],template:function(e,i){1&e&&(W(0,"nav",0)(1,"a",1),ge(2,"Slide side menu"),Y(),W(3,"ul",2)(4,"li",3)(5,"a",4),Xe("click",function(){return i.SideNavToggle()}),lt(6,"i",5),Y()()(),W(7,"div",6)(8,"ul",7),Ee(9,nG,4,0,"li",8),Ee(10,iG,4,0,"li",8),Ee(11,oG,4,0,"li",8),Ee(12,rG,3,0,"li",8),Y(),W(13,"span",9)(14,"div",10)(15,"a",11),lt(16,"i",12),ge(17),Y(),W(18,"div",13)(19,"a",14),ge(20,"Profile"),Y()()()()()()),2&e&&(ne(9),me("ngIf",!i.isLoggedIn()),ne(1),me("ngIf",i.isLoggedIn()),ne(1),me("ngIf",!i.isLoggedIn()),ne(1),me("ngIf",!i.isLoggedIn()),ne(5),Rn(" ",i.getUserName()," "))},dependencies:[Pi,Mh,Gw],styles:[".dropdown-menu[_ngcontent-%COMP%]   .logout-button[_ngcontent-%COMP%]{position:absolute;top:5px;right:15px}"]}),t})();function aG(t,n){if(1&t&&(W(0,"li",4),lt(1,"i"),W(2,"span")(3,"a",5),ge(4),Y()()()),2&t){const e=n.$implicit;ne(1),ml(e.icon),ne(2),Xm("routerLink",e.routerLink),ne(1),nn(e.name)}}function lG(t,n){if(1&t){const e=Xn();W(0,"li",4),lt(1,"i",6),W(2,"span")(3,"a",7),Xe("click",function(){return D(e),S(Fe().logOut())}),ge(4,"Logout"),Y()()()}}const cG=function(t){return{"nav-list-open":t}};let dG=(()=>{class t{constructor(e,i){this.router=e,this.auth=i,this.sideNavStatus=!1,this.list=[{number:"5",name:"login",icon:"fas fa-sign-in-alt",routerLink:"/login"},{number:"6",name:"signup",icon:"fas fa-user-plus",routerLink:"/signup"}],this.loggedInList=[{number:"1",name:"home",icon:"fas fa-tachometer-alt",routerLink:"/dashboard"},{number:"3",name:"Import",icon:"fa fa-upload",routerLink:"/import"},{number:"7",name:"Create",icon:"fas fa-add",routerLink:"creat-station"},{number:"2",name:"return",icon:"fas fa-bicycle",routerLink:"/journey"},{number:"8",name:"Map",icon:"fas fa-map-marker-alt",routerLink:"/station-list"}]}ngOnInit(){}navigateTo(e){this.router.navigate([e])}isLoggedIn(){return this.auth.isLoggedIn()}logOut(){this.auth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(J(Xi),J(ou))},t.\u0275cmp=Wt({type:t,selectors:[["app-side-nav"]],inputs:{sideNavStatus:"sideNavStatus"},decls:4,vars:5,consts:[[1,"side-nav-content"],[1,"nav-list",3,"ngClass"],["class","nav-list-item ",4,"ngFor","ngForOf"],["class","nav-list-item ",4,"ngIf"],[1,"nav-list-item"],[3,"routerLink"],[1,"fa","fa-power-off"],[3,"click"]],template:function(e,i){1&e&&(W(0,"div",0)(1,"ul",1),Ee(2,aG,5,5,"li",2),Ee(3,lG,5,0,"li",3),Y()()),2&e&&(ne(1),me("ngClass",Ts(3,cG,i.sideNavStatus)),ne(1),me("ngForOf",i.isLoggedIn()?i.loggedInList:i.list),ne(1),me("ngIf",i.isLoggedIn()))},dependencies:[qd,Mr,Pi,Mh],styles:[".side-nav-content[_ngcontent-%COMP%]{background-color:#222d32;color:#b8c7ce;width:230px;margin-top:10px;overflow:hidden;transition:width .3s ease-in-out}.side-nav-content[_ngcontent-%COMP%]   .nav-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.side-nav-content[_ngcontent-%COMP%]   .nav-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;height:50px;padding-left:20px;transition:background-color .3s ease-in-out}.side-nav-content[_ngcontent-%COMP%]   .nav-list-item[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;border-radius:10px}.side-nav-content[_ngcontent-%COMP%]   .nav-list-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;height:25px;width:25px;margin-right:15px;margin-left:10px;text-align:center;line-height:25px}.side-nav-content[_ngcontent-%COMP%]   .nav-list-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:170px;text-transform:capitalize;font-size:14px;font-weight:400;line-height:1.5}.side-nav-content[_ngcontent-%COMP%]   .nav-list-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#b8c7ce;transition:color .3s ease-in-out}.side-nav-content[_ngcontent-%COMP%]   .nav-list-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.side-nav-content[_ngcontent-%COMP%]   .nav-list-item.active[_ngcontent-%COMP%]{background-color:#ffffff4d;border-radius:10px}.side-nav-toggle[_ngcontent-%COMP%]{background-color:#222d32;color:#b8c7ce;height:50px;width:50px;text-align:center;line-height:50px;cursor:pointer;transition:transform .3s ease-in-out}.side-nav-toggle[_ngcontent-%COMP%]:hover{background-color:#1e282c}.side-nav-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.side-nav-open[_ngcontent-%COMP%]   .side-nav-content[_ngcontent-%COMP%]{width:230px}.side-nav-open[_ngcontent-%COMP%]   .side-nav-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:rotate(-180deg)}.main-content[_ngcontent-%COMP%]{margin-top:10px;margin-left:250px}"]}),t})();const uG=function(t){return{"app-side-nav-open":t}},hG=function(t){return{"display-area-shrink":t}};let pG=(()=>{class t{constructor(e,i){this.modalService=e,this.router=i,this.sideNavStatus=!1}ngOnInit(){this.router.events.pipe(uo(e=>e instanceof tu),ke(()=>this.router),ke(e=>{let i=e.routerState.root;for(;i.firstChild;)i=i.firstChild;return i}),uo(e=>"primary"===e.outlet),ht(e=>e.data)).subscribe(e=>this.pageTitle=e.title)}open(e){this.modalService.open(e)}}return t.\u0275fac=function(e){return new(e||t)(J(Ww),J(Xi))},t.\u0275cmp=Wt({type:t,selectors:[["app-root"]],decls:9,vars:8,consts:[[1,"container-fluid","g-0"],[3,"sideNavToggled"],[3,"sideNavStatus","ngClass"],[1,"display-area","p-3",3,"ngClass"]],template:function(e,i){1&e&&(W(0,"div",0)(1,"app-header",1),Xe("sideNavToggled",function(s){return i.sideNavStatus=s}),Y(),W(2,"main"),lt(3,"app-side-nav",2),W(4,"div",3)(5,"h2"),ge(6),Y(),lt(7,"router-outlet")(8,"lib-ng-toast"),Y()()()),2&e&&(ne(3),me("sideNavStatus",i.sideNavStatus)("ngClass",Ts(4,uG,i.sideNavStatus)),ne(1),me("ngClass",Ts(6,hG,i.sideNavStatus)),ne(2),nn(i.pageTitle))},dependencies:[qd,ow,P6,sG,dG],styles:[".app-header[_ngcontent-%COMP%]{position:fixed;width:100%;top:0;height:4rem;z-index:2;background-color:#3c8dbc;box-shadow:0 2px 4px #0000001a}.app-header[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#fff}.app-header[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.app-header[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{box-shadow:none;border:none;border-radius:0}.app-header[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333}.app-header[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:#fff}.app-header[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px;color:#fff}.app-header[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-divider[_ngcontent-%COMP%]{background-color:#f2f2f2}.app-header[_ngcontent-%COMP%]   .user-panel[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:relative;top:3px}.app-header[_ngcontent-%COMP%]   .user-panel[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-left:10px;color:#fff}.app-header[_ngcontent-%COMP%]   .user-panel[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:500;font-size:16px}.app-header[_ngcontent-%COMP%]   .user-panel[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:400;font-size:14px;color:#fff}.app-header[_ngcontent-%COMP%]   .user-panel[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#f4f4f4}.app-header[_ngcontent-%COMP%]   .user-panel[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px;color:#fff}.app-side-nav-open[_ngcontent-%COMP%]{width:250px}.app-side-nav[_ngcontent-%COMP%]   .nav-list[_ngcontent-%COMP%]{list-style:none;height:100%;padding:0%;margin-bottom:0%}.app-side-nav[_ngcontent-%COMP%]   .nav-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;height:50px}.app-side-nav[_ngcontent-%COMP%]   .nav-list-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;height:25px;width:25px;margin-right:15px;margin-left:10px;text-align:center;line-height:25px}.app-side-nav[_ngcontent-%COMP%]   .nav-list-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:170px;text-transform:capitalize}.app-side-nav[_ngcontent-%COMP%]   .nav-list-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff}.black-border[_ngcontent-%COMP%]{border-left:1px solid black;border-right:1px solid black;border-bottom:1px solid black}app-header[_ngcontent-%COMP%]{position:fixed;width:100%;top:0;height:4rem;z-index:2}main[_ngcontent-%COMP%]{position:absolute;width:100%;top:4rem;bottom:0;z-index:1;display:flex;flex-direction:column}app-side-nav[_ngcontent-%COMP%]{position:absolute;left:0;width:60px;min-width:60px;height:calc(100vh - 4rem);box-shadow:0 0 15px #00000080;background-color:#222d32;border-top:1px solid rgb(250,247,247);overflow:hidden;white-space:nowrap;transform:width .25s ease-in;transition:width .3s ease-in-out,min-width .3s ease-in-out;z-index:2}.app-side-nav-open[_ngcontent-%COMP%]{width:250px;min-width:250px}.display-area[_ngcontent-%COMP%]{position:absolute;inset:0 0 0 60px;overflow-y:auto}.display-area-shrink[_ngcontent-%COMP%]{left:250px}h2[_ngcontent-%COMP%]{background-color:#cac4c4;padding:10px;border-radius:6px;text-align:center;margin:.5rem;color:#222d32;width:50%;font-weight:600}@media (max-width: 767px){app-side-nav[_ngcontent-%COMP%]{width:0;min-width:0;overflow:hidden}.display-area[_ngcontent-%COMP%]{left:0;right:0;overflow-y:auto}}"]}),t})(),fG=(()=>{class t{constructor(e){this.auth=e}intercept(e,i){const o=this.auth.getToken();if(o){e=e.clone({setHeaders:{Authorization:`Bearer ${o}`}});const s=this.auth.getUserId();s&&this.auth.updateUserId(s)}return i.handle(e)}}return t.\u0275fac=function(e){return new(e||t)(Le(ou))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();function Cv(t){return"function"==typeof t}let Kw=!1;const Sl={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const n=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+n.stack)}else Kw&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Kw=t},get useDeprecatedSynchronousErrorHandling(){return Kw}};function ab(t){setTimeout(()=>{throw t},0)}const Dv={closed:!0,next(t){},error(t){if(Sl.useDeprecatedSynchronousErrorHandling)throw t;ab(t)},complete(){}},mG=Array.isArray||(t=>t&&"number"==typeof t.length),Ev=(()=>{function t(n){return Error.call(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((e,i)=>`${i+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n,this}return t.prototype=Object.create(Error.prototype),t})();class us{constructor(n){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,n&&(this._ctorUnsubscribe=!0,this._unsubscribe=n)}unsubscribe(){let n;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:i,_unsubscribe:o,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof us)e.remove(this);else if(null!==e)for(let d=0;d<e.length;++d)e[d].remove(this);if(Cv(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(d){n=d instanceof Ev?jA(d.errors):[d]}}if(mG(s)){let d=-1,f=s.length;for(;++d<f;){const _=s[d];if(null!==(t=_)&&"object"==typeof t)try{_.unsubscribe()}catch(C){n=n||[],C instanceof Ev?n=n.concat(jA(C.errors)):n.push(C)}}}var t;if(n)throw new Ev(n)}add(n){let e=n;if(!n)return us.EMPTY;switch(typeof n){case"function":e=new us(n);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof us)){const s=e;e=new us,e._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}let{_parentOrParents:i}=e;if(null===i)e._parentOrParents=this;else if(i instanceof us){if(i===this)return e;e._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return e;i.push(this)}const o=this._subscriptions;return null===o?this._subscriptions=[e]:o.push(e),e}remove(n){const e=this._subscriptions;if(e){const i=e.indexOf(n);-1!==i&&e.splice(i,1)}}}var t;function jA(t){return t.reduce((n,e)=>n.concat(e instanceof Ev?e.errors:e),[])}us.EMPTY=((t=new us).closed=!0,t);const Sv="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class na extends us{constructor(n,e,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Dv;break;case 1:if(!n){this.destination=Dv;break}if("object"==typeof n){n instanceof na?(this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,n.add(this)):(this.syncErrorThrowable=!0,this.destination=new $A(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new $A(this,n,e,i)}}[Sv](){return this}static create(n,e,i){const o=new na(n,e,i);return o.syncErrorThrowable=!1,o}next(n){this.isStopped||this._next(n)}error(n){this.isStopped||(this.isStopped=!0,this._error(n))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(n){this.destination.next(n)}_error(n){this.destination.error(n),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:n}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=n,this}}class $A extends na{constructor(n,e,i,o){super(),this._parentSubscriber=n;let s,d=this;Cv(e)?s=e:e&&(s=e.next,i=e.error,o=e.complete,e!==Dv&&(d=Object.create(e),Cv(d.unsubscribe)&&this.add(d.unsubscribe.bind(d)),d.unsubscribe=this.unsubscribe.bind(this))),this._context=d,this._next=s,this._error=i,this._complete=o}next(n){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;Sl.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,n)&&this.unsubscribe():this.__tryOrUnsub(this._next,n)}}error(n){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:i}=Sl;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,n),this.unsubscribe()):(this.__tryOrUnsub(this._error,n),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=n,e.syncErrorThrown=!0):ab(n),this.unsubscribe();else{if(this.unsubscribe(),i)throw n;ab(n)}}}complete(){if(!this.isStopped){const{_parentSubscriber:n}=this;if(this._complete){const e=()=>this._complete.call(this._context);Sl.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(n,e){try{n.call(this._context,e)}catch(i){if(this.unsubscribe(),Sl.useDeprecatedSynchronousErrorHandling)throw i;ab(i)}}__tryOrSetError(n,e,i){if(!Sl.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(o){return Sl.useDeprecatedSynchronousErrorHandling?(n.syncErrorValue=o,n.syncErrorThrown=!0,!0):(ab(o),!0)}return!1}_unsubscribe(){const{_parentSubscriber:n}=this;this._context=null,this._parentSubscriber=null,n.unsubscribe()}}const vG="function"==typeof Symbol&&Symbol.observable||"@@observable";function yG(t){return t}let WA=(()=>{class t{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,o){const{operator:s}=this,d=function _G(t,n,e){if(t){if(t instanceof na)return t;if(t[Sv])return t[Sv]()}return t||n||e?new na(t,n,e):new na(Dv)}(e,i,o);if(d.add(s?s.call(d,this.source):this.source||Sl.useDeprecatedSynchronousErrorHandling&&!d.syncErrorThrowable?this._subscribe(d):this._trySubscribe(d)),Sl.useDeprecatedSynchronousErrorHandling&&d.syncErrorThrowable&&(d.syncErrorThrowable=!1,d.syncErrorThrown))throw d.syncErrorValue;return d}_trySubscribe(e){try{return this._subscribe(e)}catch(i){Sl.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=i),function bG(t){for(;t;){const{closed:n,destination:e,isStopped:i}=t;if(n||i)return!1;t=e&&e instanceof na?e:null}return!0}(e)?e.error(i):console.warn(i)}}forEach(e,i){return new(i=qA(i))((o,s)=>{let d;d=this.subscribe(f=>{try{e(f)}catch(_){s(_),d&&d.unsubscribe()}},s,o)})}_subscribe(e){const{source:i}=this;return i&&i.subscribe(e)}[vG](){return this}pipe(...e){return 0===e.length?this:function GA(t){return 0===t.length?yG:1===t.length?t[0]:function(e){return t.reduce((i,o)=>o(i),e)}}(e)(this)}toPromise(e){return new(e=qA(e))((i,o)=>{let s;this.subscribe(d=>s=d,d=>o(d),()=>i(s))})}}return t.create=n=>new t(n),t})();function qA(t){if(t||(t=Sl.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const lb=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class xG extends us{constructor(n,e){super(),this.subject=n,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const n=this.subject,e=n.observers;if(this.subject=null,!e||0===e.length||n.isStopped||n.closed)return;const i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}class wG extends na{constructor(n){super(n),this.destination=n}}let cb=(()=>{class t extends WA{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Sv](){return new wG(this)}lift(e){const i=new ZA(this,this);return i.operator=e,i}next(e){if(this.closed)throw new lb;if(!this.isStopped){const{observers:i}=this,o=i.length,s=i.slice();for(let d=0;d<o;d++)s[d].next(e)}}error(e){if(this.closed)throw new lb;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:i}=this,o=i.length,s=i.slice();for(let d=0;d<o;d++)s[d].error(e);this.observers.length=0}complete(){if(this.closed)throw new lb;this.isStopped=!0;const{observers:e}=this,i=e.length,o=e.slice();for(let s=0;s<i;s++)o[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new lb;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new lb;return this.hasError?(e.error(this.thrownError),us.EMPTY):this.isStopped?(e.complete(),us.EMPTY):(this.observers.push(e),new xG(this,e))}asObservable(){const e=new WA;return e.source=this,e}}return t.create=(n,e)=>new ZA(n,e),t})();class ZA extends cb{constructor(n,e){super(),this.destination=n,this.source=e}next(n){const{destination:e}=this;e&&e.next&&e.next(n)}error(n){const{destination:e}=this;e&&e.error&&this.destination.error(n)}complete(){const{destination:n}=this;n&&n.complete&&this.destination.complete()}_subscribe(n){const{source:e}=this;return e?this.source.subscribe(n):us.EMPTY}}class CG extends us{constructor(n,e){super()}schedule(n,e=0){return this}}let KA=(()=>{class t{constructor(e,i=t.now){this.SchedulerAction=e,this.now=i}schedule(e,i=0,o){return new this.SchedulerAction(this,e).schedule(o,i)}}return t.now=()=>Date.now(),t})();class lu extends KA{constructor(n,e=KA.now){super(n,()=>lu.delegate&&lu.delegate!==this?lu.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(n,e=0,i){return lu.delegate&&lu.delegate!==this?lu.delegate.schedule(n,e,i):super.schedule(n,e,i)}flush(n){const{actions:e}=this;if(this.active)return void e.push(n);let i;this.active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this.active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}const EG=new lu(class DG extends CG{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){if(this.closed)return this;this.state=n;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(o,this.id,e),this}requestAsyncId(n,e,i=0){return setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let o,i=!1;try{this.work(n)}catch(s){i=!0,o=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),o}_unsubscribe(){const n=this.id,e=this.scheduler,i=e.actions,o=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==o&&i.splice(o,1),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null}}),YA={leading:!0,trailing:!1};function QA(t,n=EG,e=YA){return i=>i.lift(new IG(t,n,e.leading,e.trailing))}class IG{constructor(n,e,i,o){this.duration=n,this.scheduler=e,this.leading=i,this.trailing=o}call(n,e){return e.subscribe(new MG(n,this.duration,this.scheduler,this.leading,this.trailing))}}class MG extends na{constructor(n,e,i,o,s){super(n),this.duration=e,this.scheduler=i,this.leading=o,this.trailing=s,this._hasTrailingValue=!1,this._trailingValue=null}_next(n){this.throttled?this.trailing&&(this._trailingValue=n,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(kG,this.duration,{subscriber:this})),this.leading?this.destination.next(n):this.trailing&&(this._trailingValue=n,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const n=this.throttled;n&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),n.unsubscribe(),this.remove(n),this.throttled=null)}}function kG(t){const{subscriber:n}=t;n.clearThrottle()}function cu(){}function XA(t,n,e){return function(o){return o.lift(new AG(t,n,e))}}class AG{constructor(n,e,i){this.nextOrObserver=n,this.error=e,this.complete=i}call(n,e){return e.subscribe(new OG(n,this.nextOrObserver,this.error,this.complete))}}class OG extends na{constructor(n,e,i,o){super(n),this._tapNext=cu,this._tapError=cu,this._tapComplete=cu,this._tapError=i||cu,this._tapComplete=o||cu,Cv(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||cu,this._tapError=e.error||cu,this._tapComplete=e.complete||cu)}_next(n){try{this._tapNext.call(this._context,n)}catch(e){return void this.destination.error(e)}this.destination.next(n)}_error(n){try{this._tapError.call(this._context,n)}catch(e){return void this.destination.error(e)}this.destination.error(n)}_complete(){try{this._tapComplete.call(this._context)}catch(n){return void this.destination.error(n)}return this.destination.complete()}}function JA(t,n){return e=>e.lift(new PG(t,n))}class PG{constructor(n,e){this.compare=n,this.keySelector=e}call(n,e){return e.subscribe(new RG(n,this.compare,this.keySelector))}}class RG extends na{constructor(n,e,i){super(n),this.keySelector=i,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(n,e){return n===e}_next(n){let e;try{const{keySelector:o}=this;e=o?o(n):n}catch(o){return this.destination.error(o)}let i=!1;if(this.hasKey)try{const{compare:o}=this;i=o(this.key,e)}catch(o){return this.destination.error(o)}else this.hasKey=!0;i||(this.key=e,this.destination.next(n))}}class FG{constructor(n,e){this.predicate=n,this.thisArg=e}call(n,e){return e.subscribe(new LG(n,this.predicate,this.thisArg))}}class LG extends na{constructor(n,e,i){super(n),this.predicate=e,this.thisArg=i,this.count=0}_next(n){let e;try{e=this.predicate.call(this.thisArg,n,this.count++)}catch(i){return void this.destination.error(i)}e&&this.destination.next(n)}}var ia=typeof window<"u"?window:{screen:{},navigator:{}},Lf=(ia.matchMedia||function(){return{matches:!1}}).bind(ia),eO=!1,tO=function(){};ia.addEventListener&&ia.addEventListener("p",tO,{get passive(){return eO=!0}}),ia.removeEventListener&&ia.removeEventListener("p",tO,!1);var nO=eO,Yw="ontouchstart"in ia,oO=(Yw||"TouchEvent"in ia&&Lf("(any-pointer: coarse)"),ia.navigator.userAgent||"");Lf("(pointer: coarse)").matches&&/iPad|Macintosh/.test(oO)&&Math.min(ia.screen.width||0,ia.screen.height||0);(Lf("(pointer: coarse)").matches||!Lf("(pointer: fine)").matches&&Yw)&&/Windows.*Firefox/.test(oO),Lf("(any-pointer: fine)").matches||Lf("(any-hover: hover)");const jG=["tooltipTemplate"],$G=["leftOuterSelectionBar"],GG=["rightOuterSelectionBar"],WG=["fullBar"],qG=["selectionBar"],ZG=["minHandle"],KG=["maxHandle"],YG=["floorLabel"],QG=["ceilLabel"],XG=["minHandleLabel"],JG=["maxHandleLabel"],eW=["combinedLabel"],tW=["ticksElement"];function nW(t,n){if(1&t&&lt(0,"ngx-slider-tooltip-wrapper",31),2&t){const e=Fe().$implicit;me("template",Fe().tooltipTemplate)("tooltip",e.valueTooltip)("placement",e.valueTooltipPlacement)("content",e.value)}}function iW(t,n){1&t&&lt(0,"span",32),2&t&&me("innerHTML",Fe().$implicit.legend,To)}const oW=function(t){return{"ngx-slider-selected":t}};function rW(t,n){if(1&t&&(W(0,"span",27),lt(1,"ngx-slider-tooltip-wrapper",28),Ee(2,nW,1,4,"ngx-slider-tooltip-wrapper",29),Ee(3,iW,1,1,"span",30),Y()),2&t){const e=n.$implicit,i=Fe();me("ngClass",Ts(7,oW,e.selected))("ngStyle",e.style),ne(1),me("template",i.tooltipTemplate)("tooltip",e.tooltip)("placement",e.tooltipPlacement),ne(1),me("ngIf",null!=e.value),ne(1),me("ngIf",null!=e.legend)}}function sW(t,n){}function aW(t,n){1&t&&Ee(0,sW,0,0,"ng-template")}const lW=function(t,n,e){return{tooltip:t,placement:n,content:e}};function cW(t,n){if(1&t&&(Zs(0),Ee(1,aW,1,0,null,1),Ks()),2&t){const e=Fe();ne(1),me("ngTemplateOutlet",e.template)("ngTemplateOutletContext",ef(2,lW,e.tooltip,e.placement,e.content))}}function dW(t,n){if(1&t&&(Zs(0),W(1,"div",2),ge(2),Y(),Ks()),2&t){const e=Fe();ne(1),an("title",e.tooltip)("data-tooltip-placement",e.placement),ne(1),Rn(" ",e.content," ")}}const Zo={Low:0,High:1,Floor:2,Ceil:3,TickValue:4};Zo[Zo.Low]="Low",Zo[Zo.High]="High",Zo[Zo.Floor]="Floor",Zo[Zo.Ceil]="Ceil",Zo[Zo.TickValue]="TickValue";class Tv{constructor(){this.floor=0,this.ceil=null,this.step=1,this.minRange=null,this.maxRange=null,this.pushRange=!1,this.minLimit=null,this.maxLimit=null,this.translate=null,this.combineLabels=null,this.getLegend=null,this.getStepLegend=null,this.stepsArray=null,this.bindIndexForStepsArray=!1,this.draggableRange=!1,this.draggableRangeOnly=!1,this.showSelectionBar=!1,this.showSelectionBarEnd=!1,this.showSelectionBarFromValue=null,this.showOuterSelectionBars=!1,this.hidePointerLabels=!1,this.hideLimitLabels=!1,this.autoHideLimitLabels=!0,this.readOnly=!1,this.disabled=!1,this.showTicks=!1,this.showTicksValues=!1,this.tickStep=null,this.tickValueStep=null,this.ticksArray=null,this.ticksTooltip=null,this.ticksValuesTooltip=null,this.vertical=!1,this.getSelectionBarColor=null,this.getTickColor=null,this.getPointerColor=null,this.keyboardSupport=!0,this.scale=1,this.rotate=0,this.enforceStep=!0,this.enforceRange=!0,this.enforceStepsArray=!0,this.noSwitching=!1,this.onlyBindHandles=!1,this.rightToLeft=!1,this.reversedControls=!1,this.boundPointerLabels=!0,this.logScale=!1,this.customValueToPosition=null,this.customPositionToValue=null,this.precisionLimit=12,this.selectionBarGradient=null,this.ariaLabel="ngx-slider",this.ariaLabelledBy=null,this.ariaLabelHigh="ngx-slider-max",this.ariaLabelledByHigh=null,this.handleDimension=null,this.barDimension=null,this.animate=!0,this.animateOnMove=!1}}const Ct={Min:0,Max:1};Ct[Ct.Min]="Min",Ct[Ct.Max]="Max";class uW{}class qe{static isNullOrUndefined(n){return null==n}static areArraysEqual(n,e){if(n.length!==e.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==e[i])return!1;return!0}static linearValueToPosition(n,e,i){return(n-e)/(i-e)}static logValueToPosition(n,e,i){return((n=Math.log(n))-(e=Math.log(e)))/((i=Math.log(i))-e)}static linearPositionToValue(n,e,i){return n*(i-e)+e}static logPositionToValue(n,e,i){return e=Math.log(e),i=Math.log(i),Math.exp(n*(i-e)+e)}static findStepIndex(n,e){const i=e.map(s=>Math.abs(n-s.value));let o=0;for(let s=0;s<e.length;s++)i[s]!==i[o]&&i[s]<i[o]&&(o=s);return o}}class du{static isTouchEvent(n){return void 0!==window.TouchEvent?n instanceof TouchEvent:void 0!==n.touches}static isResizeObserverAvailable(){return void 0!==window.ResizeObserver}}class xo{static roundToPrecisionLimit(n,e){return+n.toPrecision(e)}static isModuloWithinPrecisionLimit(n,e,i){const o=Math.pow(10,-i);return Math.abs(n%e)<=o||Math.abs(Math.abs(n%e)-e)<=o}static clampToRange(n,e,i){return Math.min(Math.max(n,e),i)}}class aO{constructor(){this.eventName=null,this.events=null,this.eventsSubscription=null,this.teardownCallback=null}}class lO{constructor(n){this.renderer=n}attachPassiveEventListener(n,e,i,o){if(!0!==nO)return this.attachEventListener(n,e,i,o);const s=new aO;s.eventName=e,s.events=new cb;const d=f=>{s.events.next(f)};return n.addEventListener(e,d,{passive:!0,capture:!1}),s.teardownCallback=()=>{n.removeEventListener(e,d,{passive:!0,capture:!1})},s.eventsSubscription=s.events.pipe(qe.isNullOrUndefined(o)?XA(()=>{}):QA(o,void 0,{leading:!0,trailing:!0})).subscribe(f=>{i(f)}),s}detachEventListener(n){qe.isNullOrUndefined(n.eventsSubscription)||(n.eventsSubscription.unsubscribe(),n.eventsSubscription=null),qe.isNullOrUndefined(n.events)||(n.events.complete(),n.events=null),qe.isNullOrUndefined(n.teardownCallback)||(n.teardownCallback(),n.teardownCallback=null)}attachEventListener(n,e,i,o){const s=new aO;return s.eventName=e,s.events=new cb,s.teardownCallback=this.renderer.listen(n,e,f=>{s.events.next(f)}),s.eventsSubscription=s.events.pipe(qe.isNullOrUndefined(o)?XA(()=>{}):QA(o,void 0,{leading:!0,trailing:!0})).subscribe(f=>{i(f)}),s}}let uu=(()=>{class t{constructor(e,i,o){this.elemRef=e,this.renderer=i,this.changeDetectionRef=o,this._position=0,this._dimension=0,this._alwaysHide=!1,this._vertical=!1,this._scale=1,this._rotate=0,this.opacity=1,this.visibility="visible",this.left="",this.bottom="",this.height="",this.width="",this.transform="",this.eventListeners=[],this.eventListenerHelper=new lO(this.renderer)}get position(){return this._position}get dimension(){return this._dimension}get alwaysHide(){return this._alwaysHide}get vertical(){return this._vertical}get scale(){return this._scale}get rotate(){return this._rotate}setAlwaysHide(e){this._alwaysHide=e,this.visibility=e?"hidden":"visible"}hide(){this.opacity=0}show(){this.alwaysHide||(this.opacity=1)}isVisible(){return!this.alwaysHide&&0!==this.opacity}setVertical(e){this._vertical=e,this._vertical?(this.left="",this.width=""):(this.bottom="",this.height="")}setScale(e){this._scale=e}setRotate(e){this._rotate=e,this.transform="rotate("+e+"deg)"}getRotate(){return this._rotate}setPosition(e){this._position!==e&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._position=e,this._vertical?this.bottom=Math.round(e)+"px":this.left=Math.round(e)+"px"}calculateDimension(){const e=this.getBoundingClientRect();this._dimension=this.vertical?(e.bottom-e.top)*this.scale:(e.right-e.left)*this.scale}setDimension(e){this._dimension!==e&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._dimension=e,this._vertical?this.height=Math.round(e)+"px":this.width=Math.round(e)+"px"}getBoundingClientRect(){return this.elemRef.nativeElement.getBoundingClientRect()}on(e,i,o){const s=this.eventListenerHelper.attachEventListener(this.elemRef.nativeElement,e,i,o);this.eventListeners.push(s)}onPassive(e,i,o){const s=this.eventListenerHelper.attachPassiveEventListener(this.elemRef.nativeElement,e,i,o);this.eventListeners.push(s)}off(e){let i,o;qe.isNullOrUndefined(e)?(i=[],o=this.eventListeners):(i=this.eventListeners.filter(s=>s.eventName!==e),o=this.eventListeners.filter(s=>s.eventName===e));for(const s of o)this.eventListenerHelper.detachEventListener(s);this.eventListeners=i}isRefDestroyed(){return qe.isNullOrUndefined(this.changeDetectionRef)||this.changeDetectionRef.destroyed}}return t.\u0275fac=function(e){return new(e||t)(J(qt),J(lo),J(ko))},t.\u0275dir=We({type:t,selectors:[["","ngxSliderElement",""]],hostVars:14,hostBindings:function(e,i){2&e&&$d("opacity",i.opacity)("visibility",i.visibility)("left",i.left)("bottom",i.bottom)("height",i.height)("width",i.width)("transform",i.transform)}}),t})(),Qw=(()=>{class t extends uu{constructor(e,i,o){super(e,i,o),this.active=!1,this.role="",this.tabindex="",this.ariaOrientation="",this.ariaLabel="",this.ariaLabelledBy="",this.ariaValueNow="",this.ariaValueText="",this.ariaValueMin="",this.ariaValueMax=""}focus(){this.elemRef.nativeElement.focus()}}return t.\u0275fac=function(e){return new(e||t)(J(qt),J(lo),J(ko))},t.\u0275dir=We({type:t,selectors:[["","ngxSliderHandle",""]],hostVars:11,hostBindings:function(e,i){2&e&&(an("role",i.role)("tabindex",i.tabindex)("aria-orientation",i.ariaOrientation)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledBy)("aria-valuenow",i.ariaValueNow)("aria-valuetext",i.ariaValueText)("aria-valuemin",i.ariaValueMin)("aria-valuemax",i.ariaValueMax),ut("ngx-slider-active",i.active))},features:[si]}),t})(),Bf=(()=>{class t extends uu{constructor(e,i,o){super(e,i,o),this._value=null}get value(){return this._value}setValue(e){let i=!1;!this.alwaysHide&&(qe.isNullOrUndefined(this.value)||this.value.length!==e.length||this.value.length>0&&0===this.dimension)&&(i=!0),this._value=e,this.elemRef.nativeElement.innerHTML=e,i&&this.calculateDimension()}}return t.\u0275fac=function(e){return new(e||t)(J(qt),J(lo),J(ko))},t.\u0275dir=We({type:t,selectors:[["","ngxSliderLabel",""]],features:[si]}),t})();class hW{constructor(){this.selected=!1,this.style={},this.tooltip=null,this.tooltipPlacement=null,this.value=null,this.valueTooltip=null,this.valueTooltipPlacement=null,this.legend=null}}class cO{constructor(){this.active=!1,this.value=0,this.difference=0,this.position=0,this.lowLimit=0,this.highLimit=0}}class Iv{static compare(n,e){return!(qe.isNullOrUndefined(n)&&qe.isNullOrUndefined(e)||qe.isNullOrUndefined(n)!==qe.isNullOrUndefined(e))&&n.value===e.value&&n.highValue===e.highValue}}class dO extends Iv{static compare(n,e){return!(qe.isNullOrUndefined(n)&&qe.isNullOrUndefined(e)||qe.isNullOrUndefined(n)!==qe.isNullOrUndefined(e))&&n.value===e.value&&n.highValue===e.highValue&&n.forceChange===e.forceChange}}const pW={provide:$o,useExisting:Nt(()=>fW),multi:!0};let eC,fW=(()=>{class t{constructor(e,i,o,s){this.renderer=e,this.elementRef=i,this.changeDetectionRef=o,this.zone=s,this.value=null,this.valueChange=new Me,this.highValue=null,this.highValueChange=new Me,this.options=new Tv,this.userChangeStart=new Me,this.userChange=new Me,this.userChangeEnd=new Me,this.initHasRun=!1,this.inputModelChangeSubject=new cb,this.inputModelChangeSubscription=null,this.outputModelChangeSubject=new cb,this.outputModelChangeSubscription=null,this.viewLowValue=null,this.viewHighValue=null,this.viewOptions=new Tv,this.handleHalfDimension=0,this.maxHandlePosition=0,this.currentTrackingPointer=null,this.currentFocusPointer=null,this.firstKeyDown=!1,this.touchId=null,this.dragging=new cO,this.sliderElementVerticalClass=!1,this.sliderElementAnimateClass=!1,this.sliderElementWithLegendClass=!1,this.sliderElementDisabledAttr=null,this.sliderElementAriaLabel="ngx-slider",this.barStyle={},this.minPointerStyle={},this.maxPointerStyle={},this.fullBarTransparentClass=!1,this.selectionBarDraggableClass=!1,this.ticksUnderValuesClass=!1,this.intermediateTicks=!1,this.ticks=[],this.eventListenerHelper=null,this.onMoveEventListener=null,this.onEndEventListener=null,this.moving=!1,this.resizeObserver=null,this.onTouchedCallback=null,this.onChangeCallback=null,this.eventListenerHelper=new lO(this.renderer)}set manualRefresh(e){this.unsubscribeManualRefresh(),this.manualRefreshSubscription=e.subscribe(()=>{setTimeout(()=>this.calculateViewDimensionsAndDetectChanges())})}set triggerFocus(e){this.unsubscribeTriggerFocus(),this.triggerFocusSubscription=e.subscribe(i=>{this.focusPointer(i)})}get range(){return!qe.isNullOrUndefined(this.value)&&!qe.isNullOrUndefined(this.highValue)}get showTicks(){return this.viewOptions.showTicks}ngOnInit(){this.viewOptions=new Tv,Object.assign(this.viewOptions,this.options),this.updateDisabledState(),this.updateVerticalState(),this.updateAriaLabel()}ngAfterViewInit(){this.applyOptions(),this.subscribeInputModelChangeSubject(),this.subscribeOutputModelChangeSubject(),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.updateVerticalState(),this.manageElementsStyle(),this.updateDisabledState(),this.calculateViewDimensions(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.initHandles(),this.manageEventsBindings(),this.updateAriaLabel(),this.subscribeResizeObserver(),this.initHasRun=!0,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}ngOnChanges(e){!qe.isNullOrUndefined(e.options)&&JSON.stringify(e.options.previousValue)!==JSON.stringify(e.options.currentValue)&&this.onChangeOptions(),(!qe.isNullOrUndefined(e.value)||!qe.isNullOrUndefined(e.highValue))&&this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}ngOnDestroy(){this.unbindEvents(),this.unsubscribeResizeObserver(),this.unsubscribeInputModelChangeSubject(),this.unsubscribeOutputModelChangeSubject(),this.unsubscribeManualRefresh(),this.unsubscribeTriggerFocus()}writeValue(e){e instanceof Array?(this.value=e[0],this.highValue=e[1]):this.value=e,this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.viewOptions.disabled=e,this.updateDisabledState()}setAriaLabel(e){this.viewOptions.ariaLabel=e,this.updateAriaLabel()}onResize(e){this.calculateViewDimensionsAndDetectChanges()}subscribeInputModelChangeSubject(){this.inputModelChangeSubscription=this.inputModelChangeSubject.pipe(JA(dO.compare),function NG(t,n){return function(i){return i.lift(new FG(t,n))}}(e=>!e.forceChange&&!e.internalChange)).subscribe(e=>this.applyInputModelChange(e))}subscribeOutputModelChangeSubject(){this.outputModelChangeSubscription=this.outputModelChangeSubject.pipe(JA(dO.compare)).subscribe(e=>this.publishOutputModelChange(e))}subscribeResizeObserver(){du.isResizeObserverAvailable()&&(this.resizeObserver=new ResizeObserver(()=>this.calculateViewDimensionsAndDetectChanges()),this.resizeObserver.observe(this.elementRef.nativeElement))}unsubscribeResizeObserver(){du.isResizeObserverAvailable()&&null!==this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}unsubscribeOnMove(){qe.isNullOrUndefined(this.onMoveEventListener)||(this.eventListenerHelper.detachEventListener(this.onMoveEventListener),this.onMoveEventListener=null)}unsubscribeOnEnd(){qe.isNullOrUndefined(this.onEndEventListener)||(this.eventListenerHelper.detachEventListener(this.onEndEventListener),this.onEndEventListener=null)}unsubscribeInputModelChangeSubject(){qe.isNullOrUndefined(this.inputModelChangeSubscription)||(this.inputModelChangeSubscription.unsubscribe(),this.inputModelChangeSubscription=null)}unsubscribeOutputModelChangeSubject(){qe.isNullOrUndefined(this.outputModelChangeSubscription)||(this.outputModelChangeSubscription.unsubscribe(),this.outputModelChangeSubscription=null)}unsubscribeManualRefresh(){qe.isNullOrUndefined(this.manualRefreshSubscription)||(this.manualRefreshSubscription.unsubscribe(),this.manualRefreshSubscription=null)}unsubscribeTriggerFocus(){qe.isNullOrUndefined(this.triggerFocusSubscription)||(this.triggerFocusSubscription.unsubscribe(),this.triggerFocusSubscription=null)}getPointerElement(e){return e===Ct.Min?this.minHandleElement:e===Ct.Max?this.maxHandleElement:null}getCurrentTrackingValue(){return this.currentTrackingPointer===Ct.Min?this.viewLowValue:this.currentTrackingPointer===Ct.Max?this.viewHighValue:null}modelValueToViewValue(e){return qe.isNullOrUndefined(e)?NaN:qe.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?+e:qe.findStepIndex(+e,this.viewOptions.stepsArray)}viewValueToModelValue(e){return qe.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?e:this.getStepValue(e)}getStepValue(e){const i=this.viewOptions.stepsArray[e];return qe.isNullOrUndefined(i)?NaN:i.value}applyViewChange(){this.value=this.viewValueToModelValue(this.viewLowValue),this.range&&(this.highValue=this.viewValueToModelValue(this.viewHighValue)),this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,userEventInitiated:!0,forceChange:!1}),this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!0})}applyInputModelChange(e){const i=this.normaliseModelValues(e),o=!Iv.compare(e,i);o&&(this.value=i.value,this.highValue=i.highValue),this.viewLowValue=this.modelValueToViewValue(i.value),this.viewHighValue=this.range?this.modelValueToViewValue(i.highValue):null,this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCombinedLabel(),this.outputModelChangeSubject.next({value:i.value,highValue:i.highValue,forceChange:o,userEventInitiated:!1})}publishOutputModelChange(e){const i=()=>{this.valueChange.emit(e.value),this.range&&this.highValueChange.emit(e.highValue),qe.isNullOrUndefined(this.onChangeCallback)||this.onChangeCallback(this.range?[e.value,e.highValue]:e.value),qe.isNullOrUndefined(this.onTouchedCallback)||this.onTouchedCallback(this.range?[e.value,e.highValue]:e.value)};e.userEventInitiated?(i(),this.userChange.emit(this.getChangeContext())):setTimeout(()=>{i()})}normaliseModelValues(e){const i=new Iv;if(i.value=e.value,i.highValue=e.highValue,!qe.isNullOrUndefined(this.viewOptions.stepsArray)){if(this.viewOptions.enforceStepsArray){const o=qe.findStepIndex(i.value,this.viewOptions.stepsArray);if(i.value=this.viewOptions.stepsArray[o].value,this.range){const s=qe.findStepIndex(i.highValue,this.viewOptions.stepsArray);i.highValue=this.viewOptions.stepsArray[s].value}}return i}if(this.viewOptions.enforceStep&&(i.value=this.roundStep(i.value),this.range&&(i.highValue=this.roundStep(i.highValue))),this.viewOptions.enforceRange&&(i.value=xo.clampToRange(i.value,this.viewOptions.floor,this.viewOptions.ceil),this.range&&(i.highValue=xo.clampToRange(i.highValue,this.viewOptions.floor,this.viewOptions.ceil)),this.range&&e.value>e.highValue))if(this.viewOptions.noSwitching)i.value=i.highValue;else{const o=e.value;i.value=e.highValue,i.highValue=o}return i}renormaliseModelValues(){const e={value:this.value,highValue:this.highValue},i=this.normaliseModelValues(e);Iv.compare(i,e)||(this.value=i.value,this.highValue=i.highValue,this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!0,userEventInitiated:!1}))}onChangeOptions(){if(!this.initHasRun)return;const e=this.getOptionsInfluencingEventBindings(this.viewOptions);this.applyOptions();const i=this.getOptionsInfluencingEventBindings(this.viewOptions),o=!qe.areArraysEqual(e,i);this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.resetSlider(o)}applyOptions(){if(this.viewOptions=new Tv,Object.assign(this.viewOptions,this.options),this.viewOptions.draggableRange=this.range&&this.viewOptions.draggableRange,this.viewOptions.draggableRangeOnly=this.range&&this.viewOptions.draggableRangeOnly,this.viewOptions.draggableRangeOnly&&(this.viewOptions.draggableRange=!0),this.viewOptions.showTicks=this.viewOptions.showTicks||this.viewOptions.showTicksValues||!qe.isNullOrUndefined(this.viewOptions.ticksArray),this.viewOptions.showTicks&&(!qe.isNullOrUndefined(this.viewOptions.tickStep)||!qe.isNullOrUndefined(this.viewOptions.ticksArray))&&(this.intermediateTicks=!0),this.viewOptions.showSelectionBar=this.viewOptions.showSelectionBar||this.viewOptions.showSelectionBarEnd||!qe.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue),qe.isNullOrUndefined(this.viewOptions.stepsArray)?this.applyFloorCeilOptions():this.applyStepsArrayOptions(),qe.isNullOrUndefined(this.viewOptions.combineLabels)&&(this.viewOptions.combineLabels=(e,i)=>e+" - "+i),this.viewOptions.logScale&&0===this.viewOptions.floor)throw Error("Can't use floor=0 with logarithmic scale")}applyStepsArrayOptions(){this.viewOptions.floor=0,this.viewOptions.ceil=this.viewOptions.stepsArray.length-1,this.viewOptions.step=1,qe.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=e=>String(this.viewOptions.bindIndexForStepsArray?this.getStepValue(e):e))}applyFloorCeilOptions(){if(qe.isNullOrUndefined(this.viewOptions.step)?this.viewOptions.step=1:(this.viewOptions.step=+this.viewOptions.step,this.viewOptions.step<=0&&(this.viewOptions.step=1)),qe.isNullOrUndefined(this.viewOptions.ceil)||qe.isNullOrUndefined(this.viewOptions.floor))throw Error("floor and ceil options must be supplied");this.viewOptions.ceil=+this.viewOptions.ceil,this.viewOptions.floor=+this.viewOptions.floor,qe.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=e=>String(e))}resetSlider(e=!0){this.manageElementsStyle(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),e&&(this.unbindEvents(),this.manageEventsBindings()),this.updateDisabledState(),this.updateAriaLabel(),this.calculateViewDimensions(),this.refocusPointerIfNeeded()}focusPointer(e){e!==Ct.Min&&e!==Ct.Max&&(e=Ct.Min),e===Ct.Min?this.minHandleElement.focus():this.range&&e===Ct.Max&&this.maxHandleElement.focus()}refocusPointerIfNeeded(){qe.isNullOrUndefined(this.currentFocusPointer)||(this.onPointerFocus(this.currentFocusPointer),this.getPointerElement(this.currentFocusPointer).focus())}manageElementsStyle(){this.updateScale(),this.floorLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels),this.ceilLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels);const e=this.viewOptions.showTicksValues&&!this.intermediateTicks;this.minHandleLabelElement.setAlwaysHide(e||this.viewOptions.hidePointerLabels),this.maxHandleLabelElement.setAlwaysHide(e||!this.range||this.viewOptions.hidePointerLabels),this.combinedLabelElement.setAlwaysHide(e||!this.range||this.viewOptions.hidePointerLabels),this.selectionBarElement.setAlwaysHide(!this.range&&!this.viewOptions.showSelectionBar),this.leftOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.rightOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.fullBarTransparentClass=this.range&&this.viewOptions.showOuterSelectionBars,this.selectionBarDraggableClass=this.viewOptions.draggableRange&&!this.viewOptions.onlyBindHandles,this.ticksUnderValuesClass=this.intermediateTicks&&this.options.showTicksValues,this.sliderElementVerticalClass!==this.viewOptions.vertical&&(this.updateVerticalState(),setTimeout(()=>{this.resetSlider()})),this.sliderElementAnimateClass!==this.viewOptions.animate&&setTimeout(()=>{this.sliderElementAnimateClass=this.viewOptions.animate}),this.updateRotate()}manageEventsBindings(){this.viewOptions.disabled||this.viewOptions.readOnly?this.unbindEvents():this.bindEvents()}updateDisabledState(){this.sliderElementDisabledAttr=this.viewOptions.disabled?"disabled":null}updateAriaLabel(){this.sliderElementAriaLabel=this.viewOptions.ariaLabel||"nxg-slider"}updateVerticalState(){this.sliderElementVerticalClass=this.viewOptions.vertical;for(const e of this.getAllSliderElements())qe.isNullOrUndefined(e)||e.setVertical(this.viewOptions.vertical)}updateScale(){for(const e of this.getAllSliderElements())e.setScale(this.viewOptions.scale)}updateRotate(){for(const e of this.getAllSliderElements())e.setRotate(this.viewOptions.rotate)}getAllSliderElements(){return[this.leftOuterSelectionBarElement,this.rightOuterSelectionBarElement,this.fullBarElement,this.selectionBarElement,this.minHandleElement,this.maxHandleElement,this.floorLabelElement,this.ceilLabelElement,this.minHandleLabelElement,this.maxHandleLabelElement,this.combinedLabelElement,this.ticksElement]}initHandles(){this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.range&&this.updateCombinedLabel(),this.updateTicksScale()}addAccessibility(){this.updateAriaAttributes(),this.minHandleElement.role="slider",this.minHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.minHandleElement.ariaOrientation=this.viewOptions.vertical||0!==this.viewOptions.rotate?"vertical":"horizontal",qe.isNullOrUndefined(this.viewOptions.ariaLabel)?qe.isNullOrUndefined(this.viewOptions.ariaLabelledBy)||(this.minHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledBy):this.minHandleElement.ariaLabel=this.viewOptions.ariaLabel,this.range&&(this.maxHandleElement.role="slider",this.maxHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.maxHandleElement.ariaOrientation=this.viewOptions.vertical||0!==this.viewOptions.rotate?"vertical":"horizontal",qe.isNullOrUndefined(this.viewOptions.ariaLabelHigh)?qe.isNullOrUndefined(this.viewOptions.ariaLabelledByHigh)||(this.maxHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledByHigh):this.maxHandleElement.ariaLabel=this.viewOptions.ariaLabelHigh)}updateAriaAttributes(){this.minHandleElement.ariaValueNow=(+this.value).toString(),this.minHandleElement.ariaValueText=this.viewOptions.translate(+this.value,Zo.Low),this.minHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.minHandleElement.ariaValueMax=this.viewOptions.ceil.toString(),this.range&&(this.maxHandleElement.ariaValueNow=(+this.highValue).toString(),this.maxHandleElement.ariaValueText=this.viewOptions.translate(+this.highValue,Zo.High),this.maxHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.maxHandleElement.ariaValueMax=this.viewOptions.ceil.toString())}calculateViewDimensions(){qe.isNullOrUndefined(this.viewOptions.handleDimension)?this.minHandleElement.calculateDimension():this.minHandleElement.setDimension(this.viewOptions.handleDimension);const e=this.minHandleElement.dimension;this.handleHalfDimension=e/2,qe.isNullOrUndefined(this.viewOptions.barDimension)?this.fullBarElement.calculateDimension():this.fullBarElement.setDimension(this.viewOptions.barDimension),this.maxHandlePosition=this.fullBarElement.dimension-e,this.initHasRun&&(this.updateFloorLabel(),this.updateCeilLabel(),this.initHandles())}calculateViewDimensionsAndDetectChanges(){this.calculateViewDimensions(),this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}isRefDestroyed(){return this.changeDetectionRef.destroyed}updateTicksScale(){if(!this.viewOptions.showTicks)return void setTimeout(()=>{this.sliderElementWithLegendClass=!1});const e=qe.isNullOrUndefined(this.viewOptions.ticksArray)?this.getTicksArray():this.viewOptions.ticksArray,i=this.viewOptions.vertical?"translateY":"translateX";this.viewOptions.rightToLeft&&e.reverse();const o=qe.isNullOrUndefined(this.viewOptions.tickValueStep)?qe.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep:this.viewOptions.tickValueStep;let s=!1;const d=e.map(f=>{let _=this.valueToPosition(f);this.viewOptions.vertical&&(_=this.maxHandlePosition-_);const C=i+"("+Math.round(_)+"px)",T=new hW;T.selected=this.isTickSelected(f),T.style={"-webkit-transform":C,"-moz-transform":C,"-o-transform":C,"-ms-transform":C,transform:C},T.selected&&!qe.isNullOrUndefined(this.viewOptions.getSelectionBarColor)&&(T.style["background-color"]=this.getSelectionBarColor()),!T.selected&&!qe.isNullOrUndefined(this.viewOptions.getTickColor)&&(T.style["background-color"]=this.getTickColor(f)),qe.isNullOrUndefined(this.viewOptions.ticksTooltip)||(T.tooltip=this.viewOptions.ticksTooltip(f),T.tooltipPlacement=this.viewOptions.vertical?"right":"top"),this.viewOptions.showTicksValues&&!qe.isNullOrUndefined(o)&&xo.isModuloWithinPrecisionLimit(f,o,this.viewOptions.precisionLimit)&&(T.value=this.getDisplayValue(f,Zo.TickValue),qe.isNullOrUndefined(this.viewOptions.ticksValuesTooltip)||(T.valueTooltip=this.viewOptions.ticksValuesTooltip(f),T.valueTooltipPlacement=this.viewOptions.vertical?"right":"top"));let P=null;if(qe.isNullOrUndefined(this.viewOptions.stepsArray))qe.isNullOrUndefined(this.viewOptions.getLegend)||(P=this.viewOptions.getLegend(f));else{const z=this.viewOptions.stepsArray[f];qe.isNullOrUndefined(this.viewOptions.getStepLegend)?qe.isNullOrUndefined(z)||(P=z.legend):P=this.viewOptions.getStepLegend(z)}return qe.isNullOrUndefined(P)||(T.legend=P,s=!0),T});if(setTimeout(()=>{this.sliderElementWithLegendClass=s}),qe.isNullOrUndefined(this.ticks)||this.ticks.length!==d.length)this.ticks=d;else for(let f=0;f<d.length;++f)Object.assign(this.ticks[f],d[f]);this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}getTicksArray(){const e=qe.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep,i=[],o=1+Math.floor(xo.roundToPrecisionLimit(Math.abs(this.viewOptions.ceil-this.viewOptions.floor)/e,this.viewOptions.precisionLimit));for(let s=0;s<o;++s)i.push(xo.roundToPrecisionLimit(this.viewOptions.floor+e*s,this.viewOptions.precisionLimit));return i}isTickSelected(e){if(!this.range)if(qe.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)){if(this.viewOptions.showSelectionBarEnd){if(e>=this.viewLowValue)return!0}else if(this.viewOptions.showSelectionBar&&e<=this.viewLowValue)return!0}else{const i=this.viewOptions.showSelectionBarFromValue;if(this.viewLowValue>i&&e>=i&&e<=this.viewLowValue)return!0;if(this.viewLowValue<i&&e<=i&&e>=this.viewLowValue)return!0}return!!(this.range&&e>=this.viewLowValue&&e<=this.viewHighValue)}updateFloorLabel(){this.floorLabelElement.alwaysHide||(this.floorLabelElement.setValue(this.getDisplayValue(this.viewOptions.floor,Zo.Floor)),this.floorLabelElement.calculateDimension(),this.floorLabelElement.setPosition(this.viewOptions.rightToLeft?this.fullBarElement.dimension-this.floorLabelElement.dimension:0))}updateCeilLabel(){this.ceilLabelElement.alwaysHide||(this.ceilLabelElement.setValue(this.getDisplayValue(this.viewOptions.ceil,Zo.Ceil)),this.ceilLabelElement.calculateDimension(),this.ceilLabelElement.setPosition(this.viewOptions.rightToLeft?0:this.fullBarElement.dimension-this.ceilLabelElement.dimension))}updateHandles(e,i){e===Ct.Min?this.updateLowHandle(i):e===Ct.Max&&this.updateHighHandle(i),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCombinedLabel()}getHandleLabelPos(e,i){const o=e===Ct.Min?this.minHandleLabelElement.dimension:this.maxHandleLabelElement.dimension,s=i-o/2+this.handleHalfDimension,d=this.fullBarElement.dimension-o;return this.viewOptions.boundPointerLabels?this.viewOptions.rightToLeft&&e===Ct.Min||!this.viewOptions.rightToLeft&&e===Ct.Max?Math.min(s,d):Math.min(Math.max(s,0),d):s}updateLowHandle(e){this.minHandleElement.setPosition(e),this.minHandleLabelElement.setValue(this.getDisplayValue(this.viewLowValue,Zo.Low)),this.minHandleLabelElement.setPosition(this.getHandleLabelPos(Ct.Min,e)),qe.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.minPointerStyle={backgroundColor:this.getPointerColor(Ct.Min)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateHighHandle(e){this.maxHandleElement.setPosition(e),this.maxHandleLabelElement.setValue(this.getDisplayValue(this.viewHighValue,Zo.High)),this.maxHandleLabelElement.setPosition(this.getHandleLabelPos(Ct.Max,e)),qe.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.maxPointerStyle={backgroundColor:this.getPointerColor(Ct.Max)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateFloorAndCeilLabelsVisibility(){if(this.viewOptions.hidePointerLabels)return;let e=!1,i=!1;const o=this.isLabelBelowFloorLabel(this.minHandleLabelElement),s=this.isLabelAboveCeilLabel(this.minHandleLabelElement),d=this.isLabelAboveCeilLabel(this.maxHandleLabelElement),f=this.isLabelBelowFloorLabel(this.combinedLabelElement),_=this.isLabelAboveCeilLabel(this.combinedLabelElement);if(o?(e=!0,this.floorLabelElement.hide()):(e=!1,this.floorLabelElement.show()),s?(i=!0,this.ceilLabelElement.hide()):(i=!1,this.ceilLabelElement.show()),this.range){const C=this.combinedLabelElement.isVisible()?_:d,T=this.combinedLabelElement.isVisible()?f:o;C?this.ceilLabelElement.hide():i||this.ceilLabelElement.show(),T?this.floorLabelElement.hide():e||this.floorLabelElement.show()}}isLabelBelowFloorLabel(e){const i=e.position,s=this.floorLabelElement.position;return this.viewOptions.rightToLeft?i+e.dimension>=s-2:i<=s+this.floorLabelElement.dimension+2}isLabelAboveCeilLabel(e){const i=e.position,s=this.ceilLabelElement.position;return this.viewOptions.rightToLeft?i<=s+this.ceilLabelElement.dimension+2:i+e.dimension>=s-2}updateSelectionBar(){let e=0,i=0;const o=this.viewOptions.rightToLeft?!this.viewOptions.showSelectionBarEnd:this.viewOptions.showSelectionBarEnd,s=this.viewOptions.rightToLeft?this.maxHandleElement.position+this.handleHalfDimension:this.minHandleElement.position+this.handleHalfDimension;if(this.range)i=Math.abs(this.maxHandleElement.position-this.minHandleElement.position),e=s;else if(qe.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue))o?(i=Math.ceil(Math.abs(this.maxHandlePosition-this.minHandleElement.position)+this.handleHalfDimension),e=Math.floor(this.minHandleElement.position+this.handleHalfDimension)):(i=this.minHandleElement.position+this.handleHalfDimension,e=0);else{const d=this.viewOptions.showSelectionBarFromValue,f=this.valueToPosition(d);(this.viewOptions.rightToLeft?this.viewLowValue<=d:this.viewLowValue>d)?(i=this.minHandleElement.position-f,e=f+this.handleHalfDimension):(i=f-this.minHandleElement.position,e=this.minHandleElement.position+this.handleHalfDimension)}if(this.selectionBarElement.setDimension(i),this.selectionBarElement.setPosition(e),this.range&&this.viewOptions.showOuterSelectionBars&&(this.viewOptions.rightToLeft?(this.rightOuterSelectionBarElement.setDimension(e),this.rightOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.leftOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(e+i)),this.leftOuterSelectionBarElement.setPosition(e+i)):(this.leftOuterSelectionBarElement.setDimension(e),this.leftOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.rightOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(e+i)),this.rightOuterSelectionBarElement.setPosition(e+i))),qe.isNullOrUndefined(this.viewOptions.getSelectionBarColor)){if(!qe.isNullOrUndefined(this.viewOptions.selectionBarGradient)){const d=qe.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)?0:this.valueToPosition(this.viewOptions.showSelectionBarFromValue),f=d-e>0&&!o||d-e<=0&&o;this.barStyle={backgroundImage:"linear-gradient(to "+(this.viewOptions.vertical?f?"bottom":"top":f?"left":"right")+", "+this.viewOptions.selectionBarGradient.from+" 0%,"+this.viewOptions.selectionBarGradient.to+" 100%)"},this.viewOptions.vertical?(this.barStyle.backgroundPosition="center "+(d+i+e+(f?-this.handleHalfDimension:0))+"px",this.barStyle.backgroundSize="100% "+(this.fullBarElement.dimension-this.handleHalfDimension)+"px"):(this.barStyle.backgroundPosition=d-e+(f?this.handleHalfDimension:0)+"px center",this.barStyle.backgroundSize=this.fullBarElement.dimension-this.handleHalfDimension+"px 100%")}}else{const d=this.getSelectionBarColor();this.barStyle={backgroundColor:d}}}getSelectionBarColor(){return this.range?this.viewOptions.getSelectionBarColor(this.value,this.highValue):this.viewOptions.getSelectionBarColor(this.value)}getPointerColor(e){return this.viewOptions.getPointerColor(e===Ct.Max?this.highValue:this.value,e)}getTickColor(e){return this.viewOptions.getTickColor(e)}updateCombinedLabel(){let e=null;if(e=this.viewOptions.rightToLeft?this.minHandleLabelElement.position-this.minHandleLabelElement.dimension-10<=this.maxHandleLabelElement.position:this.minHandleLabelElement.position+this.minHandleLabelElement.dimension+10>=this.maxHandleLabelElement.position,e){const i=this.getDisplayValue(this.viewLowValue,Zo.Low),o=this.getDisplayValue(this.viewHighValue,Zo.High),s=this.viewOptions.rightToLeft?this.viewOptions.combineLabels(o,i):this.viewOptions.combineLabels(i,o);this.combinedLabelElement.setValue(s);const d=this.viewOptions.boundPointerLabels?Math.min(Math.max(this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2,0),this.fullBarElement.dimension-this.combinedLabelElement.dimension):this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2;this.combinedLabelElement.setPosition(d),this.minHandleLabelElement.hide(),this.maxHandleLabelElement.hide(),this.combinedLabelElement.show()}else this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.maxHandleLabelElement.show(),this.minHandleLabelElement.show(),this.combinedLabelElement.hide();this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}getDisplayValue(e,i){return!qe.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray&&(e=this.getStepValue(e)),this.viewOptions.translate(e,i)}roundStep(e,i){const o=qe.isNullOrUndefined(i)?this.viewOptions.step:i;let s=xo.roundToPrecisionLimit((e-this.viewOptions.floor)/o,this.viewOptions.precisionLimit);return s=Math.round(s)*o,xo.roundToPrecisionLimit(this.viewOptions.floor+s,this.viewOptions.precisionLimit)}valueToPosition(e){let i=qe.linearValueToPosition;qe.isNullOrUndefined(this.viewOptions.customValueToPosition)?this.viewOptions.logScale&&(i=qe.logValueToPosition):i=this.viewOptions.customValueToPosition;let o=i(e=xo.clampToRange(e,this.viewOptions.floor,this.viewOptions.ceil),this.viewOptions.floor,this.viewOptions.ceil);return qe.isNullOrUndefined(o)&&(o=0),this.viewOptions.rightToLeft&&(o=1-o),o*this.maxHandlePosition}positionToValue(e){let i=e/this.maxHandlePosition;this.viewOptions.rightToLeft&&(i=1-i);let o=qe.linearPositionToValue;qe.isNullOrUndefined(this.viewOptions.customPositionToValue)?this.viewOptions.logScale&&(o=qe.logPositionToValue):o=this.viewOptions.customPositionToValue;const s=o(i,this.viewOptions.floor,this.viewOptions.ceil);return qe.isNullOrUndefined(s)?0:s}getEventXY(e,i){if(e instanceof MouseEvent)return this.viewOptions.vertical||0!==this.viewOptions.rotate?e.clientY:e.clientX;let o=0;const s=e.touches;if(!qe.isNullOrUndefined(i))for(let d=0;d<s.length;d++)if(s[d].identifier===i){o=d;break}return this.viewOptions.vertical||0!==this.viewOptions.rotate?s[o].clientY:s[o].clientX}getEventPosition(e,i){const o=this.elementRef.nativeElement.getBoundingClientRect(),s=this.viewOptions.vertical||0!==this.viewOptions.rotate?o.bottom:o.left;let d=0;return d=this.viewOptions.vertical||0!==this.viewOptions.rotate?-this.getEventXY(e,i)+s:this.getEventXY(e,i)-s,d*this.viewOptions.scale-this.handleHalfDimension}getNearestHandle(e){if(!this.range)return Ct.Min;const i=this.getEventPosition(e),o=Math.abs(i-this.minHandleElement.position),s=Math.abs(i-this.maxHandleElement.position);return o<s?Ct.Min:o>s?Ct.Max:this.viewOptions.rightToLeft?i>this.minHandleElement.position?Ct.Min:Ct.Max:i<this.minHandleElement.position?Ct.Min:Ct.Max}bindEvents(){const e=this.viewOptions.draggableRange;this.viewOptions.onlyBindHandles||this.selectionBarElement.on("mousedown",i=>this.onBarStart(null,e,i,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.on("mousedown",i=>this.onBarStart(Ct.Min,e,i,!0,!0)),this.maxHandleElement.on("mousedown",i=>this.onBarStart(Ct.Max,e,i,!0,!0))):(this.minHandleElement.on("mousedown",i=>this.onStart(Ct.Min,i,!0,!0)),this.range&&this.maxHandleElement.on("mousedown",i=>this.onStart(Ct.Max,i,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.on("mousedown",i=>this.onStart(null,i,!0,!0,!0)),this.ticksElement.on("mousedown",i=>this.onStart(null,i,!0,!0,!0,!0)))),this.viewOptions.onlyBindHandles||this.selectionBarElement.onPassive("touchstart",i=>this.onBarStart(null,e,i,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.onPassive("touchstart",i=>this.onBarStart(Ct.Min,e,i,!0,!0)),this.maxHandleElement.onPassive("touchstart",i=>this.onBarStart(Ct.Max,e,i,!0,!0))):(this.minHandleElement.onPassive("touchstart",i=>this.onStart(Ct.Min,i,!0,!0)),this.range&&this.maxHandleElement.onPassive("touchstart",i=>this.onStart(Ct.Max,i,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.onPassive("touchstart",i=>this.onStart(null,i,!0,!0,!0)),this.ticksElement.onPassive("touchstart",i=>this.onStart(null,i,!1,!1,!0,!0)))),this.viewOptions.keyboardSupport&&(this.minHandleElement.on("focus",()=>this.onPointerFocus(Ct.Min)),this.range&&this.maxHandleElement.on("focus",()=>this.onPointerFocus(Ct.Max)))}getOptionsInfluencingEventBindings(e){return[e.disabled,e.readOnly,e.draggableRange,e.draggableRangeOnly,e.onlyBindHandles,e.keyboardSupport]}unbindEvents(){this.unsubscribeOnMove(),this.unsubscribeOnEnd();for(const e of this.getAllSliderElements())qe.isNullOrUndefined(e)||e.off()}onBarStart(e,i,o,s,d,f,_){i?this.onDragStart(e,o,s,d):this.onStart(e,o,s,d,f,_)}onStart(e,i,o,s,d,f){i.stopPropagation(),!du.isTouchEvent(i)&&!nO&&i.preventDefault(),this.moving=!1,this.calculateViewDimensions(),qe.isNullOrUndefined(e)&&(e=this.getNearestHandle(i)),this.currentTrackingPointer=e;const _=this.getPointerElement(e);if(_.active=!0,this.viewOptions.keyboardSupport&&_.focus(),o){this.unsubscribeOnMove();const C=T=>this.dragging.active?this.onDragMove(T):this.onMove(T);this.onMoveEventListener=du.isTouchEvent(i)?this.eventListenerHelper.attachPassiveEventListener(document,"touchmove",C):this.eventListenerHelper.attachEventListener(document,"mousemove",C)}if(s){this.unsubscribeOnEnd();const C=T=>this.onEnd(T);this.onEndEventListener=du.isTouchEvent(i)?this.eventListenerHelper.attachPassiveEventListener(document,"touchend",C):this.eventListenerHelper.attachEventListener(document,"mouseup",C)}this.userChangeStart.emit(this.getChangeContext()),du.isTouchEvent(i)&&!qe.isNullOrUndefined(i.changedTouches)&&qe.isNullOrUndefined(this.touchId)&&(this.touchId=i.changedTouches[0].identifier),d&&this.onMove(i,!0),f&&this.onEnd(i)}onMove(e,i){let o=null;if(du.isTouchEvent(e)){const C=e.changedTouches;for(let T=0;T<C.length;T++)if(C[T].identifier===this.touchId){o=C[T];break}if(qe.isNullOrUndefined(o))return}this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;const s=qe.isNullOrUndefined(o)?this.getEventPosition(e):this.getEventPosition(e,o.identifier);let d;s<=0?d=this.viewOptions.rightToLeft?this.viewOptions.ceil:this.viewOptions.floor:s>=this.maxHandlePosition?d=this.viewOptions.rightToLeft?this.viewOptions.floor:this.viewOptions.ceil:(d=this.positionToValue(s),d=i&&!qe.isNullOrUndefined(this.viewOptions.tickStep)?this.roundStep(d,this.viewOptions.tickStep):this.roundStep(d)),this.positionTrackingHandle(d)}onEnd(e){du.isTouchEvent(e)&&e.changedTouches[0].identifier!==this.touchId||(this.moving=!1,this.viewOptions.animate&&(this.sliderElementAnimateClass=!0),this.touchId=null,this.viewOptions.keyboardSupport||(this.minHandleElement.active=!1,this.maxHandleElement.active=!1,this.currentTrackingPointer=null),this.dragging.active=!1,this.unsubscribeOnMove(),this.unsubscribeOnEnd(),this.userChangeEnd.emit(this.getChangeContext()))}onPointerFocus(e){const i=this.getPointerElement(e);i.on("blur",()=>this.onPointerBlur(i)),i.on("keydown",o=>this.onKeyboardEvent(o)),i.on("keyup",()=>this.onKeyUp()),i.active=!0,this.currentTrackingPointer=e,this.currentFocusPointer=e,this.firstKeyDown=!0}onKeyUp(){this.firstKeyDown=!0,this.userChangeEnd.emit(this.getChangeContext())}onPointerBlur(e){e.off("blur"),e.off("keydown"),e.off("keyup"),e.active=!1,qe.isNullOrUndefined(this.touchId)&&(this.currentTrackingPointer=null,this.currentFocusPointer=null)}getKeyActions(e){const i=this.viewOptions.ceil-this.viewOptions.floor;let o=e+this.viewOptions.step,s=e-this.viewOptions.step,d=e+i/10,f=e-i/10;this.viewOptions.reversedControls&&(o=e-this.viewOptions.step,s=e+this.viewOptions.step,d=e-i/10,f=e+i/10);const _={UP:o,DOWN:s,LEFT:s,RIGHT:o,PAGEUP:d,PAGEDOWN:f,HOME:this.viewOptions.reversedControls?this.viewOptions.ceil:this.viewOptions.floor,END:this.viewOptions.reversedControls?this.viewOptions.floor:this.viewOptions.ceil};return this.viewOptions.rightToLeft&&(_.LEFT=o,_.RIGHT=s,(this.viewOptions.vertical||0!==this.viewOptions.rotate)&&(_.UP=s,_.DOWN=o)),_}onKeyboardEvent(e){const i=this.getCurrentTrackingValue(),o=qe.isNullOrUndefined(e.keyCode)?e.which:e.keyCode,_=this.getKeyActions(i)[{38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"}[o]];if(qe.isNullOrUndefined(_)||qe.isNullOrUndefined(this.currentTrackingPointer))return;e.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.userChangeStart.emit(this.getChangeContext()));const C=xo.clampToRange(_,this.viewOptions.floor,this.viewOptions.ceil),T=this.roundStep(C);if(this.viewOptions.draggableRangeOnly){const P=this.viewHighValue-this.viewLowValue;let z,G;this.currentTrackingPointer===Ct.Min?(z=T,G=T+P,G>this.viewOptions.ceil&&(G=this.viewOptions.ceil,z=G-P)):this.currentTrackingPointer===Ct.Max&&(G=T,z=T-P,z<this.viewOptions.floor&&(z=this.viewOptions.floor,G=z+P)),this.positionTrackingBar(z,G)}else this.positionTrackingHandle(T)}onDragStart(e,i,o,s){const d=this.getEventPosition(i);this.dragging=new cO,this.dragging.active=!0,this.dragging.value=this.positionToValue(d),this.dragging.difference=this.viewHighValue-this.viewLowValue,this.dragging.lowLimit=this.viewOptions.rightToLeft?this.minHandleElement.position-d:d-this.minHandleElement.position,this.dragging.highLimit=this.viewOptions.rightToLeft?d-this.maxHandleElement.position:this.maxHandleElement.position-d,this.onStart(e,i,o,s)}getMinValue(e,i,o){const s=this.viewOptions.rightToLeft;let d=null;return d=i?o?s?this.viewOptions.floor:this.viewOptions.ceil-this.dragging.difference:s?this.viewOptions.ceil-this.dragging.difference:this.viewOptions.floor:this.positionToValue(s?e+this.dragging.lowLimit:e-this.dragging.lowLimit),this.roundStep(d)}getMaxValue(e,i,o){const s=this.viewOptions.rightToLeft;let d=null;return d=i?o?s?this.viewOptions.floor+this.dragging.difference:this.viewOptions.ceil:s?this.viewOptions.ceil:this.viewOptions.floor+this.dragging.difference:s?this.positionToValue(e+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(e-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(d)}onDragMove(e){const i=this.getEventPosition(e);let o,s,d,f;this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0,this.viewOptions.rightToLeft?(o=this.dragging.lowLimit,s=this.dragging.highLimit,d=this.maxHandleElement,f=this.minHandleElement):(o=this.dragging.highLimit,s=this.dragging.lowLimit,d=this.minHandleElement,f=this.maxHandleElement);const C=i>=this.maxHandlePosition-o;let T,P;if(i<=s){if(0===d.position)return;T=this.getMinValue(i,!0,!1),P=this.getMaxValue(i,!0,!1)}else if(C){if(f.position===this.maxHandlePosition)return;P=this.getMaxValue(i,!0,!0),T=this.getMinValue(i,!0,!0)}else T=this.getMinValue(i,!1,!1),P=this.getMaxValue(i,!1,!1);this.positionTrackingBar(T,P)}positionTrackingBar(e,i){!qe.isNullOrUndefined(this.viewOptions.minLimit)&&e<this.viewOptions.minLimit&&(i=xo.roundToPrecisionLimit((e=this.viewOptions.minLimit)+this.dragging.difference,this.viewOptions.precisionLimit)),!qe.isNullOrUndefined(this.viewOptions.maxLimit)&&i>this.viewOptions.maxLimit&&(e=xo.roundToPrecisionLimit((i=this.viewOptions.maxLimit)-this.dragging.difference,this.viewOptions.precisionLimit)),this.viewLowValue=e,this.viewHighValue=i,this.applyViewChange(),this.updateHandles(Ct.Min,this.valueToPosition(e)),this.updateHandles(Ct.Max,this.valueToPosition(i))}positionTrackingHandle(e){e=this.applyMinMaxLimit(e),this.range&&(this.viewOptions.pushRange?e=this.applyPushRange(e):(this.viewOptions.noSwitching&&(this.currentTrackingPointer===Ct.Min&&e>this.viewHighValue?e=this.applyMinMaxRange(this.viewHighValue):this.currentTrackingPointer===Ct.Max&&e<this.viewLowValue&&(e=this.applyMinMaxRange(this.viewLowValue))),e=this.applyMinMaxRange(e),this.currentTrackingPointer===Ct.Min&&e>this.viewHighValue?(this.viewLowValue=this.viewHighValue,this.applyViewChange(),this.updateHandles(Ct.Min,this.maxHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=Ct.Max,this.minHandleElement.active=!1,this.maxHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.maxHandleElement.focus()):this.currentTrackingPointer===Ct.Max&&e<this.viewLowValue&&(this.viewHighValue=this.viewLowValue,this.applyViewChange(),this.updateHandles(Ct.Max,this.minHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=Ct.Min,this.maxHandleElement.active=!1,this.minHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.minHandleElement.focus()))),this.getCurrentTrackingValue()!==e&&(this.currentTrackingPointer===Ct.Min?(this.viewLowValue=e,this.applyViewChange()):this.currentTrackingPointer===Ct.Max&&(this.viewHighValue=e,this.applyViewChange()),this.updateHandles(this.currentTrackingPointer,this.valueToPosition(e)),this.updateAriaAttributes())}applyMinMaxLimit(e){return!qe.isNullOrUndefined(this.viewOptions.minLimit)&&e<this.viewOptions.minLimit?this.viewOptions.minLimit:!qe.isNullOrUndefined(this.viewOptions.maxLimit)&&e>this.viewOptions.maxLimit?this.viewOptions.maxLimit:e}applyMinMaxRange(e){const o=Math.abs(e-(this.currentTrackingPointer===Ct.Min?this.viewHighValue:this.viewLowValue));if(!qe.isNullOrUndefined(this.viewOptions.minRange)&&o<this.viewOptions.minRange){if(this.currentTrackingPointer===Ct.Min)return xo.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.minRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===Ct.Max)return xo.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.minRange,this.viewOptions.precisionLimit)}if(!qe.isNullOrUndefined(this.viewOptions.maxRange)&&o>this.viewOptions.maxRange){if(this.currentTrackingPointer===Ct.Min)return xo.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.maxRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===Ct.Max)return xo.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.maxRange,this.viewOptions.precisionLimit)}return e}applyPushRange(e){const i=this.currentTrackingPointer===Ct.Min?this.viewHighValue-e:e-this.viewLowValue,o=qe.isNullOrUndefined(this.viewOptions.minRange)?this.viewOptions.step:this.viewOptions.minRange,s=this.viewOptions.maxRange;return i<o?(this.currentTrackingPointer===Ct.Min?(this.viewHighValue=xo.roundToPrecisionLimit(Math.min(e+o,this.viewOptions.ceil),this.viewOptions.precisionLimit),e=xo.roundToPrecisionLimit(this.viewHighValue-o,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Ct.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===Ct.Max&&(this.viewLowValue=xo.roundToPrecisionLimit(Math.max(e-o,this.viewOptions.floor),this.viewOptions.precisionLimit),e=xo.roundToPrecisionLimit(this.viewLowValue+o,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Ct.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()):!qe.isNullOrUndefined(s)&&i>s&&(this.currentTrackingPointer===Ct.Min?(this.viewHighValue=xo.roundToPrecisionLimit(e+s,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Ct.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===Ct.Max&&(this.viewLowValue=xo.roundToPrecisionLimit(e-s,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Ct.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()),e}getChangeContext(){const e=new uW;return e.pointerType=this.currentTrackingPointer,e.value=+this.value,this.range&&(e.highValue=+this.highValue),e}}return t.\u0275fac=function(e){return new(e||t)(J(lo),J(qt),J(ko),J(_n))},t.\u0275cmp=Wt({type:t,selectors:[["ngx-slider"]],contentQueries:function(e,i,o){if(1&e&&Sn(o,jG,5),2&e){let s;Et(s=St())&&(i.tooltipTemplate=s.first)}},viewQuery:function(e,i){if(1&e&&(gi($G,5,uu),gi(GG,5,uu),gi(WG,5,uu),gi(qG,5,uu),gi(ZG,5,Qw),gi(KG,5,Qw),gi(YG,5,Bf),gi(QG,5,Bf),gi(XG,5,Bf),gi(JG,5,Bf),gi(eW,5,Bf),gi(tW,5,uu)),2&e){let o;Et(o=St())&&(i.leftOuterSelectionBarElement=o.first),Et(o=St())&&(i.rightOuterSelectionBarElement=o.first),Et(o=St())&&(i.fullBarElement=o.first),Et(o=St())&&(i.selectionBarElement=o.first),Et(o=St())&&(i.minHandleElement=o.first),Et(o=St())&&(i.maxHandleElement=o.first),Et(o=St())&&(i.floorLabelElement=o.first),Et(o=St())&&(i.ceilLabelElement=o.first),Et(o=St())&&(i.minHandleLabelElement=o.first),Et(o=St())&&(i.maxHandleLabelElement=o.first),Et(o=St())&&(i.combinedLabelElement=o.first),Et(o=St())&&(i.ticksElement=o.first)}},hostAttrs:[1,"ngx-slider"],hostVars:8,hostBindings:function(e,i){1&e&&Xe("resize",function(s){return i.onResize(s)},0,ky),2&e&&(an("disabled",i.sliderElementDisabledAttr)("aria-label",i.sliderElementAriaLabel),ut("vertical",i.sliderElementVerticalClass)("animate",i.sliderElementAnimateClass)("with-legend",i.sliderElementWithLegendClass))},inputs:{value:"value",highValue:"highValue",options:"options",manualRefresh:"manualRefresh",triggerFocus:"triggerFocus"},outputs:{valueChange:"valueChange",highValueChange:"highValueChange",userChangeStart:"userChangeStart",userChange:"userChange",userChangeEnd:"userChangeEnd"},features:[jn([pW]),Mn],decls:29,vars:13,consts:[["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-left-out-selection"],["leftOuterSelectionBar",""],[1,"ngx-slider-span","ngx-slider-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-right-out-selection"],["rightOuterSelectionBar",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-full-bar"],["fullBar",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-selection-bar"],["selectionBar",""],[1,"ngx-slider-span","ngx-slider-bar","ngx-slider-selection",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-min",3,"ngStyle"],["minHandle",""],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-max",3,"ngStyle"],["maxHandle",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-floor"],["floorLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-ceil"],["ceilLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-value"],["minHandleLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-high"],["maxHandleLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-combined"],["combinedLabel",""],["ngxSliderElement","",1,"ngx-slider-ticks",3,"hidden"],["ticksElement",""],["class","ngx-slider-tick",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"ngx-slider-tick",3,"ngClass","ngStyle"],[3,"template","tooltip","placement"],["class","ngx-slider-span ngx-slider-tick-value",3,"template","tooltip","placement","content",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerHTML",4,"ngIf"],[1,"ngx-slider-span","ngx-slider-tick-value",3,"template","tooltip","placement","content"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerHTML"]],template:function(e,i){1&e&&(W(0,"span",0,1),lt(2,"span",2),Y(),W(3,"span",3,4),lt(5,"span",2),Y(),W(6,"span",5,6),lt(8,"span",2),Y(),W(9,"span",7,8),lt(11,"span",9),Y(),lt(12,"span",10,11)(14,"span",12,13)(16,"span",14,15)(18,"span",16,17)(20,"span",18,19)(22,"span",20,21)(24,"span",22,23),W(26,"span",24,25),Ee(28,rW,4,9,"span",26),Y()),2&e&&(ne(6),ut("ngx-slider-transparent",i.fullBarTransparentClass),ne(3),ut("ngx-slider-draggable",i.selectionBarDraggableClass),ne(2),me("ngStyle",i.barStyle),ne(1),me("ngStyle",i.minPointerStyle),ne(2),$d("display",i.range?"inherit":"none"),me("ngStyle",i.maxPointerStyle),ne(12),ut("ngx-slider-ticks-values-under",i.ticksUnderValuesClass),me("hidden",!i.showTicks),ne(2),me("ngForOf",i.ticks))},dependencies:function(){return[qd,Mr,Pi,OT,uu,Qw,Bf,mW]},styles:[".ngx-slider{display:inline-block;position:relative;height:4px;width:100%;margin:35px 0 15px;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;touch-action:pan-y}  .ngx-slider.with-legend{margin-bottom:40px}  .ngx-slider[disabled]{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-pointer{cursor:not-allowed;background-color:#d8e0f3}  .ngx-slider[disabled] .ngx-slider-draggable{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-selection{background:#8b91a2}  .ngx-slider[disabled] .ngx-slider-tick{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-tick.ngx-slider-selected{background:#8b91a2}  .ngx-slider .ngx-slider-span{white-space:nowrap;position:absolute;display:inline-block}  .ngx-slider .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider .ngx-slider-bar-wrapper{left:0;box-sizing:border-box;margin-top:-16px;padding-top:16px;width:100%;height:32px;z-index:1}  .ngx-slider .ngx-slider-draggable{cursor:move}  .ngx-slider .ngx-slider-bar{left:0;width:100%;height:4px;z-index:1;background:#d8e0f3;border-radius:2px}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-transparent .ngx-slider-bar{background:0 0}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-left-out-selection .ngx-slider-bar{background:#df002d}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-right-out-selection .ngx-slider-bar{background:#03a688}  .ngx-slider .ngx-slider-selection{z-index:2;background:#0db9f0;border-radius:2px}  .ngx-slider .ngx-slider-pointer{cursor:pointer;width:32px;height:32px;top:-14px;background-color:#0db9f0;z-index:3;border-radius:16px}  .ngx-slider .ngx-slider-pointer:after{content:'';width:8px;height:8px;position:absolute;top:12px;left:12px;border-radius:4px;background:#fff}  .ngx-slider .ngx-slider-pointer:hover:after{background-color:#fff}  .ngx-slider .ngx-slider-pointer.ngx-slider-active{z-index:4}  .ngx-slider .ngx-slider-pointer.ngx-slider-active:after{background-color:#451aff}  .ngx-slider .ngx-slider-bubble{cursor:default;bottom:16px;padding:1px 3px;color:#55637d;font-size:16px}  .ngx-slider .ngx-slider-bubble.ngx-slider-limit{color:#55637d}  .ngx-slider .ngx-slider-ticks{box-sizing:border-box;width:100%;height:0;position:absolute;left:0;top:-3px;margin:0;z-index:1;list-style:none}  .ngx-slider .ngx-slider-ticks-values-under .ngx-slider-tick-value{top:auto;bottom:-36px}  .ngx-slider .ngx-slider-tick{text-align:center;cursor:pointer;width:10px;height:10px;background:#d8e0f3;border-radius:50%;position:absolute;top:0;left:0;margin-left:11px}  .ngx-slider .ngx-slider-tick.ngx-slider-selected{background:#0db9f0}  .ngx-slider .ngx-slider-tick-value{position:absolute;top:-34px;-webkit-transform:translate(-50%,0);transform:translate(-50%,0)}  .ngx-slider .ngx-slider-tick-legend{position:absolute;top:24px;-webkit-transform:translate(-50%,0);transform:translate(-50%,0);max-width:50px;white-space:normal}  .ngx-slider.vertical{position:relative;width:4px;height:100%;margin:0 20px;padding:0;vertical-align:baseline;touch-action:pan-x}  .ngx-slider.vertical .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider.vertical .ngx-slider-bar-wrapper{top:auto;left:0;margin:0 0 0 -16px;padding:0 0 0 16px;height:100%;width:32px}  .ngx-slider.vertical .ngx-slider-bar{bottom:0;left:auto;width:4px;height:100%}  .ngx-slider.vertical .ngx-slider-pointer{left:-14px!important;top:auto;bottom:0}  .ngx-slider.vertical .ngx-slider-bubble{left:16px!important;bottom:0}  .ngx-slider.vertical .ngx-slider-ticks{height:100%;width:0;left:-3px;top:0;z-index:1}  .ngx-slider.vertical .ngx-slider-tick{vertical-align:middle;margin-left:auto;margin-top:11px}  .ngx-slider.vertical .ngx-slider-tick-value{left:24px;top:auto;-webkit-transform:translate(0,-28%);transform:translate(0,-28%)}  .ngx-slider.vertical .ngx-slider-tick-legend{top:auto;right:24px;-webkit-transform:translate(0,-28%);transform:translate(0,-28%);max-width:none;white-space:nowrap}  .ngx-slider.vertical .ngx-slider-ticks-values-under .ngx-slider-tick-value{bottom:auto;left:auto;right:24px}  .ngx-slider *{transition:none}  .ngx-slider.animate .ngx-slider-bar-wrapper{transition:.3s linear}  .ngx-slider.animate .ngx-slider-selection{transition:background-color .3s linear}  .ngx-slider.animate .ngx-slider-pointer{transition:.3s linear}  .ngx-slider.animate .ngx-slider-pointer:after{transition:.3s linear}  .ngx-slider.animate .ngx-slider-bubble{transition:.3s linear}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-limit{transition:opacity .3s linear}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-combined{transition:opacity .3s linear}  .ngx-slider.animate .ngx-slider-tick{transition:background-color .3s linear}"]}),t})(),mW=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Wt({type:t,selectors:[["ngx-slider-tooltip-wrapper"]],inputs:{template:"template",tooltip:"tooltip",placement:"placement",content:"content"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ngx-slider-inner-tooltip"]],template:function(e,i){1&e&&(Ee(0,cW,2,6,"ng-container",0),Ee(1,dW,3,3,"ng-container",0)),2&e&&(me("ngIf",i.template),ne(1),me("ngIf",!i.template))},dependencies:[Pi,Qs],styles:[".ngx-slider-inner-tooltip[_ngcontent-%COMP%]{height:100%}"]}),t})(),vq=(()=>{class t{constructor(){this.sidebarState=new Ht,this.textColor=new Ht,this.backgroundColor=new Ht}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),fO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({providers:[vq],imports:[Ut,Hg]}),t})();function Tl(t){return null!=t&&"false"!=`${t}`}function mO(t){return Array.isArray(t)?t:[t]}try{eC=typeof Intl<"u"&&Intl.v8BreakIterator}catch{eC=!1}let tC=(()=>{class t{constructor(e){this._platformId=e,this.isBrowser=this._platformId?ix(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!eC)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(Le(rf))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Pq=(()=>{class t{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Rq=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({providers:[Pq]}),t})();const _O=new Set;let Vf,Nq=(()=>{class t{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Lq}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function Fq(t){if(!_O.has(t))try{Vf||(Vf=document.createElement("style"),Vf.setAttribute("type","text/css"),document.head.appendChild(Vf)),Vf.sheet&&(Vf.sheet.insertRule(`@media ${t} {body{ }}`,0),_O.add(t))}catch(n){console.error(n)}}(e),this._matchMedia(e)}}return t.\u0275fac=function(e){return new(e||t)(Le(tC))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Lq(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let Bq=(()=>{class t{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new Ht}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return vO(mO(e)).some(o=>this._registerQuery(o).mql.matches)}observe(e){let s=Eg(vO(mO(e)).map(d=>this._registerQuery(d).observable));return s=ff(s.pipe(Qi(1)),s.pipe(tk(1),PA(0))),s.pipe(ke(d=>{const f={matches:!1,breakpoints:{}};return d.forEach(({matches:_,query:C})=>{f.matches=f.matches||_,f.breakpoints[C]=_}),f}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),s={observable:new cn(d=>{const f=_=>this._zone.run(()=>d.next(_));return i.addListener(f),()=>{i.removeListener(f)}}).pipe(mf(i),ke(({matches:d})=>({query:e,matches:d})),bi(this._destroySubject)),mql:i};return this._queries.set(e,s),s}}return t.\u0275fac=function(e){return new(e||t)(Le(Nq),Le(_n))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function vO(t){return t.map(n=>n.split(",")).reduce((n,e)=>n.concat(e)).map(n=>n.trim())}let Uq=(()=>{class t{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function jq(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function Hq(t){try{return t.frameElement}catch{return null}}(function Qq(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(e));if(i&&(-1===CO(i)||!this.isVisible(i)))return!1;let o=e.nodeName.toLowerCase(),s=CO(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===o||"object"===o||this._platform.WEBKIT&&this._platform.IOS&&!function Kq(t){let n=t.nodeName.toLowerCase(),e="input"===n&&t.type;return"text"===e||"password"===e||"select"===n||"textarea"===n}(e))&&("audio"===o?!!e.hasAttribute("controls")&&-1!==s:"video"===o?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function Yq(t){return!function Gq(t){return function qq(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function $q(t){let n=t.nodeName.toLowerCase();return"input"===n||"select"===n||"button"===n||"textarea"===n}(t)||function Wq(t){return function Zq(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||wO(t))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}}return t.\u0275fac=function(e){return new(e||t)(Le(tC))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function wO(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let n=t.getAttribute("tabindex");return!(!n||isNaN(parseInt(n,10)))}function CO(t){if(!wO(t))return null;const n=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}class Xq{get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}constructor(n,e,i,o,s=!1){this._element=n,this._checker=e,this._ngZone=i,this._document=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){const e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return"start"==n?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(n),!!i}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){const e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){const e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let i=0;i<e.length;i++){const o=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(o)return o}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let i=e.length-1;i>=0;i--){const o=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(o)return o}return null}_createAnchor(){const n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._ngZone.isStable?n():this._ngZone.onStable.pipe(Qi(1)).subscribe(n)}}let Jq=(()=>{class t{constructor(e,i,o){this._checker=e,this._ngZone=i,this._document=o}create(e,i=!1){return new Xq(e,this._checker,this._ngZone,this._document,i)}}return t.\u0275fac=function(e){return new(e||t)(Le(Uq),Le(_n),Le(Si))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),eZ=(()=>{class t{get enabled(){return this.focusTrap.enabled}set enabled(e){this.focusTrap.enabled=Tl(e)}get autoCapture(){return this._autoCapture}set autoCapture(e){this._autoCapture=Tl(e)}constructor(e,i,o){this._elementRef=e,this._focusTrapFactory=i,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(e){const i=e.autoCapture;i&&!i.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=function Tq(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const n=t.shadowRoot.activeElement;if(n===t)break;t=n}return t}(),this.focusTrap.focusInitialElementWhenReady()}}return t.\u0275fac=function(e){return new(e||t)(J(qt),J(Jq),J(Si))},t.\u0275dir=We({type:t,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[Mn]}),t})();const DO="cdk-high-contrast-black-on-white",EO="cdk-high-contrast-white-on-black",iC="cdk-high-contrast-active";let nZ=(()=>{class t{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=Qt(Bq).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,o=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(iC,DO,EO),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(iC,DO):2===i&&e.add(iC,EO)}}}return t.\u0275fac=function(e){return new(e||t)(Le(tC),Le(Si))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),iZ=(()=>{class t{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return t.\u0275fac=function(e){return new(e||t)(Le(nZ))},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[Rq]}),t})();const SO=["*"],sZ=["input"],aZ=function(t,n,e,i){return{"custom-control custom-checkbox":t,"form-check":n,"custom-control-inline":e,"form-check-inline":i}},lZ=function(t,n,e){return{"filled-in":t,"custom-control-input":n,"form-check-input":e}},cZ=function(t,n,e,i,o){return{"custom-control-label":t,"form-check-label":n,"label-before":e,"checkbox-rounded":i,disabled:o}};let kv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({}),t})(),Av=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[Ut]}),t})();const hZ={provide:$o,useExisting:Nt(()=>pZ),multi:!0};let pZ=(()=>{class t{constructor(){this.btnCheckboxTrue=!0,this.btnCheckboxFalse=!1,this.state=!1,this.onChange=Function.prototype,this.onTouched=Function.prototype}onClick(){this.isDisabled||(this.toggle(!this.state),this.onChange(this.value))}ngOnInit(){this.toggle(this.trueValue===this.value)}get trueValue(){return!(typeof this.btnCheckboxTrue<"u")||this.btnCheckboxTrue}get falseValue(){return typeof this.btnCheckboxFalse<"u"&&this.btnCheckboxFalse}toggle(e){this.state=e,this.value=this.state?this.trueValue:this.falseValue}writeValue(e){this.state=this.trueValue===e,this.value=e?this.trueValue:this.falseValue}setDisabledState(e){this.isDisabled=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=We({type:t,selectors:[["","mdbCheckbox",""]],hostVars:2,hostBindings:function(e,i){1&e&&Xe("click",function(){return i.onClick()}),2&e&&ut("active",i.state)},inputs:{btnCheckboxTrue:"btnCheckboxTrue",btnCheckboxFalse:"btnCheckboxFalse"},features:[jn([hZ])]}),t})();const fZ={provide:$o,useExisting:Nt(()=>mZ),multi:!0};let mZ=(()=>{class t{constructor(e,i){this.el=e,this.renderer=i,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.radioElementsArray=[],this._uncheckable=!1,this.disabled=!1}get uncheckable(){return this._uncheckable}set uncheckable(e){this._uncheckable=Tl(e)}get isActive(){return this.mdbRadio===this.value}onClick(e){if(!this.disabled){try{this.el.nativeElement.parentElement.childNodes.forEach(i=>{this.radioElementsArray.push(i)}),this.radioElementsArray.forEach(i=>{this.renderer.removeClass(i,"active")}),this.renderer.addClass(e.target,"active")}catch{}this.el.nativeElement.attributes.disabled||(this.value=this.uncheckable&&this.mdbRadio===this.value?void 0:this.mdbRadio,this.onTouched(),this.onChange(this.value))}}ngOnInit(){this.uncheckable=typeof this.uncheckable<"u"}onBlur(){this.onTouched()}writeValue(e){this.value=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}}return t.\u0275fac=function(e){return new(e||t)(J(qt),J(lo))},t.\u0275dir=We({type:t,selectors:[["","mdbRadio",""]],hostVars:4,hostBindings:function(e,i){1&e&&Xe("click",function(s){return i.onClick(s)}),2&e&&ut("disabled",i.disabled)("active",i.isActive)},inputs:{mdbRadio:"mdbRadio",uncheckable:"uncheckable",value:"value",disabled:"disabled"},features:[jn([fZ])]}),t})(),ub=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({}),t})(),Ov=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[Ut]}),t})();var hr=typeof window<"u"&&window||{},Hh=hr.document;function hb(){return"bs4"===hr.__theme}let gZ=(()=>{class t{constructor(){this.interval=5e3,this.noPause=!1,this.noWrap=!1,this.keyboard=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),Pv=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({providers:[gZ],imports:[Ut,ub]}),t})(),Rv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({}),t})();const xZ={provide:$o,useExisting:Nt(()=>DZ),multi:!0};let wZ=0;class CZ{}let DZ=(()=>{class t{constructor(e){this._cdRef=e,this.defaultId="mdb-checkbox-"+ ++wZ,this.checkboxId=this.defaultId,this._required=!1,this._checked=!1,this._filledIn=!1,this._indeterminate=!1,this._disabled=!1,this._rounded=!1,this.checkboxPosition="left",this._default=!1,this._inline=!1,this.change=new Me,this.checkboxClicked=new Ht,this.onChange=i=>{},this.onTouched=()=>{}}get required(){return this._required}set required(e){this._required=Tl(e)}get checked(){return this._checked}set checked(e){this._checked=Tl(e)}get filledIn(){return this._filledIn}set filledIn(e){this._filledIn=Tl(e)}get indeterminate(){return this._indeterminate}set indeterminate(e){this._indeterminate=Tl(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=Tl(e)}get rounded(){return this._rounded}set rounded(e){this._rounded=Tl(e)}get default(){return this._default}set default(e){this._default=Tl(e)}get inline(){return this._inline}set inline(e){this._inline=Tl(e)}get tabIndex(){return this._tabIndex}set tabIndex(e){this._tabIndex=function Cq(t,n=0){return function Dq(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):n}(e)}onLabelClick(e){e.stopPropagation(),this.checkboxClicked.next(!0)}onDocumentClick(){this.checkboxClicked.next(!1)}ngOnInit(){this.indeterminate&&!this.filledIn&&!this.rounded&&(this.inputEl.indeterminate=!0)}ngOnChanges(e){e.hasOwnProperty("checked")&&(this.checked=e.checked.currentValue)}get changeEvent(){const e=new CZ;return e.element=this,e.checked=this.checked,e}toggle(){this.disabled||(this.checked=!this.checked,this.indeterminate=!1,this.onChange(this.checked),this._cdRef.markForCheck())}onCheckboxClick(e){e.stopPropagation(),this.toggle()}onCheckboxChange(e){e.stopPropagation(),Gg(0).subscribe(()=>this.change.emit(this.changeEvent))}onBlur(){this.checkboxClicked.pipe(Qi(1)).subscribe(e=>{e||this.onTouched()})}writeValue(e){this.value=e,this.checked=!!e,this._cdRef.markForCheck()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}}return t.\u0275fac=function(e){return new(e||t)(J(ko))},t.\u0275cmp=Wt({type:t,selectors:[["mdb-checkbox"]],viewQuery:function(e,i){if(1&e&&gi(sZ,7),2&e){let o;Et(o=St())&&(i.inputEl=o.first)}},hostBindings:function(e,i){1&e&&Xe("click",function(s){return i.onLabelClick(s)})("click",function(){return i.onDocumentClick()},!1,RC)},inputs:{class:"class",checkboxId:"checkboxId",required:"required",name:"name",value:"value",checked:"checked",filledIn:"filledIn",indeterminate:"indeterminate",disabled:"disabled",rounded:"rounded",checkboxPosition:"checkboxPosition",default:"default",inline:"inline",tabIndex:"tabIndex"},outputs:{change:"change"},features:[jn([xZ]),Mn],ngContentSelectors:SO,decls:5,vars:27,consts:[[3,"ngClass"],["type","checkbox",1,"custom-control-input",3,"ngClass","id","checked","disabled","required","indeterminate","tabIndex","blur","click","change"],["input",""]],template:function(e,i){1&e&&(hl(),W(0,"div",0)(1,"input",1,2),Xe("blur",function(){return i.onBlur()})("click",function(s){return i.onCheckboxClick(s)})("change",function(s){return i.onCheckboxChange(s)}),Y(),W(3,"label",0),pl(4),Y()()),2&e&&(me("ngClass",U_(12,aZ,i.default,!i.default,i.inline,i.inline&&!i.default)),ne(1),me("ngClass",ef(17,lZ,i.filledIn||i.rounded,i.default,!i.default))("id",i.checkboxId)("checked",i.checked)("disabled",i.disabled)("required",i.required)("indeterminate",i.indeterminate)("tabIndex",i.tabIndex),an("name",i.name)("value",i.value),ne(2),me("ngClass",function tS(t,n,e,i,o,s,d,f){const _=ue()+t,C=m(),T=Ia(C,_,e,i,o,s);return Kr(C,_+4,d)||T?nc(C,_+5,f?n.call(f,e,i,o,s,d):n(e,i,o,s,d)):Ym(C,_+5)}(21,cZ,i.default,!i.default,"right"===i.checkboxPosition,i.rounded,i.disabled)),an("for",i.checkboxId))},dependencies:[qd],encapsulation:2,changeDetection:0}),t})(),Nv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[Ut,IM]}),t})(),Fv=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({}),t})(),EZ=(()=>{class t{constructor(){this.direction="down",this.isOpenChange=new Me,this.isDisabledChange=new Me,this.toggleClick=new Me,this.dropdownMenu=new Promise(e=>{this.resolveDropdownMenu=e})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),SZ=class{constructor(n,e){this.open=n,this.close=e||n}isManual(){return"manual"===this.open||"manual"===this.close}};const TZ={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};typeof window<"u"&&window,typeof console>"u"||console;class fb{constructor(n,e,i){this.nodes=n,this.viewRef=e,this.componentRef=i}}class PZ{constructor(n,e,i,o,s,d,f,_){this._viewContainerRef=n,this._renderer=e,this._elementRef=i,this._injector=o,this._componentFactoryResolver=s,this._ngZone=d,this._applicationRef=f,this._posService=_,this.onBeforeShow=new Me,this.onShown=new Me,this.onBeforeHide=new Me,this.onHidden=new Me,this.shown=new Me,this.hidden=new Me,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(n){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(n),this}to(n){return this.container=n||this.container,this}position(n){return this.attachment=n.attachment||this.attachment,this._elementRef=n.target||this._elementRef,this}provide(n){return this._providers.push(n),this}show(n={}){if(this._subscribePositioning(),this._innerComponent=null,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(n.content,n.data);const e=Zr.create({providers:this._providers,parent:this._injector});if(this._componentRef=this._componentFactory.create(e,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,n),this.container instanceof qt&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&typeof document<"u"){const i=document.querySelector(this.container)||document.querySelector(this.containerDefaultSelector);i&&i.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(){if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const n=this._componentRef.location.nativeElement;return n.parentNode.removeChild(n),this._contentRef.componentRef&&this._contentRef.componentRef.destroy(),this._componentRef.destroy(),this._viewContainerRef&&this._contentRef.viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._contentRef=null,this._componentRef=null,this._removeGlobalListener(),this.onHidden.emit(),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(n){this.triggers=n.triggers||this.triggers,this._listenOpts.outsideClick=n.outsideClick,this._listenOpts.outsideEsc=n.outsideEsc,n.target=n.target||this._elementRef.nativeElement;const e=this._listenOpts.hide=()=>n.hide?n.hide():void this.hide(),i=this._listenOpts.show=s=>{n.show?n.show(s):this.show(s),s()};return this._unregisterListenersFn=function IZ(t,n){const e=function kO(t,n=TZ){const e=(t||"").trim();if(0===e.length)return[];const i=e.split(/\s+/).map(s=>s.split(":")).map(s=>{const d=n[s[0]]||s;return new SZ(d[0],d[1])}),o=i.filter(s=>s.isManual());if(o.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===o.length&&i.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return i}(n.triggers),i=n.target;if(1===e.length&&e[0].isManual())return Function.prototype;const o=[],s=[],d=()=>{s.forEach(f=>o.push(f())),s.length=0};return e.forEach(f=>{const _=f.open===f.close,C=_?n.toggle:n.show;_||s.push(()=>t.listen(i,f.close,n.hide)),o.push(t.listen(i,f.open,()=>C(d)))}),()=>{o.forEach(f=>f())}}(this._renderer,{target:n.target,triggers:n.triggers,show:i,hide:e,toggle:s=>{this.isShown?e():i(s)}}),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=null)}attachInline(n,e){return this._inlineViewRef=n.createEmbeddedView(e),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts&&this._listenOpts.outsideClick){const n=this._componentRef.location.nativeElement;setTimeout(()=>{this._globalListener=function MZ(t,n){return n.outsideClick?t.listen("document","click",e=>{n.target&&n.target.contains(e.target)||n.targets&&n.targets.some(i=>i.contains(e.target))||n.hide()}):Function.prototype}(this._renderer,{targets:[n,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide()})})}this._listenOpts.outsideEsc&&(this._globalListener=function kZ(t,n){return n.outsideEsc?t.listen("document","keyup.esc",e=>{n.target&&n.target.contains(e.target)||n.targets&&n.targets.some(i=>i.contains(e.target))||n.hide()}):Function.prototype}(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{this._posService.position({element:this._componentRef.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{this._componentRef&&this._posService.calcPosition()}))}_unsubscribePositioning(){this._zoneSubscription&&(this._zoneSubscription.unsubscribe(),this._zoneSubscription=null)}_getContentRef(n,e){if(!n)return new fb([]);if(n instanceof Zt){if(this._viewContainerRef){const o=this._viewContainerRef.createEmbeddedView(n);return o.markForCheck(),new fb([o.rootNodes],o)}const i=n.createEmbeddedView({});return this._applicationRef.attachView(i),new fb([i.rootNodes],i)}if("function"==typeof n){const i=this._componentFactoryResolver.resolveComponentFactory(n),o=Zr.create({providers:this._providers,parent:this._injector}),s=i.create(o);return Object.assign(s.instance,e),this._applicationRef.attachView(s.hostView),new fb([[s.location.nativeElement]],s.hostView,s)}return new fb([[this._renderer.createText(`${n}`)]])}}function jh(t,n){if(1!==t.nodeType)return[];const i=t.ownerDocument.defaultView.getComputedStyle(t,null);return n?i[n]:i}function sC(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function aC(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}const{overflow:n,overflowX:e,overflowY:i}=jh(t);return/(auto|scroll|overlay)/.test(String(n)+String(i)+String(e))?t:aC(sC(t))}const OO=typeof window<"u"&&typeof document<"u",PO=OO&&!(!window.MSInputMethodContext||!document.documentMode),RO=OO&&!(!window.MSInputMethodContext||!/MSIE 10/.test(navigator.userAgent));function Uf(t){return 11===t?PO:10===t?RO:PO||RO}function lC(t){if(!t)return document.documentElement;const n=Uf(10)?document.body:null;let i,e=t.offsetParent||null;for(;e===n&&t.nextElementSibling&&"BODY"!==t.nodeName;)i=t.nextElementSibling,e=i.offsetParent;const o=e&&e.nodeName;return o&&"BODY"!==o&&"HTML"!==o?-1!==["TH","TD","TABLE"].indexOf(e.nodeName)&&"static"===jh(e,"position")?lC(e):e:i?i.ownerDocument.documentElement:document.documentElement}function cC(t){return null!==t.parentNode?cC(t.parentNode):t}function Lv(t,n){if(!(t&&t.nodeType&&n&&n.nodeType))return document.documentElement;const e=t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_FOLLOWING,i=e?t:n,o=e?n:t,s=document.createRange();s.setStart(i,0),s.setEnd(o,0);const{commonAncestorContainer:d}=s;if(t!==d&&n!==d||i.contains(o))return function RZ(t){const{nodeName:n}=t;return"BODY"!==n&&("HTML"===n||lC(t.firstElementChild)===t)}(d)?d:lC(d);const f=cC(t);return f.host?Lv(f.host,n):Lv(t,cC(n).host)}function NO(t,n){const e="x"===n?"Left":"Top",i="Left"===e?"Right":"Bottom";return parseFloat(t[`border${e}Width`])+parseFloat(t[`border${i}Width`])}function FO(t,n,e,i){return Math.max(n[`offset${t}`],n[`scroll${t}`],e[`client${t}`],e[`offset${t}`],e[`scroll${t}`],Uf(10)?parseInt(e[`offset${t}`],10)+parseInt(i["margin"+("Height"===t?"Top":"Left")],10)+parseInt(i["margin"+("Height"===t?"Bottom":"Right")],10):0)}function LO(t){const n=t.body,e=t.documentElement,i=Uf(10)&&getComputedStyle(e);return{height:FO("Height",n,e,i),width:FO("Width",n,e,i)}}function Hf(t,n="top"){const e="top"===n?"scrollTop":"scrollLeft",i=t.nodeName;return"BODY"===i||"HTML"===i?(t.ownerDocument.scrollingElement||t.ownerDocument.documentElement)[e]:t[e]}function mb(t){return{...t,right:t.left+t.width,bottom:t.top+t.height}}function BO(t){let n={};try{if(Uf(10)){n=t.getBoundingClientRect();const _=Hf(t,"top"),C=Hf(t,"left");n.top+=_,n.left+=C,n.bottom+=_,n.right+=C}else n=t.getBoundingClientRect()}catch{return}const e={left:n.left,top:n.top,width:n.right-n.left,height:n.bottom-n.top},i="HTML"===t.nodeName?LO(t.ownerDocument):{};let d=t.offsetWidth-(i.width||t.clientWidth||e.right-e.left),f=t.offsetHeight-(i.height||t.clientHeight||e.bottom-e.top);if(d||f){const _=jh(t);d-=NO(_,"x"),f-=NO(_,"y"),e.width-=d,e.height-=f}return mb(e)}function dC(t,n,e=!1){const i=Uf(10),o="HTML"===n.nodeName,s=BO(t),d=BO(n),f=aC(t),_=jh(n),C=parseFloat(_.borderTopWidth),T=parseFloat(_.borderLeftWidth);e&&o&&(d.top=Math.max(d.top,0),d.left=Math.max(d.left,0));let P=mb({top:s.top-d.top-C,left:s.left-d.left-T,width:s.width,height:s.height});if(P.marginTop=0,P.marginLeft=0,!i&&o){const z=parseFloat(_.marginTop),G=parseFloat(_.marginLeft);P.top-=C-z,P.bottom-=C-z,P.left-=T-G,P.right-=T-G,P.marginTop=z,P.marginLeft=G}return(i&&!e?n.contains(f):n===f&&"BODY"!==f.nodeName)&&(P=function NZ(t,n,e=!1){const i=Hf(n,"top"),o=Hf(n,"left"),s=e?-1:1;return t.top+=i*s,t.bottom+=i*s,t.left+=o*s,t.right+=o*s,t}(P,n)),P}function zO(t){const n=t.nodeName;return"BODY"!==n&&"HTML"!==n&&("fixed"===jh(t,"position")||zO(sC(t)))}function VO(t){if(!t||!t.parentElement||Uf())return document.documentElement;let n=t.parentElement;for(;n&&"none"===jh(n,"transform");)n=n.parentElement;return n||document.documentElement}function uC(t,n,e=0,i,o=!1){let s={top:0,left:0};const d=o?VO(t):Lv(t,n);if("viewport"===i)s=function FZ(t,n=!1){const e=t.ownerDocument.documentElement,i=dC(t,e),o=Math.max(e.clientWidth,window.innerWidth||0),s=Math.max(e.clientHeight,window.innerHeight||0),d=n?0:Hf(e),f=n?0:Hf(e,"left");return mb({top:d-Number(i.top)+Number(i.marginTop),left:f-Number(i.left)+Number(i.marginLeft),width:o,height:s})}(d,o);else{let f;"scrollParent"===i?(f=aC(sC(n)),"BODY"===f.nodeName&&(f=t.ownerDocument.documentElement)):f="window"===i?t.ownerDocument.documentElement:i;const _=dC(f,d,o);if("HTML"!==f.nodeName||zO(d))s=_;else{const{height:C,width:T}=LO(t.ownerDocument);s.top+=_.top-_.marginTop,s.bottom=Number(C)+Number(_.top),s.left+=_.left-_.marginLeft,s.right=Number(T)+Number(_.left)}}return s.left+=e,s.top+=e,s.right-=e,s.bottom-=e,s}function LZ({width:t,height:n}){return t*n}function hC(t,n,e,i,o=["top","left","bottom","right"],s="viewport",d=0){if(-1===t.indexOf("auto"))return t;const f=uC(e,i,d,s),_={top:{width:f.width,height:n.top-f.top},right:{width:f.right-n.right,height:f.height},bottom:{width:f.width,height:f.bottom-n.bottom},left:{width:n.left-f.left,height:f.height}},C=Object.keys(_).map(G=>({key:G,..._[G],area:LZ(_[G])})).sort((G,ae)=>ae.area-G.area);let T=C.filter(({width:G,height:ae})=>G>=e.clientWidth&&ae>=e.clientHeight);T=o.reduce((G,ae)=>({...G,[ae]:T[ae]}),{});const P=T.length>0?T[0].key:C[0].key,z=t.split(" ")[1];return e.className=e.className.replace(/auto/g,P),P+(z?`-${z}`:"")}function UO(t){const e=t.ownerDocument.defaultView.getComputedStyle(t),i=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),o=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:Number(t.offsetWidth)+o,height:Number(t.offsetHeight)+i}}function HO(t,n,e=null){return dC(n,e?VO(t):Lv(t,n),e)}function pC(t,n,e){const i=e.split(" ")[0],o=UO(t),s={width:o.width,height:o.height},d=-1!==["right","left"].indexOf(i),f=d?"top":"left",_=d?"left":"top",C=d?"height":"width",T=d?"width":"height";return s[f]=n[f]+n[C]/2-o[C]/2,s[_]=i===_?n[_]-o[T]:n[function zZ(t){const n={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,e=>n[e])}(_)],s}function jO(t,n){return t&&t.modifiers&&t.modifiers[n]&&t.modifiers[n].enabled}function $O(t,n,e){Object.keys(n).forEach(i=>{let o="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&function UZ(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}(n[i])&&(o="px"),e?e.setStyle(t,i,`${String(n[i])}${o}`):t.style[i]=String(n[i])+o})}function jZ(t){let n=t.offsets.target;const e=t.instance.target.querySelector(".arrow");if(!e)return t;const i=-1!==["left","right"].indexOf(t.placement),o=i?"height":"width",s=i?"Top":"Left",d=s.toLowerCase(),f=i?"left":"top",_=i?"bottom":"right",C=UO(e)[o];t.offsets.host[_]-C<n[d]&&(n[d]-=n[d]-(t.offsets.host[_]-C)),Number(t.offsets.host[d])+Number(C)>n[_]&&(n[d]+=Number(t.offsets.host[d])+Number(C)-Number(n[_])),n=mb(n);const T=Number(t.offsets.host[d])+Number(t.offsets.host[o]/2-C/2),P=jh(t.instance.target),z=parseFloat(P[`margin${s}`]),G=parseFloat(P[`border${s}Width`]);let ae=T-n[d]-z-G;return ae=Math.max(Math.min(n[o]-C,ae),0),t.offsets.arrow={[d]:Math.round(ae),[f]:""},t.instance.arrow=e,t}function $Z(t){if(t.offsets.target=mb(t.offsets.target),!jO(t.options,"flip"))return t.offsets.target={...t.offsets.target,...pC(t.instance.target,t.offsets.host,t.placement)},t;const n=uC(t.instance.target,t.instance.host,0,"viewport",!1);let e=t.placement.split(" ")[0],i=t.placement.split(" ")[1]||"";const o=t.offsets.host,s=t.instance.target,d=t.instance.host,f=i?hC("auto",o,s,d,["top","bottom"]):hC("auto",o,s,d),_=[e,f];return _.forEach((C,T)=>{if(e!==C||_.length===T+1)return t;e=t.placement.split(" ")[0];const P="left"===e&&Math.floor(t.offsets.target.right)>Math.floor(t.offsets.host.left)||"right"===e&&Math.floor(t.offsets.target.left)<Math.floor(t.offsets.host.right)||"top"===e&&Math.floor(t.offsets.target.bottom)>Math.floor(t.offsets.host.top)||"bottom"===e&&Math.floor(t.offsets.target.top)<Math.floor(t.offsets.host.bottom),z=Math.floor(t.offsets.target.left)<Math.floor(n.left),G=Math.floor(t.offsets.target.right)>Math.floor(n.right),ae=Math.floor(t.offsets.target.top)<Math.floor(n.top),be=Math.floor(t.offsets.target.bottom)>Math.floor(n.bottom),Ce="left"===e&&z||"right"===e&&G||"top"===e&&ae||"bottom"===e&&be,Te=-1!==["top","bottom"].indexOf(e),$e=Te&&"left"===i&&z||Te&&"right"===i&&G||!Te&&"left"===i&&ae||!Te&&"right"===i&&be;(P||Ce||$e)&&((P||Ce)&&(e=_[T+1]),$e&&(i=function VZ(t){return"right"===t?"left":"left"===t?"right":t}(i)),t.placement=e+(i?` ${i}`:""),t.offsets.target={...t.offsets.target,...pC(t.instance.target,t.offsets.host,t.placement)})}),t}function WZ(t){if(!jO(t.options,"preventOverflow"))return t;const n="transform",e=t.instance.target.style,{top:i,left:o,[n]:s}=e;e.top="",e.left="",e[n]="";const d=uC(t.instance.target,t.instance.host,0,"scrollParent",!1);e.top=i,e.left=o,e[n]=s;const _={primary(T){let P=t.offsets.target[T];return t.offsets.target[T]<d[T]&&(P=Math.max(t.offsets.target[T],d[T])),{[T]:P}},secondary(T){const P="right"===T?"left":"top";let z=t.offsets.target[P];return t.offsets.target[T]>d[T]&&(z=Math.min(t.offsets.target[P],d[T]-("right"===T?t.offsets.target.width:t.offsets.target.height))),{[P]:z}}};let C;return["left","right","top","bottom"].forEach(T=>{C=-1!==["left","top"].indexOf(T)?"primary":"secondary",t.offsets.target={...t.offsets.target,..._[C](T)}}),t}function qZ(t){const n=t.placement,e=n.split(" ")[0],i=n.split(" ")[1];if(i){const{host:o,target:s}=t.offsets,d=-1!==["bottom","top"].indexOf(e),f=d?"left":"top",_=d?"width":"height";t.offsets.target={...s,...{left:{[f]:o[f]},right:{[f]:o[f]+o[_]-o[_]}}[i]}}return t}const KZ=new class ZZ{position(n,e){return this.offset(n,e)}offset(n,e){return HO(e,n)}positionElements(n,e,i,o,s){return[$Z,qZ,WZ,jZ].reduce((f,_)=>_(f),function GZ(t,n,e,i){const o=HO(t,n),s=!!e.match(/auto/g);let d=e.match(/auto\s(left|right|top|bottom)/g)?e.split(" ")[1]||"":e;const f=pC(t,o,d);return d=hC(d,o,t,n),{options:i,instance:{target:t,host:n,arrow:null},offsets:{target:f,host:o,arrow:null},positionFixed:!1,placement:d,placementAuto:s}}(e,n,i,s))}};let gb=(()=>{class t{constructor(e,i,o){this._ngZone=o,this.update$$=new Ht,this.positionElements=new Map,ix(i)&&this._ngZone.runOutsideAngular(()=>{Qr(Ji(window,"scroll"),Ji(window,"resize"),Ft(0,RA),this.update$$).subscribe(()=>{this.positionElements.forEach(s=>{!function YZ(t,n,e,i,o,s){!function HZ(t,n){const e=t.instance.target,i=function BZ(t){return{width:t.offsets.target.width,height:t.offsets.target.height,left:Math.floor(t.offsets.target.left),top:Math.round(t.offsets.target.top),bottom:Math.round(t.offsets.target.bottom),right:Math.floor(t.offsets.target.right)}}(t);$O(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${i.left}px, ${i.top}px, 0px)`},n),t.instance.arrow&&$O(t.instance.arrow,t.offsets.arrow,n),t.placementAuto&&(n?(n.setAttribute(e,"class",e.className.replace(/bs-popover-auto/g,`bs-popover-${t.placement}`)),n.setAttribute(e,"class",e.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${t.placement}`)),n.setAttribute(e,"class",e.className.replace(/\sauto/g,`s${t.placement}`)),e.className.match(/popover/g)&&n.addClass(e,"popover-auto"),e.className.match(/tooltip/g)&&n.addClass(e,"tooltip-auto")):(e.className=e.className.replace(/bs-popover-auto/g,`bs-popover-${t.placement}`),e.className=e.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${t.placement}`),e.className=e.className.replace(/\sauto/g,`s${t.placement}`),e.className.match(/popover/g)&&e.classList.add("popover-auto"),e.className.match(/tooltip/g)&&e.classList.add("tooltip-auto"))),n?n.setAttribute(e,"class",e.className.replace(/left|right|top|bottom/g,`${t.placement.split(" ")[0]}`)):e.className=e.className.replace(/left|right|top|bottom/g,`${t.placement.split(" ")[0]}`)}(KZ.positionElements(t,n,e,i,o),s)}(Bv(s.target),Bv(s.element),s.attachment,s.appendToBody,this.options,e.createRenderer(null,null))})})})}position(e){this.addPositionElement(e)}addPositionElement(e){this.positionElements.set(Bv(e.element),e)}calcPosition(){this.update$$.next()}deletePositionElement(e){this.positionElements.delete(Bv(e))}setOptions(e){this.options=e}}return t.\u0275fac=function(e){return new(e||t)(Le($m),Le(rf),Le(_n))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();function Bv(t){return t&&"string"==typeof t?document.querySelector(t):t instanceof qt?t.nativeElement:t}let bb=(()=>{class t{constructor(e,i,o,s,d){this._componentFactoryResolver=e,this._ngZone=i,this._injector=o,this._posService=s,this._applicationRef=d}createLoader(e,i,o){return new PZ(i,o,e,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService)}}return t.\u0275fac=function(e){return new(e||t)(Le(Rp),Le(_n),Le(Zr),Le(gb),Le(sf))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),QZ=(()=>{class t{constructor(){this.autoClose=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),zv=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[bb,gb,EZ,{provide:QZ,useValue:e||{autoClose:!0}}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({}),t})();class GO{constructor(){}static reflow(n){}static getStyles(n){let e=n.ownerDocument.defaultView;return(!e||!e.opener)&&(e=hr),e.getComputedStyle(n)}focusTrapModal(n,e){let i,o,s;i=e.nativeElement.querySelectorAll("a[href], button, textarea, input, select, form, mdb-select, mdb-auto-completer, mdb-checkbox, mdb-range-input"),o=i[0],s=i[i.length-1],("Tab"===n.key||9===n.keyCode)&&(n.shiftKey?Hh&&Hh.activeElement===o&&(s.focus(),n.preventDefault()):Hh&&Hh.activeElement===s&&(o.focus(),n.preventDefault()))}getClosestEl(n,e){for(;n&&n!==Hh;n=n.parentNode)if(n.matches&&n.matches(e))return n;return null}getCoords(n){const e=n.getBoundingClientRect(),i=Hh.body,o=Hh.documentElement,T=e.left+(hr.pageXOffset||o.scrollLeft||i.scrollLeft)-(o.clientLeft||i.clientLeft||0);return{top:Math.round(e.top+(hr.pageYOffset||o.scrollTop||i.scrollTop)-(o.clientTop||i.clientTop||0)),left:Math.round(T)}}}let Vv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[Ut]}),t})(),Uv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[Ut]}),t})(),Hv=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({}),t})(),WO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),qO=(()=>{class t{hide(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})();const ZO={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,scroll:!1,data:{}};let XZ=(()=>{class t{constructor(e,i){this.element=e,this.renderer=i,this.classNameBackDrop=!0,this._isShown=!1}get isAnimated(){return this._isAnimated}set isAnimated(e){this._isAnimated=e}get isShown(){return this._isShown}set isShown(e){this._isShown=e,e?(this.renderer.addClass(this.element.nativeElement,"in"),hb()||this.renderer.addClass(this.element.nativeElement,"show")):(this.renderer.removeClass(this.element.nativeElement,"in"),hb()||this.renderer.removeClass(this.element.nativeElement,"show"))}ngOnInit(){this.renderer.addClass(this.element.nativeElement,"fade"),GO.reflow(this.element.nativeElement),this.isShown=!0}}return t.\u0275fac=function(e){return new(e||t)(J(qt),J(lo))},t.\u0275cmp=Wt({type:t,selectors:[["mdb-modal-backdrop"]],hostVars:2,hostBindings:function(e,i){2&e&&ut("modal-backdrop",i.classNameBackDrop)},decls:0,vars:0,template:function(e,i){},encapsulation:2}),t})(),JZ=(()=>{class t{constructor(e,i,o){this._renderer=o,this.modalClass="modal",this.tabindex=-1,this.role="dialog",this.modal=!0,this.isShown=!1,this.isModalHiding=!1,this._element=i,this.config=Object.assign({},e)}onClick(e){this.config.ignoreBackdropClick||"static"===this.config.backdrop||e.target!==this._element.nativeElement||(this.mdbModalService.setDismissReason("backdrop-click"),this.hide())}onEsc(){this.config.keyboard&&this.level===this.mdbModalService.getModalsCount()&&(this.mdbModalService.setDismissReason("esc"),this.hide())}ngOnInit(){this.config.animated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),window&&-1!==window.navigator.userAgent.indexOf("Edge")&&this.config&&-1===this.config.toString().indexOf("side-modal")||window&&-1!==window.navigator.userAgent.indexOf("Edge")&&this.config&&-1===this.config.toString().indexOf("modal-full-height")?(this.isShown=!0,this._renderer.addClass(this._element.nativeElement,hb()?"in":"show"),this._renderer.setStyle(this._element.nativeElement,"transition","transform 0.3s ease-out"),this._renderer.setStyle(this._element.nativeElement,"transform","translate(0, 25px)")):setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,hb()?"in":"show")},this.isAnimated?150:0),document&&document.body&&(1===this.mdbModalService.getModalsCount()&&(this.mdbModalService.checkScrollbar(),this.mdbModalService.setScrollbar()),this._renderer.addClass(document.body,"modal-open")),this.config.containerClass&&this.updateContainerClass(),this.config.scroll&&this._renderer.setStyle(this._element.nativeElement,"overflow-y","auto")}focusModalElement(){this.config.focus&&this._element.nativeElement.focus()}updateContainerClass(){if(this.config.containerClass){const i=this.config.containerClass.split(" ");for(let o=0;o<i.length;o++)this._renderer.addClass(this._element.nativeElement,i[o])}}ngOnDestroy(){this.isShown&&this.hide()}hide(){if(this.isModalHiding||!this.isShown)return;this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,hb()?"in":"show");const e=Array.from(this._element.nativeElement.querySelectorAll("iframe")),i=Array.from(this._element.nativeElement.querySelectorAll("video"));e.forEach(o=>{const s=o.getAttribute("src");this._renderer.setAttribute(o,"src",s)}),i.forEach(o=>{o.pause()}),setTimeout(()=>{this.isShown=!1,document&&document.body&&1===this.mdbModalService.getModalsCount()&&this._renderer.removeClass(document.body,"modal-open"),this.mdbModalService.hide(this.level),this.isModalHiding=!1},this.isAnimated?300:0)}}return t.\u0275fac=function(e){return new(e||t)(J(WO),J(qt),J(lo))},t.\u0275cmp=Wt({type:t,selectors:[["mdb-modal-container"]],hostVars:4,hostBindings:function(e,i){1&e&&Xe("click",function(s){return i.onClick(s)})("keydown.esc",function(){return i.onEsc()},!1,ky),2&e&&(Ss("tabindex",i.tabindex),an("role",i.role),ut("modal",i.modal))},ngContentSelectors:SO,decls:3,vars:2,consts:[["role","document","cdkTrapFocus",""],[1,"modal-content","modal-dynamic"]],template:function(e,i){1&e&&(hl(),W(0,"div",0)(1,"div",1),pl(2),Y()()),2&e&&ml("modal-dialog"+(i.config.class?" "+i.config.class:""))},dependencies:[eZ],styles:[".img-fluid,.modal-dialog.cascading-modal.modal-avatar .modal-header,.video-fluid{max-width:100%;height:auto}.flex-center{display:flex;justify-content:center;align-items:center;height:100%}.flex-center p{margin:0}.flex-center ul{text-align:center}.flex-center ul li{margin-bottom:1rem}.flex-center ul li:last-of-type{margin-bottom:0}.hr-light{border-top:1px solid #fff}.hr-dark{border-top:1px solid #666}.w-responsive{width:75%}@media (max-width: 740px){.w-responsive{width:100%}}.collapsible-body{display:none}.jumbotron{box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;border-radius:.125rem;background-color:#fff}.bg-primary{background-color:#4285f4!important}a.bg-primary:hover,a.bg-primary:focus,button.bg-primary:hover,button.bg-primary:focus{background-color:#1266f1!important}.border-primary{border-color:#4285f4!important}.bg-danger{background-color:#ff3547!important}a.bg-danger:hover,a.bg-danger:focus,button.bg-danger:hover,button.bg-danger:focus{background-color:#ff0219!important}.border-danger{border-color:#ff3547!important}.bg-warning{background-color:#fb3!important}a.bg-warning:hover,a.bg-warning:focus,button.bg-warning:hover,button.bg-warning:focus{background-color:#fa0!important}.border-warning{border-color:#fb3!important}.bg-success{background-color:#00c851!important}a.bg-success:hover,a.bg-success:focus,button.bg-success:hover,button.bg-success:focus{background-color:#00953c!important}.border-success{border-color:#00c851!important}.bg-info{background-color:#33b5e5!important}a.bg-info:hover,a.bg-info:focus,button.bg-info:hover,button.bg-info:focus{background-color:#1a9bcb!important}.border-info{border-color:#33b5e5!important}.bg-default{background-color:#2bbbad!important}a.bg-default:hover,a.bg-default:focus,button.bg-default:hover,button.bg-default:focus{background-color:#219287!important}.border-default{border-color:#2bbbad!important}.bg-secondary{background-color:#a6c!important}a.bg-secondary:hover,a.bg-secondary:focus,button.bg-secondary:hover,button.bg-secondary:focus{background-color:#9540bf!important}.border-secondary{border-color:#a6c!important}.bg-dark{background-color:#212121!important}a.bg-dark:hover,a.bg-dark:focus,button.bg-dark:hover,button.bg-dark:focus{background-color:#080808!important}.border-dark{border-color:#212121!important}.bg-light{background-color:#e0e0e0!important}a.bg-light:hover,a.bg-light:focus,button.bg-light:hover,button.bg-light:focus{background-color:#c7c7c7!important}.border-light{border-color:#e0e0e0!important}.card-img-100{width:100px;height:100px}.card-img-64{width:64px;height:64px}.mml-1{margin-left:-.25rem!important}.flex-1{flex:1}body.modal-open{overflow:auto}.modal-dialog .modal-content{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;border:0;border-radius:.125rem}.modal-dialog .modal-content .modal-header{border-top-left-radius:.125rem;border-top-right-radius:.125rem}.modal-dialog.cascading-modal .close{opacity:1;text-shadow:none;color:#fff;outline:0}.modal-dialog.cascading-modal .modal-header{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;margin:-2rem 1rem 1rem;border:none;border-radius:.125rem;padding:1.5rem;text-align:center}.modal-dialog.cascading-modal .modal-header .close{margin-right:1rem}.modal-dialog.cascading-modal .modal-header .title{margin-bottom:0;width:100%;font-size:1.25rem}.modal-dialog.cascading-modal .modal-header .title .fas,.modal-dialog.cascading-modal .modal-header .title .fab,.modal-dialog.cascading-modal .modal-header .title .far{margin-right:9px}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs{box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;margin:-1.5rem 1rem 0;display:flex}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs li{flex:1}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs li a{text-align:center}.modal-dialog.cascading-modal .modal-c-tabs .tab-content{padding:1.7rem 0 0;box-shadow:unset}.modal-dialog.cascading-modal .modal-body,.modal-dialog.cascading-modal .modal-footer{padding-left:2rem;padding-right:2rem;color:#616161}.modal-dialog.cascading-modal .modal-body .additional-option,.modal-dialog.cascading-modal .modal-footer .additional-option{margin-top:1rem;text-align:center}.modal-dialog.cascading-modal.modal-avatar .modal-header{box-shadow:none;margin:-6rem 0 -1rem}.modal-dialog.cascading-modal.modal-avatar .modal-header img{width:130px;box-shadow:0 8px 17px #0003,0 6px 20px #00000030;margin-left:auto;margin-right:auto}.modal-dialog.modal-notify .heading{margin:0;padding:.3rem;font-size:1.15rem;color:#fff}.modal-dialog.modal-notify .modal-header{box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;border:0}.modal-dialog.modal-notify.modal-primary .modal-header{background-color:#4285f4}.modal-dialog.modal-notify.modal-primary .fas,.modal-dialog.modal-notify.modal-primary .fab,.modal-dialog.modal-notify.modal-primary .far{color:#4285f4}.modal-dialog.modal-notify.modal-primary .badge{background-color:#4285f4}.modal-dialog.modal-notify.modal-primary .btn .fas,.modal-dialog.modal-notify.modal-primary .btn .fab,.modal-dialog.modal-notify.modal-primary .btn .far{color:#fff}.modal-dialog.modal-notify.modal-primary .btn.btn-outline-primary .fas,.modal-dialog.modal-notify.modal-primary .btn.btn-outline-primary .fab,.modal-dialog.modal-notify.modal-primary .btn.btn-outline-primary .far{color:#4285f4}.modal-dialog.modal-notify.modal-danger .modal-header{background-color:#ff3547}.modal-dialog.modal-notify.modal-danger .fas,.modal-dialog.modal-notify.modal-danger .fab,.modal-dialog.modal-notify.modal-danger .far{color:#ff3547}.modal-dialog.modal-notify.modal-danger .badge{background-color:#ff3547}.modal-dialog.modal-notify.modal-danger .btn .fas,.modal-dialog.modal-notify.modal-danger .btn .fab,.modal-dialog.modal-notify.modal-danger .btn .far{color:#fff}.modal-dialog.modal-notify.modal-danger .btn.btn-outline-danger .fas,.modal-dialog.modal-notify.modal-danger .btn.btn-outline-danger .fab,.modal-dialog.modal-notify.modal-danger .btn.btn-outline-danger .far{color:#ff3547}.modal-dialog.modal-notify.modal-warning .modal-header{background-color:#fb3}.modal-dialog.modal-notify.modal-warning .fas,.modal-dialog.modal-notify.modal-warning .fab,.modal-dialog.modal-notify.modal-warning .far{color:#fb3}.modal-dialog.modal-notify.modal-warning .badge{background-color:#fb3}.modal-dialog.modal-notify.modal-warning .btn .fas,.modal-dialog.modal-notify.modal-warning .btn .fab,.modal-dialog.modal-notify.modal-warning .btn .far{color:#fff}.modal-dialog.modal-notify.modal-warning .btn.btn-outline-warning .fas,.modal-dialog.modal-notify.modal-warning .btn.btn-outline-warning .fab,.modal-dialog.modal-notify.modal-warning .btn.btn-outline-warning .far{color:#fb3}.modal-dialog.modal-notify.modal-success .modal-header{background-color:#00c851}.modal-dialog.modal-notify.modal-success .fas,.modal-dialog.modal-notify.modal-success .fab,.modal-dialog.modal-notify.modal-success .far{color:#00c851}.modal-dialog.modal-notify.modal-success .badge{background-color:#00c851}.modal-dialog.modal-notify.modal-success .btn .fas,.modal-dialog.modal-notify.modal-success .btn .fab,.modal-dialog.modal-notify.modal-success .btn .far{color:#fff}.modal-dialog.modal-notify.modal-success .btn.btn-outline-success .fas,.modal-dialog.modal-notify.modal-success .btn.btn-outline-success .fab,.modal-dialog.modal-notify.modal-success .btn.btn-outline-success .far{color:#00c851}.modal-dialog.modal-notify.modal-info .modal-header{background-color:#33b5e5}.modal-dialog.modal-notify.modal-info .fas,.modal-dialog.modal-notify.modal-info .fab,.modal-dialog.modal-notify.modal-info .far{color:#33b5e5}.modal-dialog.modal-notify.modal-info .badge{background-color:#33b5e5}.modal-dialog.modal-notify.modal-info .btn .fas,.modal-dialog.modal-notify.modal-info .btn .fab,.modal-dialog.modal-notify.modal-info .btn .far{color:#fff}.modal-dialog.modal-notify.modal-info .btn.btn-outline-info .fas,.modal-dialog.modal-notify.modal-info .btn.btn-outline-info .fab,.modal-dialog.modal-notify.modal-info .btn.btn-outline-info .far{color:#33b5e5}@media (min-width: 768px){.modal .modal-dialog.modal-top{top:0}.modal .modal-dialog.modal-left{left:0}.modal .modal-dialog.modal-right{right:0}.modal .modal-dialog.modal-bottom{bottom:0}.modal .modal-dialog.modal-top-left{top:10px;left:10px}.modal .modal-dialog.modal-top-right{top:10px;right:10px}.modal .modal-dialog.modal-bottom-left{bottom:10px;left:10px}.modal .modal-dialog.modal-bottom-right{bottom:10px;right:10px}}@media (min-width: 992px){.modal.modal-scrolling{position:relative}.modal.modal-scrolling .modal-dialog{position:fixed;z-index:1050}.modal.modal-content-clickable{top:auto;bottom:auto}.modal.modal-content-clickable .modal-dialog{position:fixed}.modal .modal-fluid{width:100%;max-width:100%}.modal .modal-fluid .modal-content{width:100%}.modal .modal-frame{position:absolute;margin:0!important;width:100%;max-width:100%!important}.modal .modal-frame.modal-bottom{bottom:0}.modal .modal-frame.modal-dialog{height:inherit}.modal .modal-full-height{position:absolute;display:flex;margin:0;width:400px;height:auto;min-height:100%;top:0;right:0}.modal .modal-full-height.modal-top,.modal .modal-full-height.modal-bottom{display:block;width:100%;max-width:100%;height:auto}.modal .modal-full-height.modal-top{bottom:auto}.modal .modal-full-height.modal-bottom{min-height:0;top:auto}.modal .modal-full-height .modal-content{width:100%}.modal .modal-full-height.modal-lg{width:90%;max-width:90%}}@media (min-width: 992px) and (min-width: 992px){.modal .modal-full-height.modal-lg{width:800px;max-width:800px}}@media (min-width: 992px) and (min-width: 1200px){.modal .modal-full-height.modal-lg{width:1000px;max-width:1000px}}@media (min-width: 992px){.modal .modal-side{position:absolute;bottom:10px;right:10px;margin:0;width:400px}}body.scrollable{overflow-y:auto}.modal-dialog .modal-content{border:0}.modal{padding-right:0!important}@media (min-width: 768px){.modal .modal-dialog.modal-top{top:0;left:0;right:0}.modal .modal-dialog.modal-left{left:0}.modal .modal-dialog.modal-right{right:0}.modal .modal-dialog.modal-bottom>.modal-content{position:absolute;bottom:0}.modal .modal-dialog.modal-top-left{top:10px;left:10px}.modal .modal-dialog.modal-top-right{top:10px;right:10px}.modal .modal-dialog.modal-bottom-left{left:10px;bottom:10px}.modal .modal-dialog.modal-bottom-right{right:10px;bottom:10px}}.modal .modal-side.modal-top{top:0}.modal .modal-side.modal-left{left:0}.modal .modal-side.modal-right{right:0}.modal .modal-side.modal-bottom{bottom:0}.modal .modal-side.modal-top-left{top:10px;left:10px}.modal .modal-side.modal-top-right{top:10px;right:10px}.modal .modal-side.modal-bottom-left{left:10px;bottom:10px}.modal .modal-side.modal-bottom-right{right:10px;bottom:10px}.modal.fade.top:not(.show) .modal-dialog{transform:translate3d(0,-25%,0)}.modal.fade.left:not(.show) .modal-dialog{transform:translate3d(-25%,0,0)}.modal.fade.right:not(.show) .modal-dialog{transform:translate3d(25%,0,0)}.modal.fade.bottom:not(.show) .modal-dialog{transform:translate3d(0,25%,0)}.modal.fade.in{opacity:1}.modal.fade.in .modal-dialog{transform:translate(0)}.modal.fade.in .modal-dialog .relative{display:inline-block}.modal.modal-scrolling{position:relative}.modal.modal-scrolling .modal-dialog{position:fixed;z-index:1050}.modal.modal-content-clickable{top:auto;bottom:auto}.modal.modal-content-clickable .modal-dialog{position:fixed}.modal .modal-fluid{width:100%;max-width:100%}.modal .modal-fluid .modal-content{width:100%}.modal .modal-frame{position:absolute;width:100%;max-width:100%;margin:0}@media (max-width: 767px){.modal .modal-frame{padding:.5rem}}.modal .modal-frame.modal-bottom{bottom:0}.modal .modal-full-height{display:flex;position:absolute;width:400px;min-height:100%;margin:0;top:0;right:0}@media (max-width: 576px){.modal .modal-full-height{width:100%;padding:.5rem}}@media (max-width: 992px){.modal .modal-full-height{width:100%;height:unset;position:unset}}@media (max-width: 992px){.modal .modal-full-height.modal-top,.modal .modal-full-height.modal-left,.modal .modal-full-height.modal-right{margin:1.75rem auto;min-height:unset}}@media (max-width: 768px){.modal .modal-full-height.modal-bottom{margin-top:1.75rem}}@media (min-width: 768px) and (max-width: 992px){.modal .modal-full-height.modal-bottom{margin-bottom:1.75rem}.modal .modal-full-height.modal-bottom .modal-content{bottom:1rem}}@media (max-width: 992px){.modal .modal-full-height.modal-top,.modal .modal-full-height.modal-bottom,.modal .modal-full-height.modal-left,.modal .modal-full-height.modal-right{margin-left:auto;margin-right:auto}}.modal .modal-full-height.modal-top,.modal .modal-full-height.modal-bottom{display:block;width:100%;height:auto}.modal .modal-full-height.modal-top{bottom:auto}.modal .modal-full-height.modal-bottom{bottom:0}.modal .modal-full-height .modal-content{width:100%}.modal .modal-full-height.modal-lg{max-width:90%;width:90%}@media (min-width: 992px){.modal .modal-full-height.modal-lg{max-width:800px;width:800px}}@media (min-width: 1200px){.modal .modal-full-height.modal-lg{max-width:1000px;width:1000px}}.modal .modal-side{position:absolute;right:10px;bottom:10px;margin:0;min-width:100px}@media (max-width: 768px){.modal .modal-side{padding-left:.5rem}}.modal-dialog.cascading-modal{margin-top:10%}.modal-dialog.cascading-modal .modal-header{text-align:center;margin:-2rem 1rem 1rem;padding:1.5rem;border:none;flex-direction:column}.modal-dialog.cascading-modal .modal-header .close{margin-right:2.5rem}.modal-dialog.cascading-modal .modal-header.white-text .close{color:#fff;opacity:1}.modal-dialog.cascading-modal .modal-header .title{width:100%;margin-bottom:0;font-size:1.25rem}.modal-dialog.cascading-modal .modal-header .title .fa{margin-right:9px}.modal-dialog.cascading-modal .modal-header .social-buttons{margin-top:1.5rem}.modal-dialog.cascading-modal .modal-header .social-buttons a{font-size:1rem}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs{margin:-1.5rem 1rem 0}.modal-dialog.cascading-modal .modal-c-tabs .tab-content{padding:1.7rem 0 0}.modal-dialog.cascading-modal .modal-body,.modal-dialog.cascading-modal .modal-footer{color:#616161;padding-right:2rem;padding-left:2rem}.modal-dialog.cascading-modal .modal-body .additional-option,.modal-dialog.cascading-modal .modal-footer .additional-option{text-align:center;margin-top:1rem}.modal-dialog.cascading-modal.modal-avatar{margin-top:6rem}.modal-dialog.cascading-modal.modal-avatar .modal-header{margin:-6rem 2rem -1rem}.modal-dialog.cascading-modal.modal-avatar .modal-header img{width:130px}.modal-dialog.modal-notify .heading{margin:0;padding:.3rem;color:#fff;font-size:1.15rem}.modal-dialog.modal-notify .modal-header{border:0}.modal-dialog.modal-notify .close{opacity:1}.modal-dialog.modal-notify .modal-body{padding:1.5rem;color:#616161}.modal-dialog.modal-notify .btn-outline-secondary-modal{background-color:transparent}.modal-dialog.modal-notify.modal-info .modal-header{background-color:#5394ff}.modal-dialog.modal-notify.modal-info .fa{color:#5394ff}.modal-dialog.modal-notify.modal-info .badge{background-color:#5394ff}.modal-dialog.modal-notify.modal-info .btn-primary-modal{background:#5394ff}.modal-dialog.modal-notify.modal-info .btn-primary-modal:hover,.modal-dialog.modal-notify.modal-info .btn-primary-modal:focus,.modal-dialog.modal-notify.modal-info .btn-primary-modal:active{background-color:#6da4ff!important}.modal-dialog.modal-notify.modal-info .btn-primary-modal.active{background-color:#0059ec!important}.modal-dialog.modal-notify.modal-info .btn-outline-secondary-modal{border:2px solid #5394ff;color:#5394ff!important}.modal-dialog.modal-notify.modal-warning .modal-header{background-color:#ff8e38}.modal-dialog.modal-notify.modal-warning .fa{color:#ff8e38}.modal-dialog.modal-notify.modal-warning .badge{background-color:#ff8e38}.modal-dialog.modal-notify.modal-warning .btn-primary-modal{background:#ff8e38}.modal-dialog.modal-notify.modal-warning .btn-primary-modal:hover,.modal-dialog.modal-notify.modal-warning .btn-primary-modal:focus,.modal-dialog.modal-notify.modal-warning .btn-primary-modal:active{background-color:#ff9c52!important}.modal-dialog.modal-notify.modal-warning .btn-primary-modal.active{background-color:#d15a00!important}.modal-dialog.modal-notify.modal-warning .btn-outline-secondary-modal{border:2px solid #ff8e38;color:#ff8e38!important}.modal-dialog.modal-notify.modal-success .modal-header{background-color:#01d36b}.modal-dialog.modal-notify.modal-success .fa{color:#01d36b}.modal-dialog.modal-notify.modal-success .badge{background-color:#01d36b}.modal-dialog.modal-notify.modal-success .btn-primary-modal{background:#01d36b}.modal-dialog.modal-notify.modal-success .btn-primary-modal:hover,.modal-dialog.modal-notify.modal-success .btn-primary-modal:focus,.modal-dialog.modal-notify.modal-success .btn-primary-modal:active{background-color:#01ec78!important}.modal-dialog.modal-notify.modal-success .btn-primary-modal.active{background-color:#016d38!important}.modal-dialog.modal-notify.modal-success .btn-outline-secondary-modal{border:2px solid #01d36b;color:#01d36b!important}.modal-dialog.modal-notify.modal-danger .modal-header{background-color:#ff4b4b}.modal-dialog.modal-notify.modal-danger .fa{color:#ff4b4b}.modal-dialog.modal-notify.modal-danger .badge{background-color:#ff4b4b}.modal-dialog.modal-notify.modal-danger .btn-primary-modal{background:#ff4b4b}.modal-dialog.modal-notify.modal-danger .btn-primary-modal:hover,.modal-dialog.modal-notify.modal-danger .btn-primary-modal:focus,.modal-dialog.modal-notify.modal-danger .btn-primary-modal:active{background-color:#ff6565!important}.modal-dialog.modal-notify.modal-danger .btn-primary-modal.active{background-color:#e40000!important}.modal-dialog.modal-notify.modal-danger .btn-outline-secondary-modal{border:2px solid #ff4b4b;color:#ff4b4b!important}.modal-sm .modal-content{margin:0 auto;max-width:300px}@media (min-width: 768px){.modal-sm{max-width:300px}}.modal .modal-fluid,.modal .modal-frame{width:100%;max-width:100%}.modal-ext .modal-content .modal-header{text-align:center}.modal-ext .modal-content .options{float:left}.modal-ext .modal-content .modal-body .text-xs-center fieldset{margin-top:20px}.modal-ext .modal-content .call{margin-top:1rem}.modal-ext .modal-content .modal-body{padding:2rem 2rem 1rem}.modal-content:not(.card-image) .close{position:absolute;right:15px}.modal-cart li p{margin:5px;font-weight:400}.modal-cart li p .badge{margin-left:10px;margin-top:3px;font-weight:400;position:absolute}.modal-cart li p .quantity{font-size:16px;margin-right:7px;font-weight:300}.modal-cart .cartPageLink{margin-left:10px}.modal-cart .cartPageLink a{text-decoration:underline;color:#666}.modal-cart .total{float:right;font-weight:400}.cf-phone{margin-left:7px}.side-modal{position:fixed;width:400px;height:100%;width:100%;z-index:9999}.side-modal .modal-dialog{position:absolute;bottom:10px;right:10px;width:400px;margin:10px}@media (max-width: 760px){.side-modal .modal-dialog{display:none}}.side-modal .modal-header{padding:1rem}.side-modal .modal-header .heading{margin:0;padding:0}.side-modal .modal-content{border:none}.modal-dynamic>:first-child{display:flex;flex-direction:column;height:100%}.side-modal.fade:not(.show) .modal-dialog{transform:translate3d(25%,0,0)}.transparent-bd{opacity:0!important}.modal-backdrop.in,.modal-backdrop{opacity:.5}#exampleModalScroll{overflow-x:hidden;overflow-y:auto}.modal-open .modal{overflow-x:hidden;overflow-y:hidden}.form-dark .card-image{background-size:100%}\n"],encapsulation:2}),t})(),eK=(()=>{class t{constructor(e,i){this.clf=i,this.config=ZO,this.open=new Me,this.opened=new Me,this.close=new Me,this.closed=new Me,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.lastDismissReason="",this.loaders=[],this._backdropLoader=this.clf.createLoader(this.el,this.vcr,this.renderer),this.renderer=e.createRenderer(null,null)}show(e,i){return this.modalsCount++,this._createLoaders(),this.config=Object.assign({},ZO,i),this._showBackdrop(),this.lastDismissReason=null,this._showModal(e)}hide(e){1===this.modalsCount&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(e),this.removeLoaders(e)},this.config.animated?150:0)}_showBackdrop(){const e=this.config.backdrop||"static"===this.config.backdrop,i=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),e&&i&&(this._backdropLoader.attach(XZ).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(e){const i=this.loaders[this.loaders.length-1],o=new qO,s=i.provide({provide:WO,useValue:this.config}).provide({provide:qO,useValue:o}).attach(JZ).to("body").show({content:e,isAnimated:this.config.animated,data:this.config.data,mdbModalService:this});return s.instance.focusModalElement(),s.instance.level=this.getModalsCount(),o.hide=()=>{s.instance.hide()},o.content=i.getInnerComponent()||null,o}_hideModal(e){const i=this.loaders[e-1];i&&i.hide()}getModalsCount(){return this.modalsCount}setDismissReason(e){this.lastDismissReason=e}removeBackdrop(){this._backdropLoader.hide(),this.backdropRef=null}checkScrollbar(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){document&&(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10))}resetScrollbar(){document.body.style.paddingRight=this.originalBodyPadding+"px"}getScrollbarWidth(){const e=this.renderer.createElement("div");this.renderer.addClass(e,"modal-scrollbar-measure"),this.renderer.appendChild(document.body,e);const i=e.offsetWidth-e.clientWidth;return this.renderer.removeChild(document.body,e),i}_createLoaders(){const e=this.clf.createLoader(this.el,this.vcr,this.renderer);this.copyEvent(e.onBeforeShow,this.open),this.copyEvent(e.onShown,this.opened),this.copyEvent(e.onBeforeHide,this.close),this.copyEvent(e.onHidden,this.closed),this.loaders.push(e)}removeLoaders(e){this.loaders.splice(e-1,1),this.loaders.forEach((i,o)=>{i.instance.level=o+1})}copyEvent(e,i){e.subscribe(()=>{i.emit(this.lastDismissReason)})}}return t.\u0275fac=function(e){return new(e||t)(Le($m),Le(bb))},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),$v=(()=>{class t{static forRoot(){return{ngModule:t,providers:[eK,bb,gb]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[iZ]}),t})(),tK=(()=>{class t{constructor(){this.navbarLinkClicks=new Ht}getNavbarLinkClicks(){return this.navbarLinkClicks.asObservable()}setNavbarLinkClicks(){this.navbarLinkClicks.next()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),_b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({providers:[tK],imports:[Ut]}),t})(),nK=(()=>{class t{constructor(){this.placement="top",this.triggers="click"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),Gv=(()=>{class t{static forRoot(){return{ngModule:t,providers:[nK,bb,gb]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[Ut]}),t})(),iK=(()=>{class t{constructor(){this._dataSource=[],this._dataSourceChanged=new Ht}addRow(e){this.getDataSource().push(e)}addRowAfter(e,i){this.getDataSource().splice(e,0,i)}removeRow(e){this.getDataSource().splice(e,1)}rowRemoved(){return new cn(i=>{i.next(!0)})}removeLastRow(){this.getDataSource().pop()}getDataSource(){return this._dataSource}setDataSource(e){this._dataSource=e,this._dataSourceChanged.next(this.getDataSource())}dataSourceChange(){return this._dataSourceChanged}filterLocalDataBy(e){return this.getDataSource().filter(i=>Object.keys(i).some(o=>{if(i[o])return i[o].toString().toLowerCase().includes(e)}))}searchLocalDataBy(e){return e?e?this.filterLocalDataBy(e.toLowerCase()):void 0:this.getDataSource()}searchDataObservable(e){return new cn(o=>{o.next(this.searchLocalDataBy(e))})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Wv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({providers:[iK],imports:[Ut]}),t})(),oK=(()=>{class t{constructor(){this.placement="top",this.triggers="hover focus"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Ue({token:t,factory:t.\u0275fac}),t})(),qv=(()=>{class t{static forRoot(){return{ngModule:t,providers:[oK,bb,gb]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[Ut]}),t})(),Zv=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({}),t})(),Kv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[Ut]}),t})(),rK=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[ub,Zv.forRoot(),Hv.forRoot(),_b,zv.forRoot(),Pv.forRoot(),Rv,Fv.forRoot(),$v.forRoot(),qv.forRoot(),Gv.forRoot(),Vv,Ov.forRoot(),Nv,Wv,kv,Av,Uv,Kv,ub,Ov,Zv,Hv,_b,zv,Pv,Rv,Fv,$v,qv,Gv,Vv,Nv,Wv,kv,Av,Uv,Kv]}),t})(),sK=(()=>{class t{static forRoot(){return{ngModule:rK}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({imports:[ub,Ov,Zv,Hv,_b,zv,Pv,Rv,Fv,$v,qv,Gv,Vv,Nv,Wv,kv,Av,Uv,Kv]}),t})();class gK{constructor(){this.change=new Me,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(n){return null==n.id&&(n.id=this.DEFAULT_ID),this.instances[n.id]?this.updateInstance(n):(this.instances[n.id]=n,!0)}updateInstance(n){let e=!1;for(let i in this.instances[n.id])n[i]!==this.instances[n.id][i]&&(this.instances[n.id][i]=n[i],e=!0);return e}getCurrentPage(n){return this.instances[n]?this.instances[n].currentPage:1}setCurrentPage(n,e){if(this.instances[n]){let i=this.instances[n];e<=Math.ceil(i.totalItems/i.itemsPerPage)&&1<=e&&(this.instances[n].currentPage=e,this.change.emit(n))}}setTotalItems(n,e){this.instances[n]&&0<=e&&(this.instances[n].totalItems=e,this.change.emit(n))}setItemsPerPage(n,e){this.instances[n]&&(this.instances[n].itemsPerPage=e,this.change.emit(n))}getInstance(n=this.DEFAULT_ID){return this.instances[n]?this.clone(this.instances[n]):{}}clone(n){var e={};for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i]);return e}}let bK=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t}),t.\u0275inj=Qe({providers:[gK],imports:[[Ut]]}),t})(),_K=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Je({type:t,bootstrap:[pG]}),t.\u0275inj=Qe({providers:[{provide:mI,useClass:fG,multi:!0}],imports:[E3,tG,oz,CI,R6,CI,IM,m$,Hg.forRoot([]),fO,sK,_b,bK,iU,G9,Ut]}),t})();D3().bootstrapModule(_K).catch(t=>console.error(t))},943:function($f){$f.exports=function(){"use strict";var Wc,qc,Nn;function pu(v,di){if(Wc)if(qc){var Ms="var sharedChunk = {}; ("+Wc+")(sharedChunk); ("+qc+")(sharedChunk);",fs={};Wc(fs),Nn=di(fs),typeof window<"u"&&(Nn.workerUrl=window.URL.createObjectURL(new Blob([Ms],{type:"text/javascript"})))}else qc=di;else Wc=di}return pu(0,function(v){var di=Ms;function Ms(l,r,c,h){this.cx=3*l,this.bx=3*(c-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=r,this.p2x=c,this.p2y=h}function fs(l,r,c,h){const b=new di(l,r,c,h);return function(y){return b.solve(y)}}Ms.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,r){if(void 0===r&&(r=1e-6),l<0)return 0;if(l>1)return 1;for(var c=l,h=0;h<8;h++){var b=this.sampleCurveX(c)-l;if(Math.abs(b)<r)return c;var y=this.sampleCurveDerivativeX(c);if(Math.abs(y)<1e-6)break;c-=b/y}var w=0,E=1;for(c=l,h=0;h<20&&(b=this.sampleCurveX(c),!(Math.abs(b-l)<r));h++)l>b?w=c:E=c,c=.5*(E-w)+w;return c},solve:function(l,r){return this.sampleCurveY(this.solveCurveX(l,r))}};const kl=fs(.25,.1,.25,1);function Yt(l,r,c){return Math.min(c,Math.max(r,l))}function Oe(l,r,c){const h=c-r,b=((l-r)%h+h)%h+r;return b===r?c:b}function Qo(l,...r){for(const c of r)for(const h in c)l[h]=c[h];return l}let pr=1;function ks(l,r){l.forEach(c=>{r[c]&&(r[c]=r[c].bind(r))})}function Na(l,r,c){const h={};for(const b in l)h[b]=r.call(c||this,l[b],b,l);return h}function Al(l,r,c){const h={};for(const b in l)r.call(c||this,l[b],b,l)&&(h[b]=l[b]);return h}function No(l){return Array.isArray(l)?l.map(No):"object"==typeof l&&l?Na(l,No):l}const fr={};function yn(l){fr[l]||(typeof console<"u"&&console.warn(l),fr[l]=!0)}function po(l,r,c){return(c.y-l.y)*(r.x-l.x)>(r.y-l.y)*(c.x-l.x)}function dc(l){let r=0;for(let c,h,b=0,y=l.length,w=y-1;b<y;w=b++)c=l[b],h=l[w],r+=(h.x-c.x)*(c.y+h.y);return r}function Rr(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let ra=null;function As(l){if(null==ra){const r=l.navigator?l.navigator.userAgent:null;ra=!!l.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return ra}function mr(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const Fa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ms,ei;const Zc={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(l){const r=requestAnimationFrame(l);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(l,r=0){return this.getImageCanvasContext(l).getImageData(-r,-r,l.width+2*r,l.height+2*r)},getImageCanvasContext(l){const r=window.document.createElement("canvas"),c=r.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return r.width=l.width,r.height=l.height,c.drawImage(l,0,0,l.width,l.height),c},resolveURL:l=>(ms||(ms=document.createElement("a")),ms.href=l,ms.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==ei&&(ei=matchMedia("(prefers-reduced-motion: reduce)")),ei.matches)}};var Pt=Ri;function Ri(l,r){this.x=l,this.y=r}Ri.prototype={clone:function(){return new Ri(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,r){return this.clone()._rotateAround(l,r)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var r=l.x-this.x,c=l.y-this.y;return r*r+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,r){return Math.atan2(this.x*r-this.y*l,this.x*l+this.y*r)},_matMult:function(l){var r=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=r,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var r=Math.cos(l),c=Math.sin(l),h=c*this.x+r*this.y;return this.x=r*this.x-c*this.y,this.y=h,this},_rotateAround:function(l,r){var c=Math.cos(l),h=Math.sin(l),b=r.y+h*(this.x-r.x)+c*(this.y-r.y);return this.x=r.x+c*(this.x-r.x)-h*(this.y-r.y),this.y=b,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ri.convert=function(l){return l instanceof Ri?l:Array.isArray(l)?new Ri(l[0],l[1]):l};const La={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,REGISTERED_PROTOCOLS:{}};class Os extends Error{constructor(r,c,h,b){super(`AJAXError: ${c} (${r}): ${h}`),this.status=r,this.statusText=c,this.url=h,this.body=b}}const cn=Rr()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href;function uc(l,r){const c=new AbortController,h=new Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:cn(),signal:c.signal});let b=!1,y=!1;return"json"===l.type&&h.headers.set("Accept","application/json"),y||fetch(h).then(w=>{return w.ok?(E=w,void("arrayBuffer"===l.type?E.arrayBuffer():"json"===l.type?E.json():E.text()).then(I=>{y||(b=!0,r(null,I,E.headers.get("Cache-Control"),E.headers.get("Expires")))}).catch(I=>{y||r(new Error(I.message))})):w.blob().then(E=>r(new Os(w.status,w.statusText,l.url,E)));var E}).catch(w=>{20!==w.code&&r(new Error(w.message))}),{cancel:()=>{y=!0,b||c.abort()}}}const Ol=function(l,r){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){if(Rr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,r);if(!Rr()){const h=l.url.substring(0,l.url.indexOf("://"));return(La.REGISTERED_PROTOCOLS[h]||uc)(l,r)}}if(!(/^file:/.test(c=l.url)||/^file:/.test(cn())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return uc(l,r);if(Rr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,r,void 0,!0)}var c;return function(h,b){const y=new XMLHttpRequest;y.open(h.method||"GET",h.url,!0),"arrayBuffer"===h.type&&(y.responseType="arraybuffer");for(const w in h.headers)y.setRequestHeader(w,h.headers[w]);return"json"===h.type&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials="include"===h.credentials,y.onerror=()=>{b(new Error(y.statusText))},y.onload=()=>{if((y.status>=200&&y.status<300||0===y.status)&&null!==y.response){let w=y.response;if("json"===h.type)try{w=JSON.parse(y.response)}catch(E){return b(E)}b(null,w,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else{const w=new Blob([y.response],{type:y.getResponseHeader("Content-Type")});b(new Os(y.status,y.statusText,h.url,w))}},y.send(h.body),{cancel:()=>y.abort()}}(l,r)},Ba=function(l,r){return Ol(Qo(l,{type:"arrayBuffer"}),r)};function hc(l){const r=window.document.createElement("a");return r.href=l,r.protocol===window.document.location.protocol&&r.host===window.document.location.host}function Ht(l,r,c){c[l]&&-1!==c[l].indexOf(r)||(c[l]=c[l]||[],c[l].push(r))}function za(l,r,c){if(c&&c[l]){const h=c[l].indexOf(r);-1!==h&&c[l].splice(h,1)}}class sa{constructor(r,c={}){Qo(this,c),this.type=r}}class Gn extends sa{constructor(r,c={}){super("error",Qo({error:r},c))}}class xn{on(r,c){return this._listeners=this._listeners||{},Ht(r,c,this._listeners),this}off(r,c){return za(r,c,this._listeners),za(r,c,this._oneTimeListeners),this}once(r,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},Ht(r,c,this._oneTimeListeners),this):new Promise(h=>this.once(r,h))}fire(r,c){"string"==typeof r&&(r=new sa(r,c||{}));const h=r.type;if(this.listens(h)){r.target=this;const b=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const E of b)E.call(this,r);const y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const E of y)za(h,E,this._oneTimeListeners),E.call(this,r);const w=this._eventedParent;w&&(Qo(r,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),w.fire(r))}else r instanceof Gn&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,c){return this._eventedParent=r,this._eventedParentData=c,this}}var Re={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class ke{constructor(r,c,h,b){this.message=(r?`${r}: `:"")+h,b&&(this.identifier=b),null!=c&&c.__line__&&(this.line=c.__line__)}}function Va(l){const r=l.value;return r?[new ke(l.key,r,"constants have been deprecated as of v8")]:[]}function Xo(l,...r){for(const c of r)for(const h in c)l[h]=c[h];return l}function Wn(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function gs(l){if(Array.isArray(l))return l.map(gs);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const r={};for(const c in l)r[c]=gs(l[c]);return r}return Wn(l)}class Jo extends Error{constructor(r,c){super(c),this.message=c,this.key=r}}class Pl{constructor(r,c=[]){this.parent=r,this.bindings={};for(const[h,b]of c)this.bindings[h]=b}concat(r){return new Pl(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const bs={kind:"null"},it={kind:"number"},Jt={kind:"string"},Gt={kind:"boolean"},gr={kind:"color"},_s={kind:"object"},Rt={kind:"value"},Ps={kind:"collator"},Fo={kind:"formatted"},aa={kind:"padding"},br={kind:"resolvedImage"};function er(l,r){return{kind:"array",itemType:l,N:r}}function zn(l){if("array"===l.kind){const r=zn(l.itemType);return"number"==typeof l.N?`array<${r}, ${l.N}>`:"value"===l.itemType.kind?"array":`array<${r}>`}return l.kind}const pc=[bs,it,Jt,Gt,gr,Fo,_s,er(Rt),aa,br];function _r(l,r){if("error"===r.kind)return null;if("array"===l.kind){if("array"===r.kind&&(0===r.N&&"value"===r.itemType.kind||!_r(l.itemType,r.itemType))&&("number"!=typeof l.N||l.N===r.N))return null}else{if(l.kind===r.kind)return null;if("value"===l.kind)for(const c of pc)if(!_r(c,r))return null}return`Expected ${zn(l)} but found ${zn(r)} instead.`}function Rl(l,r){return r.some(c=>c.kind===l.kind)}function wn(l,r){return r.some(c=>"null"===c?null===l:"array"===c?Array.isArray(l):"object"===c?l&&!Array.isArray(l)&&"object"==typeof l:c===typeof l)}var la,fc={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ua(l){return(l=Math.round(l))<0?0:l>255?255:l}function Kc(l){return Ua("%"===l[l.length-1]?parseFloat(l)/100*255:parseInt(l))}function ca(l){return(r="%"===l[l.length-1]?parseFloat(l)/100:parseFloat(l))<0?0:r>1?1:r;var r}function Ha(l,r,c){return c<0?c+=1:c>1&&(c-=1),6*c<1?l+(r-l)*c*6:2*c<1?r:3*c<2?l+(r-l)*(2/3-c)*6:l}try{la={}.parseCSSColor=function(l){var r,c=l.replace(/ /g,"").toLowerCase();if(c in fc)return fc[c].slice();if("#"===c[0])return 4===c.length?(r=parseInt(c.substr(1),16))>=0&&r<=4095?[(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,1]:null:7===c.length&&(r=parseInt(c.substr(1),16))>=0&&r<=16777215?[(16711680&r)>>16,(65280&r)>>8,255&r,1]:null;var h=c.indexOf("("),b=c.indexOf(")");if(-1!==h&&b+1===c.length){var y=c.substr(0,h),w=c.substr(h+1,b-(h+1)).split(","),E=1;switch(y){case"rgba":if(4!==w.length)return null;E=ca(w.pop());case"rgb":return 3!==w.length?null:[Kc(w[0]),Kc(w[1]),Kc(w[2]),E];case"hsla":if(4!==w.length)return null;E=ca(w.pop());case"hsl":if(3!==w.length)return null;var I=(parseFloat(w[0])%360+360)%360/360,O=ca(w[1]),R=ca(w[2]),B=R<=.5?R*(O+1):R+O-R*O,H=2*R-B;return[Ua(255*Ha(H,B,I+1/3)),Ua(255*Ha(H,B,I)),Ua(255*Ha(H,B,I-1/3)),E];default:return null}}return null}}catch{}class An{constructor(r,c,h,b=1){this.r=r,this.g=c,this.b=h,this.a=b}static parse(r){if(!r)return;if(r instanceof An)return r;if("string"!=typeof r)return;const c=la(r);return c?new An(c[0]/255*c[3],c[1]/255*c[3],c[2]/255*c[3],c[3]):void 0}toString(){const[r,c,h,b]=this.toArray();return`rgba(${Math.round(r)},${Math.round(c)},${Math.round(h)},${b})`}toArray(){const{r,g:c,b:h,a:b}=this;return 0===b?[0,0,0,0]:[255*r/b,255*c/b,255*h/b,b]}}An.black=new An(0,0,0,1),An.white=new An(1,1,1,1),An.transparent=new An(0,0,0,0),An.red=new An(1,0,0,1);class Nl{constructor(r,c,h){this.sensitivity=r?c?"variant":"case":c?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,c){return this.collator.compare(r,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class tr{constructor(r,c,h,b,y){this.text=r,this.image=c,this.scale=h,this.fontStack=b,this.textColor=y}}class to{constructor(r){this.sections=r}static fromString(r){return new to([new tr(r,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(r=>0!==r.text.length||r.image&&0!==r.image.name.length)}static factory(r){return r instanceof to?r:to.fromString(r)}toString(){return 0===this.sections.length?"":this.sections.map(r=>r.text).join("")}}class Hi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Hi)return r;if("number"==typeof r)return new Hi([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const c of r)if("number"!=typeof c)return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Hi(r)}}toString(){return JSON.stringify(this.values)}}class Co{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new Co({name:r,available:!1}):null}}function Do(l,r,c,h){return"number"==typeof l&&l>=0&&l<=255&&"number"==typeof r&&r>=0&&r<=255&&"number"==typeof c&&c>=0&&c<=255?void 0===h||"number"==typeof h&&h>=0&&h<=1?null:`Invalid rgba value [${[l,r,c,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof h?[l,r,c,h]:[l,r,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Rs(l){if(null===l||"string"==typeof l||"boolean"==typeof l||"number"==typeof l||l instanceof An||l instanceof Nl||l instanceof to||l instanceof Hi||l instanceof Co)return!0;if(Array.isArray(l)){for(const r of l)if(!Rs(r))return!1;return!0}if("object"==typeof l){for(const r in l)if(!Rs(l[r]))return!1;return!0}return!1}function Q(l){if(null===l)return bs;if("string"==typeof l)return Jt;if("boolean"==typeof l)return Gt;if("number"==typeof l)return it;if(l instanceof An)return gr;if(l instanceof Nl)return Ps;if(l instanceof to)return Fo;if(l instanceof Hi)return aa;if(l instanceof Co)return br;if(Array.isArray(l)){const r=l.length;let c;for(const h of l){const b=Q(h);if(c){if(c===b)continue;c=Rt;break}c=b}return er(c||Rt,r)}return _s}function L(l){const r=typeof l;return null===l?"":"string"===r||"number"===r||"boolean"===r?String(l):l instanceof An||l instanceof to||l instanceof Hi||l instanceof Co?l.toString():JSON.stringify(l)}class V{constructor(r,c){this.type=r,this.value=c}static parse(r,c){if(2!==r.length)return c.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Rs(r[1]))return c.error("invalid value");const h=r[1];let b=Q(h);const y=c.expectedType;return"array"!==b.kind||0!==b.N||!y||"array"!==y.kind||"number"==typeof y.N&&0!==y.N||(b=y),new V(b,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class q{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const te={string:Jt,number:it,boolean:Gt,object:_s};class le{constructor(r,c){this.type=r,this.args=c}static parse(r,c){if(r.length<2)return c.error("Expected at least one argument.");let h,b=1;const y=r[0];if("array"===y){let E,I;if(r.length>2){const O=r[1];if("string"!=typeof O||!(O in te)||"object"===O)return c.error('The item type argument of "array" must be one of string, number, boolean',1);E=te[O],b++}else E=Rt;if(r.length>3){if(null!==r[2]&&("number"!=typeof r[2]||r[2]<0||r[2]!==Math.floor(r[2])))return c.error('The length argument to "array" must be a positive integer literal',2);I=r[2],b++}h=er(E,I)}else{if(!te[y])throw new Error(`Types doesn't contain name = ${y}`);h=te[y]}const w=[];for(;b<r.length;b++){const E=c.parse(r[b],b,Rt);if(!E)return null;w.push(E)}return new le(h,w)}evaluate(r){for(let c=0;c<this.args.length;c++){const h=this.args[c].evaluate(r);if(!_r(this.type,Q(h)))return h;if(c===this.args.length-1)throw new q(`Expected value to be of type ${zn(this.type)}, but found ${zn(Q(h))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const pe={"to-boolean":Gt,"to-color":gr,"to-number":it,"to-string":Jt};class de{constructor(r,c){this.type=r,this.args=c}static parse(r,c){if(r.length<2)return c.error("Expected at least one argument.");const h=r[0];if(!pe[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if(("to-boolean"===h||"to-string"===h)&&2!==r.length)return c.error("Expected one argument.");const b=pe[h],y=[];for(let w=1;w<r.length;w++){const E=c.parse(r[w],w,Rt);if(!E)return null;y.push(E)}return new de(b,y)}evaluate(r){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(r));if("color"===this.type.kind){let c,h;for(const b of this.args){if(c=b.evaluate(r),h=null,c instanceof An)return c;if("string"==typeof c){const y=r.parseColor(c);if(y)return y}else if(Array.isArray(c)&&(h=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:Do(c[0],c[1],c[2],c[3]),!h))return new An(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new q(h||`Could not parse color from value '${"string"==typeof c?c:JSON.stringify(c)}'`)}if("padding"===this.type.kind){let c;for(const h of this.args){c=h.evaluate(r);const b=Hi.parse(c);if(b)return b}throw new q(`Could not parse padding from value '${"string"==typeof c?c:JSON.stringify(c)}'`)}if("number"===this.type.kind){let c=null;for(const h of this.args){if(c=h.evaluate(r),null===c)return 0;const b=Number(c);if(!isNaN(b))return b}throw new q(`Could not convert ${JSON.stringify(c)} to number.`)}return"formatted"===this.type.kind?to.fromString(L(this.args[0].evaluate(r))):"resolvedImage"===this.type.kind?Co.fromString(L(this.args[0].evaluate(r))):L(this.args[0].evaluate(r))}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const ce=["Unknown","Point","LineString","Polygon"];class ye{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?ce[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let c=this._parseColorCache[r];return c||(c=this._parseColorCache[r]=An.parse(r)),c}}class Ie{constructor(r,c,h,b){this.name=r,this.type=c,this._evaluate=h,this.args=b}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,c){const h=r[0],b=Ie.definitions[h];if(!b)return c.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(b)?b[0]:b.type,w=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,E=w.filter(([O])=>!Array.isArray(O)||O.length===r.length-1);let I=null;for(const[O,R]of E){I=new Qr(c.registry,c.path,null,c.scope);const B=[];let H=!1;for(let j=1;j<r.length;j++){const $=r[j],se=Array.isArray(O)?O[j-1]:O.type,oe=I.parse($,1+B.length,se);if(!oe){H=!0;break}B.push(oe)}if(!H)if(Array.isArray(O)&&O.length!==B.length)I.error(`Expected ${O.length} arguments, but found ${B.length} instead.`);else{for(let j=0;j<B.length;j++){const $=Array.isArray(O)?O[j]:O.type,se=B[j];I.concat(j+1).checkSubtype($,se.type)}if(0===I.errors.length)return new Ie(h,y,R,B)}}if(1===E.length)c.errors.push(...I.errors);else{const O=(E.length?E:w).map(([B])=>{return H=B,Array.isArray(H)?`(${H.map(zn).join(", ")})`:`(${zn(H.type)}...)`;var H}).join(" | "),R=[];for(let B=1;B<r.length;B++){const H=c.parse(r[B],1+R.length);if(!H)return null;R.push(zn(H.type))}c.error(`Expected arguments of type ${O}, but found (${R.join(", ")}) instead.`)}return null}static register(r,c){Ie.definitions=c;for(const h in c)r[h]=Ie}}class je{constructor(r,c,h){this.type=Ps,this.locale=h,this.caseSensitive=r,this.diacriticSensitive=c}static parse(r,c){if(2!==r.length)return c.error("Expected one argument.");const h=r[1];if("object"!=typeof h||Array.isArray(h))return c.error("Collator options argument must be an object.");const b=c.parse(void 0!==h["case-sensitive"]&&h["case-sensitive"],1,Gt);if(!b)return null;const y=c.parse(void 0!==h["diacritic-sensitive"]&&h["diacritic-sensitive"],1,Gt);if(!y)return null;let w=null;return h.locale&&(w=c.parse(h.locale,1,Jt),!w)?null:new je(b,y,w)}evaluate(r){return new Nl(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const Ae=8192;function Tt(l,r){l[0]=Math.min(l[0],r[0]),l[1]=Math.min(l[1],r[1]),l[2]=Math.max(l[2],r[0]),l[3]=Math.max(l[3],r[1])}function ht(l,r){return!(l[0]<=r[0]||l[2]>=r[2]||l[1]<=r[1]||l[3]>=r[3])}function pt(l,r){const c=(180+l[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,b=Math.pow(2,r.z);return[Math.round(c*b*Ae),Math.round(h*b*Ae)]}function gt(l,r,c){const h=l[0]-r[0],b=l[1]-r[1],y=l[0]-c[0],w=l[1]-c[1];return h*w-y*b==0&&h*y<=0&&b*w<=0}function mn(l,r){let c=!1;for(let w=0,E=r.length;w<E;w++){const I=r[w];for(let O=0,R=I.length;O<R-1;O++){if(gt(l,I[O],I[O+1]))return!1;(b=I[O])[1]>(h=l)[1]!=(y=I[O+1])[1]>h[1]&&h[0]<(y[0]-b[0])*(h[1]-b[1])/(y[1]-b[1])+b[0]&&(c=!c)}}var h,b,y;return c}function ti(l,r){for(let c=0;c<r.length;c++)if(mn(l,r[c]))return!0;return!1}function dn(l,r,c,h){const b=h[0]-c[0],y=h[1]-c[1],w=(l[0]-c[0])*y-b*(l[1]-c[1]),E=(r[0]-c[0])*y-b*(r[1]-c[1]);return w>0&&E<0||w<0&&E>0}function pn(l,r,c){for(const O of c)for(let R=0;R<O.length-1;++R)if((E=[(w=O[R+1])[0]-(y=O[R])[0],w[1]-y[1]])[0]*(I=[(b=r)[0]-(h=l)[0],b[1]-h[1]])[1]-E[1]*I[0]!=0&&dn(h,b,y,w)&&dn(y,w,h,b))return!0;var h,b,y,w,E,I;return!1}function qn(l,r){for(let c=0;c<l.length;++c)if(!mn(l[c],r))return!1;for(let c=0;c<l.length-1;++c)if(pn(l[c],l[c+1],r))return!1;return!0}function ui(l,r){for(let c=0;c<r.length;c++)if(qn(l,r[c]))return!0;return!1}function fo(l,r,c){const h=[];for(let b=0;b<l.length;b++){const y=[];for(let w=0;w<l[b].length;w++){const E=pt(l[b][w],c);Tt(r,E),y.push(E)}h.push(y)}return h}function Ni(l,r,c){const h=[];for(let b=0;b<l.length;b++){const y=fo(l[b],r,c);h.push(y)}return h}function ja(l,r,c,h){if(l[0]<c[0]||l[0]>c[2]){const b=.5*h;let y=l[0]-c[0]>b?-h:c[0]-l[0]>b?h:0;0===y&&(y=l[0]-c[2]>b?-h:c[2]-l[0]>b?h:0),l[0]+=y}Tt(r,l)}function Kh(l,r,c,h){const b=Math.pow(2,h.z)*Ae,y=[h.x*Ae,h.y*Ae],w=[];for(const E of l)for(const I of E){const O=[I.x+y[0],I.y+y[1]];ja(O,r,c,b),w.push(O)}return w}function Yh(l,r,c,h){const b=Math.pow(2,h.z)*Ae,y=[h.x*Ae,h.y*Ae],w=[];for(const I of l){const O=[];for(const R of I){const B=[R.x+y[0],R.y+y[1]];Tt(r,B),O.push(B)}w.push(O)}if(r[2]-r[0]<=b/2){(E=r)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const I of w)for(const O of I)ja(O,r,c,b)}var E;return w}class $a{constructor(r,c){this.type=Gt,this.geojson=r,this.geometries=c}static parse(r,c){if(2!==r.length)return c.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Rs(r[1])){const h=r[1];if("FeatureCollection"===h.type)for(let b=0;b<h.features.length;++b){const y=h.features[b].geometry.type;if("Polygon"===y||"MultiPolygon"===y)return new $a(h,h.features[b].geometry)}else if("Feature"===h.type){const b=h.geometry.type;if("Polygon"===b||"MultiPolygon"===b)return new $a(h,h.geometry)}else if("Polygon"===h.type||"MultiPolygon"===h.type)return new $a(h,h)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(null!=r.geometry()&&null!=r.canonicalID()){if("Point"===r.geometryType())return function(c,h){const b=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],w=c.canonicalID();if("Polygon"===h.type){const E=fo(h.coordinates,y,w),I=Kh(c.geometry(),b,y,w);if(!ht(b,y))return!1;for(const O of I)if(!mn(O,E))return!1}if("MultiPolygon"===h.type){const E=Ni(h.coordinates,y,w),I=Kh(c.geometry(),b,y,w);if(!ht(b,y))return!1;for(const O of I)if(!ti(O,E))return!1}return!0}(r,this.geometries);if("LineString"===r.geometryType())return function(c,h){const b=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],w=c.canonicalID();if("Polygon"===h.type){const E=fo(h.coordinates,y,w),I=Yh(c.geometry(),b,y,w);if(!ht(b,y))return!1;for(const O of I)if(!qn(O,E))return!1}if("MultiPolygon"===h.type){const E=Ni(h.coordinates,y,w),I=Yh(c.geometry(),b,y,w);if(!ht(b,y))return!1;for(const O of I)if(!ui(O,E))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function Yc(l){if(l instanceof Ie&&("get"===l.name&&1===l.args.length||"feature-state"===l.name||"has"===l.name&&1===l.args.length||"properties"===l.name||"geometry-type"===l.name||"id"===l.name||/^filter-/.test(l.name))||l instanceof $a)return!1;let r=!0;return l.eachChild(c=>{r&&!Yc(c)&&(r=!1)}),r}function Ga(l){if(l instanceof Ie&&"feature-state"===l.name)return!1;let r=!0;return l.eachChild(c=>{r&&!Ga(c)&&(r=!1)}),r}function da(l,r){if(l instanceof Ie&&r.indexOf(l.name)>=0)return!1;let c=!0;return l.eachChild(h=>{c&&!da(h,r)&&(c=!1)}),c}class Qc{constructor(r,c){this.type=c.type,this.name=r,this.boundExpression=c}static parse(r,c){if(2!==r.length||"string"!=typeof r[1])return c.error("'var' expression requires exactly one string literal argument.");const h=r[1];return c.scope.has(h)?new Qc(h,c.scope.get(h)):c.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class xi{constructor(r,c=[],h,b=new Pl,y=[]){this.registry=r,this.path=c,this.key=c.map(w=>`[${w}]`).join(""),this.scope=b,this.errors=y,this.expectedType=h}parse(r,c,h,b,y={}){return c?this.concat(c,h,b)._parse(r,y):this._parse(r,y)}_parse(r,c){function h(b,y,w){return"assert"===w?new le(y,[b]):"coerce"===w?new de(y,[b]):b}if(null!==r&&"string"!=typeof r&&"boolean"!=typeof r&&"number"!=typeof r||(r=["literal",r]),Array.isArray(r)){if(0===r.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const b=r[0];if("string"!=typeof b)return this.error(`Expression name must be a string, but found ${typeof b} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[b];if(y){let w=y.parse(r,this);if(!w)return null;if(this.expectedType){const E=this.expectedType,I=w.type;if("string"!==E.kind&&"number"!==E.kind&&"boolean"!==E.kind&&"object"!==E.kind&&"array"!==E.kind||"value"!==I.kind)if("color"!==E.kind&&"formatted"!==E.kind&&"resolvedImage"!==E.kind||"value"!==I.kind&&"string"!==I.kind)if("padding"!==E.kind||"value"!==I.kind&&"number"!==I.kind&&"array"!==I.kind){if(this.checkSubtype(E,I))return null}else w=h(w,E,c.typeAnnotation||"coerce");else w=h(w,E,c.typeAnnotation||"coerce");else w=h(w,E,c.typeAnnotation||"assert")}if(!(w instanceof V)&&"resolvedImage"!==w.type.kind&&fu(w)){const E=new ye;try{w=new V(w.type,w.evaluate(E))}catch(I){return this.error(I.message),null}}return w}return this.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===r?"'undefined' value invalid. Use null instead.":"object"==typeof r?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,c,h){const b="number"==typeof r?this.path.concat(r):this.path,y=h?this.scope.concat(h):this.scope;return new xi(this.registry,b,c||null,y,this.errors)}error(r,...c){const h=`${this.key}${c.map(b=>`[${b}]`).join("")}`;this.errors.push(new Jo(h,r))}checkSubtype(r,c){const h=_r(r,c);return h&&this.error(h),h}}var Qr=xi;function fu(l){if(l instanceof Qc)return fu(l.boundExpression);if(l instanceof Ie&&"error"===l.name||l instanceof je||l instanceof $a)return!1;const r=l instanceof de||l instanceof le;let c=!0;return l.eachChild(h=>{c=r?c&&fu(h):c&&h instanceof V}),!!c&&Yc(l)&&da(l,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Fl(l,r){const c=l.length-1;let h,b,y=0,w=c,E=0;for(;y<=w;)if(E=Math.floor((y+w)/2),h=l[E],b=l[E+1],h<=r){if(E===c||r<b)return E;y=E+1}else{if(!(h>r))throw new q("Input is not a number.");w=E-1}return 0}class Vn{constructor(r,c,h){this.type=r,this.input=c,this.labels=[],this.outputs=[];for(const[b,y]of h)this.labels.push(b),this.outputs.push(y)}static parse(r,c){if(r.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return c.error("Expected an even number of arguments.");const h=c.parse(r[1],1,it);if(!h)return null;const b=[];let y=null;c.expectedType&&"value"!==c.expectedType.kind&&(y=c.expectedType);for(let w=1;w<r.length;w+=2){const E=1===w?-1/0:r[w],I=r[w+1],O=w,R=w+1;if("number"!=typeof E)return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(b.length&&b[b.length-1][0]>=E)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',O);const B=c.parse(I,R,y);if(!B)return null;y=y||B.type,b.push([E,B])}return new Vn(y,h,b)}evaluate(r){const c=this.labels,h=this.outputs;if(1===c.length)return h[0].evaluate(r);const b=this.input.evaluate(r);if(b<=c[0])return h[0].evaluate(r);const y=c.length;return b>=c[y-1]?h[y-1].evaluate(r):h[Fl(c,b)].evaluate(r)}eachChild(r){r(this.input);for(const c of this.outputs)r(c)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function ai(l,r,c){return l*(1-c)+r*c}var Fn=Object.freeze({__proto__:null,array:function(l,r,c){return l.map((h,b)=>ai(h,r[b],c))},color:function(l,r,c){return new An(ai(l.r,r.r,c),ai(l.g,r.g,c),ai(l.b,r.b,c),ai(l.a,r.a,c))},number:ai,padding:function(l,r,c){const h=l.values,b=r.values;return new Hi([ai(h[0],b[0],c),ai(h[1],b[1],c),ai(h[2],b[2],c),ai(h[3],b[3],c)])}});const Xc=.95047,Qh=1.08883,Nt=4/29,It=6/29,Ll=3*It*It,mc=Math.PI/180,Jc=180/Math.PI;function Ln(l){return l>.008856451679035631?Math.pow(l,1/3):l/Ll+Nt}function Ye(l){return l>It?l*l*l:Ll*(l-Nt)}function ua(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function jt(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function Bn(l){const r=jt(l.r),c=jt(l.g),h=jt(l.b),b=Ln((.4124564*r+.3575761*c+.1804375*h)/Xc),y=Ln((.2126729*r+.7151522*c+.072175*h)/1);return{l:116*y-16,a:500*(b-y),b:200*(y-Ln((.0193339*r+.119192*c+.9503041*h)/Qh)),alpha:l.a}}function mu(l){let r=(l.l+16)/116,c=isNaN(l.a)?r:r+l.a/500,h=isNaN(l.b)?r:r-l.b/200;return r=1*Ye(r),c=Xc*Ye(c),h=Qh*Ye(h),new An(ua(3.2404542*c-1.5371385*r-.4985314*h),ua(-.969266*c+1.8760108*r+.041556*h),ua(.0556434*c-.2040259*r+1.0572252*h),l.alpha)}function xb(l,r,c){const h=r-l;return l+c*(h>180||h<-180?h-360*Math.round(h/360):h)}const Bl={forward:Bn,reverse:mu,interpolate:function(l,r,c){return{l:ai(l.l,r.l,c),a:ai(l.a,r.a,c),b:ai(l.b,r.b,c),alpha:ai(l.alpha,r.alpha,c)}}},Ns={forward:function(l){const{l:r,a:c,b:h}=Bn(l),b=Math.atan2(h,c)*Jc;return{h:b<0?b+360:b,c:Math.sqrt(c*c+h*h),l:r,alpha:l.a}},reverse:function(l){const r=l.h*mc,c=l.c;return mu({l:l.l,a:Math.cos(r)*c,b:Math.sin(r)*c,alpha:l.alpha})},interpolate:function(l,r,c){return{h:xb(l.h,r.h,c),c:ai(l.c,r.c,c),l:ai(l.l,r.l,c),alpha:ai(l.alpha,r.alpha,c)}}};var nr=Object.freeze({__proto__:null,hcl:Ns,lab:Bl});class Nr{constructor(r,c,h,b,y){this.type=r,this.operator=c,this.interpolation=h,this.input=b,this.labels=[],this.outputs=[];for(const[w,E]of y)this.labels.push(w),this.outputs.push(E)}static interpolationFactor(r,c,h,b){let y=0;if("exponential"===r.name)y=gu(c,r.base,h,b);else if("linear"===r.name)y=gu(c,1,h,b);else if("cubic-bezier"===r.name){const w=r.controlPoints;y=new di(w[0],w[1],w[2],w[3]).solve(gu(c,1,h,b))}return y}static parse(r,c){let[h,b,y,...w]=r;if(!Array.isArray(b)||0===b.length)return c.error("Expected an interpolation type expression.",1);if("linear"===b[0])b={name:"linear"};else if("exponential"===b[0]){const O=b[1];if("number"!=typeof O)return c.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:O}}else{if("cubic-bezier"!==b[0])return c.error(`Unknown interpolation type ${String(b[0])}`,1,0);{const O=b.slice(1);if(4!==O.length||O.some(R=>"number"!=typeof R||R<0||R>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:O}}}if(r.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(y=c.parse(y,2,it),!y)return null;const E=[];let I=null;"interpolate-hcl"===h||"interpolate-lab"===h?I=gr:c.expectedType&&"value"!==c.expectedType.kind&&(I=c.expectedType);for(let O=0;O<w.length;O+=2){const R=w[O],B=w[O+1],H=O+3,j=O+4;if("number"!=typeof R)return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(E.length&&E[E.length-1][0]>=R)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);const $=c.parse(B,j,I);if(!$)return null;I=I||$.type,E.push([R,$])}return"number"===I.kind||"color"===I.kind||"padding"===I.kind||"array"===I.kind&&"number"===I.itemType.kind&&"number"==typeof I.N?new Nr(I,h,b,y,E):c.error(`Type ${zn(I)} is not interpolatable.`)}evaluate(r){const c=this.labels,h=this.outputs;if(1===c.length)return h[0].evaluate(r);const b=this.input.evaluate(r);if(b<=c[0])return h[0].evaluate(r);const y=c.length;if(b>=c[y-1])return h[y-1].evaluate(r);const w=Fl(c,b),E=Nr.interpolationFactor(this.interpolation,b,c[w],c[w+1]),I=h[w].evaluate(r),O=h[w+1].evaluate(r);return"interpolate"===this.operator?Fn[this.type.kind.toLowerCase()](I,O,E):"interpolate-hcl"===this.operator?Ns.reverse(Ns.interpolate(Ns.forward(I),Ns.forward(O),E)):Bl.reverse(Bl.interpolate(Bl.forward(I),Bl.forward(O),E))}eachChild(r){r(this.input);for(const c of this.outputs)r(c)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function gu(l,r,c,h){const b=h-c,y=l-c;return 0===b?0:1===r?y/b:(Math.pow(r,y)-1)/(Math.pow(r,b)-1)}class bu{constructor(r,c){this.type=r,this.args=c}static parse(r,c){if(r.length<2)return c.error("Expectected at least one argument.");let h=null;const b=c.expectedType;b&&"value"!==b.kind&&(h=b);const y=[];for(const E of r.slice(1)){const I=c.parse(E,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!I)return null;h=h||I.type,y.push(I)}if(!h)throw new Error("No output type");const w=b&&y.some(E=>_r(b,E.type));return new bu(w?Rt:h,y)}evaluate(r){let c,h=null,b=0;for(const y of this.args)if(b++,h=y.evaluate(r),h&&h instanceof Co&&!h.available&&(c||(c=h.name),h=null,b===this.args.length&&(h=c)),null!==h)break;return h}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class Fr{constructor(r,c){this.type=c.type,this.bindings=[].concat(r),this.result=c}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const c of this.bindings)r(c[1]);r(this.result)}static parse(r,c){if(r.length<4)return c.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const h=[];for(let y=1;y<r.length-1;y+=2){const w=r[y];if("string"!=typeof w)return c.error(`Expected string, but found ${typeof w} instead.`,y);if(/[^a-zA-Z0-9_]/.test(w))return c.error("Variable names must contain only alphanumeric characters or '_'.",y);const E=c.parse(r[y+1],y+1);if(!E)return null;h.push([w,E])}const b=c.parse(r[r.length-1],r.length-1,c.expectedType,h);return b?new Fr(h,b):null}outputDefined(){return this.result.outputDefined()}}class _u{constructor(r,c,h){this.type=r,this.index=c,this.input=h}static parse(r,c){if(3!==r.length)return c.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=c.parse(r[1],1,it),b=c.parse(r[2],2,er(c.expectedType||Rt));return h&&b?new _u(b.type.itemType,h,b):null}evaluate(r){const c=this.index.evaluate(r),h=this.input.evaluate(r);if(c<0)throw new q(`Array index out of bounds: ${c} < 0.`);if(c>=h.length)throw new q(`Array index out of bounds: ${c} > ${h.length-1}.`);if(c!==Math.floor(c))throw new q(`Array index must be an integer, but found ${c} instead.`);return h[c]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Xh{constructor(r,c){this.type=Gt,this.needle=r,this.haystack=c}static parse(r,c){if(3!==r.length)return c.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=c.parse(r[1],1,Rt),b=c.parse(r[2],2,Rt);return h&&b?Rl(h.type,[Gt,Jt,it,bs,Rt])?new Xh(h,b):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${zn(h.type)} instead`):null}evaluate(r){const c=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!h)return!1;if(!wn(c,["boolean","string","number","null"]))throw new q(`Expected first argument to be of type boolean, string, number or null, but found ${zn(Q(c))} instead.`);if(!wn(h,["string","array"]))throw new q(`Expected second argument to be of type array or string, but found ${zn(Q(h))} instead.`);return h.indexOf(c)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class vu{constructor(r,c,h){this.type=it,this.needle=r,this.haystack=c,this.fromIndex=h}static parse(r,c){if(r.length<=2||r.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=c.parse(r[1],1,Rt),b=c.parse(r[2],2,Rt);if(!h||!b)return null;if(!Rl(h.type,[Gt,Jt,it,bs,Rt]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${zn(h.type)} instead`);if(4===r.length){const y=c.parse(r[3],3,it);return y?new vu(h,b,y):null}return new vu(h,b)}evaluate(r){const c=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!wn(c,["boolean","string","number","null"]))throw new q(`Expected first argument to be of type boolean, string, number or null, but found ${zn(Q(c))} instead.`);if(!wn(h,["string","array"]))throw new q(`Expected second argument to be of type array or string, but found ${zn(Q(h))} instead.`);if(this.fromIndex){const b=this.fromIndex.evaluate(r);return h.indexOf(c,b)}return h.indexOf(c)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class ed{constructor(r,c,h,b,y,w){this.inputType=r,this.type=c,this.input=h,this.cases=b,this.outputs=y,this.otherwise=w}static parse(r,c){if(r.length<5)return c.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return c.error("Expected an even number of arguments.");let h,b;c.expectedType&&"value"!==c.expectedType.kind&&(b=c.expectedType);const y={},w=[];for(let O=2;O<r.length-1;O+=2){let R=r[O];const B=r[O+1];Array.isArray(R)||(R=[R]);const H=c.concat(O);if(0===R.length)return H.error("Expected at least one branch label.");for(const $ of R){if("number"!=typeof $&&"string"!=typeof $)return H.error("Branch labels must be numbers or strings.");if("number"==typeof $&&Math.abs($)>Number.MAX_SAFE_INTEGER)return H.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof $&&Math.floor($)!==$)return H.error("Numeric branch labels must be integer values.");if(h){if(H.checkSubtype(h,Q($)))return null}else h=Q($);if(void 0!==y[String($)])return H.error("Branch labels must be unique.");y[String($)]=w.length}const j=c.parse(B,O,b);if(!j)return null;b=b||j.type,w.push(j)}const E=c.parse(r[1],1,Rt);if(!E)return null;const I=c.parse(r[r.length-1],r.length-1,b);return I?"value"!==E.type.kind&&c.concat(1).checkSubtype(h,E.type)?null:new ed(h,b,E,y,w,I):null}evaluate(r){const c=this.input.evaluate(r);return(Q(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class yu{constructor(r,c,h){this.type=r,this.branches=c,this.otherwise=h}static parse(r,c){if(r.length<4)return c.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return c.error("Expected an odd number of arguments.");let h;c.expectedType&&"value"!==c.expectedType.kind&&(h=c.expectedType);const b=[];for(let w=1;w<r.length-1;w+=2){const E=c.parse(r[w],w,Gt);if(!E)return null;const I=c.parse(r[w+1],w+1,h);if(!I)return null;b.push([E,I]),h=h||I.type}const y=c.parse(r[r.length-1],r.length-1,h);if(!y)return null;if(!h)throw new Error("Can't infer output type");return new yu(h,b,y)}evaluate(r){for(const[c,h]of this.branches)if(c.evaluate(r))return h.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[c,h]of this.branches)r(c),r(h);r(this.otherwise)}outputDefined(){return this.branches.every(([r,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class xu{constructor(r,c,h,b){this.type=r,this.input=c,this.beginIndex=h,this.endIndex=b}static parse(r,c){if(r.length<=2||r.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=c.parse(r[1],1,Rt),b=c.parse(r[2],2,it);if(!h||!b)return null;if(!Rl(h.type,[er(Rt),Jt,Rt]))return c.error(`Expected first argument to be of type array or string, but found ${zn(h.type)} instead`);if(4===r.length){const y=c.parse(r[3],3,it);return y?new xu(h.type,h,b,y):null}return new xu(h.type,h,b)}evaluate(r){const c=this.input.evaluate(r),h=this.beginIndex.evaluate(r);if(!wn(c,["string","array"]))throw new q(`Expected first argument to be of type array or string, but found ${zn(Q(c))} instead.`);if(this.endIndex){const b=this.endIndex.evaluate(r);return c.slice(h,b)}return c.slice(h)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Jh(l,r){return"=="===l||"!="===l?"boolean"===r.kind||"string"===r.kind||"number"===r.kind||"null"===r.kind||"value"===r.kind:"string"===r.kind||"number"===r.kind||"value"===r.kind}function ep(l,r,c,h){return 0===h.compare(r,c)}function no(l,r,c){const h="=="!==l&&"!="!==l;return class rP{constructor(y,w,E){this.type=Gt,this.lhs=y,this.rhs=w,this.collator=E,this.hasUntypedArgument="value"===y.type.kind||"value"===w.type.kind}static parse(y,w){if(3!==y.length&&4!==y.length)return w.error("Expected two or three arguments.");const E=y[0];let I=w.parse(y[1],1,Rt);if(!I)return null;if(!Jh(E,I.type))return w.concat(1).error(`"${E}" comparisons are not supported for type '${zn(I.type)}'.`);let O=w.parse(y[2],2,Rt);if(!O)return null;if(!Jh(E,O.type))return w.concat(2).error(`"${E}" comparisons are not supported for type '${zn(O.type)}'.`);if(I.type.kind!==O.type.kind&&"value"!==I.type.kind&&"value"!==O.type.kind)return w.error(`Cannot compare types '${zn(I.type)}' and '${zn(O.type)}'.`);h&&("value"===I.type.kind&&"value"!==O.type.kind?I=new le(O.type,[I]):"value"!==I.type.kind&&"value"===O.type.kind&&(O=new le(I.type,[O])));let R=null;if(4===y.length){if("string"!==I.type.kind&&"string"!==O.type.kind&&"value"!==I.type.kind&&"value"!==O.type.kind)return w.error("Cannot use collator to compare non-string types.");if(R=w.parse(y[3],3,Ps),!R)return null}return new rP(I,O,R)}evaluate(y){const w=this.lhs.evaluate(y),E=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){const I=Q(w),O=Q(E);if(I.kind!==O.kind||"string"!==I.kind&&"number"!==I.kind)throw new q(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${I.kind}, ${O.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const I=Q(w),O=Q(E);if("string"!==I.kind||"string"!==O.kind)return r(y,w,E)}return this.collator?c(y,w,E,this.collator.evaluate(y)):r(y,w,E)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}const Zn=no("==",function(l,r,c){return r===c},ep),wb=no("!=",function(l,r,c){return r!==c},function(l,r,c,h){return!ep(0,r,c,h)}),Wf=no("<",function(l,r,c){return r<c},function(l,r,c,h){return h.compare(r,c)<0}),qf=no(">",function(l,r,c){return r>c},function(l,r,c,h){return h.compare(r,c)>0}),Ue=no("<=",function(l,r,c){return r<=c},function(l,r,c,h){return h.compare(r,c)<=0}),Cb=no(">=",function(l,r,c){return r>=c},function(l,r,c,h){return h.compare(r,c)>=0});class Qe{constructor(r,c,h,b,y){this.type=Jt,this.number=r,this.locale=c,this.currency=h,this.minFractionDigits=b,this.maxFractionDigits=y}static parse(r,c){if(3!==r.length)return c.error("Expected two arguments.");const h=c.parse(r[1],1,it);if(!h)return null;const b=r[2];if("object"!=typeof b||Array.isArray(b))return c.error("NumberFormat options argument must be an object.");let y=null;if(b.locale&&(y=c.parse(b.locale,1,Jt),!y))return null;let w=null;if(b.currency&&(w=c.parse(b.currency,1,Jt),!w))return null;let E=null;if(b["min-fraction-digits"]&&(E=c.parse(b["min-fraction-digits"],1,it),!E))return null;let I=null;return b["max-fraction-digits"]&&(I=c.parse(b["max-fraction-digits"],1,it),!I)?null:new Qe(h,y,w,E,I)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Wa{constructor(r){this.type=Fo,this.sections=r}static parse(r,c){if(r.length<2)return c.error("Expected at least one argument.");const h=r[1];if(!Array.isArray(h)&&"object"==typeof h)return c.error("First argument must be an image or text section.");const b=[];let y=!1;for(let w=1;w<=r.length-1;++w){const E=r[w];if(y&&"object"==typeof E&&!Array.isArray(E)){y=!1;let I=null;if(E["font-scale"]&&(I=c.parse(E["font-scale"],1,it),!I))return null;let O=null;if(E["text-font"]&&(O=c.parse(E["text-font"],1,er(Jt)),!O))return null;let R=null;if(E["text-color"]&&(R=c.parse(E["text-color"],1,gr),!R))return null;const B=b[b.length-1];B.scale=I,B.font=O,B.textColor=R}else{const I=c.parse(r[w],1,Rt);if(!I)return null;const O=I.type.kind;if("string"!==O&&"value"!==O&&"null"!==O&&"resolvedImage"!==O)return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,b.push({content:I,scale:null,font:null,textColor:null})}}return new Wa(b)}evaluate(r){return new to(this.sections.map(c=>{const h=c.content.evaluate(r);return Q(h)===br?new tr("",h,null,null,null):new tr(L(h),null,c.scale?c.scale.evaluate(r):null,c.font?c.font.evaluate(r).join(","):null,c.textColor?c.textColor.evaluate(r):null)}))}eachChild(r){for(const c of this.sections)r(c.content),c.scale&&r(c.scale),c.font&&r(c.font),c.textColor&&r(c.textColor)}outputDefined(){return!1}}class wu{constructor(r){this.type=br,this.input=r}static parse(r,c){if(2!==r.length)return c.error("Expected two arguments.");const h=c.parse(r[1],1,Jt);return h?new wu(h):c.error("No image name provided.")}evaluate(r){const c=this.input.evaluate(r),h=Co.fromString(c);return h&&r.availableImages&&(h.available=r.availableImages.indexOf(c)>-1),h}eachChild(r){r(this.input)}outputDefined(){return!1}}class td{constructor(r){this.type=it,this.input=r}static parse(r,c){if(2!==r.length)return c.error(`Expected 1 argument, but found ${r.length-1} instead.`);const h=c.parse(r[1],1);return h?"array"!==h.type.kind&&"string"!==h.type.kind&&"value"!==h.type.kind?c.error(`Expected argument of type string or array, but found ${zn(h.type)} instead.`):new td(h):null}evaluate(r){const c=this.input.evaluate(r);if("string"==typeof c||Array.isArray(c))return c.length;throw new q(`Expected value to be of type string or array, but found ${zn(Q(c))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const zl={"==":Zn,"!=":wb,">":qf,"<":Wf,">=":Cb,"<=":Ue,array:le,at:_u,boolean:le,case:yu,coalesce:bu,collator:je,format:Wa,image:wu,in:Xh,"index-of":vu,interpolate:Nr,"interpolate-hcl":Nr,"interpolate-lab":Nr,length:td,let:Fr,literal:V,match:ed,number:le,"number-format":Qe,object:le,slice:xu,step:Vn,string:le,"to-boolean":de,"to-color":de,"to-number":de,"to-string":de,var:Qc,within:$a};function On(l,[r,c,h,b]){r=r.evaluate(l),c=c.evaluate(l),h=h.evaluate(l);const y=b?b.evaluate(l):1,w=Do(r,c,h,y);if(w)throw new q(w);return new An(r/255*y,c/255*y,h/255*y,y)}function Cu(l,r){return l in r}function Vl(l,r){const c=r[l];return void 0===c?null:c}function Fs(l){return{type:l}}function Du(l){return{result:"success",value:l}}function Ul(l){return{result:"error",value:l}}function At(l){return"data-driven"===l["property-type"]||"cross-faded-data-driven"===l["property-type"]}function nd(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function Eu(l){return!!l.expression&&l.expression.interpolated}function tn(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":null===l?"null":typeof l}function gc(l){return"object"==typeof l&&null!==l&&!Array.isArray(l)}function Db(l){return l}function li(l,r){const c="color"===r.type,h=l.stops&&"object"==typeof l.stops[0][0],b=h||!(h||void 0!==l.property),y=l.type||(Eu(r)?"exponential":"interval");if(c||"padding"===r.type){const O=c?An.parse:Hi.parse;(l=Xo({},l)).stops&&(l.stops=l.stops.map(R=>[R[0],O(R[1])])),l.default=O(l.default?l.default:r.default)}if(l.colorSpace&&"rgb"!==l.colorSpace&&!nr[l.colorSpace])throw new Error(`Unknown color space: ${l.colorSpace}`);let w,E,I;if("exponential"===y)w=Hl;else if("interval"===y)w=Sb;else if("categorical"===y){w=Eb,E=Object.create(null);for(const O of l.stops)E[O[0]]=O[1];I=typeof l.stops[0][0]}else{if("identity"!==y)throw new Error(`Unknown function type "${y}"`);w=Su}if(h){const O={},R=[];for(let j=0;j<l.stops.length;j++){const $=l.stops[j],se=$[0].zoom;void 0===O[se]&&(O[se]={zoom:se,type:l.type,property:l.property,default:l.default,stops:[]},R.push(se)),O[se].stops.push([$[0].value,$[1]])}const B=[];for(const j of R)B.push([O[j].zoom,li(O[j],r)]);const H={name:"linear"};return{kind:"composite",interpolationType:H,interpolationFactor:Nr.interpolationFactor.bind(void 0,H),zoomStops:B.map(j=>j[0]),evaluate:({zoom:j},$)=>Hl({stops:B,base:l.base},r,j).evaluate(j,$)}}if(b){const O="exponential"===y?{name:"exponential",base:void 0!==l.base?l.base:1}:null;return{kind:"camera",interpolationType:O,interpolationFactor:Nr.interpolationFactor.bind(void 0,O),zoomStops:l.stops.map(R=>R[0]),evaluate:({zoom:R})=>w(l,r,R,E,I)}}return{kind:"source",evaluate(O,R){const B=R&&R.properties?R.properties[l.property]:void 0;return void 0===B?id(l.default,r.default):w(l,r,B,E,I)}}}function id(l,r,c){return void 0!==l?l:void 0!==r?r:void 0!==c?c:void 0}function Eb(l,r,c,h,b){return id(typeof c===b?h[c]:void 0,l.default,r.default)}function Sb(l,r,c){if("number"!==tn(c))return id(l.default,r.default);const h=l.stops.length;if(1===h||c<=l.stops[0][0])return l.stops[0][1];if(c>=l.stops[h-1][0])return l.stops[h-1][1];const b=Fl(l.stops.map(y=>y[0]),c);return l.stops[b][1]}function Hl(l,r,c){const h=void 0!==l.base?l.base:1;if("number"!==tn(c))return id(l.default,r.default);const b=l.stops.length;if(1===b||c<=l.stops[0][0])return l.stops[0][1];if(c>=l.stops[b-1][0])return l.stops[b-1][1];const y=Fl(l.stops.map(R=>R[0]),c),w=function(R,B,H,j){const $=j-H,se=R-H;return 0===$?0:1===B?se/$:(Math.pow(B,se)-1)/(Math.pow(B,$)-1)}(c,h,l.stops[y][0],l.stops[y+1][0]),E=l.stops[y][1],I=l.stops[y+1][1];let O=Fn[r.type]||Db;if(l.colorSpace&&"rgb"!==l.colorSpace){const R=nr[l.colorSpace];O=(B,H)=>R.reverse(R.interpolate(R.forward(B),R.forward(H),w))}return"function"==typeof E.evaluate?{evaluate(...R){const B=E.evaluate.apply(void 0,R),H=I.evaluate.apply(void 0,R);if(void 0!==B&&void 0!==H)return O(B,H,w)}}:O(E,I,w)}function Su(l,r,c){switch(r.type){case"color":c=An.parse(c);break;case"formatted":c=to.fromString(c.toString());break;case"resolvedImage":c=Co.fromString(c.toString());break;case"padding":c=Hi.parse(c);break;default:tn(c)===r.type||"enum"===r.type&&r.values[c]||(c=void 0)}return id(c,l.default,r.default)}Ie.register(zl,{error:[{kind:"error"},[Jt],(l,[r])=>{throw new q(r.evaluate(l))}],typeof:[Jt,[Rt],(l,[r])=>zn(Q(r.evaluate(l)))],"to-rgba":[er(it,4),[gr],(l,[r])=>r.evaluate(l).toArray()],rgb:[gr,[it,it,it],On],rgba:[gr,[it,it,it,it],On],has:{type:Gt,overloads:[[[Jt],(l,[r])=>Cu(r.evaluate(l),l.properties())],[[Jt,_s],(l,[r,c])=>Cu(r.evaluate(l),c.evaluate(l))]]},get:{type:Rt,overloads:[[[Jt],(l,[r])=>Vl(r.evaluate(l),l.properties())],[[Jt,_s],(l,[r,c])=>Vl(r.evaluate(l),c.evaluate(l))]]},"feature-state":[Rt,[Jt],(l,[r])=>Vl(r.evaluate(l),l.featureState||{})],properties:[_s,[],l=>l.properties()],"geometry-type":[Jt,[],l=>l.geometryType()],id:[Rt,[],l=>l.id()],zoom:[it,[],l=>l.globals.zoom],"heatmap-density":[it,[],l=>l.globals.heatmapDensity||0],"line-progress":[it,[],l=>l.globals.lineProgress||0],accumulated:[Rt,[],l=>void 0===l.globals.accumulated?null:l.globals.accumulated],"+":[it,Fs(it),(l,r)=>{let c=0;for(const h of r)c+=h.evaluate(l);return c}],"*":[it,Fs(it),(l,r)=>{let c=1;for(const h of r)c*=h.evaluate(l);return c}],"-":{type:it,overloads:[[[it,it],(l,[r,c])=>r.evaluate(l)-c.evaluate(l)],[[it],(l,[r])=>-r.evaluate(l)]]},"/":[it,[it,it],(l,[r,c])=>r.evaluate(l)/c.evaluate(l)],"%":[it,[it,it],(l,[r,c])=>r.evaluate(l)%c.evaluate(l)],ln2:[it,[],()=>Math.LN2],pi:[it,[],()=>Math.PI],e:[it,[],()=>Math.E],"^":[it,[it,it],(l,[r,c])=>Math.pow(r.evaluate(l),c.evaluate(l))],sqrt:[it,[it],(l,[r])=>Math.sqrt(r.evaluate(l))],log10:[it,[it],(l,[r])=>Math.log(r.evaluate(l))/Math.LN10],ln:[it,[it],(l,[r])=>Math.log(r.evaluate(l))],log2:[it,[it],(l,[r])=>Math.log(r.evaluate(l))/Math.LN2],sin:[it,[it],(l,[r])=>Math.sin(r.evaluate(l))],cos:[it,[it],(l,[r])=>Math.cos(r.evaluate(l))],tan:[it,[it],(l,[r])=>Math.tan(r.evaluate(l))],asin:[it,[it],(l,[r])=>Math.asin(r.evaluate(l))],acos:[it,[it],(l,[r])=>Math.acos(r.evaluate(l))],atan:[it,[it],(l,[r])=>Math.atan(r.evaluate(l))],min:[it,Fs(it),(l,r)=>Math.min(...r.map(c=>c.evaluate(l)))],max:[it,Fs(it),(l,r)=>Math.max(...r.map(c=>c.evaluate(l)))],abs:[it,[it],(l,[r])=>Math.abs(r.evaluate(l))],round:[it,[it],(l,[r])=>{const c=r.evaluate(l);return c<0?-Math.round(-c):Math.round(c)}],floor:[it,[it],(l,[r])=>Math.floor(r.evaluate(l))],ceil:[it,[it],(l,[r])=>Math.ceil(r.evaluate(l))],"filter-==":[Gt,[Jt,Rt],(l,[r,c])=>l.properties()[r.value]===c.value],"filter-id-==":[Gt,[Rt],(l,[r])=>l.id()===r.value],"filter-type-==":[Gt,[Jt],(l,[r])=>l.geometryType()===r.value],"filter-<":[Gt,[Jt,Rt],(l,[r,c])=>{const h=l.properties()[r.value],b=c.value;return typeof h==typeof b&&h<b}],"filter-id-<":[Gt,[Rt],(l,[r])=>{const c=l.id(),h=r.value;return typeof c==typeof h&&c<h}],"filter->":[Gt,[Jt,Rt],(l,[r,c])=>{const h=l.properties()[r.value],b=c.value;return typeof h==typeof b&&h>b}],"filter-id->":[Gt,[Rt],(l,[r])=>{const c=l.id(),h=r.value;return typeof c==typeof h&&c>h}],"filter-<=":[Gt,[Jt,Rt],(l,[r,c])=>{const h=l.properties()[r.value],b=c.value;return typeof h==typeof b&&h<=b}],"filter-id-<=":[Gt,[Rt],(l,[r])=>{const c=l.id(),h=r.value;return typeof c==typeof h&&c<=h}],"filter->=":[Gt,[Jt,Rt],(l,[r,c])=>{const h=l.properties()[r.value],b=c.value;return typeof h==typeof b&&h>=b}],"filter-id->=":[Gt,[Rt],(l,[r])=>{const c=l.id(),h=r.value;return typeof c==typeof h&&c>=h}],"filter-has":[Gt,[Rt],(l,[r])=>r.value in l.properties()],"filter-has-id":[Gt,[],l=>null!==l.id()&&void 0!==l.id()],"filter-type-in":[Gt,[er(Jt)],(l,[r])=>r.value.indexOf(l.geometryType())>=0],"filter-id-in":[Gt,[er(Rt)],(l,[r])=>r.value.indexOf(l.id())>=0],"filter-in-small":[Gt,[Jt,er(Rt)],(l,[r,c])=>c.value.indexOf(l.properties()[r.value])>=0],"filter-in-large":[Gt,[Jt,er(Rt)],(l,[r,c])=>function(h,b,y,w){for(;y<=w;){const E=y+w>>1;if(b[E]===h)return!0;b[E]>h?w=E-1:y=E+1}return!1}(l.properties()[r.value],c.value,0,c.value.length-1)],all:{type:Gt,overloads:[[[Gt,Gt],(l,[r,c])=>r.evaluate(l)&&c.evaluate(l)],[Fs(Gt),(l,r)=>{for(const c of r)if(!c.evaluate(l))return!1;return!0}]]},any:{type:Gt,overloads:[[[Gt,Gt],(l,[r,c])=>r.evaluate(l)||c.evaluate(l)],[Fs(Gt),(l,r)=>{for(const c of r)if(c.evaluate(l))return!0;return!1}]]},"!":[Gt,[Gt],(l,[r])=>!r.evaluate(l)],"is-supported-script":[Gt,[Jt],(l,[r])=>{const c=l.globals&&l.globals.isSupportedScript;return!c||c(r.evaluate(l))}],upcase:[Jt,[Jt],(l,[r])=>r.evaluate(l).toUpperCase()],downcase:[Jt,[Jt],(l,[r])=>r.evaluate(l).toLowerCase()],concat:[Jt,Fs(Rt),(l,r)=>r.map(c=>L(c.evaluate(l))).join("")],"resolved-locale":[Jt,[Ps],(l,[r])=>r.evaluate(l).resolvedLocale()]});class jl{constructor(r,c){var h;this.expression=r,this._warningHistory={},this._evaluator=new ye,this._defaultValue=c?"color"===(h=c).type&&gc(h.default)?new An(0,0,0,0):"color"===h.type?An.parse(h.default)||null:"padding"===h.type?Hi.parse(h.default)||null:void 0===h.default?null:h.default:null,this._enumValues=c&&"enum"===c.type?c.values:null}evaluateWithoutErrorHandling(r,c,h,b,y,w){return this._evaluator.globals=r,this._evaluator.feature=c,this._evaluator.featureState=h,this._evaluator.canonical=b,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(r,c,h,b,y,w){this._evaluator.globals=r,this._evaluator.feature=c||null,this._evaluator.featureState=h||null,this._evaluator.canonical=b,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=w||null;try{const E=this.expression.evaluate(this._evaluator);if(null==E||"number"==typeof E&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new q(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function od(l){return Array.isArray(l)&&l.length>0&&"string"==typeof l[0]&&l[0]in zl}function rd(l,r){const c=new Qr(zl,[],r?function(b){const y={color:gr,string:Jt,number:it,enum:Jt,boolean:Gt,formatted:Fo,padding:aa,resolvedImage:br};return"array"===b.type?er(y[b.value]||Rt,b.length):y[b.type]}(r):void 0),h=c.parse(l,void 0,void 0,void 0,r&&"string"===r.type?{typeAnnotation:"coerce"}:void 0);return h?Du(new jl(h,r)):Ul(c.errors)}class Tu{constructor(r,c){this.kind=r,this._styleExpression=c,this.isStateDependent="constant"!==r&&!Ga(c.expression)}evaluateWithoutErrorHandling(r,c,h,b,y,w){return this._styleExpression.evaluateWithoutErrorHandling(r,c,h,b,y,w)}evaluate(r,c,h,b,y,w){return this._styleExpression.evaluate(r,c,h,b,y,w)}}class sd{constructor(r,c,h,b){this.kind=r,this.zoomStops=h,this._styleExpression=c,this.isStateDependent="camera"!==r&&!Ga(c.expression),this.interpolationType=b}evaluateWithoutErrorHandling(r,c,h,b,y,w){return this._styleExpression.evaluateWithoutErrorHandling(r,c,h,b,y,w)}evaluate(r,c,h,b,y,w){return this._styleExpression.evaluate(r,c,h,b,y,w)}interpolationFactor(r,c,h){return this.interpolationType?Nr.interpolationFactor(this.interpolationType,r,c,h):0}}function $l(l,r){const c=rd(l,r);if("error"===c.result)return c;const h=c.value.expression,b=Yc(h);if(!b&&!At(r))return Ul([new Jo("","data expressions not supported")]);const y=da(h,["zoom"]);if(!y&&!nd(r))return Ul([new Jo("","zoom expressions not supported")]);const w=ad(h);return w||y?w instanceof Jo?Ul([w]):w instanceof Nr&&!Eu(r)?Ul([new Jo("",'"interpolate" expressions cannot be used with this property')]):Du(w?new sd(b?"camera":"composite",c.value,w.labels,w instanceof Nr?w.interpolation:void 0):new Tu(b?"constant":"source",c.value)):Ul([new Jo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ls{constructor(r,c){this._parameters=r,this._specification=c,Xo(this,li(this._parameters,this._specification))}static deserialize(r){return new Ls(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function ad(l){let r=null;if(l instanceof Fr)r=ad(l.result);else if(l instanceof bu){for(const c of l.args)if(r=ad(c),r)break}else(l instanceof Vn||l instanceof Nr)&&l.input instanceof Ie&&"zoom"===l.input.name&&(r=l);return r instanceof Jo||l.eachChild(c=>{const h=ad(c);h instanceof Jo?r=h:!r&&h?r=new Jo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&h&&r!==h&&(r=new Jo("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Le(l){const r=l.key,c=l.value,h=l.valueSpec||{},b=l.objectElementValidators||{},y=l.style,w=l.styleSpec,E=l.validateSpec;let I=[];const O=tn(c);if("object"!==O)return[new ke(r,c,`object expected, ${O} found`)];for(const R in c){const B=R.split(".")[0],H=h[B]||h["*"];let j;if(b[B])j=b[B];else if(h[B])j=E;else if(b["*"])j=b["*"];else{if(!h["*"]){I.push(new ke(r,c[R],`unknown property "${R}"`));continue}j=E}I=I.concat(j({key:(r&&`${r}.`)+R,value:c[R],valueSpec:H,style:y,styleSpec:w,object:c,objectKey:R,validateSpec:E},c))}for(const R in h)b[R]||h[R].required&&void 0===h[R].default&&void 0===c[R]&&I.push(new ke(r,c,`missing required property "${R}"`));return I}function Iu(l){const r=l.value,c=l.valueSpec,h=l.style,b=l.styleSpec,y=l.key,w=l.arrayElementValidator||l.validateSpec;if("array"!==tn(r))return[new ke(y,r,`array expected, ${tn(r)} found`)];if(c.length&&r.length!==c.length)return[new ke(y,r,`array length ${c.length} expected, length ${r.length} found`)];if(c["min-length"]&&r.length<c["min-length"])return[new ke(y,r,`array length at least ${c["min-length"]} expected, length ${r.length} found`)];let E={type:c.value,values:c.values};b.$version<7&&(E.function=c.function),"object"===tn(c.value)&&(E=c.value);let I=[];for(let O=0;O<r.length;O++)I=I.concat(w({array:r,arrayIndex:O,value:r[O],valueSpec:E,validateSpec:l.validateSpec,style:h,styleSpec:b,key:`${y}[${O}]`}));return I}function Qt(l){const r=l.key,c=l.value,h=l.valueSpec;let b=tn(c);return"number"===b&&c!=c&&(b="NaN"),"number"!==b?[new ke(r,c,`number expected, ${b} found`)]:"minimum"in h&&c<h.minimum?[new ke(r,c,`${c} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&c>h.maximum?[new ke(r,c,`${c} is greater than the maximum value ${h.maximum}`)]:[]}function bc(l){const r=l.valueSpec,c=Wn(l.value.type);let h,b,y,w={};const E="categorical"!==c&&void 0===l.value.property,I=!E,O="array"===tn(l.value.stops)&&"array"===tn(l.value.stops[0])&&"object"===tn(l.value.stops[0][0]),R=Le({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(j){if("identity"===c)return[new ke(j.key,j.value,'identity function may not have a "stops" property')];let $=[];const se=j.value;return $=$.concat(Iu({key:j.key,value:se,valueSpec:j.valueSpec,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:B})),"array"===tn(se)&&0===se.length&&$.push(new ke(j.key,se,"array must have at least one stop")),$},default:function(j){return j.validateSpec({key:j.key,value:j.value,valueSpec:r,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec})}}});return"identity"===c&&E&&R.push(new ke(l.key,l.value,'missing required property "property"')),"identity"===c||l.value.stops||R.push(new ke(l.key,l.value,'missing required property "stops"')),"exponential"===c&&l.valueSpec.expression&&!Eu(l.valueSpec)&&R.push(new ke(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(I&&!At(l.valueSpec)?R.push(new ke(l.key,l.value,"property functions not supported")):E&&!nd(l.valueSpec)&&R.push(new ke(l.key,l.value,"zoom functions not supported"))),"categorical"!==c&&!O||void 0!==l.value.property||R.push(new ke(l.key,l.value,'"property" property is required')),R;function B(j){let $=[];const se=j.value,oe=j.key;if("array"!==tn(se))return[new ke(oe,se,`array expected, ${tn(se)} found`)];if(2!==se.length)return[new ke(oe,se,`array length 2 expected, length ${se.length} found`)];if(O){if("object"!==tn(se[0]))return[new ke(oe,se,`object expected, ${tn(se[0])} found`)];if(void 0===se[0].zoom)return[new ke(oe,se,"object stop key must have zoom")];if(void 0===se[0].value)return[new ke(oe,se,"object stop key must have value")];if(y&&y>Wn(se[0].zoom))return[new ke(oe,se[0].zoom,"stop zoom values must appear in ascending order")];Wn(se[0].zoom)!==y&&(y=Wn(se[0].zoom),b=void 0,w={}),$=$.concat(Le({key:`${oe}[0]`,value:se[0],valueSpec:{zoom:{}},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:Qt,value:H}}))}else $=$.concat(H({key:`${oe}[0]`,value:se[0],valueSpec:{},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec},se));return od(gs(se[1]))?$.concat([new ke(`${oe}[1]`,se[1],"expressions are not allowed in function stops.")]):$.concat(j.validateSpec({key:`${oe}[1]`,value:se[1],valueSpec:r,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec}))}function H(j,$){const se=tn(j.value),oe=Wn(j.value),_e=null!==j.value?j.value:$;if(h){if(se!==h)return[new ke(j.key,_e,`${se} stop domain type must match previous stop domain type ${h}`)]}else h=se;if("number"!==se&&"string"!==se&&"boolean"!==se)return[new ke(j.key,_e,"stop domain value must be a number, string, or boolean")];if("number"!==se&&"categorical"!==c){let De=`number expected, ${se} found`;return At(r)&&void 0===c&&(De+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ke(j.key,_e,De)]}return"categorical"!==c||"number"!==se||isFinite(oe)&&Math.floor(oe)===oe?"categorical"!==c&&"number"===se&&void 0!==b&&oe<b?[new ke(j.key,_e,"stop domain values must appear in ascending order")]:(b=oe,"categorical"===c&&oe in w?[new ke(j.key,_e,"stop domain values must be unique")]:(w[oe]=!0,[])):[new ke(j.key,_e,`integer expected, found ${oe}`)]}}function ha(l){const r=("property"===l.expressionContext?$l:rd)(gs(l.value),l.valueSpec);if("error"===r.result)return r.value.map(h=>new ke(`${l.key}${h.key}`,l.value,h.message));const c=r.value.expression||r.value._styleExpression.expression;if("property"===l.expressionContext&&"text-font"===l.propertyKey&&!c.outputDefined())return[new ke(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===l.expressionContext&&"layout"===l.propertyType&&!Ga(c))return[new ke(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===l.expressionContext&&!Ga(c))return[new ke(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&0===l.expressionContext.indexOf("cluster")){if(!da(c,["zoom","feature-state"]))return[new ke(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===l.expressionContext&&!Yc(c))return[new ke(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function pa(l){const r=l.key,c=l.value,h=l.valueSpec,b=[];return Array.isArray(h.values)?-1===h.values.indexOf(Wn(c))&&b.push(new ke(r,c,`expected one of [${h.values.join(", ")}], ${JSON.stringify(c)} found`)):-1===Object.keys(h.values).indexOf(Wn(c))&&b.push(new ke(r,c,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(c)} found`)),b}function ld(l){if(!0===l||!1===l)return!0;if(!Array.isArray(l)||0===l.length)return!1;switch(l[0]){case"has":return l.length>=2&&"$id"!==l[1]&&"$type"!==l[1];case"in":return l.length>=3&&("string"!=typeof l[1]||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==l.length||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const r of l.slice(1))if(!ld(r)&&"boolean"!=typeof r)return!1;return!0;default:return!0}}const Zf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Mu(l){if(null==l)return{filter:()=>!0,needGeometry:!1};ld(l)||(l=vr(l));const r=rd(l,Zf);if("error"===r.result)throw new Error(r.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,h,b)=>r.value.evaluate(c,h,{},b),needGeometry:Un(l)}}function Bs(l,r){return l<r?-1:l>r?1:0}function Un(l){if(!Array.isArray(l))return!1;if("within"===l[0])return!0;for(let r=1;r<l.length;r++)if(Un(l[r]))return!0;return!1}function vr(l){if(!l)return!0;const r=l[0];return l.length<=1?"any"!==r:"=="===r?zt(l[1],l[2],"=="):"!="===r?Kn(zt(l[1],l[2],"==")):"<"===r||">"===r||"<="===r||">="===r?zt(l[1],l[2],r):"any"===r?(c=l.slice(1),["any"].concat(c.map(vr))):"all"===r?["all"].concat(l.slice(1).map(vr)):"none"===r?["all"].concat(l.slice(1).map(vr).map(Kn)):"in"===r?In(l[1],l.slice(2)):"!in"===r?Kn(In(l[1],l.slice(2))):"has"===r?ni(l[1]):"!has"===r?Kn(ni(l[1])):"within"!==r||l;var c}function zt(l,r,c){switch(l){case"$type":return[`filter-type-${c}`,r];case"$id":return[`filter-id-${c}`,r];default:return[`filter-${c}`,l,r]}}function In(l,r){if(0===r.length)return!1;switch(l){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(c=>typeof c!=typeof r[0])?["filter-in-large",l,["literal",r.sort(Bs)]]:["filter-in-small",l,["literal",r]]}}function ni(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function Kn(l){return["!",l]}function fa(l){return ld(gs(l.value))?ha(Xo({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):cd(l)}function cd(l){const r=l.value,c=l.key;if("array"!==tn(r))return[new ke(c,r,`array expected, ${tn(r)} found`)];const h=l.styleSpec;let b,y=[];if(r.length<1)return[new ke(c,r,"filter array must have at least 1 element")];switch(y=y.concat(pa({key:`${c}[0]`,value:r[0],valueSpec:h.filter_operator,style:l.style,styleSpec:l.styleSpec})),Wn(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===Wn(r[1])&&y.push(new ke(c,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":3!==r.length&&y.push(new ke(c,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(b=tn(r[1]),"string"!==b&&y.push(new ke(`${c}[1]`,r[1],`string expected, ${b} found`)));for(let w=2;w<r.length;w++)b=tn(r[w]),"$type"===Wn(r[1])?y=y.concat(pa({key:`${c}[${w}]`,value:r[w],valueSpec:h.geometry_type,style:l.style,styleSpec:l.styleSpec})):"string"!==b&&"number"!==b&&"boolean"!==b&&y.push(new ke(`${c}[${w}]`,r[w],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let w=1;w<r.length;w++)y=y.concat(cd({key:`${c}[${w}]`,value:r[w],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":b=tn(r[1]),2!==r.length?y.push(new ke(c,r,`filter array for "${r[0]}" operator must have 2 elements`)):"string"!==b&&y.push(new ke(`${c}[1]`,r[1],`string expected, ${b} found`));break;case"within":b=tn(r[1]),2!==r.length?y.push(new ke(c,r,`filter array for "${r[0]}" operator must have 2 elements`)):"object"!==b&&y.push(new ke(`${c}[1]`,r[1],`object expected, ${b} found`))}return y}function vs(l,r){const c=l.key,h=l.validateSpec,b=l.style,y=l.styleSpec,w=l.value,E=l.objectKey,I=y[`${r}_${l.layerType}`];if(!I)return[];const O=E.match(/^(.*)-transition$/);if("paint"===r&&O&&I[O[1]]&&I[O[1]].transition)return h({key:c,value:w,valueSpec:y.transition,style:b,styleSpec:y});const R=l.valueSpec||I[E];if(!R)return[new ke(c,w,`unknown property "${E}"`)];let B;if("string"===tn(w)&&At(R)&&!R.tokens&&(B=/^{([^}]+)}$/.exec(w)))return[new ke(c,w,`"${E}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(B[1])} }\`.`)];const H=[];return"symbol"===l.layerType&&("text-field"===E&&b&&!b.glyphs&&H.push(new ke(c,w,'use of "text-field" requires a style "glyphs" property')),"text-font"===E&&gc(gs(w))&&"identity"===Wn(w.type)&&H.push(new ke(c,w,'"text-font" does not support identity functions'))),H.concat(h({key:l.key,value:w,valueSpec:R,style:b,styleSpec:y,expressionContext:"property",propertyType:r,propertyKey:E}))}function Gl(l){return vs(l,"paint")}function tp(l){return vs(l,"layout")}function Wt(l){let r=[];const c=l.value,h=l.key,b=l.style,y=l.styleSpec;c.type||c.ref||r.push(new ke(h,c,'either "type" or "ref" is required'));let w=Wn(c.type);const E=Wn(c.ref);if(c.id){const I=Wn(c.id);for(let O=0;O<l.arrayIndex;O++){const R=b.layers[O];Wn(R.id)===I&&r.push(new ke(h,c.id,`duplicate layer id "${c.id}", previously used at line ${R.id.__line__}`))}}if("ref"in c){let I;["type","source","source-layer","filter","layout"].forEach(O=>{O in c&&r.push(new ke(h,c[O],`"${O}" is prohibited for ref layers`))}),b.layers.forEach(O=>{Wn(O.id)===E&&(I=O)}),I?I.ref?r.push(new ke(h,c.ref,"ref cannot reference another ref layer")):w=Wn(I.type):r.push(new ke(h,c.ref,`ref layer "${E}" not found`))}else if("background"!==w)if(c.source){const I=b.sources&&b.sources[c.source],O=I&&Wn(I.type);I?"vector"===O&&"raster"===w?r.push(new ke(h,c.source,`layer "${c.id}" requires a raster source`)):"raster"===O&&"raster"!==w?r.push(new ke(h,c.source,`layer "${c.id}" requires a vector source`)):"vector"!==O||c["source-layer"]?"raster-dem"===O&&"hillshade"!==w?r.push(new ke(h,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==w||!c.paint||!c.paint["line-gradient"]||"geojson"===O&&I.lineMetrics||r.push(new ke(h,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new ke(h,c,`layer "${c.id}" must specify a "source-layer"`)):r.push(new ke(h,c.source,`source "${c.source}" not found`))}else r.push(new ke(h,c,'missing required property "source"'));return r=r.concat(Le({key:h,value:c,valueSpec:y.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${h}.type`,value:c.type,valueSpec:y.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:c,objectKey:"type"}),filter:fa,layout:I=>Le({layer:c,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":O=>tp(Xo({layerType:w},O))}}),paint:I=>Le({layer:c,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":O=>Gl(Xo({layerType:w},O))}})}})),r}function ma(l){const r=l.value,c=l.key,h=tn(r);return"string"!==h?[new ke(c,r,`string expected, ${h} found`)]:[]}const ku={promoteId:function({key:l,value:r}){if("string"===tn(r))return ma({key:l,value:r});{const c=[];for(const h in r)c.push(...ma({key:`${l}.${h}`,value:r[h]}));return c}}};function Au(l){const r=l.value,c=l.key,h=l.styleSpec,b=l.style,y=l.validateSpec;if(!r.type)return[new ke(c,r,'"type" is required')];const w=Wn(r.type);let E;switch(w){case"vector":case"raster":case"raster-dem":return E=Le({key:c,value:r,valueSpec:h[`source_${w.replace("-","_")}`],style:l.style,styleSpec:h,objectElementValidators:ku,validateSpec:y}),E;case"geojson":if(E=Le({key:c,value:r,valueSpec:h.source_geojson,style:b,styleSpec:h,validateSpec:y,objectElementValidators:ku}),r.cluster)for(const I in r.clusterProperties){const[O,R]=r.clusterProperties[I],B="string"==typeof O?[O,["accumulated"],["get",I]]:O;E.push(...ha({key:`${c}.${I}.map`,value:R,validateSpec:y,expressionContext:"cluster-map"})),E.push(...ha({key:`${c}.${I}.reduce`,value:B,validateSpec:y,expressionContext:"cluster-reduce"}))}return E;case"video":return Le({key:c,value:r,valueSpec:h.source_video,style:b,validateSpec:y,styleSpec:h});case"image":return Le({key:c,value:r,valueSpec:h.source_image,style:b,validateSpec:y,styleSpec:h});case"canvas":return[new ke(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return pa({key:`${c}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:b,validateSpec:y,styleSpec:h})}}function Je(l){const r=l.value,c=l.styleSpec,h=c.light,b=l.style;let y=[];const w=tn(r);if(void 0===r)return y;if("object"!==w)return y=y.concat([new ke("light",r,`object expected, ${w} found`)]),y;for(const E in r){const I=E.match(/^(.*)-transition$/);y=y.concat(I&&h[I[1]]&&h[I[1]].transition?l.validateSpec({key:E,value:r[E],valueSpec:c.transition,validateSpec:l.validateSpec,style:b,styleSpec:c}):h[E]?l.validateSpec({key:E,value:r[E],valueSpec:h[E],validateSpec:l.validateSpec,style:b,styleSpec:c}):[new ke(E,r[E],`unknown property "${E}"`)])}return y}function dd(l){const r=l.value,c=l.styleSpec,h=c.terrain,b=l.style;let y=[];const w=tn(r);if(void 0===r)return y;if("object"!==w)return y=y.concat([new ke("terrain",r,`object expected, ${w} found`)]),y;for(const E in r)y=y.concat(h[E]?l.validateSpec({key:E,value:r[E],valueSpec:h[E],validateSpec:l.validateSpec,style:b,styleSpec:c}):[new ke(E,r[E],`unknown property "${E}"`)]);return y}function Ou(l){let r=[];const c=l.value,h=l.key;if(Array.isArray(c)){const b=[],y=[];for(const w in c)c[w].id&&b.includes(c[w].id)&&r.push(new ke(h,c,`all the sprites' ids must be unique, but ${c[w].id} is duplicated`)),b.push(c[w].id),c[w].url&&y.includes(c[w].url)&&r.push(new ke(h,c,`all the sprites' URLs must be unique, but ${c[w].url} is duplicated`)),y.push(c[w].url),r=r.concat(Le({key:`${h}[${w}]`,value:c[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return r}return ma({key:h,value:c})}const We={"*":()=>[],array:Iu,boolean:function(l){const r=l.value,c=l.key,h=tn(r);return"boolean"!==h?[new ke(c,r,`boolean expected, ${h} found`)]:[]},number:Qt,color:function(l){const r=l.key,c=l.value,h=tn(c);return"string"!==h?[new ke(r,c,`color expected, ${h} found`)]:null===la(c)?[new ke(r,c,`color expected, "${c}" found`)]:[]},constants:Va,enum:pa,filter:fa,function:bc,layer:Wt,object:Le,source:Au,light:Je,terrain:dd,string:ma,formatted:function(l){return 0===ma(l).length?[]:ha(l)},resolvedImage:function(l){return 0===ma(l).length?[]:ha(l)},padding:function(l){const r=l.key,c=l.value;if("array"===tn(c)){if(c.length<1||c.length>4)return[new ke(r,c,`padding requires 1 to 4 values; ${c.length} values found`)];const h={type:"number"};let b=[];for(let y=0;y<c.length;y++)b=b.concat(l.validateSpec({key:`${r}[${y}]`,value:c[y],validateSpec:l.validateSpec,valueSpec:h}));return b}return Qt({key:r,value:c,valueSpec:{}})},sprite:Ou};function io(l){const r=l.value,c=l.valueSpec,h=l.styleSpec;return l.validateSpec=io,c.expression&&gc(Wn(r))?bc(l):c.expression&&od(gs(r))?ha(l):c.type&&We[c.type]?We[c.type](l):Le(Xo({},l,{valueSpec:c.type?h[c.type]:c}))}function Hn(l){const r=l.value,c=l.key,h=ma(l);return h.length||(-1===r.indexOf("{fontstack}")&&h.push(new ke(c,r,'"glyphs" url must include a "{fontstack}" token')),-1===r.indexOf("{range}")&&h.push(new ke(c,r,'"glyphs" url must include a "{range}" token'))),h}function hi(l,r=Re){let c=[];return c=c.concat(io({key:"",value:l,valueSpec:r.$root,styleSpec:r,style:l,validateSpec:io,objectElementValidators:{glyphs:Hn,"*":()=>[]}})),l.constants&&(c=c.concat(Va({key:"constants",value:l.constants,style:l,styleSpec:r,validateSpec:io}))),qa(c)}function wi(l){return function(r){return l({...r,validateSpec:io})}}function qa(l){return[].concat(l).sort((r,c)=>r.line-c.line)}function Ii(l){return function(...r){return qa(l.apply(this,r))}}hi.source=Ii(wi(Au)),hi.sprite=Ii(wi(Ou)),hi.glyphs=Ii(wi(Hn)),hi.light=Ii(wi(Je)),hi.terrain=Ii(wi(dd)),hi.layer=Ii(wi(Wt)),hi.filter=Ii(wi(fa)),hi.paintProperty=Ii(wi(Gl)),hi.layoutProperty=Ii(wi(tp));const Za=hi,Pu=Za.light,Ka=Za.paintProperty,zs=Za.layoutProperty;function _t(l,r){let c=!1;if(r&&r.length)for(const h of r)l.fire(new Gn(new Error(h.message))),c=!0;return c}class $t{constructor(r,c,h){const b=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const w=new Int32Array(this.arrayBuffer);r=w[0],this.d=(c=w[1])+2*(h=w[2]);for(let I=0;I<this.d*this.d;I++){const O=w[3+I],R=w[3+I+1];b.push(O===R?null:w.subarray(O,R))}const E=w[3+b.length+1];this.keys=w.subarray(w[3+b.length],E),this.bboxes=w.subarray(E),this.insert=this._insertReadonly}else{this.d=c+2*h;for(let w=0;w<this.d*this.d;w++)b.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=r,this.padding=h,this.scale=c/r,this.uid=0;const y=h/c*r;this.min=-y,this.max=r+y}insert(r,c,h,b,y){this._forEachCell(c,h,b,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(c),this.bboxes.push(h),this.bboxes.push(b),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,c,h,b,y,w){this.cells[y].push(w)}query(r,c,h,b,y){const w=this.min,E=this.max;if(r<=w&&c<=w&&E<=h&&E<=b&&!y)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(r,c,h,b,this._queryCell,I,{},y),I}}_queryCell(r,c,h,b,y,w,E,I){const O=this.cells[y];if(null!==O){const R=this.keys,B=this.bboxes;for(let H=0;H<O.length;H++){const j=O[H];if(void 0===E[j]){const $=4*j;(I?I(B[$+0],B[$+1],B[$+2],B[$+3]):r<=B[$+2]&&c<=B[$+3]&&h>=B[$+0]&&b>=B[$+1])?(E[j]=!0,w.push(R[j])):E[j]=!1}}}}_forEachCell(r,c,h,b,y,w,E,I){const O=this._convertToCellCoord(r),R=this._convertToCellCoord(c),B=this._convertToCellCoord(h),H=this._convertToCellCoord(b);for(let j=O;j<=B;j++)for(let $=R;$<=H;$++){const se=this.d*$+j;if((!I||I(this._convertFromCellCoord(j),this._convertFromCellCoord($),this._convertFromCellCoord(j+1),this._convertFromCellCoord($+1)))&&y.call(this,r,c,h,b,se,w,E,I))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,c=3+this.cells.length+1+1;let h=0;for(let w=0;w<this.cells.length;w++)h+=this.cells[w].length;const b=new Int32Array(c+h+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;let y=c;for(let w=0;w<r.length;w++){const E=r[w];b[3+w]=y,b.set(E,y),y+=E.length}return b[3+r.length]=y,b.set(this.keys,y),y+=this.keys.length,b[3+r.length+1]=y,b.set(this.bboxes,y),y+=this.bboxes.length,b.buffer}static serialize(r,c){const h=r.toArrayBuffer();return c&&c.push(h),{buffer:h}}static deserialize(r){return new $t(r.buffer)}}const Jn={};function ot(l,r,c={}){if(Jn[l])throw new Error(`${l} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:l,writeable:!1}),Jn[l]={klass:r,omit:c.omit||[],shallow:c.shallow||[]}}ot("Object",Object),ot("TransferableGridIndex",$t),ot("Color",An),ot("Error",Error),ot("AJAXError",Os),ot("ResolvedImage",Co),ot("StylePropertyFunction",Ls),ot("StyleExpression",jl,{omit:["_evaluator"]}),ot("ZoomDependentExpression",sd),ot("ZoomConstantExpression",Tu),ot("CompoundExpression",Ie,{omit:["_evaluate"]});for(const l in zl)zl[l]._classRegistryKey||ot(`Expression_${l}`,zl[l]);function Xr(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&"ArrayBuffer"===l.constructor.name)}function Ci(l,r){if(null==l||"boolean"==typeof l||"number"==typeof l||"string"==typeof l||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob)return l;if(Xr(l)||mr(l))return r&&r.push(l),l;if(ArrayBuffer.isView(l)){const c=l;return r&&r.push(c.buffer),c}if(l instanceof ImageData)return r&&r.push(l.data.buffer),l;if(Array.isArray(l)){const c=[];for(const h of l)c.push(Ci(h,r));return c}if("object"==typeof l){const c=l.constructor,h=c._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!Jn[h])throw new Error(`${h} is not registered.`);const b=c.serialize?c.serialize(l,r):{};if(c.serialize){if(r&&b===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const y in l){if(!l.hasOwnProperty(y)||Jn[h].omit.indexOf(y)>=0)continue;const w=l[y];b[y]=Jn[h].shallow.indexOf(y)>=0?w:Ci(w,r)}l instanceof Error&&(b.message=l.message)}if(b.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==h&&(b.$name=h),b}throw new Error("can't serialize object of type "+typeof l)}function Lr(l){if(null==l||"boolean"==typeof l||"number"==typeof l||"string"==typeof l||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||Xr(l)||mr(l)||ArrayBuffer.isView(l)||l instanceof ImageData)return l;if(Array.isArray(l))return l.map(Lr);if("object"==typeof l){const r=l.$name||"Object";if(!Jn[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:c}=Jn[r];if(!c)throw new Error(`can't deserialize unregistered class ${r}`);if(c.deserialize)return c.deserialize(l);const h=Object.create(c.prototype);for(const b of Object.keys(l)){if("$name"===b)continue;const y=l[b];h[b]=Jn[r].shallow.indexOf(b)>=0?y:Lr(y)}return h}throw new Error("can't deserialize object of type "+typeof l)}class Di{constructor(){this.first=!0}update(r,c){const h=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=c),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=h,!0))}}const tt={"Latin-1 Supplement":l=>l>=128&&l<=255,Arabic:l=>l>=1536&&l<=1791,"Arabic Supplement":l=>l>=1872&&l<=1919,"Arabic Extended-A":l=>l>=2208&&l<=2303,"Hangul Jamo":l=>l>=4352&&l<=4607,"Unified Canadian Aboriginal Syllabics":l=>l>=5120&&l<=5759,Khmer:l=>l>=6016&&l<=6143,"Unified Canadian Aboriginal Syllabics Extended":l=>l>=6320&&l<=6399,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"CJK Radicals Supplement":l=>l>=11904&&l<=12031,"Kangxi Radicals":l=>l>=12032&&l<=12255,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Bopomofo:l=>l>=12544&&l<=12591,"Hangul Compatibility Jamo":l=>l>=12592&&l<=12687,Kanbun:l=>l>=12688&&l<=12703,"Bopomofo Extended":l=>l>=12704&&l<=12735,"CJK Strokes":l=>l>=12736&&l<=12783,"Katakana Phonetic Extensions":l=>l>=12784&&l<=12799,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"CJK Unified Ideographs Extension A":l=>l>=13312&&l<=19903,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Yi Syllables":l=>l>=40960&&l<=42127,"Yi Radicals":l=>l>=42128&&l<=42191,"Hangul Jamo Extended-A":l=>l>=43360&&l<=43391,"Hangul Syllables":l=>l>=44032&&l<=55215,"Hangul Jamo Extended-B":l=>l>=55216&&l<=55295,"Private Use Area":l=>l>=57344&&l<=63743,"CJK Compatibility Ideographs":l=>l>=63744&&l<=64255,"Arabic Presentation Forms-A":l=>l>=64336&&l<=65023,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Arabic Presentation Forms-B":l=>l>=65136&&l<=65279,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function Wl(l){for(const r of l)if(Ya(r.charCodeAt(0)))return!0;return!1}function on(l){for(const r of l)if(!Ru(r.charCodeAt(0)))return!1;return!0}function Ru(l){return!(tt.Arabic(l)||tt["Arabic Supplement"](l)||tt["Arabic Extended-A"](l)||tt["Arabic Presentation Forms-A"](l)||tt["Arabic Presentation Forms-B"](l))}function Ya(l){return!(746!==l&&747!==l&&(l<4352||!(tt["Bopomofo Extended"](l)||tt.Bopomofo(l)||tt["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||tt["CJK Compatibility Ideographs"](l)||tt["CJK Compatibility"](l)||tt["CJK Radicals Supplement"](l)||tt["CJK Strokes"](l)||!(!tt["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||12336===l)||tt["CJK Unified Ideographs Extension A"](l)||tt["CJK Unified Ideographs"](l)||tt["Enclosed CJK Letters and Months"](l)||tt["Hangul Compatibility Jamo"](l)||tt["Hangul Jamo Extended-A"](l)||tt["Hangul Jamo Extended-B"](l)||tt["Hangul Jamo"](l)||tt["Hangul Syllables"](l)||tt.Hiragana(l)||tt["Ideographic Description Characters"](l)||tt.Kanbun(l)||tt["Kangxi Radicals"](l)||tt["Katakana Phonetic Extensions"](l)||tt.Katakana(l)&&12540!==l||!(!tt["Halfwidth and Fullwidth Forms"](l)||65288===l||65289===l||65293===l||l>=65306&&l<=65310||65339===l||65341===l||65343===l||l>=65371&&l<=65503||65507===l||l>=65512&&l<=65519)||!(!tt["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||tt["Unified Canadian Aboriginal Syllabics"](l)||tt["Unified Canadian Aboriginal Syllabics Extended"](l)||tt["Vertical Forms"](l)||tt["Yijing Hexagram Symbols"](l)||tt["Yi Syllables"](l)||tt["Yi Radicals"](l))))}function Nu(l){return!(Ya(l)||(r=l,tt["Latin-1 Supplement"](r)&&(167===r||169===r||174===r||177===r||188===r||189===r||190===r||215===r||247===r)||tt["General Punctuation"](r)&&(8214===r||8224===r||8225===r||8240===r||8241===r||8251===r||8252===r||8258===r||8263===r||8264===r||8265===r||8273===r)||tt["Letterlike Symbols"](r)||tt["Number Forms"](r)||tt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||9003===r||r>=9085&&r<=9114||r>=9150&&r<=9165||9167===r||r>=9169&&r<=9179||r>=9186&&r<=9215)||tt["Control Pictures"](r)&&9251!==r||tt["Optical Character Recognition"](r)||tt["Enclosed Alphanumerics"](r)||tt["Geometric Shapes"](r)||tt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||tt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||tt["CJK Symbols and Punctuation"](r)||tt.Katakana(r)||tt["Private Use Area"](r)||tt["CJK Compatibility Forms"](r)||tt["Small Form Variants"](r)||tt["Halfwidth and Fullwidth Forms"](r)||8734===r||8756===r||8757===r||r>=9984&&r<=10087||r>=10102&&r<=10131||65532===r||65533===r));var r}function ys(l){return l>=1424&&l<=2303||tt["Arabic Presentation Forms-A"](l)||tt["Arabic Presentation Forms-B"](l)}function ji(l,r){return!(!r&&ys(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||tt.Khmer(l))}function Eo(l){for(const r of l)if(ys(r.charCodeAt(0)))return!0;return!1}const Jr="deferred",Br="loading",Qa="loaded";let ud=null,fn="unavailable",Vs=null;const hd=function(l){l&&"string"==typeof l&&l.indexOf("NetworkError")>-1&&(fn="error"),ud&&ud(l)};function ql(){Zl.fire(new sa("pluginStateChange",{pluginStatus:fn,pluginURL:Vs}))}const Zl=new xn,xs=function(){return fn},Xa=function(){if(fn!==Jr||!Vs)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");fn=Br,ql(),Vs&&Ba({url:Vs},l=>{l?hd(l):(fn=Qa,ql())})},ii={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>fn===Qa||null!=ii.applyArabicShaping,isLoading:()=>fn===Br,setState(l){if(!Rr())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");fn=l.pluginStatus,Vs=l.pluginURL},isParsed(){if(!Rr())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=ii.applyArabicShaping&&null!=ii.processBidirectionalText&&null!=ii.processStyledBidirectionalText},getPluginURL(){if(!Rr())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Vs}};class pi{constructor(r,c){this.zoom=r,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Di,this.transition={})}isSupportedScript(r){return function(c,h){for(const b of c)if(!ji(b.charCodeAt(0),h))return!1;return!0}(r,ii.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,c=r-Math.floor(r),h=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*c}}}class oo{constructor(r,c){this.property=r,this.value=c,this.expression=function(h,b){if(gc(h))return new Ls(h,b);if(od(h)){const y=$l(h,b);if("error"===y.result)throw new Error(y.value.map(w=>`${w.key}: ${w.message}`).join(", "));return y.value}{let y=h;return"color"===b.type&&"string"==typeof h?y=An.parse(h):"padding"!==b.type||"number"!=typeof h&&!Array.isArray(h)||(y=Hi.parse(h)),{kind:"constant",evaluate:()=>y}}}(void 0===c?r.specification.default:c,r.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(r,c,h){return this.property.possiblyEvaluate(this,r,c,h)}}class ir{constructor(r){this.property=r,this.value=new oo(r,void 0)}transitioned(r,c){return new Kl(this.property,this.value,c,Qo({},r.transition,this.transition),r.now)}untransitioned(){return new Kl(this.property,this.value,null,{},0)}}class _c{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return No(this._values[r].value.value)}setValue(r,c){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new ir(this._values[r].property)),this._values[r].value=new oo(this._values[r].property,null===c?void 0:No(c))}getTransition(r){return No(this._values[r].transition)}setTransition(r,c){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new ir(this._values[r].property)),this._values[r].transition=No(c)||void 0}serialize(){const r={};for(const c of Object.keys(this._values)){const h=this.getValue(c);void 0!==h&&(r[c]=h);const b=this.getTransition(c);void 0!==b&&(r[`${c}-transition`]=b)}return r}transitioned(r,c){const h=new Ja(this._properties);for(const b of Object.keys(this._values))h._values[b]=this._values[b].transitioned(r,c._values[b]);return h}untransitioned(){const r=new Ja(this._properties);for(const c of Object.keys(this._values))r._values[c]=this._values[c].untransitioned();return r}}class Kl{constructor(r,c,h,b,y){this.property=r,this.value=c,this.begin=y+b.delay||0,this.end=this.begin+b.duration||0,r.specification.transition&&(b.delay||b.duration)&&(this.prior=h)}possiblyEvaluate(r,c,h){const b=r.now||0,y=this.value.possiblyEvaluate(r,c,h),w=this.prior;if(w){if(b>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(b<this.begin)return w.possiblyEvaluate(r,c,h);{const E=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(r,c,h),y,function(I){if(I<=0)return 0;if(I>=1)return 1;const O=I*I,R=O*I;return 4*(I<.5?R:3*(I-O)+R-.75)}(E))}}return y}}class Ja{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,c,h){const b=new Fu(this._properties);for(const y of Object.keys(this._values))b._values[y]=this._values[y].possiblyEvaluate(r,c,h);return b}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class or{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}getValue(r){return No(this._values[r].value)}setValue(r,c){this._values[r]=new oo(this._values[r].property,null===c?void 0:No(c))}serialize(){const r={};for(const c of Object.keys(this._values)){const h=this.getValue(c);void 0!==h&&(r[c]=h)}return r}possiblyEvaluate(r,c,h){const b=new Fu(this._properties);for(const y of Object.keys(this._values))b._values[y]=this._values[y].possiblyEvaluate(r,c,h);return b}}class es{constructor(r,c,h){this.property=r,this.value=c,this.parameters=h}isConstant(){return"constant"===this.value.kind}constantOr(r){return"constant"===this.value.kind?this.value.value:r}evaluate(r,c,h,b){return this.property.evaluate(this.value,this.parameters,r,c,h,b)}}class Fu{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class wt{constructor(r){this.specification=r}possiblyEvaluate(r,c){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(c)}interpolate(r,c,h){const b=Fn[this.specification.type];return b?b(r,c,h):r}}class kt{constructor(r,c){this.specification=r,this.overrides=c}possiblyEvaluate(r,c,h,b){return new es(this,"constant"===r.expression.kind||"camera"===r.expression.kind?{kind:"constant",value:r.expression.evaluate(c,null,{},h,b)}:r.expression,c)}interpolate(r,c,h){if("constant"!==r.value.kind||"constant"!==c.value.kind)return r;if(void 0===r.value.value||void 0===c.value.value)return new es(this,{kind:"constant",value:void 0},r.parameters);const b=Fn[this.specification.type];return b?new es(this,{kind:"constant",value:b(r.value.value,c.value.value,h)},r.parameters):r}evaluate(r,c,h,b,y,w){return"constant"===r.kind?r.value:r.evaluate(c,h,b,y,w)}}class vc extends kt{possiblyEvaluate(r,c,h,b){if(void 0===r.value)return new es(this,{kind:"constant",value:void 0},c);if("constant"===r.expression.kind){const y=r.expression.evaluate(c,null,{},h,b),w="resolvedImage"===r.property.specification.type&&"string"!=typeof y?y.name:y,E=this._calculate(w,w,w,c);return new es(this,{kind:"constant",value:E},c)}if("camera"===r.expression.kind){const y=this._calculate(r.expression.evaluate({zoom:c.zoom-1}),r.expression.evaluate({zoom:c.zoom}),r.expression.evaluate({zoom:c.zoom+1}),c);return new es(this,{kind:"constant",value:y},c)}return new es(this,r.expression,c)}evaluate(r,c,h,b,y,w){if("source"===r.kind){const E=r.evaluate(c,h,b,y,w);return this._calculate(E,E,E,c)}return"composite"===r.kind?this._calculate(r.evaluate({zoom:Math.floor(c.zoom)-1},h,b),r.evaluate({zoom:Math.floor(c.zoom)},h,b),r.evaluate({zoom:Math.floor(c.zoom)+1},h,b),c):r.value}_calculate(r,c,h,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:r,to:c}:{from:h,to:c}}interpolate(r){return r}}class np{constructor(r){this.specification=r}possiblyEvaluate(r,c,h,b){if(void 0!==r.value){if("constant"===r.expression.kind){const y=r.expression.evaluate(c,null,{},h,b);return this._calculate(y,y,y,c)}return this._calculate(r.expression.evaluate(new pi(Math.floor(c.zoom-1),c)),r.expression.evaluate(new pi(Math.floor(c.zoom),c)),r.expression.evaluate(new pi(Math.floor(c.zoom+1),c)),c)}}_calculate(r,c,h,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:r,to:c}:{from:h,to:c}}interpolate(r){return r}}class ip{constructor(r){this.specification=r}possiblyEvaluate(r,c,h,b){return!!r.expression.evaluate(c,null,{},h,b)}interpolate(){return!1}}class yr{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const c in r){const h=r[c];h.specification.overridable&&this.overridableProperties.push(c);const b=this.defaultPropertyValues[c]=new oo(h,void 0),y=this.defaultTransitionablePropertyValues[c]=new ir(h);this.defaultTransitioningPropertyValues[c]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=b.possiblyEvaluate({})}}}ot("DataDrivenProperty",kt),ot("DataConstantProperty",wt),ot("CrossFadedDataDrivenProperty",vc),ot("CrossFadedProperty",np),ot("ColorRampProperty",ip);const Lu="-transition";class ws extends xn{constructor(r,c){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==r.type&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,"background"!==r.type&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),c.layout&&(this._unevaluatedLayout=new or(c.layout)),c.paint)){this._transitionablePaint=new _c(c.paint);for(const h in r.paint)this.setPaintProperty(h,r.paint[h],{validate:!1});for(const h in r.layout)this.setLayoutProperty(h,r.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Fu(c.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return"visibility"===r?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,c,h={}){null!=c&&this._validate(zs,`layers.${this.id}.layout.${r}`,r,c,h)||("visibility"!==r?this._unevaluatedLayout.setValue(r,c):this.visibility=c)}getPaintProperty(r){return r.endsWith(Lu)?this._transitionablePaint.getTransition(r.slice(0,-Lu.length)):this._transitionablePaint.getValue(r)}setPaintProperty(r,c,h={}){if(null!=c&&this._validate(Ka,`layers.${this.id}.paint.${r}`,r,c,h))return!1;if(r.endsWith(Lu))return this._transitionablePaint.setTransition(r.slice(0,-Lu.length),c||void 0),!1;{const b=this._transitionablePaint._values[r],y="cross-faded-data-driven"===b.property.specification["property-type"],w=b.value.isDataDriven(),E=b.value;this._transitionablePaint.setValue(r,c),this._handleSpecialPaintPropertyUpdate(r);const I=this._transitionablePaint._values[r].value;return I.isDataDriven()||w||y||this._handleOverridablePaintPropertyUpdate(r,E,I)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,c,h){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||"none"===this.visibility}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,c){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,c)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),Al(r,(c,h)=>!(void 0===c||"layout"===h&&!Object.keys(c).length||"paint"===h&&!Object.keys(c).length))}_validate(r,c,h,b,y={}){return(!y||!1!==y.validate)&&_t(this,r.call(Za,{key:c,layerType:this.type,objectKey:h,value:b,styleSpec:Re,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const c=this.paint.get(r);if(c instanceof es&&At(c.property.specification)&&("source"===c.value.kind||"composite"===c.value.kind)&&c.value.isStateDependent)return!0}return!1}}const Tb={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Bu{constructor(r,c){this._structArray=r,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Mi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,c){return r._trim(),c&&(r.isTransferred=!0,c.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const c=Object.create(this.prototype);return c.arrayBuffer=r.arrayBuffer,c.length=r.length,c.capacity=r.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function $i(l,r=1){let c=0,h=0;return{members:l.map(b=>{const y=Tb[b.type].BYTES_PER_ELEMENT,w=c=Kf(c,Math.max(r,y)),E=b.components||1;return h=Math.max(h,y),c+=y*E,{name:b.name,type:b.type,components:E,offset:w}}),size:Kf(c,Math.max(h,r)),alignment:r}}function Kf(l,r){return Math.ceil(l/r)*r}class pd extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,c){const h=this.length;return this.resize(h+1),this.emplace(h,r,c)}emplace(r,c,h){const b=2*r;return this.int16[b+0]=c,this.int16[b+1]=h,r}}pd.prototype.bytesPerElement=4,ot("StructArrayLayout2i4",pd);class yc extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,c,h){const b=this.length;return this.resize(b+1),this.emplace(b,r,c,h)}emplace(r,c,h,b){const y=3*r;return this.int16[y+0]=c,this.int16[y+1]=h,this.int16[y+2]=b,r}}yc.prototype.bytesPerElement=6,ot("StructArrayLayout3i6",yc);class el extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,c,h,b){const y=this.length;return this.resize(y+1),this.emplace(y,r,c,h,b)}emplace(r,c,h,b,y){const w=4*r;return this.int16[w+0]=c,this.int16[w+1]=h,this.int16[w+2]=b,this.int16[w+3]=y,r}}el.prototype.bytesPerElement=8,ot("StructArrayLayout4i8",el);class op extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,c,h,b,y,w){const E=this.length;return this.resize(E+1),this.emplace(E,r,c,h,b,y,w)}emplace(r,c,h,b,y,w,E){const I=6*r;return this.int16[I+0]=c,this.int16[I+1]=h,this.int16[I+2]=b,this.int16[I+3]=y,this.int16[I+4]=w,this.int16[I+5]=E,r}}op.prototype.bytesPerElement=12,ot("StructArrayLayout2i4i12",op);class fd extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,c,h,b,y,w){const E=this.length;return this.resize(E+1),this.emplace(E,r,c,h,b,y,w)}emplace(r,c,h,b,y,w,E){const I=4*r,O=8*r;return this.int16[I+0]=c,this.int16[I+1]=h,this.uint8[O+4]=b,this.uint8[O+5]=y,this.uint8[O+6]=w,this.uint8[O+7]=E,r}}fd.prototype.bytesPerElement=8,ot("StructArrayLayout2i4ub8",fd);class md extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,c){const h=this.length;return this.resize(h+1),this.emplace(h,r,c)}emplace(r,c,h){const b=2*r;return this.float32[b+0]=c,this.float32[b+1]=h,r}}md.prototype.bytesPerElement=8,ot("StructArrayLayout2f8",md);class Us extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,c,h,b,y,w,E,I,O,R){const B=this.length;return this.resize(B+1),this.emplace(B,r,c,h,b,y,w,E,I,O,R)}emplace(r,c,h,b,y,w,E,I,O,R,B){const H=10*r;return this.uint16[H+0]=c,this.uint16[H+1]=h,this.uint16[H+2]=b,this.uint16[H+3]=y,this.uint16[H+4]=w,this.uint16[H+5]=E,this.uint16[H+6]=I,this.uint16[H+7]=O,this.uint16[H+8]=R,this.uint16[H+9]=B,r}}Us.prototype.bytesPerElement=20,ot("StructArrayLayout10ui20",Us);class zu extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,c,h,b,y,w,E,I,O,R,B,H){const j=this.length;return this.resize(j+1),this.emplace(j,r,c,h,b,y,w,E,I,O,R,B,H)}emplace(r,c,h,b,y,w,E,I,O,R,B,H,j){const $=12*r;return this.int16[$+0]=c,this.int16[$+1]=h,this.int16[$+2]=b,this.int16[$+3]=y,this.uint16[$+4]=w,this.uint16[$+5]=E,this.uint16[$+6]=I,this.uint16[$+7]=O,this.int16[$+8]=R,this.int16[$+9]=B,this.int16[$+10]=H,this.int16[$+11]=j,r}}zu.prototype.bytesPerElement=24,ot("StructArrayLayout4i4ui4i24",zu);class Mn extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,c,h){const b=this.length;return this.resize(b+1),this.emplace(b,r,c,h)}emplace(r,c,h,b){const y=3*r;return this.float32[y+0]=c,this.float32[y+1]=h,this.float32[y+2]=b,r}}Mn.prototype.bytesPerElement=12,ot("StructArrayLayout3f12",Mn);class xc extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const c=this.length;return this.resize(c+1),this.emplace(c,r)}emplace(r,c){return this.uint32[1*r+0]=c,r}}xc.prototype.bytesPerElement=4,ot("StructArrayLayout1ul4",xc);class Vu extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,c,h,b,y,w,E,I,O){const R=this.length;return this.resize(R+1),this.emplace(R,r,c,h,b,y,w,E,I,O)}emplace(r,c,h,b,y,w,E,I,O,R){const B=10*r,H=5*r;return this.int16[B+0]=c,this.int16[B+1]=h,this.int16[B+2]=b,this.int16[B+3]=y,this.int16[B+4]=w,this.int16[B+5]=E,this.uint32[H+3]=I,this.uint16[B+8]=O,this.uint16[B+9]=R,r}}Vu.prototype.bytesPerElement=20,ot("StructArrayLayout6i1ul2ui20",Vu);class Uu extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,c,h,b,y,w){const E=this.length;return this.resize(E+1),this.emplace(E,r,c,h,b,y,w)}emplace(r,c,h,b,y,w,E){const I=6*r;return this.int16[I+0]=c,this.int16[I+1]=h,this.int16[I+2]=b,this.int16[I+3]=y,this.int16[I+4]=w,this.int16[I+5]=E,r}}Uu.prototype.bytesPerElement=12,ot("StructArrayLayout2i2i2i12",Uu);class gd extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,c,h,b,y){const w=this.length;return this.resize(w+1),this.emplace(w,r,c,h,b,y)}emplace(r,c,h,b,y,w){const E=4*r,I=8*r;return this.float32[E+0]=c,this.float32[E+1]=h,this.float32[E+2]=b,this.int16[I+6]=y,this.int16[I+7]=w,r}}gd.prototype.bytesPerElement=16,ot("StructArrayLayout2f1f2i16",gd);class bd extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,c,h,b){const y=this.length;return this.resize(y+1),this.emplace(y,r,c,h,b)}emplace(r,c,h,b,y){const w=12*r,E=3*r;return this.uint8[w+0]=c,this.uint8[w+1]=h,this.float32[E+1]=b,this.float32[E+2]=y,r}}bd.prototype.bytesPerElement=12,ot("StructArrayLayout2ub2f12",bd);class _d extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,c,h){const b=this.length;return this.resize(b+1),this.emplace(b,r,c,h)}emplace(r,c,h,b){const y=3*r;return this.uint16[y+0]=c,this.uint16[y+1]=h,this.uint16[y+2]=b,r}}_d.prototype.bytesPerElement=6,ot("StructArrayLayout3ui6",_d);class wc extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,c,h,b,y,w,E,I,O,R,B,H,j,$,se,oe,_e){const De=this.length;return this.resize(De+1),this.emplace(De,r,c,h,b,y,w,E,I,O,R,B,H,j,$,se,oe,_e)}emplace(r,c,h,b,y,w,E,I,O,R,B,H,j,$,se,oe,_e,De){const fe=24*r,we=12*r,Ve=48*r;return this.int16[fe+0]=c,this.int16[fe+1]=h,this.uint16[fe+2]=b,this.uint16[fe+3]=y,this.uint32[we+2]=w,this.uint32[we+3]=E,this.uint32[we+4]=I,this.uint16[fe+10]=O,this.uint16[fe+11]=R,this.uint16[fe+12]=B,this.float32[we+7]=H,this.float32[we+8]=j,this.uint8[Ve+36]=$,this.uint8[Ve+37]=se,this.uint8[Ve+38]=oe,this.uint32[we+10]=_e,this.int16[fe+22]=De,r}}wc.prototype.bytesPerElement=48,ot("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",wc);class ga extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,c,h,b,y,w,E,I,O,R,B,H,j,$,se,oe,_e,De,fe,we,Ve,Be,ct,bt,st,nt,et,dt){const rt=this.length;return this.resize(rt+1),this.emplace(rt,r,c,h,b,y,w,E,I,O,R,B,H,j,$,se,oe,_e,De,fe,we,Ve,Be,ct,bt,st,nt,et,dt)}emplace(r,c,h,b,y,w,E,I,O,R,B,H,j,$,se,oe,_e,De,fe,we,Ve,Be,ct,bt,st,nt,et,dt,rt){const Ze=34*r,Dt=17*r;return this.int16[Ze+0]=c,this.int16[Ze+1]=h,this.int16[Ze+2]=b,this.int16[Ze+3]=y,this.int16[Ze+4]=w,this.int16[Ze+5]=E,this.int16[Ze+6]=I,this.int16[Ze+7]=O,this.uint16[Ze+8]=R,this.uint16[Ze+9]=B,this.uint16[Ze+10]=H,this.uint16[Ze+11]=j,this.uint16[Ze+12]=$,this.uint16[Ze+13]=se,this.uint16[Ze+14]=oe,this.uint16[Ze+15]=_e,this.uint16[Ze+16]=De,this.uint16[Ze+17]=fe,this.uint16[Ze+18]=we,this.uint16[Ze+19]=Ve,this.uint16[Ze+20]=Be,this.uint16[Ze+21]=ct,this.uint16[Ze+22]=bt,this.uint32[Dt+12]=st,this.float32[Dt+13]=nt,this.float32[Dt+14]=et,this.float32[Dt+15]=dt,this.float32[Dt+16]=rt,r}}ga.prototype.bytesPerElement=68,ot("StructArrayLayout8i15ui1ul4f68",ga);class Lo extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const c=this.length;return this.resize(c+1),this.emplace(c,r)}emplace(r,c){return this.float32[1*r+0]=c,r}}Lo.prototype.bytesPerElement=4,ot("StructArrayLayout1f4",Lo);class vd extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,c,h){const b=this.length;return this.resize(b+1),this.emplace(b,r,c,h)}emplace(r,c,h,b){const y=4*r;return this.uint32[2*r+0]=c,this.uint16[y+2]=h,this.uint16[y+3]=b,r}}vd.prototype.bytesPerElement=8,ot("StructArrayLayout1ul2ui8",vd);class yd extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,c){const h=this.length;return this.resize(h+1),this.emplace(h,r,c)}emplace(r,c,h){const b=2*r;return this.uint16[b+0]=c,this.uint16[b+1]=h,r}}yd.prototype.bytesPerElement=4,ot("StructArrayLayout2ui4",yd);class Fi extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const c=this.length;return this.resize(c+1),this.emplace(c,r)}emplace(r,c){return this.uint16[1*r+0]=c,r}}Fi.prototype.bytesPerElement=2,ot("StructArrayLayout1ui2",Fi);class Hu extends Mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,c,h,b){const y=this.length;return this.resize(y+1),this.emplace(y,r,c,h,b)}emplace(r,c,h,b,y){const w=4*r;return this.float32[w+0]=c,this.float32[w+1]=h,this.float32[w+2]=b,this.float32[w+3]=y,r}}Hu.prototype.bytesPerElement=16,ot("StructArrayLayout4f16",Hu);class Cc extends Bu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Pt(this.anchorPointX,this.anchorPointY)}}Cc.prototype.size=20;class Bo extends Vu{get(r){return new Cc(this,r)}}ot("CollisionBoxArray",Bo);class xd extends Bu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}xd.prototype.size=48;class wd extends wc{get(r){return new xd(this,r)}}ot("PlacedSymbolArray",wd);class Hs extends Bu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Hs.prototype.size=68;class rr extends ga{get(r){return new Hs(this,r)}}ot("SymbolInstanceArray",rr);class tl extends Lo{getoffsetX(r){return this.float32[1*r+0]}}ot("GlyphOffsetArray",tl);class ba extends yc{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}ot("SymbolLineVertexArray",ba);class Yl extends Bu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Yl.prototype.size=8;class js extends vd{get(r){return new Yl(this,r)}}ot("FeatureIndexArray",js);class Cd extends pd{}class nl extends pd{}class Xt extends pd{}class rp extends op{}class Yf extends fd{}class Qf extends md{}class _a extends Us{}class g extends zu{}class a extends Mn{}class u extends xc{}class p extends Uu{}class m extends bd{}class x extends _d{}class D extends yd{}const S=$i([{name:"a_pos",components:2,type:"Int16"}],4),{members:M}=S;class k{constructor(r=[]){this.segments=r}prepareSegment(r,c,h,b){let y=this.segments[this.segments.length-1];return r>k.MAX_VERTEX_ARRAY_LENGTH&&yn(`Max vertices per segment is ${k.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!y||y.vertexLength+r>k.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==b)&&(y={vertexOffset:c.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},void 0!==b&&(y.sortKey=b),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const r of this.segments)for(const c in r.vaos)r.vaos[c].destroy()}static simpleSegment(r,c,h,b){return new k([{vertexOffset:r,primitiveOffset:c,vertexLength:h,primitiveLength:b,vaos:{},sortKey:0}])}}function F(l,r){return 256*(l=Yt(Math.floor(l),0,255))+Yt(Math.floor(r),0,255)}k.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ot("SegmentVector",k);const N=$i([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var U={},X={get exports(){return U},set exports(l){U=l}},ee={};({get exports(){return ee},set exports(l){ee=l}}).exports=function(l,r){var c,h,b,y,w,E,I,O;for(h=l.length-(c=3&l.length),b=r,w=3432918353,E=461845907,O=0;O<h;)I=255&l.charCodeAt(O)|(255&l.charCodeAt(++O))<<8|(255&l.charCodeAt(++O))<<16|(255&l.charCodeAt(++O))<<24,++O,b=27492+(65535&(y=5*(65535&(b=(b^=I=(65535&(I=(I=(65535&I)*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*E+(((I>>>16)*E&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(I=0,c){case 3:I^=(255&l.charCodeAt(O+2))<<16;case 2:I^=(255&l.charCodeAt(O+1))<<8;case 1:b^=I=(65535&(I=(I=(65535&(I^=255&l.charCodeAt(O)))*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*E+(((I>>>16)*E&65535)<<16)&4294967295}return b^=l.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0};var K={};({get exports(){return K},set exports(l){K=l}}).exports=function(l,r){for(var c,h=l.length,b=r^h,y=0;h>=4;)c=1540483477*(65535&(c=255&l.charCodeAt(y)|(255&l.charCodeAt(++y))<<8|(255&l.charCodeAt(++y))<<16|(255&l.charCodeAt(++y))<<24))+((1540483477*(c>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:b^=(255&l.charCodeAt(y+2))<<16;case 2:b^=(255&l.charCodeAt(y+1))<<8;case 1:b=1540483477*(65535&(b^=255&l.charCodeAt(y)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0};var re=ee,ue=K;X.exports=re,U.murmur3=re,U.murmur2=ue;class he{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,c,h,b){this.ids.push(ie(r)),this.positions.push(c,h,b)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const c=ie(r);let h=0,b=this.ids.length-1;for(;h<b;){const w=h+b>>1;this.ids[w]>=c?b=w:h=w+1}const y=[];for(;this.ids[h]===c;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(r,c){const h=new Float64Array(r.ids),b=new Uint32Array(r.positions);return ve(h,b,0,h.length-1),c&&c.push(h.buffer,b.buffer),{ids:h,positions:b}}static deserialize(r){const c=new he;return c.ids=r.ids,c.positions=r.positions,c.indexed=!0,c}}function ie(l){const r=+l;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:U(String(l))}function ve(l,r,c,h){for(;c<h;){const b=l[c+h>>1];let y=c-1,w=h+1;for(;;){do{y++}while(l[y]<b);do{w--}while(l[w]>b);if(y>=w)break;xe(l,y,w),xe(r,3*y,3*w),xe(r,3*y+1,3*w+1),xe(r,3*y+2,3*w+2)}w-c<h-w?(ve(l,r,c,w),c=w+1):(ve(l,r,w+1,h),h=w)}}function xe(l,r,c){const h=l[r];l[r]=l[c],l[c]=h}ot("FeaturePositionMap",he);class Se{constructor(r,c){this.gl=r.gl,this.location=c}}class Ne extends Se{constructor(r,c){super(r,c),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class ze extends Se{constructor(r,c){super(r,c),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Ge extends Se{constructor(r,c){super(r,c),this.current=An.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const He=new Float32Array(16);function Ke(l){return[F(255*l.r,255*l.g),F(255*l.b,255*l.a)]}class ft{constructor(r,c,h){this.value=r,this.uniformNames=c.map(b=>`u_${b}`),this.type=h}setUniform(r,c,h){r.set(h.constantOr(this.value))}getBinding(r,c,h){return"color"===this.type?new Ge(r,c):new Ne(r,c)}}class Ot{constructor(r,c){this.uniformNames=c.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=r.tlbr}setUniform(r,c,h,b){const y="u_pattern_to"===b?this.patternTo:"u_pattern_from"===b?this.patternFrom:"u_pixel_ratio_to"===b?this.pixelRatioTo:"u_pixel_ratio_from"===b?this.pixelRatioFrom:null;y&&r.set(y)}getBinding(r,c,h){return"u_pattern"===h.substr(0,9)?new ze(r,c):new Ne(r,c)}}class Bt{constructor(r,c,h,b){this.expression=r,this.type=h,this.maxValue=0,this.paintVertexAttributes=c.map(y=>({name:`a_${y}`,type:"Float32",components:"color"===h?2:1,offset:0})),this.paintVertexArray=new b}populatePaintArray(r,c,h,b,y){const w=this.paintVertexArray.length,E=this.expression.evaluate(new pi(0),c,{},b,[],y);this.paintVertexArray.resize(r),this._setPaintValue(w,r,E)}updatePaintArray(r,c,h,b){const y=this.expression.evaluate({zoom:0},h,b);this._setPaintValue(r,c,y)}_setPaintValue(r,c,h){if("color"===this.type){const b=Ke(h);for(let y=r;y<c;y++)this.paintVertexArray.emplace(y,b[0],b[1])}else{for(let b=r;b<c;b++)this.paintVertexArray.emplace(b,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class mt{constructor(r,c,h,b,y,w){this.expression=r,this.uniformNames=c.map(E=>`u_${E}_t`),this.type=h,this.useIntegerZoom=b,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=c.map(E=>({name:`a_${E}`,type:"Float32",components:"color"===h?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(r,c,h,b,y){const w=this.expression.evaluate(new pi(this.zoom),c,{},b,[],y),E=this.expression.evaluate(new pi(this.zoom+1),c,{},b,[],y),I=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(I,r,w,E)}updatePaintArray(r,c,h,b){const y=this.expression.evaluate({zoom:this.zoom},h,b),w=this.expression.evaluate({zoom:this.zoom+1},h,b);this._setPaintValue(r,c,y,w)}_setPaintValue(r,c,h,b){if("color"===this.type){const y=Ke(h),w=Ke(b);for(let E=r;E<c;E++)this.paintVertexArray.emplace(E,y[0],y[1],w[0],w[1])}else{for(let y=r;y<c;y++)this.paintVertexArray.emplace(y,h,b);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(b))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,c){const h=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,b=Yt(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);r.set(b)}getBinding(r,c,h){return new Ne(r,c)}}class Cn{constructor(r,c,h,b,y,w){this.expression=r,this.type=c,this.useIntegerZoom=h,this.zoom=b,this.layerId=w,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(r,c,h){const b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(b,r,c.patterns&&c.patterns[this.layerId],h)}updatePaintArray(r,c,h,b,y){this._setPaintValues(r,c,h.patterns&&h.patterns[this.layerId],y)}_setPaintValues(r,c,h,b){if(!b||!h)return;const{min:y,mid:w,max:E}=h,I=b[y],O=b[w],R=b[E];if(I&&O&&R)for(let B=r;B<c;B++)this.zoomInPaintVertexArray.emplace(B,O.tl[0],O.tl[1],O.br[0],O.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],O.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(B,O.tl[0],O.tl[1],O.br[0],O.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],O.pixelRatio,R.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,N.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,N.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class kn{constructor(r,c,h){this.binders={},this._buffers=[];const b=[];for(const y in r.paint._values){if(!h(y))continue;const w=r.paint.get(y);if(!(w instanceof es&&At(w.property.specification)))continue;const E=gn(y,r.type),I=w.value,O=w.property.specification.type,R=w.property.useIntegerZoom,B=w.property.specification["property-type"],H="cross-faded"===B||"cross-faded-data-driven"===B;if("constant"===I.kind)this.binders[y]=H?new Ot(I.value,E):new ft(I.value,E,O),b.push(`/u_${y}`);else if("source"===I.kind||H){const j=Yn(y,O,"source");this.binders[y]=H?new Cn(I,O,R,c,j,r.id):new Bt(I,E,O,j),b.push(`/a_${y}`)}else{const j=Yn(y,O,"composite");this.binders[y]=new mt(I,E,O,R,c,j),b.push(`/z_${y}`)}}this.cacheKey=b.sort().join("")}getMaxValue(r){const c=this.binders[r];return c instanceof Bt||c instanceof mt?c.maxValue:0}populatePaintArrays(r,c,h,b,y){for(const w in this.binders){const E=this.binders[w];(E instanceof Bt||E instanceof mt||E instanceof Cn)&&E.populatePaintArray(r,c,h,b,y)}}setConstantPatternPositions(r,c){for(const h in this.binders){const b=this.binders[h];b instanceof Ot&&b.setConstantPatternPositions(r,c)}}updatePaintArrays(r,c,h,b,y){let w=!1;for(const E in r){const I=c.getPositions(E);for(const O of I){const R=h.feature(O.index);for(const B in this.binders){const H=this.binders[B];if((H instanceof Bt||H instanceof mt||H instanceof Cn)&&!0===H.expression.isStateDependent){const j=b.paint.get(B);H.expression=j.value,H.updatePaintArray(O.start,O.end,R,r[E],y),w=!0}}}}return w}defines(){const r=[];for(const c in this.binders){const h=this.binders[c];(h instanceof ft||h instanceof Ot)&&r.push(...h.uniformNames.map(b=>`#define HAS_UNIFORM_${b}`))}return r}getBinderAttributes(){const r=[];for(const c in this.binders){const h=this.binders[c];if(h instanceof Bt||h instanceof mt)for(let b=0;b<h.paintVertexAttributes.length;b++)r.push(h.paintVertexAttributes[b].name);else if(h instanceof Cn)for(let b=0;b<N.members.length;b++)r.push(N.members[b].name)}return r}getBinderUniforms(){const r=[];for(const c in this.binders){const h=this.binders[c];if(h instanceof ft||h instanceof Ot||h instanceof mt)for(const b of h.uniformNames)r.push(b)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,c){const h=[];for(const b in this.binders){const y=this.binders[b];if(y instanceof ft||y instanceof Ot||y instanceof mt)for(const w of y.uniformNames)if(c[w]){const E=y.getBinding(r,c[w],w);h.push({name:w,property:b,binding:E})}}return h}setUniforms(r,c,h,b){for(const{name:y,property:w,binding:E}of c)this.binders[w].setUniform(E,b,h.get(w),y)}updatePaintBuffers(r){this._buffers=[];for(const c in this.binders){const h=this.binders[c];if(r&&h instanceof Cn){const b=2===r.fromScale?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(h instanceof Bt||h instanceof mt)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(r){for(const c in this.binders){const h=this.binders[c];(h instanceof Bt||h instanceof mt||h instanceof Cn)&&h.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const c=this.binders[r];(c instanceof Bt||c instanceof mt||c instanceof Cn)&&c.destroy()}}}class en{constructor(r,c,h=(()=>!0)){this.programConfigurations={};for(const b of r)this.programConfigurations[b.id]=new kn(b,c,h);this.needsUpload=!1,this._featureMap=new he,this._bufferOffset=0}populatePaintArrays(r,c,h,b,y,w){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(r,c,b,y,w);void 0!==c.id&&this._featureMap.add(c.id,h,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,c,h,b){for(const y of h)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(r,this._featureMap,c,y,b)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function gn(l,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${r}-`,"").replace(/-/g,"_")]}function Yn(l,r,c){const b={"line-pattern":{source:_a,composite:_a},"fill-pattern":{source:_a,composite:_a},"fill-extrusion-pattern":{source:_a,composite:_a}}[l];return b&&b[c]||{color:{source:md,composite:Hu},number:{source:Lo,composite:md}}[r][c]}ot("ConstantBinder",ft),ot("CrossFadedConstantBinder",Ot),ot("SourceExpressionBinder",Bt),ot("CrossFadedCompositeBinder",Cn),ot("CompositeExpressionBinder",mt),ot("ProgramConfiguration",kn,{omit:["_buffers"]}),ot("ProgramConfigurationSet",en);var Dn=8192;const zr=Math.pow(2,14)-1,Vr=-zr-1;function Qn(l){const r=Dn/l.extent,c=l.loadGeometry();for(let h=0;h<c.length;h++){const b=c[h];for(let y=0;y<b.length;y++){const w=b[y],E=Math.round(w.x*r),I=Math.round(w.y*r);w.x=Yt(E,Vr,zr),w.y=Yt(I,Vr,zr),(E<w.x||E>w.x+1||I<w.y||I>w.y+1)&&yn("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function Gi(l,r){return{type:l.type,id:l.id,properties:l.properties,geometry:r?Qn(l):[]}}function bn(l,r,c,h,b){l.emplaceBack(2*r+(h+1)/2,2*c+(b+1)/2)}class ts{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(c=>c.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new nl,this.indexArray=new x,this.segments=new k,this.programConfigurations=new en(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(r,c,h){const b=this.layers[0],y=[];let w=null,E=!1;"circle"===b.type&&(w=b.layout.get("circle-sort-key"),E=!w.isConstant());for(const{feature:I,id:O,index:R,sourceLayerIndex:B}of r){const H=this.layers[0]._featureFilter.needGeometry,j=Gi(I,H);if(!this.layers[0]._featureFilter.filter(new pi(this.zoom),j,h))continue;const $=E?w.evaluate(j,{},h):void 0,se={id:O,properties:I.properties,type:I.type,sourceLayerIndex:B,index:R,geometry:H?j.geometry:Qn(I),patterns:{},sortKey:$};y.push(se)}E&&y.sort((I,O)=>I.sortKey-O.sortKey);for(const I of y){const{geometry:O,index:R,sourceLayerIndex:B}=I,H=r[R].feature;this.addFeature(I,O,R,h),c.featureIndex.insert(H,O,R,B,this.index)}}update(r,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,c,this.stateDependentLayers,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,M),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,c,h,b){for(const y of c)for(const w of y){const E=w.x,I=w.y;if(E<0||E>=Dn||I<0||I>=Dn)continue;const O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),R=O.vertexLength;bn(this.layoutVertexArray,E,I,-1,-1),bn(this.layoutVertexArray,E,I,1,-1),bn(this.layoutVertexArray,E,I,1,1),bn(this.layoutVertexArray,E,I,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+3,R+2),O.vertexLength+=4,O.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,{},b)}}function va(l,r){for(let c=0;c<l.length;c++)if(Hr(r,l[c]))return!0;for(let c=0;c<r.length;c++)if(Hr(l,r[c]))return!0;return!!Pn(l,r)}function Dd(l,r,c){return!!Hr(l,r)||!!so(r,l,c)}function Li(l,r){if(1===l.length)return Ur(r,l[0]);for(let c=0;c<r.length;c++){const h=r[c];for(let b=0;b<h.length;b++)if(Hr(l,h[b]))return!0}for(let c=0;c<l.length;c++)if(Ur(r,l[c]))return!0;for(let c=0;c<r.length;c++)if(Pn(l,r[c]))return!0;return!1}function fi(l,r,c){if(l.length>1){if(Pn(l,r))return!0;for(let h=0;h<r.length;h++)if(so(r[h],l,c))return!0}for(let h=0;h<l.length;h++)if(so(l[h],r,c))return!0;return!1}function Pn(l,r){if(0===l.length||0===r.length)return!1;for(let c=0;c<l.length-1;c++){const h=l[c],b=l[c+1];for(let y=0;y<r.length-1;y++)if(ro(h,b,r[y],r[y+1]))return!0}return!1}function ro(l,r,c,h){return po(l,c,h)!==po(r,c,h)&&po(l,r,c)!==po(l,r,h)}function so(l,r,c){const h=c*c;if(1===r.length)return l.distSqr(r[0])<h;for(let b=1;b<r.length;b++)if(oi(l,r[b-1],r[b])<h)return!0;return!1}function oi(l,r,c){const h=r.distSqr(c);if(0===h)return l.distSqr(r);const b=((l.x-r.x)*(c.x-r.x)+(l.y-r.y)*(c.y-r.y))/h;return l.distSqr(b<0?r:b>1?c:c.sub(r)._mult(b)._add(r))}function Ur(l,r){let c,h,b,y=!1;for(let w=0;w<l.length;w++){c=l[w];for(let E=0,I=c.length-1;E<c.length;I=E++)h=c[E],b=c[I],h.y>r.y!=b.y>r.y&&r.x<(b.x-h.x)*(r.y-h.y)/(b.y-h.y)+h.x&&(y=!y)}return y}function Hr(l,r){let c=!1;for(let h=0,b=l.length-1;h<l.length;b=h++){const y=l[h],w=l[b];y.y>r.y!=w.y>r.y&&r.x<(w.x-y.x)*(r.y-y.y)/(w.y-y.y)+y.x&&(c=!c)}return c}function ju(l,r,c){const h=c[0],b=c[2];if(l.x<h.x&&r.x<h.x||l.x>b.x&&r.x>b.x||l.y<h.y&&r.y<h.y||l.y>b.y&&r.y>b.y)return!1;const y=po(l,r,c[0]);return y!==po(l,r,c[1])||y!==po(l,r,c[2])||y!==po(l,r,c[3])}function jr(l,r,c){const h=r.paint.get(l).value;return"constant"===h.kind?h.value:c.programConfigurations.get(r.id).getMaxValue(l)}function ya(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function Ed(l,r,c,h,b){if(!r[0]&&!r[1])return l;const y=Pt.convert(r)._mult(b);"viewport"===c&&y._rotate(-h);const w=[];for(let E=0;E<l.length;E++)w.push(l[E].sub(y));return w}ot("CircleBucket",ts,{omit:["layers"]});const Sd=new yr({"circle-sort-key":new kt(Re.layout_circle["circle-sort-key"])});var $u={paint:new yr({"circle-radius":new kt(Re.paint_circle["circle-radius"]),"circle-color":new kt(Re.paint_circle["circle-color"]),"circle-blur":new kt(Re.paint_circle["circle-blur"]),"circle-opacity":new kt(Re.paint_circle["circle-opacity"]),"circle-translate":new wt(Re.paint_circle["circle-translate"]),"circle-translate-anchor":new wt(Re.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new wt(Re.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new wt(Re.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new kt(Re.paint_circle["circle-stroke-width"]),"circle-stroke-color":new kt(Re.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new kt(Re.paint_circle["circle-stroke-opacity"])}),layout:Sd},ao=1e-6,xa=typeof Float32Array<"u"?Float32Array:Array;function Xf(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function ty(l,r,c){var h=r[0],b=r[1],y=r[2],w=r[3],E=r[4],I=r[5],O=r[6],R=r[7],B=r[8],H=r[9],j=r[10],$=r[11],se=r[12],oe=r[13],_e=r[14],De=r[15],fe=c[0],we=c[1],Ve=c[2],Be=c[3];return l[0]=fe*h+we*E+Ve*B+Be*se,l[1]=fe*b+we*I+Ve*H+Be*oe,l[2]=fe*y+we*O+Ve*j+Be*_e,l[3]=fe*w+we*R+Ve*$+Be*De,l[4]=(fe=c[4])*h+(we=c[5])*E+(Ve=c[6])*B+(Be=c[7])*se,l[5]=fe*b+we*I+Ve*H+Be*oe,l[6]=fe*y+we*O+Ve*j+Be*_e,l[7]=fe*w+we*R+Ve*$+Be*De,l[8]=(fe=c[8])*h+(we=c[9])*E+(Ve=c[10])*B+(Be=c[11])*se,l[9]=fe*b+we*I+Ve*H+Be*oe,l[10]=fe*y+we*O+Ve*j+Be*_e,l[11]=fe*w+we*R+Ve*$+Be*De,l[12]=(fe=c[12])*h+(we=c[13])*E+(Ve=c[14])*B+(Be=c[15])*se,l[13]=fe*b+we*I+Ve*H+Be*oe,l[14]=fe*y+we*O+Ve*j+Be*_e,l[15]=fe*w+we*R+Ve*$+Be*De,l}Math.hypot||(Math.hypot=function(){for(var l=0,r=arguments.length;r--;)l+=arguments[r]*arguments[r];return Math.sqrt(l)});var sp,Jf=ty;function Gu(l,r,c){var h=r[0],b=r[1],y=r[2],w=r[3];return l[0]=c[0]*h+c[4]*b+c[8]*y+c[12]*w,l[1]=c[1]*h+c[5]*b+c[9]*y+c[13]*w,l[2]=c[2]*h+c[6]*b+c[10]*y+c[14]*w,l[3]=c[3]*h+c[7]*b+c[11]*y+c[15]*w,l}function em(l,r){const c=Gu([],[l.x,l.y,0,1],r);return new Pt(c[0]/c[3],c[1]/c[3])}sp=new xa(4),xa!=Float32Array&&(sp[0]=0,sp[1]=0,sp[2]=0,sp[3]=0);class Td extends ts{}ot("HeatmapBucket",Td,{omit:["layers"]});var Ib={paint:new yr({"heatmap-radius":new kt(Re.paint_heatmap["heatmap-radius"]),"heatmap-weight":new kt(Re.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new wt(Re.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ip(Re.paint_heatmap["heatmap-color"]),"heatmap-opacity":new wt(Re.paint_heatmap["heatmap-opacity"])})};function ap(l,{width:r,height:c},h,b){if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==r*c*h)throw new RangeError(`mismatched image size. expected: ${b.length} but got: ${r*c*h}`)}else b=new Uint8Array(r*c*h);return l.width=r,l.height=c,l.data=b,l}function Wu(l,{width:r,height:c},h){if(r===l.width&&c===l.height)return;const b=ap({},{width:r,height:c},h);tm(l,b,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,r),height:Math.min(l.height,c)},h),l.width=r,l.height=c,l.data=b.data}function tm(l,r,c,h,b,y){if(0===b.width||0===b.height)return r;if(b.width>l.width||b.height>l.height||c.x>l.width-b.width||c.y>l.height-b.height)throw new RangeError("out of range source coordinates for image copy");if(b.width>r.width||b.height>r.height||h.x>r.width-b.width||h.y>r.height-b.height)throw new RangeError("out of range destination coordinates for image copy");const w=l.data,E=r.data;if(w===E)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<b.height;I++){const O=((c.y+I)*l.width+c.x)*y,R=((h.y+I)*r.width+h.x)*y;for(let B=0;B<b.width*y;B++)E[R+B]=w[O+B]}return r}class Ql{constructor(r,c){ap(this,r,1,c)}resize(r){Wu(this,r,1)}clone(){return new Ql({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,c,h,b,y){tm(r,c,h,b,y,1)}}class xr{constructor(r,c){ap(this,r,4,c)}resize(r){Wu(this,r,4)}replace(r,c){c?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new xr({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,c,h,b,y){tm(r,c,h,b,y,4)}}function qu(l){const r={},c=l.resolution||256,h=l.clips?l.clips.length:1,b=l.image||new xr({width:c,height:h});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);const y=(w,E,I)=>{r[l.evaluationKey]=I;const O=l.expression.evaluate(r);b.data[w+E+0]=Math.floor(255*O.r/O.a),b.data[w+E+1]=Math.floor(255*O.g/O.a),b.data[w+E+2]=Math.floor(255*O.b/O.a),b.data[w+E+3]=Math.floor(255*O.a)};if(l.clips)for(let w=0,E=0;w<h;++w,E+=4*c)for(let I=0,O=0;I<c;I++,O+=4){const R=I/(c-1),{start:B,end:H}=l.clips[w];y(E,O,B*(1-R)+H*R)}else for(let w=0,E=0;w<c;w++,E+=4)y(0,E,w/(c-1));return b}ot("AlphaImage",Ql),ot("RGBAImage",xr);var _C={paint:new yr({"hillshade-illumination-direction":new wt(Re.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new wt(Re.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new wt(Re.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new wt(Re.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new wt(Re.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new wt(Re.paint_hillshade["hillshade-accent-color"])})};const Mb=$i([{name:"a_pos",components:2,type:"Int16"}],4),{members:kb}=Mb;var Zu={};function ns(l,r,c){c=c||2;var h,b,y,w,E,I,O,R=r&&r.length,B=R?r[0]*c:l.length,H=Ab(l,0,B,c,!0),j=[];if(!H||H.next===H.prev)return j;if(R&&(H=function(se,oe,_e,De){var fe,we,Ve,Be=[];for(fe=0,we=oe.length;fe<we;fe++)(Ve=Ab(se,oe[fe]*De,fe<we-1?oe[fe+1]*De:se.length,De,!1))===Ve.next&&(Ve.steiner=!0),Be.push(iy(Ve));for(Be.sort(Pb),fe=0;fe<Be.length;fe++)_e=Rb(Be[fe],_e);return _e}(l,r,H,c)),l.length>80*c){h=y=l[0],b=w=l[1];for(var $=c;$<B;$+=c)(E=l[$])<h&&(h=E),(I=l[$+1])<b&&(b=I),E>y&&(y=E),I>w&&(w=I);O=0!==(O=Math.max(y-h,w-b))?32767/O:0}return Dc(H,j,c,h,b,O,0),j}function Ab(l,r,c,h,b){var y,w;if(b===Xl(l,r,c,h)>0)for(y=r;y<c;y+=h)w=Fb(y,l[y],l[y+1],w);else for(y=c-h;y>=r;y-=h)w=Fb(y,l[y],l[y+1],w);return w&&Ku(w,w.next)&&(Id(w),w=w.next),w}function wa(l,r){if(!l)return l;r||(r=l);var c,h=l;do{if(c=!1,h.steiner||!Ku(h,h.next)&&0!==ki(h.prev,h,h.next))h=h.next;else{if(Id(h),(h=r=h.prev)===h.next)break;c=!0}}while(c||h!==r);return r}function Dc(l,r,c,h,b,y,w){if(l){!w&&y&&function(R,B,H,j){var $=R;do{0===$.z&&($.z=lp($.x,$.y,B,H,j)),$.prevZ=$.prev,$.nextZ=$.next,$=$.next}while($!==R);$.prevZ.nextZ=null,$.prevZ=null,function(se){var oe,_e,De,fe,we,Ve,Be,ct,bt=1;do{for(_e=se,se=null,we=null,Ve=0;_e;){for(Ve++,De=_e,Be=0,oe=0;oe<bt&&(Be++,De=De.nextZ);oe++);for(ct=bt;Be>0||ct>0&&De;)0!==Be&&(0===ct||!De||_e.z<=De.z)?(fe=_e,_e=_e.nextZ,Be--):(fe=De,De=De.nextZ,ct--),we?we.nextZ=fe:se=fe,fe.prevZ=we,we=fe;_e=De}we.nextZ=null,bt*=2}while(Ve>1)}($)}(l,h,b,y);for(var E,I,O=l;l.prev!==l.next;)if(E=l.prev,I=l.next,y?nm(l,h,b,y):Ob(l))r.push(E.i/c|0),r.push(l.i/c|0),r.push(I.i/c|0),Id(l),l=I.next,O=I.next;else if((l=I)===O){w?1===w?Dc(l=im(wa(l),r,c),r,c,h,b,y,2):2===w&&ny(l,r,c,h,b,y):Dc(wa(l),r,c,h,b,y,1);break}}}function Ob(l){var r=l.prev,c=l,h=l.next;if(ki(r,c,h)>=0)return!1;for(var b=r.x,y=c.x,w=h.x,E=r.y,I=c.y,O=h.y,R=b<y?b<w?b:w:y<w?y:w,B=E<I?E<O?E:O:I<O?I:O,H=b>y?b>w?b:w:y>w?y:w,j=E>I?E>O?E:O:I>O?I:O,$=h.next;$!==r;){if($.x>=R&&$.x<=H&&$.y>=B&&$.y<=j&&il(b,E,y,I,w,O,$.x,$.y)&&ki($.prev,$,$.next)>=0)return!1;$=$.next}return!0}function nm(l,r,c,h){var b=l.prev,y=l,w=l.next;if(ki(b,y,w)>=0)return!1;for(var E=b.x,I=y.x,O=w.x,R=b.y,B=y.y,H=w.y,j=E<I?E<O?E:O:I<O?I:O,$=R<B?R<H?R:H:B<H?B:H,se=E>I?E>O?E:O:I>O?I:O,oe=R>B?R>H?R:H:B>H?B:H,_e=lp(j,$,r,c,h),De=lp(se,oe,r,c,h),fe=l.prevZ,we=l.nextZ;fe&&fe.z>=_e&&we&&we.z<=De;){if(fe.x>=j&&fe.x<=se&&fe.y>=$&&fe.y<=oe&&fe!==b&&fe!==w&&il(E,R,I,B,O,H,fe.x,fe.y)&&ki(fe.prev,fe,fe.next)>=0||(fe=fe.prevZ,we.x>=j&&we.x<=se&&we.y>=$&&we.y<=oe&&we!==b&&we!==w&&il(E,R,I,B,O,H,we.x,we.y)&&ki(we.prev,we,we.next)>=0))return!1;we=we.nextZ}for(;fe&&fe.z>=_e;){if(fe.x>=j&&fe.x<=se&&fe.y>=$&&fe.y<=oe&&fe!==b&&fe!==w&&il(E,R,I,B,O,H,fe.x,fe.y)&&ki(fe.prev,fe,fe.next)>=0)return!1;fe=fe.prevZ}for(;we&&we.z<=De;){if(we.x>=j&&we.x<=se&&we.y>=$&&we.y<=oe&&we!==b&&we!==w&&il(E,R,I,B,O,H,we.x,we.y)&&ki(we.prev,we,we.next)>=0)return!1;we=we.nextZ}return!0}function im(l,r,c){var h=l;do{var b=h.prev,y=h.next.next;!Ku(b,y)&&om(b,h,h.next,y)&&_i(b,y)&&_i(y,b)&&(r.push(b.i/c|0),r.push(h.i/c|0),r.push(y.i/c|0),Id(h),Id(h.next),h=l=y),h=h.next}while(h!==l);return wa(h)}function ny(l,r,c,h,b,y){var w=l;do{for(var E=w.next.next;E!==w.prev;){if(w.i!==E.i&&Ec(w,E)){var I=dp(w,E);return w=wa(w,w.next),I=wa(I,I.next),Dc(w,r,c,h,b,y,0),void Dc(I,r,c,h,b,y,0)}E=E.next}w=w.next}while(w!==l)}function Pb(l,r){return l.x-r.x}function Rb(l,r){var c=function(b,y){var w,E=y,I=b.x,O=b.y,R=-1/0;do{if(O<=E.y&&O>=E.next.y&&E.next.y!==E.y){var B=E.x+(O-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(B<=I&&B>R&&(R=B,w=E.x<E.next.x?E:E.next,B===I))return w}E=E.next}while(E!==y);if(!w)return null;var H,j=w,$=w.x,se=w.y,oe=1/0;E=w;do{I>=E.x&&E.x>=$&&I!==E.x&&il(O<se?I:R,O,$,se,O<se?R:I,O,E.x,E.y)&&(H=Math.abs(O-E.y)/(I-E.x),_i(E,b)&&(H<oe||H===oe&&(E.x>w.x||E.x===w.x&&Nb(w,E)))&&(w=E,oe=H)),E=E.next}while(E!==j);return w}(l,r);if(!c)return r;var h=dp(c,l);return wa(h,h.next),wa(c,c.next)}function Nb(l,r){return ki(l.prev,l,r.prev)<0&&ki(r.next,l,l.next)<0}function lp(l,r,c,h,b){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-c)*b|0)|l<<8))|l<<4))|l<<2))|l<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-h)*b|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function iy(l){var r=l,c=l;do{(r.x<c.x||r.x===c.x&&r.y<c.y)&&(c=r),r=r.next}while(r!==l);return c}function il(l,r,c,h,b,y,w,E){return(b-w)*(r-E)>=(l-w)*(y-E)&&(l-w)*(h-E)>=(c-w)*(r-E)&&(c-w)*(y-E)>=(b-w)*(h-E)}function Ec(l,r){return l.next.i!==r.i&&l.prev.i!==r.i&&!function(c,h){var b=c;do{if(b.i!==c.i&&b.next.i!==c.i&&b.i!==h.i&&b.next.i!==h.i&&om(b,b.next,c,h))return!0;b=b.next}while(b!==c);return!1}(l,r)&&(_i(l,r)&&_i(r,l)&&function(c,h){var b=c,y=!1,w=(c.x+h.x)/2,E=(c.y+h.y)/2;do{b.y>E!=b.next.y>E&&b.next.y!==b.y&&w<(b.next.x-b.x)*(E-b.y)/(b.next.y-b.y)+b.x&&(y=!y),b=b.next}while(b!==c);return y}(l,r)&&(ki(l.prev,l,r.prev)||ki(l,r.prev,r))||Ku(l,r)&&ki(l.prev,l,l.next)>0&&ki(r.prev,r,r.next)>0)}function ki(l,r,c){return(r.y-l.y)*(c.x-r.x)-(r.x-l.x)*(c.y-r.y)}function Ku(l,r){return l.x===r.x&&l.y===r.y}function om(l,r,c,h){var b=cp(ki(l,r,c)),y=cp(ki(l,r,h)),w=cp(ki(c,h,l)),E=cp(ki(c,h,r));return b!==y&&w!==E||!(0!==b||!ol(l,c,r))||!(0!==y||!ol(l,h,r))||!(0!==w||!ol(c,l,h))||!(0!==E||!ol(c,r,h))}function ol(l,r,c){return r.x<=Math.max(l.x,c.x)&&r.x>=Math.min(l.x,c.x)&&r.y<=Math.max(l.y,c.y)&&r.y>=Math.min(l.y,c.y)}function cp(l){return l>0?1:l<0?-1:0}function _i(l,r){return ki(l.prev,l,l.next)<0?ki(l,r,l.next)>=0&&ki(l,l.prev,r)>=0:ki(l,r,l.prev)<0||ki(l,l.next,r)<0}function dp(l,r){var c=new Cs(l.i,l.x,l.y),h=new Cs(r.i,r.x,r.y),b=l.next,y=r.prev;return l.next=r,r.prev=l,c.next=b,b.prev=c,h.next=c,c.prev=h,y.next=h,h.prev=y,h}function Fb(l,r,c,h){var b=new Cs(l,r,c);return h?(b.next=h.next,b.prev=h,h.next.prev=b,h.next=b):(b.prev=b,b.next=b),b}function Id(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function Cs(l,r,c){this.i=l,this.x=r,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Xl(l,r,c,h){for(var b=0,y=r,w=c-h;y<c;y+=h)b+=(l[w]-l[y])*(l[y+1]+l[w+1]),w=y;return b}function Md(l,r,c,h,b){Sc(l,r,c||0,h||l.length-1,b||rm)}function Sc(l,r,c,h,b){for(;h>c;){if(h-c>600){var y=h-c+1,w=r-c+1,E=Math.log(y),I=.5*Math.exp(2*E/3),O=.5*Math.sqrt(E*I*(y-I)/y)*(w-y/2<0?-1:1);Sc(l,r,Math.max(c,Math.floor(r-w*I/y+O)),Math.min(h,Math.floor(r+(y-w)*I/y+O)),b)}var R=l[r],B=c,H=h;for(kd(l,c,r),b(l[h],R)>0&&kd(l,c,h);B<H;){for(kd(l,B,H),B++,H--;b(l[B],R)<0;)B++;for(;b(l[H],R)>0;)H--}0===b(l[c],R)?kd(l,c,H):kd(l,++H,h),H<=r&&(c=H+1),r<=H&&(h=H-1)}}function kd(l,r,c){var h=l[r];l[r]=l[c],l[c]=h}function rm(l,r){return l<r?-1:l>r?1:0}function Jl(l,r){const c=l.length;if(c<=1)return[l];const h=[];let b,y;for(let w=0;w<c;w++){const E=dc(l[w]);0!==E&&(l[w].area=Math.abs(E),void 0===y&&(y=E<0),y===E<0?(b&&h.push(b),b=[l[w]]):b.push(l[w]))}if(b&&h.push(b),r>1)for(let w=0;w<h.length;w++)h[w].length<=r||(Md(h[w],r,1,h[w].length-1,vC),h[w]=h[w].slice(0,r));return h}function vC(l,r){return r.area-l.area}function sm(l,r,c){const h=c.patternDependencies;let b=!1;for(const y of r){const w=y.paint.get(`${l}-pattern`);w.isConstant()||(b=!0);const E=w.constantOr(null);E&&(b=!0,h[E.to]=!0,h[E.from]=!0)}return b}function vt(l,r,c,h,b){const y=b.patternDependencies;for(const w of r){const E=w.paint.get(`${l}-pattern`).value;if("constant"!==E.kind){let I=E.evaluate({zoom:h-1},c,{},b.availableImages),O=E.evaluate({zoom:h},c,{},b.availableImages),R=E.evaluate({zoom:h+1},c,{},b.availableImages);I=I&&I.name?I.name:I,O=O&&O.name?O.name:O,R=R&&R.name?R.name:R,y[I]=!0,y[O]=!0,y[R]=!0,c.patterns[w.id]={min:I,mid:O,max:R}}}return c}({get exports(){return Zu},set exports(l){Zu=l}}).exports=ns,Zu.default=ns,ns.deviation=function(l,r,c,h){var b=r&&r.length,y=Math.abs(Xl(l,0,b?r[0]*c:l.length,c));if(b)for(var w=0,E=r.length;w<E;w++)y-=Math.abs(Xl(l,r[w]*c,w<E-1?r[w+1]*c:l.length,c));var I=0;for(w=0;w<h.length;w+=3){var O=h[w]*c,R=h[w+1]*c,B=h[w+2]*c;I+=Math.abs((l[O]-l[B])*(l[R+1]-l[O+1])-(l[O]-l[R])*(l[B+1]-l[O+1]))}return 0===y&&0===I?0:Math.abs((I-y)/y)},ns.flatten=function(l){for(var r=l[0][0].length,c={vertices:[],holes:[],dimensions:r},h=0,b=0;b<l.length;b++){for(var y=0;y<l[b].length;y++)for(var w=0;w<r;w++)c.vertices.push(l[b][y][w]);b>0&&c.holes.push(h+=l[b-1].length)}return c};class Lb{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(c=>c.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Xt,this.indexArray=new x,this.indexArray2=new D,this.programConfigurations=new en(r.layers,r.zoom),this.segments=new k,this.segments2=new k,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(r,c,h){this.hasPattern=sm("fill",this.layers,c);const b=this.layers[0].layout.get("fill-sort-key"),y=!b.isConstant(),w=[];for(const{feature:E,id:I,index:O,sourceLayerIndex:R}of r){const B=this.layers[0]._featureFilter.needGeometry,H=Gi(E,B);if(!this.layers[0]._featureFilter.filter(new pi(this.zoom),H,h))continue;const j=y?b.evaluate(H,{},h,c.availableImages):void 0,$={id:I,properties:E.properties,type:E.type,sourceLayerIndex:R,index:O,geometry:B?H.geometry:Qn(E),patterns:{},sortKey:j};w.push($)}y&&w.sort((E,I)=>E.sortKey-I.sortKey);for(const E of w){const{geometry:I,index:O,sourceLayerIndex:R}=E;if(this.hasPattern){const B=vt("fill",this.layers,E,this.zoom,c);this.patternFeatures.push(B)}else this.addFeature(E,I,O,h,{});c.featureIndex.insert(r[O].feature,I,O,R,this.index)}}update(r,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,c,this.stateDependentLayers,h)}addFeatures(r,c,h){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,c,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,kb),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,c,h,b,y){for(const w of Jl(c,500)){let E=0;for(const j of w)E+=j.length;const I=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),O=I.vertexLength,R=[],B=[];for(const j of w){if(0===j.length)continue;j!==w[0]&&B.push(R.length/2);const $=this.segments2.prepareSegment(j.length,this.layoutVertexArray,this.indexArray2),se=$.vertexLength;this.layoutVertexArray.emplaceBack(j[0].x,j[0].y),this.indexArray2.emplaceBack(se+j.length-1,se),R.push(j[0].x),R.push(j[0].y);for(let oe=1;oe<j.length;oe++)this.layoutVertexArray.emplaceBack(j[oe].x,j[oe].y),this.indexArray2.emplaceBack(se+oe-1,se+oe),R.push(j[oe].x),R.push(j[oe].y);$.vertexLength+=j.length,$.primitiveLength+=j.length}const H=Zu(R,B);for(let j=0;j<H.length;j+=3)this.indexArray.emplaceBack(O+H[j],O+H[j+1],O+H[j+2]);I.vertexLength+=E,I.primitiveLength+=H.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,b)}}ot("FillBucket",Lb,{omit:["layers","patternFeatures"]});const yC=new yr({"fill-sort-key":new kt(Re.layout_fill["fill-sort-key"])});var xC={paint:new yr({"fill-antialias":new wt(Re.paint_fill["fill-antialias"]),"fill-opacity":new kt(Re.paint_fill["fill-opacity"]),"fill-color":new kt(Re.paint_fill["fill-color"]),"fill-outline-color":new kt(Re.paint_fill["fill-outline-color"]),"fill-translate":new wt(Re.paint_fill["fill-translate"]),"fill-translate-anchor":new wt(Re.paint_fill["fill-translate-anchor"]),"fill-pattern":new vc(Re.paint_fill["fill-pattern"])}),layout:yC};const wC=$i([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),CC=$i([{name:"a_centroid",components:2,type:"Int16"}],4),{members:DC}=wC;var Tc={},Yu=Pt,oy=Qu;function Qu(l,r,c,h,b){this.properties={},this.extent=c,this.type=0,this._pbf=l,this._geometry=-1,this._keys=h,this._values=b,l.readFields(mo,this,r)}function mo(l,r,c){1==l?r.id=c.readVarint():2==l?function(h,b){for(var y=h.readVarint()+h.pos;h.pos<y;){var w=b._keys[h.readVarint()],E=b._values[h.readVarint()];b.properties[w]=E}}(c,r):3==l?r.type=c.readVarint():4==l&&(r._geometry=c.pos)}function am(l){for(var r,c,h=0,b=0,y=l.length,w=y-1;b<y;w=b++)h+=((c=l[w]).x-(r=l[b]).x)*(r.y+c.y);return h}Qu.types=["Unknown","Point","LineString","Polygon"],Qu.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var r,c=l.readVarint()+l.pos,h=1,b=0,y=0,w=0,E=[];l.pos<c;){if(b<=0){var I=l.readVarint();h=7&I,b=I>>3}if(b--,1===h||2===h)y+=l.readSVarint(),w+=l.readSVarint(),1===h&&(r&&E.push(r),r=[]),r.push(new Yu(y,w));else{if(7!==h)throw new Error("unknown command "+h);r&&r.push(r[0].clone())}}return r&&E.push(r),E},Qu.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var r=l.readVarint()+l.pos,c=1,h=0,b=0,y=0,w=1/0,E=-1/0,I=1/0,O=-1/0;l.pos<r;){if(h<=0){var R=l.readVarint();c=7&R,h=R>>3}if(h--,1===c||2===c)(b+=l.readSVarint())<w&&(w=b),b>E&&(E=b),(y+=l.readSVarint())<I&&(I=y),y>O&&(O=y);else if(7!==c)throw new Error("unknown command "+c)}return[w,I,E,O]},Qu.prototype.toGeoJSON=function(l,r,c){var h,b,y=this.extent*Math.pow(2,c),w=this.extent*l,E=this.extent*r,I=this.loadGeometry(),O=Qu.types[this.type];function R(j){for(var $=0;$<j.length;$++){var se=j[$];j[$]=[360*(se.x+w)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(se.y+E)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var B=[];for(h=0;h<I.length;h++)B[h]=I[h][0];R(I=B);break;case 2:for(h=0;h<I.length;h++)R(I[h]);break;case 3:for(I=function(j){var $=j.length;if($<=1)return[j];for(var se,oe,_e=[],De=0;De<$;De++){var fe=am(j[De]);0!==fe&&(void 0===oe&&(oe=fe<0),oe===fe<0?(se&&_e.push(se),se=[j[De]]):se.push(j[De]))}return se&&_e.push(se),_e}(I),h=0;h<I.length;h++)for(b=0;b<I[h].length;b++)R(I[h][b])}1===I.length?I=I[0]:O="Multi"+O;var H={type:"Feature",geometry:{type:O,coordinates:I},properties:this.properties};return"id"in this&&(H.id=this.id),H};var Xu=oy,Bb=is;function is(l,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(Ic,this,r),this.length=this._features.length}function Ic(l,r,c){15===l?r.version=c.readVarint():1===l?r.name=c.readString():5===l?r.extent=c.readVarint():2===l?r._features.push(c.pos):3===l?r._keys.push(c.readString()):4===l&&r._values.push(function(h){for(var b=null,y=h.readVarint()+h.pos;h.pos<y;){var w=h.readVarint()>>3;b=1===w?h.readString():2===w?h.readFloat():3===w?h.readDouble():4===w?h.readVarint64():5===w?h.readVarint():6===w?h.readSVarint():7===w?h.readBoolean():null}return b}(c))}is.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var r=this._pbf.readVarint()+this._pbf.pos;return new Xu(this._pbf,r,this.extent,this._keys,this._values)};var zb=Bb;function up(l,r,c){if(3===l){var h=new zb(c,c.readVarint()+c.pos);h.length&&(r[h.name]=h)}}Tc.VectorTile=function(l,r){this.layers=l.readFields(up,{},r)},Tc.VectorTileFeature=oy,Tc.VectorTileLayer=Bb;const Ju=Tc.VectorTileFeature.types,lm=Math.pow(2,13);function hp(l,r,c,h,b,y,w,E){l.emplaceBack(r,c,2*Math.floor(h*lm)+w,b*lm*2,y*lm*2,Math.round(E))}class cm{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(c=>c.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new rp,this.centroidVertexArray=new Cd,this.indexArray=new x,this.programConfigurations=new en(r.layers,r.zoom),this.segments=new k,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(r,c,h){this.features=[],this.hasPattern=sm("fill-extrusion",this.layers,c);for(const{feature:b,id:y,index:w,sourceLayerIndex:E}of r){const I=this.layers[0]._featureFilter.needGeometry,O=Gi(b,I);if(!this.layers[0]._featureFilter.filter(new pi(this.zoom),O,h))continue;const R={id:y,sourceLayerIndex:E,index:w,geometry:I?O.geometry:Qn(b),properties:b.properties,type:b.type,patterns:{}};this.hasPattern?this.features.push(vt("fill-extrusion",this.layers,R,this.zoom,c)):this.addFeature(R,R.geometry,w,h,{}),c.featureIndex.insert(b,R.geometry,w,E,this.index,!0)}}addFeatures(r,c,h){for(const b of this.features){const{geometry:y}=b;this.addFeature(b,y,b.index,c,h)}}update(r,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,c,this.stateDependentLayers,h)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,DC),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,CC.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,c,h,b,y){const w={x:0,y:0,vertexCount:0};for(const E of Jl(c,500)){let I=0;for(const $ of E)I+=$.length;let O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const $ of E){if(0===$.length||((l=$).every(r=>r.x<0)||l.every(r=>r.x>Dn)||l.every(r=>r.y<0)||l.every(r=>r.y>Dn)))continue;let se=0;for(let oe=0;oe<$.length;oe++){const _e=$[oe];if(oe>=1){const De=$[oe-1];if(!EC(_e,De)){O.vertexLength+4>k.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const fe=_e.sub(De)._perp()._unit(),we=De.dist(_e);se+we>32768&&(se=0),hp(this.layoutVertexArray,_e.x,_e.y,fe.x,fe.y,0,0,se),hp(this.layoutVertexArray,_e.x,_e.y,fe.x,fe.y,0,1,se),w.x+=2*_e.x,w.y+=2*_e.y,w.vertexCount+=2,se+=we,hp(this.layoutVertexArray,De.x,De.y,fe.x,fe.y,0,0,se),hp(this.layoutVertexArray,De.x,De.y,fe.x,fe.y,0,1,se),w.x+=2*De.x,w.y+=2*De.y,w.vertexCount+=2;const Ve=O.vertexLength;this.indexArray.emplaceBack(Ve,Ve+2,Ve+1),this.indexArray.emplaceBack(Ve+1,Ve+2,Ve+3),O.vertexLength+=4,O.primitiveLength+=2}}}}if(O.vertexLength+I>k.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),"Polygon"!==Ju[r.type])continue;const R=[],B=[],H=O.vertexLength;for(const $ of E)if(0!==$.length){$!==E[0]&&B.push(R.length/2);for(let se=0;se<$.length;se++){const oe=$[se];hp(this.layoutVertexArray,oe.x,oe.y,0,0,1,1,0),w.x+=oe.x,w.y+=oe.y,w.vertexCount+=1,R.push(oe.x),R.push(oe.y)}}const j=Zu(R,B);for(let $=0;$<j.length;$+=3)this.indexArray.emplaceBack(H+j[$],H+j[$+2],H+j[$+1]);O.primitiveLength+=j.length/3,O.vertexLength+=I}var l;for(let E=0;E<w.vertexCount;E++)this.centroidVertexArray.emplaceBack(Math.floor(w.x/w.vertexCount),Math.floor(w.y/w.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,b)}}function EC(l,r){return l.x===r.x&&(l.x<0||l.x>Dn)||l.y===r.y&&(l.y<0||l.y>Dn)}ot("FillExtrusionBucket",cm,{omit:["layers","features"]});var dm={paint:new yr({"fill-extrusion-opacity":new wt(Re["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new kt(Re["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new wt(Re["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new wt(Re["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new vc(Re["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new kt(Re["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new kt(Re["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new wt(Re["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Ca(l,r){return l.x*r.x+l.y*r.y}function ry(l,r){if(1===l.length){let c=0;const h=r[c++];let b;for(;!b||h.equals(b);)if(b=r[c++],!b)return 1/0;for(;c<r.length;c++){const y=r[c],w=l[0],E=b.sub(h),I=y.sub(h),O=w.sub(h),R=Ca(E,E),B=Ca(E,I),H=Ca(I,I),j=Ca(O,E),$=Ca(O,I),se=R*H-B*B,oe=(H*j-B*$)/se,_e=(R*$-B*j)/se,De=h.z*(1-oe-_e)+b.z*oe+y.z*_e;if(isFinite(De))return De}return 1/0}{let c=1/0;for(const h of r)c=Math.min(c,h.z);return c}}const Vb=$i([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:sy}=Vb,ay=$i([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:ly}=ay,cy=Tc.VectorTileFeature.types,dy=Math.cos(Math.PI/180*37.5),Ub=Math.pow(2,14)/.5;class eh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(c=>c.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new Yf,this.layoutVertexArray2=new Qf,this.indexArray=new x,this.programConfigurations=new en(r.layers,r.zoom),this.segments=new k,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(r,c,h){this.hasPattern=sm("line",this.layers,c);const b=this.layers[0].layout.get("line-sort-key"),y=!b.isConstant(),w=[];for(const{feature:E,id:I,index:O,sourceLayerIndex:R}of r){const B=this.layers[0]._featureFilter.needGeometry,H=Gi(E,B);if(!this.layers[0]._featureFilter.filter(new pi(this.zoom),H,h))continue;const j=y?b.evaluate(H,{},h):void 0,$={id:I,properties:E.properties,type:E.type,sourceLayerIndex:R,index:O,geometry:B?H.geometry:Qn(E),patterns:{},sortKey:j};w.push($)}y&&w.sort((E,I)=>E.sortKey-I.sortKey);for(const E of w){const{geometry:I,index:O,sourceLayerIndex:R}=E;if(this.hasPattern){const B=vt("line",this.layers,E,this.zoom,c);this.patternFeatures.push(B)}else this.addFeature(E,I,O,h,{});c.featureIndex.insert(r[O].feature,I,O,R,this.index)}}update(r,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,c,this.stateDependentLayers,h)}addFeatures(r,c,h){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,c,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,ly)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,sy),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,c,h,b,y){const w=this.layers[0].layout,E=w.get("line-join").evaluate(r,{}),I=w.get("line-cap"),O=w.get("line-miter-limit"),R=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const B of c)this.addLine(B,r,E,I,O,R);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,y,b)}addLine(r,c,h,b,y,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let _e=0;_e<r.length-1;_e++)this.totalDistance+=r[_e].dist(r[_e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const E="Polygon"===cy[c.type];let I=r.length;for(;I>=2&&r[I-1].equals(r[I-2]);)I--;let O=0;for(;O<I-1&&r[O].equals(r[O+1]);)O++;if(I<(E?3:2))return;"bevel"===h&&(y=1.05);const R=this.overscaling<=16?122880/(512*this.overscaling):0,B=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let H,j,$,se,oe;this.e1=this.e2=-1,E&&(H=r[I-2],oe=r[O].sub(H)._unit()._perp());for(let _e=O;_e<I;_e++){if($=_e===I-1?E?r[O+1]:void 0:r[_e+1],$&&r[_e].equals($))continue;oe&&(se=oe),H&&(j=H),H=r[_e],oe=$?$.sub(H)._unit()._perp():se,se=se||oe;let De=se.add(oe);0===De.x&&0===De.y||De._unit();const fe=se.x*oe.x+se.y*oe.y,we=De.x*oe.x+De.y*oe.y,Ve=0!==we?1/we:1/0,Be=2*Math.sqrt(2-2*we),ct=we<dy&&j&&$,bt=se.x*oe.y-se.y*oe.x>0;if(ct&&_e>O){const et=H.dist(j);if(et>2*R){const dt=H.sub(H.sub(j)._mult(R/et)._round());this.updateDistance(j,dt),this.addCurrentVertex(dt,se,0,0,B),j=dt}}const st=j&&$;let nt=st?h:E?"butt":b;if(st&&"round"===nt&&(Ve<w?nt="miter":Ve<=2&&(nt="fakeround")),"miter"===nt&&Ve>y&&(nt="bevel"),"bevel"===nt&&(Ve>2&&(nt="flipbevel"),Ve<y&&(nt="miter")),j&&this.updateDistance(j,H),"miter"===nt)De._mult(Ve),this.addCurrentVertex(H,De,0,0,B);else if("flipbevel"===nt){if(Ve>100)De=oe.mult(-1);else{const et=Ve*se.add(oe).mag()/se.sub(oe).mag();De._perp()._mult(et*(bt?-1:1))}this.addCurrentVertex(H,De,0,0,B),this.addCurrentVertex(H,De.mult(-1),0,0,B)}else if("bevel"===nt||"fakeround"===nt){const et=-Math.sqrt(Ve*Ve-1),dt=bt?et:0,rt=bt?0:et;if(j&&this.addCurrentVertex(H,se,dt,rt,B),"fakeround"===nt){const Ze=Math.round(180*Be/Math.PI/20);for(let Dt=1;Dt<Ze;Dt++){let yt=Dt/Ze;if(.5!==yt){const mi=yt-.5;yt+=yt*mi*(yt-1)*((1.0904+fe*(fe*(3.55645-1.43519*fe)-3.2452))*mi*mi+(.848013+fe*(.215638*fe-1.06021)))}const un=oe.sub(se)._mult(yt)._add(se)._unit()._mult(bt?-1:1);this.addHalfVertex(H,un.x,un.y,!1,bt,0,B)}}$&&this.addCurrentVertex(H,oe,-dt,-rt,B)}else if("butt"===nt)this.addCurrentVertex(H,De,0,0,B);else if("square"===nt){const et=j?1:-1;this.addCurrentVertex(H,De,et,et,B)}else"round"===nt&&(j&&(this.addCurrentVertex(H,se,0,0,B),this.addCurrentVertex(H,se,1,1,B,!0)),$&&(this.addCurrentVertex(H,oe,-1,-1,B,!0),this.addCurrentVertex(H,oe,0,0,B)));if(ct&&_e<I-1){const et=H.dist($);if(et>2*R){const dt=H.add($.sub(H)._mult(R/et)._round());this.updateDistance(H,dt),this.addCurrentVertex(dt,oe,0,0,B),H=dt}}}}addCurrentVertex(r,c,h,b,y,w=!1){const E=c.y*b-c.x,I=-c.y-c.x*b;this.addHalfVertex(r,c.x+c.y*h,c.y-c.x*h,w,!1,h,y),this.addHalfVertex(r,E,I,w,!0,-b,y),this.distance>Ub/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(r,c,h,b,y,w))}addHalfVertex({x:r,y:c},h,b,y,w,E,I){const O=.5*(this.lineClips?this.scaledDistance*(Ub-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(y?1:0),(c<<1)+(w?1:0),Math.round(63*h)+128,Math.round(63*b)+128,1+(0===E?0:E<0?-1:1)|(63&O)<<2,O>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const R=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,R),I.primitiveLength++),w?this.e2=R:this.e1=R}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,c){this.distance+=r.dist(c),this.updateScaledDistance()}}ot("LineBucket",eh,{omit:["layers","patternFeatures"]});const pp=new yr({"line-cap":new wt(Re.layout_line["line-cap"]),"line-join":new kt(Re.layout_line["line-join"]),"line-miter-limit":new wt(Re.layout_line["line-miter-limit"]),"line-round-limit":new wt(Re.layout_line["line-round-limit"]),"line-sort-key":new kt(Re.layout_line["line-sort-key"])});var fp={paint:new yr({"line-opacity":new kt(Re.paint_line["line-opacity"]),"line-color":new kt(Re.paint_line["line-color"]),"line-translate":new wt(Re.paint_line["line-translate"]),"line-translate-anchor":new wt(Re.paint_line["line-translate-anchor"]),"line-width":new kt(Re.paint_line["line-width"]),"line-gap-width":new kt(Re.paint_line["line-gap-width"]),"line-offset":new kt(Re.paint_line["line-offset"]),"line-blur":new kt(Re.paint_line["line-blur"]),"line-dasharray":new np(Re.paint_line["line-dasharray"]),"line-pattern":new vc(Re.paint_line["line-pattern"]),"line-gradient":new ip(Re.paint_line["line-gradient"])}),layout:pp};const Ad=new class extends kt{possiblyEvaluate(l,r){return r=new pi(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),super.possiblyEvaluate(l,r)}evaluate(l,r,c,h){return r=Qo({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(l,r,c,h)}}(fp.paint.properties["line-width"].specification);function um(l,r){return r>0?r+2*l:l}Ad.useIntegerZoom=!0;const th=$i([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),uy=$i([{name:"a_projected_pos",components:3,type:"Float32"}],4);$i([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Hb=$i([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);$i([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Od=$i([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),mp=$i([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function jb(l,r,c){return l.sections.forEach(h=>{h.text=function(b,y,w){const E=y.layout.get("text-transform").evaluate(w,{});return"uppercase"===E?b=b.toLocaleUpperCase():"lowercase"===E&&(b=b.toLocaleLowerCase()),ii.applyArabicShaping&&(b=ii.applyArabicShaping(b)),b}(h.text,r,c)}),l}$i([{name:"triangle",components:3,type:"Uint16"}]),$i([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),$i([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),$i([{type:"Float32",name:"offsetX"}]),$i([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const nh={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var go=24,ec=ri,Pd=function(l,r,c,h,b){var y,w,E=8*b-h-1,I=(1<<E)-1,O=I>>1,R=-7,B=c?b-1:0,H=c?-1:1,j=l[r+B];for(B+=H,y=j&(1<<-R)-1,j>>=-R,R+=E;R>0;y=256*y+l[r+B],B+=H,R-=8);for(w=y&(1<<-R)-1,y>>=-R,R+=h;R>0;w=256*w+l[r+B],B+=H,R-=8);if(0===y)y=1-O;else{if(y===I)return w?NaN:1/0*(j?-1:1);w+=Math.pow(2,h),y-=O}return(j?-1:1)*w*Math.pow(2,y-h)},$b=function(l,r,c,h,b,y){var w,E,I,O=8*y-b-1,R=(1<<O)-1,B=R>>1,H=23===b?Math.pow(2,-24)-Math.pow(2,-77):0,j=h?0:y-1,$=h?1:-1,se=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(E=isNaN(r)?1:0,w=R):(w=Math.floor(Math.log(r)/Math.LN2),r*(I=Math.pow(2,-w))<1&&(w--,I*=2),(r+=w+B>=1?H/I:H*Math.pow(2,1-B))*I>=2&&(w++,I/=2),w+B>=R?(E=0,w=R):w+B>=1?(E=(r*I-1)*Math.pow(2,b),w+=B):(E=r*Math.pow(2,B-1)*Math.pow(2,b),w=0));b>=8;l[c+j]=255&E,j+=$,E/=256,b-=8);for(w=w<<b|E,O+=b;O>0;l[c+j]=255&w,j+=$,w/=256,O-=8);l[c+j-$]|=128*se};function ri(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}ri.Varint=0,ri.Fixed64=1,ri.Bytes=2,ri.Fixed32=5;var rl,hm=4294967296,hy=1/hm,Gb=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function sl(l){return l.type===ri.Bytes?l.readVarint()+l.pos:l.pos+1}function ih(l,r,c){var h=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));c.realloc(h);for(var b=c.pos-1;b>=l;b--)c.buf[b+h]=c.buf[b]}function Wb(l,r){for(var c=0;c<l.length;c++)r.writeVarint(l[c])}function py(l,r){for(var c=0;c<l.length;c++)r.writeSVarint(l[c])}function qb(l,r){for(var c=0;c<l.length;c++)r.writeFloat(l[c])}function SC(l,r){for(var c=0;c<l.length;c++)r.writeDouble(l[c])}function Zb(l,r){for(var c=0;c<l.length;c++)r.writeBoolean(l[c])}function TC(l,r){for(var c=0;c<l.length;c++)r.writeFixed32(l[c])}function fy(l,r){for(var c=0;c<l.length;c++)r.writeSFixed32(l[c])}function my(l,r){for(var c=0;c<l.length;c++)r.writeFixed64(l[c])}function pm(l,r){for(var c=0;c<l.length;c++)r.writeSFixed64(l[c])}function fm(l,r){return(l[r]|l[r+1]<<8|l[r+2]<<16)+16777216*l[r+3]}function oh(l,r,c){l[c]=r,l[c+1]=r>>>8,l[c+2]=r>>>16,l[c+3]=r>>>24}function gp(l,r){return(l[r]|l[r+1]<<8|l[r+2]<<16)+(l[r+3]<<24)}function IC(l,r,c){1===l&&c.readMessage(MC,r)}function MC(l,r,c){if(3===l){const{id:h,bitmap:b,width:y,height:w,left:E,top:I,advance:O}=c.readMessage(kC,{});r.push({id:h,bitmap:new Ql({width:y+6,height:w+6},b),metrics:{width:y,height:w,left:E,top:I,advance:O}})}}function kC(l,r,c){1===l?r.id=c.readVarint():2===l?r.bitmap=c.readBytes():3===l?r.width=c.readVarint():4===l?r.height=c.readVarint():5===l?r.left=c.readSVarint():6===l?r.top=c.readSVarint():7===l&&(r.advance=c.readVarint())}function gy(l){let r=0,c=0;for(const w of l)r+=w.w*w.h,c=Math.max(c,w.w);l.sort((w,E)=>E.h-w.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),c),h:1/0}];let b=0,y=0;for(const w of l)for(let E=h.length-1;E>=0;E--){const I=h[E];if(!(w.w>I.w||w.h>I.h)){if(w.x=I.x,w.y=I.y,y=Math.max(y,w.y+w.h),b=Math.max(b,w.x+w.w),w.w===I.w&&w.h===I.h){const O=h.pop();E<h.length&&(h[E]=O)}else w.h===I.h?(I.x+=w.w,I.w-=w.w):w.w===I.w?(I.y+=w.h,I.h-=w.h):(h.push({x:I.x+w.w,y:I.y,w:I.w-w.w,h:w.h}),I.y+=w.h,I.h-=w.h);break}}return{w:b,h:y,fill:r/(b*y)||0}}ri.prototype={destroy:function(){this.buf=null},readFields:function(l,r,c){for(c=c||this.length;this.pos<c;){var h=this.readVarint(),b=h>>3,y=this.pos;this.type=7&h,l(b,r,this),this.pos===y&&this.skip(h)}return r},readMessage:function(l,r){return this.readFields(l,r,this.readVarint()+this.pos)},readFixed32:function(){var l=fm(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=gp(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=fm(this.buf,this.pos)+fm(this.buf,this.pos+4)*hm;return this.pos+=8,l},readSFixed64:function(){var l=fm(this.buf,this.pos)+gp(this.buf,this.pos+4)*hm;return this.pos+=8,l},readFloat:function(){var l=Pd(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=Pd(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var r,c,h=this.buf;return r=127&(c=h[this.pos++]),c<128?r:(r|=(127&(c=h[this.pos++]))<<7,c<128?r:(r|=(127&(c=h[this.pos++]))<<14,c<128?r:(r|=(127&(c=h[this.pos++]))<<21,c<128?r:function(b,y,w){var E,I,O=w.buf;if(E=(112&(I=O[w.pos++]))>>4,I<128||(E|=(127&(I=O[w.pos++]))<<3,I<128)||(E|=(127&(I=O[w.pos++]))<<10,I<128)||(E|=(127&(I=O[w.pos++]))<<17,I<128)||(E|=(127&(I=O[w.pos++]))<<24,I<128)||(E|=(1&(I=O[w.pos++]))<<31,I<128))return function Rd(l,r,c){return c?4294967296*r+(l>>>0):4294967296*(r>>>0)+(l>>>0)}(b,E,y);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(c=h[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var l=this.readVarint()+this.pos,r=this.pos;return this.pos=l,l-r>=12&&Gb?Gb.decode(this.buf.subarray(r,l)):function(c,h,b){for(var y="",w=h;w<b;){var E,I,O,R=c[w],B=null,H=R>239?4:R>223?3:R>191?2:1;if(w+H>b)break;1===H?R<128&&(B=R):2===H?128==(192&(E=c[w+1]))&&(B=(31&R)<<6|63&E)<=127&&(B=null):3===H?(I=c[w+2],128==(192&(E=c[w+1]))&&128==(192&I)&&((B=(15&R)<<12|(63&E)<<6|63&I)<=2047||B>=55296&&B<=57343)&&(B=null)):4===H&&(I=c[w+2],O=c[w+3],128==(192&(E=c[w+1]))&&128==(192&I)&&128==(192&O)&&((B=(15&R)<<18|(63&E)<<12|(63&I)<<6|63&O)<=65535||B>=1114112)&&(B=null)),null===B?(B=65533,H=1):B>65535&&(B-=65536,y+=String.fromCharCode(B>>>10&1023|55296),B=56320|1023&B),y+=String.fromCharCode(B),w+=H}return y}(this.buf,r,l)},readBytes:function(){var l=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,l);return this.pos=l,r},readPackedVarint:function(l,r){if(this.type!==ri.Bytes)return l.push(this.readVarint(r));var c=sl(this);for(l=l||[];this.pos<c;)l.push(this.readVarint(r));return l},readPackedSVarint:function(l){if(this.type!==ri.Bytes)return l.push(this.readSVarint());var r=sl(this);for(l=l||[];this.pos<r;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==ri.Bytes)return l.push(this.readBoolean());var r=sl(this);for(l=l||[];this.pos<r;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==ri.Bytes)return l.push(this.readFloat());var r=sl(this);for(l=l||[];this.pos<r;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==ri.Bytes)return l.push(this.readDouble());var r=sl(this);for(l=l||[];this.pos<r;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==ri.Bytes)return l.push(this.readFixed32());var r=sl(this);for(l=l||[];this.pos<r;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==ri.Bytes)return l.push(this.readSFixed32());var r=sl(this);for(l=l||[];this.pos<r;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==ri.Bytes)return l.push(this.readFixed64());var r=sl(this);for(l=l||[];this.pos<r;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==ri.Bytes)return l.push(this.readSFixed64());var r=sl(this);for(l=l||[];this.pos<r;)l.push(this.readSFixed64());return l},skip:function(l){var r=7&l;if(r===ri.Varint)for(;this.buf[this.pos++]>127;);else if(r===ri.Bytes)this.pos=this.readVarint()+this.pos;else if(r===ri.Fixed32)this.pos+=4;else{if(r!==ri.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(l,r){this.writeVarint(l<<3|r)},realloc:function(l){for(var r=this.length||16;r<this.pos+l;)r*=2;if(r!==this.length){var c=new Uint8Array(r);c.set(this.buf),this.buf=c,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),oh(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),oh(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),oh(this.buf,-1&l,this.pos),oh(this.buf,Math.floor(l*hy),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),oh(this.buf,-1&l,this.pos),oh(this.buf,Math.floor(l*hy),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(r,c){var h,b,y,E;if(r>=0?(h=r%4294967296|0,b=r/4294967296|0):(b=~(-r/4294967296),4294967295^(h=~(-r%4294967296))?h=h+1|0:(h=0,b=b+1|0)),r>=0x10000000000000000||r<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),y=h,(E=c).buf[E.pos++]=127&y|128,y>>>=7,E.buf[E.pos++]=127&y|128,y>>>=7,E.buf[E.pos++]=127&y|128,y>>>=7,E.buf[E.pos++]=127&y|128,E.buf[E.pos]=127&(y>>>=7),function(y,w){var E=(7&y)<<4;w.buf[w.pos++]|=E|((y>>>=3)?128:0),y&&(w.buf[w.pos++]=127&y|((y>>>=7)?128:0),y&&(w.buf[w.pos++]=127&y|((y>>>=7)?128:0),y&&(w.buf[w.pos++]=127&y|((y>>>=7)?128:0),y&&(w.buf[w.pos++]=127&y|((y>>>=7)?128:0),y&&(w.buf[w.pos++]=127&y)))))}(b,c)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(Boolean(l))},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var r=this.pos;this.pos=function(h,b,y){for(var w,E,I=0;I<b.length;I++){if((w=b.charCodeAt(I))>55295&&w<57344){if(!E){w>56319||I+1===b.length?(h[y++]=239,h[y++]=191,h[y++]=189):E=w;continue}if(w<56320){h[y++]=239,h[y++]=191,h[y++]=189,E=w;continue}w=E-55296<<10|w-56320|65536,E=null}else E&&(h[y++]=239,h[y++]=191,h[y++]=189,E=null);w<128?h[y++]=w:(w<2048?h[y++]=w>>6|192:(w<65536?h[y++]=w>>12|224:(h[y++]=w>>18|240,h[y++]=w>>12&63|128),h[y++]=w>>6&63|128),h[y++]=63&w|128)}return y}(this.buf,l,this.pos);var c=this.pos-r;c>=128&&ih(r,c,this),this.pos=r-1,this.writeVarint(c),this.pos+=c},writeFloat:function(l){this.realloc(4),$b(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),$b(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var r=l.length;this.writeVarint(r),this.realloc(r);for(var c=0;c<r;c++)this.buf[this.pos++]=l[c]},writeRawMessage:function(l,r){this.pos++;var c=this.pos;l(r,this);var h=this.pos-c;h>=128&&ih(c,h,this),this.pos=c-1,this.writeVarint(h),this.pos+=h},writeMessage:function(l,r,c){this.writeTag(l,ri.Bytes),this.writeRawMessage(r,c)},writePackedVarint:function(l,r){r.length&&this.writeMessage(l,Wb,r)},writePackedSVarint:function(l,r){r.length&&this.writeMessage(l,py,r)},writePackedBoolean:function(l,r){r.length&&this.writeMessage(l,Zb,r)},writePackedFloat:function(l,r){r.length&&this.writeMessage(l,qb,r)},writePackedDouble:function(l,r){r.length&&this.writeMessage(l,SC,r)},writePackedFixed32:function(l,r){r.length&&this.writeMessage(l,TC,r)},writePackedSFixed32:function(l,r){r.length&&this.writeMessage(l,fy,r)},writePackedFixed64:function(l,r){r.length&&this.writeMessage(l,my,r)},writePackedSFixed64:function(l,r){r.length&&this.writeMessage(l,pm,r)},writeBytesField:function(l,r){this.writeTag(l,ri.Bytes),this.writeBytes(r)},writeFixed32Field:function(l,r){this.writeTag(l,ri.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(l,r){this.writeTag(l,ri.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(l,r){this.writeTag(l,ri.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(l,r){this.writeTag(l,ri.Fixed64),this.writeSFixed64(r)},writeVarintField:function(l,r){this.writeTag(l,ri.Varint),this.writeVarint(r)},writeSVarintField:function(l,r){this.writeTag(l,ri.Varint),this.writeSVarint(r)},writeStringField:function(l,r){this.writeTag(l,ri.Bytes),this.writeString(r)},writeFloatField:function(l,r){this.writeTag(l,ri.Fixed32),this.writeFloat(r)},writeDoubleField:function(l,r){this.writeTag(l,ri.Fixed64),this.writeDouble(r)},writeBooleanField:function(l,r){this.writeVarintField(l,Boolean(r))}};class Kb{constructor(r,{pixelRatio:c,version:h,stretchX:b,stretchY:y,content:w}){this.paddedRect=r,this.pixelRatio=c,this.stretchX=b,this.stretchY=y,this.content=w,this.version=h}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Yb{constructor(r,c){const h={},b={};this.haveRenderCallbacks=[];const y=[];this.addImages(r,h,y),this.addImages(c,b,y);const{w,h:E}=gy(y),I=new xr({width:w||1,height:E||1});for(const O in r){const R=r[O],B=h[O].paddedRect;xr.copy(R.data,I,{x:0,y:0},{x:B.x+1,y:B.y+1},R.data)}for(const O in c){const R=c[O],B=b[O].paddedRect,H=B.x+1,j=B.y+1,$=R.data.width,se=R.data.height;xr.copy(R.data,I,{x:0,y:0},{x:H,y:j},R.data),xr.copy(R.data,I,{x:0,y:se-1},{x:H,y:j-1},{width:$,height:1}),xr.copy(R.data,I,{x:0,y:0},{x:H,y:j+se},{width:$,height:1}),xr.copy(R.data,I,{x:$-1,y:0},{x:H-1,y:j},{width:1,height:se}),xr.copy(R.data,I,{x:0,y:0},{x:H+$,y:j},{width:1,height:se})}this.image=I,this.iconPositions=h,this.patternPositions=b}addImages(r,c,h){for(const b in r){const y=r[b],w={x:0,y:0,w:y.data.width+2,h:y.data.height+2};h.push(w),c[b]=new Kb(w,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(b)}}patchUpdatedImages(r,c){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in r.updatedImages)this.patchUpdatedImage(this.iconPositions[h],r.getImage(h),c),this.patchUpdatedImage(this.patternPositions[h],r.getImage(h),c)}patchUpdatedImage(r,c,h){if(!r||!c||r.version===c.version)return;r.version=c.version;const[b,y]=r.tl;h.update(c.data,void 0,{x:b,y})}}ot("ImagePosition",Kb),ot("ImageAtlas",Yb),v.WritingMode=void 0,(rl=v.WritingMode||(v.WritingMode={}))[rl.none=0]="none",rl[rl.horizontal=1]="horizontal",rl[rl.vertical=2]="vertical",rl[rl.horizontalOnly=3]="horizontalOnly";const rh=-17;class Mc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,c){const h=new Mc;return h.scale=r||1,h.fontStack=c,h}static forImage(r){const c=new Mc;return c.imageName=r,c}}class kc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,c){const h=new kc;for(let b=0;b<r.sections.length;b++){const y=r.sections[b];y.image?h.addImageSection(y):h.addTextSection(y,c)}return h}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let c="";for(let h=0;h<r.length;h++){const b=r.charCodeAt(h+1)||null,y=r.charCodeAt(h-1)||null;c+=b&&Nu(b)&&!nh[r[h+1]]||y&&Nu(y)&&!nh[r[h-1]]||!nh[r[h]]?r[h]:nh[r[h]]}return c}(this.text)}trim(){let r=0;for(let h=0;h<this.text.length&&ah[this.text.charCodeAt(h)];h++)r++;let c=this.text.length;for(let h=this.text.length-1;h>=0&&h>=r&&ah[this.text.charCodeAt(h)];h--)c--;this.text=this.text.substring(r,c),this.sectionIndex=this.sectionIndex.slice(r,c)}substring(r,c){const h=new kc;return h.text=this.text.substring(r,c),h.sectionIndex=this.sectionIndex.slice(r,c),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,c)=>Math.max(r,this.sections[c].scale),0)}addTextSection(r,c){this.text+=r.text,this.sections.push(Mc.forText(r.scale,r.fontStack||c));const h=this.sections.length-1;for(let b=0;b<r.text.length;++b)this.sectionIndex.push(h)}addImageSection(r){const c=r.image?r.image.name:"";if(0===c.length)return void yn("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Mc.forImage(c)),this.sectionIndex.push(this.sections.length-1)):yn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function sh(l,r,c,h,b,y,w,E,I,O,R,B,H,j,$,se){const oe=kc.fromFeature(l,b);let _e;B===v.WritingMode.vertical&&oe.verticalizePunctuation();const{processBidirectionalText:De,processStyledBidirectionalText:fe}=ii;if(De&&1===oe.sections.length){_e=[];const Be=De(oe.toString(),gm(oe,O,y,r,h,j,$));for(const ct of Be){const bt=new kc;bt.text=ct,bt.sections=oe.sections;for(let st=0;st<ct.length;st++)bt.sectionIndex.push(0);_e.push(bt)}}else if(fe){_e=[];const Be=fe(oe.text,oe.sectionIndex,gm(oe,O,y,r,h,j,$));for(const ct of Be){const bt=new kc;bt.text=ct[0],bt.sectionIndex=ct[1],bt.sections=oe.sections,_e.push(bt)}}else _e=function(Be,ct){const bt=[],st=Be.text;let nt=0;for(const et of ct)bt.push(Be.substring(nt,et)),nt=et;return nt<st.length&&bt.push(Be.substring(nt,st.length)),bt}(oe,gm(oe,O,y,r,h,j,$));const we=[],Ve={positionedLines:we,text:oe.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:B,iconsInText:!1,verticalizable:!1};return function(Be,ct,bt,st,nt,et,dt,rt,Ze,Dt,yt,un){let mi=0,ci=rh,Wi=0,ss=0;const So="right"===rt?1:"left"===rt?0:.5;let Bi=0;for(const zi of nt){zi.trim();const En=zi.getMaxScale(),To=(En-1)*go,sr={positionedGlyphs:[],lineOffset:0};Be.positionedLines[Bi]=sr;const ar=sr.positionedGlyphs;let lr=0;if(!zi.length()){ci+=et,++Bi;continue}for(let Io=0;Io<zi.length();Io++){const rn=zi.getSection(Io),Gr=zi.getSectionIndex(Io),bo=zi.getCharCode(Io);let cr=0,$s=null,Dr=null,Wr=null,Sa=go;const as=!(Ze===v.WritingMode.horizontal||!yt&&!Ya(bo)||yt&&(ah[bo]||(qi=bo,tt.Arabic(qi)||tt["Arabic Supplement"](qi)||tt["Arabic Extended-A"](qi)||tt["Arabic Presentation Forms-A"](qi)||tt["Arabic Presentation Forms-B"](qi))));if(rn.imageName){const qr=st[rn.imageName];if(!qr)continue;Wr=rn.imageName,Be.iconsInText=Be.iconsInText||!0,Dr=qr.paddedRect;const Er=qr.displaySize;rn.scale=rn.scale*go/un,$s={width:Er[0],height:Er[1],left:1,top:-3,advance:as?Er[1]:Er[0]},cr=To+(go-Er[1]*rn.scale),Sa=$s.advance;const dl=as?Er[0]*rn.scale-go*En:Er[1]*rn.scale-go*En;dl>0&&dl>lr&&(lr=dl)}else{const qr=bt[rn.fontStack],Er=qr&&qr[bo];if(Er&&Er.rect)Dr=Er.rect,$s=Er.metrics;else{const dl=ct[rn.fontStack],Ud=dl&&dl[bo];if(!Ud)continue;$s=Ud.metrics}cr=(En-rn.scale)*go}as?(Be.verticalizable=!0,ar.push({glyph:bo,imageName:Wr,x:mi,y:ci+cr,vertical:as,scale:rn.scale,fontStack:rn.fontStack,sectionIndex:Gr,metrics:$s,rect:Dr}),mi+=Sa*rn.scale+Dt):(ar.push({glyph:bo,imageName:Wr,x:mi,y:ci+cr,vertical:as,scale:rn.scale,fontStack:rn.fontStack,sectionIndex:Gr,metrics:$s,rect:Dr}),mi+=$s.advance*rn.scale+Dt)}0!==ar.length&&(Wi=Math.max(mi-Dt,Wi),_y(ar,0,ar.length-1,So,lr)),mi=0;const Ei=et*En+lr;sr.lineOffset=Math.max(lr,To),ci+=Ei,ss=Math.max(Ei,ss),++Bi}var qi;const Zi=ci-rh,{horizontalAlign:Vo,verticalAlign:Uo}=bm(dt);(function(zi,En,To,sr,ar,lr,Ei,Io,rn){const Gr=(En-To)*ar;let bo=0;bo=lr!==Ei?-Io*sr-rh:(-sr*rn+.5)*Ei;for(const cr of zi)for(const $s of cr.positionedGlyphs)$s.x+=Gr,$s.y+=bo})(Be.positionedLines,So,Vo,Uo,Wi,ss,et,Zi,nt.length),Be.top+=-Uo*Zi,Be.bottom=Be.top+Zi,Be.left+=-Vo*Wi,Be.right=Be.left+Wi}(Ve,r,c,h,_e,w,E,I,B,O,H,se),!function(Be){for(const ct of Be)if(0!==ct.positionedGlyphs.length)return!1;return!0}(we)&&Ve}const ah={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$r={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Qb(l,r,c,h,b,y){if(r.imageName){const w=h[r.imageName];return w?w.displaySize[0]*r.scale*go/y+b:0}{const w=c[r.fontStack],E=w&&w[l];return E?E.metrics.advance*r.scale+b:0}}function Xb(l,r,c,h){const b=Math.pow(l-r,2);return h?l<r?b/2:2*b:b+Math.abs(c)*c}function by(l,r,c){let h=0;return 10===l&&(h-=1e4),c&&(h+=150),40!==l&&65288!==l||(h+=50),41!==r&&65289!==r||(h+=50),h}function mm(l,r,c,h,b,y){let w=null,E=Xb(r,c,b,y);for(const I of h){const O=Xb(r-I.x,c,b,y)+I.badness;O<=E&&(w=I,E=O)}return{index:l,x:r,priorBreak:w,badness:E}}function bp(l){return l?bp(l.priorBreak).concat(l.index):[]}function gm(l,r,c,h,b,y,w){if("point"!==y)return[];if(!l)return[];const E=[],I=function(H,j,$,se,oe,_e){let De=0;for(let fe=0;fe<H.length();fe++){const we=H.getSection(fe);De+=Qb(H.getCharCode(fe),we,se,oe,j,_e)}return De/Math.max(1,Math.ceil(De/$))}(l,r,c,h,b,w),O=l.text.indexOf("\u200b")>=0;let R=0;for(let H=0;H<l.length();H++){const j=l.getSection(H),$=l.getCharCode(H);if(ah[$]||(R+=Qb($,j,h,b,r,w)),H<l.length()-1){const se=!((B=$)<11904||!(tt["Bopomofo Extended"](B)||tt.Bopomofo(B)||tt["CJK Compatibility Forms"](B)||tt["CJK Compatibility Ideographs"](B)||tt["CJK Compatibility"](B)||tt["CJK Radicals Supplement"](B)||tt["CJK Strokes"](B)||tt["CJK Symbols and Punctuation"](B)||tt["CJK Unified Ideographs Extension A"](B)||tt["CJK Unified Ideographs"](B)||tt["Enclosed CJK Letters and Months"](B)||tt["Halfwidth and Fullwidth Forms"](B)||tt.Hiragana(B)||tt["Ideographic Description Characters"](B)||tt["Kangxi Radicals"](B)||tt["Katakana Phonetic Extensions"](B)||tt.Katakana(B)||tt["Vertical Forms"](B)||tt["Yi Radicals"](B)||tt["Yi Syllables"](B)));($r[$]||se||j.imageName)&&E.push(mm(H+1,R,I,E,by($,l.getCharCode(H+1),se&&O),!1))}}var B;return bp(mm(l.length(),R,I,E,0,!0))}function bm(l){let r=.5,c=.5;switch(l){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:r,verticalAlign:c}}function _y(l,r,c,h,b){if(!h&&!b)return;const y=l[c],w=(l[c].x+y.metrics.advance*y.scale)*h;for(let E=r;E<=c;E++)l[E].x-=w,l[E].y+=b}function Jb(l,r,c){const{horizontalAlign:h,verticalAlign:b}=bm(c),y=r[0]-l.displaySize[0]*h,w=r[1]-l.displaySize[1]*b;return{image:l,top:w,bottom:w+l.displaySize[1],left:y,right:y+l.displaySize[0]}}function e_(l,r,c,h,b,y){const w=l.image;let E;if(w.content){const oe=w.content,_e=w.pixelRatio||1;E=[oe[0]/_e,oe[1]/_e,w.displaySize[0]-oe[2]/_e,w.displaySize[1]-oe[3]/_e]}const I=r.left*y,O=r.right*y;let R,B,H,j;"width"===c||"both"===c?(j=b[0]+I-h[3],B=b[0]+O+h[1]):(j=b[0]+(I+O-w.displaySize[0])/2,B=j+w.displaySize[0]);const $=r.top*y,se=r.bottom*y;return"height"===c||"both"===c?(R=b[1]+$-h[0],H=b[1]+se+h[2]):(R=b[1]+($+se-w.displaySize[1])/2,H=R+w.displaySize[1]),{image:w,top:R,right:B,bottom:H,left:j,collisionPadding:E}}const al=128;function wr(l,r){const{expression:c}=r;if("constant"===c.kind)return{kind:"constant",layoutSize:c.evaluate(new pi(l+1))};if("source"===c.kind)return{kind:"source"};{const{zoomStops:h,interpolationType:b}=c;let y=0;for(;y<h.length&&h[y]<=l;)y++;y=Math.max(0,y-1);let w=y;for(;w<h.length&&h[w]<l+1;)w++;w=Math.min(h.length-1,w);const E=h[y],I=h[w];return"composite"===c.kind?{kind:"composite",minZoom:E,maxZoom:I,interpolationType:b}:{kind:"camera",minZoom:E,maxZoom:I,minSize:c.evaluate(new pi(E)),maxSize:c.evaluate(new pi(I)),interpolationType:b}}}class Da extends Pt{constructor(r,c,h,b){super(r,c),this.angle=h,void 0!==b&&(this.segment=b)}clone(){return new Da(this.x,this.y,this.angle,this.segment)}}function _m(l,r,c,h,b){if(void 0===r.segment)return!0;let y=r,w=r.segment+1,E=0;for(;E>-c/2;){if(w--,w<0)return!1;E-=l[w].dist(y),y=l[w]}E+=l[w].dist(l[w+1]),w++;const I=[];let O=0;for(;E<c/2;){const R=l[w],B=l[w+1];if(!B)return!1;let H=l[w-1].angleTo(R)-R.angleTo(B);for(H=Math.abs((H+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:E,angleDelta:H}),O+=H;E-I[0].distance>h;)O-=I.shift().angleDelta;if(O>b)return!1;w++,E+=R.dist(B)}return!0}function _p(l){let r=0;for(let c=0;c<l.length-1;c++)r+=l[c].dist(l[c+1]);return r}function zo(l,r,c){return l?.6*r*c:0}function Nd(l,r){return Math.max(l?l.right-l.left:0,r?r.right-r.left:0)}function t_(l,r,c,h,b,y){const w=zo(c,b,y),E=Nd(c,h)*y;let I=0;const O=_p(l)/2;for(let R=0;R<l.length-1;R++){const B=l[R],H=l[R+1],j=B.dist(H);if(I+j>O){const $=(O-I)/j,se=ai(B.x,H.x,$),oe=ai(B.y,H.y,$),_e=new Da(se,oe,H.angleTo(B),R);return _e._round(),!w||_m(l,_e,E,w,r)?_e:void 0}I+=j}}function n_(l,r,c,h,b,y,w,E,I){const O=zo(h,y,w),R=Nd(h,b),B=R*w,H=0===l[0].x||l[0].x===I||0===l[0].y||l[0].y===I;return r-B<r/4&&(r=B+r/4),i_(l,H?r/2*E%r:(R/2+2*y)*w*E%r,r,O,c,B,H,!1,I)}function i_(l,r,c,h,b,y,w,E,I){const O=y/2,R=_p(l);let B=0,H=r-c,j=[];for(let $=0;$<l.length-1;$++){const se=l[$],oe=l[$+1],_e=se.dist(oe),De=oe.angleTo(se);for(;H+c<B+_e;){H+=c;const fe=(H-B)/_e,we=ai(se.x,oe.x,fe),Ve=ai(se.y,oe.y,fe);if(we>=0&&we<I&&Ve>=0&&Ve<I&&H-O>=0&&H+O<=R){const Be=new Da(we,Ve,De,$);Be._round(),h&&!_m(l,Be,y,h,b)||j.push(Be)}}B+=_e}return E||j.length||w||(j=i_(l,B/2,c,h,b,y,w,!0,I)),j}function vm(l,r,c,h,b){const y=[];for(let w=0;w<l.length;w++){const E=l[w];let I;for(let O=0;O<E.length-1;O++){let R=E[O],B=E[O+1];R.x<r&&B.x<r||(R.x<r?R=new Pt(r,R.y+(r-R.x)/(B.x-R.x)*(B.y-R.y))._round():B.x<r&&(B=new Pt(r,R.y+(r-R.x)/(B.x-R.x)*(B.y-R.y))._round()),R.y<c&&B.y<c||(R.y<c?R=new Pt(R.x+(c-R.y)/(B.y-R.y)*(B.x-R.x),c)._round():B.y<c&&(B=new Pt(R.x+(c-R.y)/(B.y-R.y)*(B.x-R.x),c)._round()),R.x>=h&&B.x>=h||(R.x>=h?R=new Pt(h,R.y+(h-R.x)/(B.x-R.x)*(B.y-R.y))._round():B.x>=h&&(B=new Pt(h,R.y+(h-R.x)/(B.x-R.x)*(B.y-R.y))._round()),R.y>=b&&B.y>=b||(R.y>=b?R=new Pt(R.x+(b-R.y)/(B.y-R.y)*(B.x-R.x),b)._round():B.y>=b&&(B=new Pt(R.x+(b-R.y)/(B.y-R.y)*(B.x-R.x),b)._round()),I&&R.equals(I[I.length-1])||(I=[R],y.push(I)),I.push(B)))))}}return y}function o_(l,r,c,h){const b=[],y=l.image,w=y.pixelRatio,E=y.paddedRect.w-2,I=y.paddedRect.h-2,O=l.right-l.left,R=l.bottom-l.top,B=y.stretchX||[[0,E]],H=y.stretchY||[[0,I]],j=(et,dt)=>et+dt[1]-dt[0],$=B.reduce(j,0),se=H.reduce(j,0),oe=E-$,_e=I-se;let De=0,fe=$,we=0,Ve=se,Be=0,ct=oe,bt=0,st=_e;if(y.content&&h){const et=y.content;De=lh(B,0,et[0]),we=lh(H,0,et[1]),fe=lh(B,et[0],et[2]),Ve=lh(H,et[1],et[3]),Be=et[0]-De,bt=et[1]-we,ct=et[2]-et[0]-fe,st=et[3]-et[1]-Ve}const nt=(et,dt,rt,Ze)=>{const Dt=ch(et.stretch-De,fe,O,l.left),yt=vp(et.fixed-Be,ct,et.stretch,$),un=ch(dt.stretch-we,Ve,R,l.top),mi=vp(dt.fixed-bt,st,dt.stretch,se),ci=ch(rt.stretch-De,fe,O,l.left),Wi=vp(rt.fixed-Be,ct,rt.stretch,$),ss=ch(Ze.stretch-we,Ve,R,l.top),So=vp(Ze.fixed-bt,st,Ze.stretch,se),Bi=new Pt(Dt,un),qi=new Pt(ci,un),Zi=new Pt(ci,ss),Vo=new Pt(Dt,ss),Uo=new Pt(yt/w,mi/w),zi=new Pt(Wi/w,So/w),En=r*Math.PI/180;if(En){const ar=Math.sin(En),lr=Math.cos(En),Ei=[lr,-ar,ar,lr];Bi._matMult(Ei),qi._matMult(Ei),Vo._matMult(Ei),Zi._matMult(Ei)}const To=et.stretch+et.fixed,sr=dt.stretch+dt.fixed;return{tl:Bi,tr:qi,bl:Vo,br:Zi,tex:{x:y.paddedRect.x+1+To,y:y.paddedRect.y+1+sr,w:rt.stretch+rt.fixed-To,h:Ze.stretch+Ze.fixed-sr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Uo,pixelOffsetBR:zi,minFontScaleX:ct/w/O,minFontScaleY:st/w/R,isSDF:c}};if(h&&(y.stretchX||y.stretchY)){const et=r_(B,oe,$),dt=r_(H,_e,se);for(let rt=0;rt<et.length-1;rt++){const Ze=et[rt],Dt=et[rt+1];for(let yt=0;yt<dt.length-1;yt++)b.push(nt(Ze,dt[yt],Dt,dt[yt+1]))}}else b.push(nt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:I+1}));return b}function lh(l,r,c){let h=0;for(const b of l)h+=Math.max(r,Math.min(c,b[1]))-Math.max(r,Math.min(c,b[0]));return h}function r_(l,r,c){const h=[{fixed:-1,stretch:0}];for(const[b,y]of l){const w=h[h.length-1];h.push({fixed:b-w.stretch,stretch:w.stretch}),h.push({fixed:b-w.stretch,stretch:w.stretch+(y-b)})}return h.push({fixed:r+1,stretch:c}),h}function ch(l,r,c,h){return l/r*c+h}function vp(l,r,c,h){return l-r*c/h}ot("Anchor",Da);class yp{constructor(r,c,h,b,y,w,E,I,O,R){if(this.boxStartIndex=r.length,O){let B=w.top,H=w.bottom;const j=w.collisionPadding;j&&(B-=j[1],H+=j[3]);let $=H-B;$>0&&($=Math.max(10,$),this.circleDiameter=$)}else{let B=w.top*E-I[0],H=w.bottom*E+I[2],j=w.left*E-I[3],$=w.right*E+I[1];const se=w.collisionPadding;if(se&&(j-=se[0]*E,B-=se[1]*E,$+=se[2]*E,H+=se[3]*E),R){const oe=new Pt(j,B),_e=new Pt($,B),De=new Pt(j,H),fe=new Pt($,H),we=R*Math.PI/180;oe._rotate(we),_e._rotate(we),De._rotate(we),fe._rotate(we),j=Math.min(oe.x,_e.x,De.x,fe.x),$=Math.max(oe.x,_e.x,De.x,fe.x),B=Math.min(oe.y,_e.y,De.y,fe.y),H=Math.max(oe.y,_e.y,De.y,fe.y)}r.emplaceBack(c.x,c.y,j,B,$,H,h,b,y)}this.boxEndIndex=r.length}}class ym{constructor(r=[],c=xm){if(this.data=r,this.length=this.data.length,this.compare=c,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const r=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:c,compare:h}=this,b=c[r];for(;r>0;){const y=r-1>>1,w=c[y];if(h(b,w)>=0)break;c[r]=w,r=y}c[r]=b}_down(r){const{data:c,compare:h}=this,b=this.length>>1,y=c[r];for(;r<b;){let w=1+(r<<1),E=c[w];const I=w+1;if(I<this.length&&h(c[I],E)<0&&(w=I,E=c[I]),h(E,y)>=0)break;c[r]=E,r=w}c[r]=y}}function xm(l,r){return l<r?-1:l>r?1:0}function vy(l,r=1,c=!1){let h=1/0,b=1/0,y=-1/0,w=-1/0;const E=l[0];for(let j=0;j<E.length;j++){const $=E[j];(!j||$.x<h)&&(h=$.x),(!j||$.y<b)&&(b=$.y),(!j||$.x>y)&&(y=$.x),(!j||$.y>w)&&(w=$.y)}const I=Math.min(y-h,w-b);let O=I/2;const R=new ym([],dh);if(0===I)return new Pt(h,b);for(let j=h;j<y;j+=I)for(let $=b;$<w;$+=I)R.push(new Fd(j+O,$+O,O,l));let B=function(j){let $=0,se=0,oe=0;const _e=j[0];for(let De=0,fe=_e.length,we=fe-1;De<fe;we=De++){const Ve=_e[De],Be=_e[we],ct=Ve.x*Be.y-Be.x*Ve.y;se+=(Ve.x+Be.x)*ct,oe+=(Ve.y+Be.y)*ct,$+=3*ct}return new Fd(se/$,oe/$,0,j)}(l),H=R.length;for(;R.length;){const j=R.pop();(j.d>B.d||!B.d)&&(B=j,c&&console.log("found best %d after %d probes",Math.round(1e4*j.d)/1e4,H)),j.max-B.d<=r||(O=j.h/2,R.push(new Fd(j.p.x-O,j.p.y-O,O,l)),R.push(new Fd(j.p.x+O,j.p.y-O,O,l)),R.push(new Fd(j.p.x-O,j.p.y+O,O,l)),R.push(new Fd(j.p.x+O,j.p.y+O,O,l)),H+=4)}return c&&(console.log(`num probes: ${H}`),console.log(`best distance: ${B.d}`)),B.p}function dh(l,r){return r.max-l.max}function Fd(l,r,c,h){this.p=new Pt(l,r),this.h=c,this.d=function(b,y){let w=!1,E=1/0;for(let I=0;I<y.length;I++){const O=y[I];for(let R=0,B=O.length,H=B-1;R<B;H=R++){const j=O[R],$=O[H];j.y>b.y!=$.y>b.y&&b.x<($.x-j.x)*(b.y-j.y)/($.y-j.y)+j.x&&(w=!w),E=Math.min(E,oi(b,j,$))}}return(w?1:-1)*Math.sqrt(E)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}const wm=Number.POSITIVE_INFINITY;function xp(l,r){return r[1]!==wm?function(c,h,b){let y=0,w=0;switch(h=Math.abs(h),b=Math.abs(b),c){case"top-right":case"top-left":case"top":w=b-7;break;case"bottom-right":case"bottom-left":case"bottom":w=7-b}switch(c){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h}return[y,w]}(l,r[0],r[1]):function(c,h){let b=0,y=0;h<0&&(h=0);const w=h/Math.sqrt(2);switch(c){case"top-right":case"top-left":y=w-7;break;case"bottom-right":case"bottom-left":y=7-w;break;case"bottom":y=7-h;break;case"top":y=h-7}switch(c){case"top-right":case"bottom-right":b=-w;break;case"top-left":case"bottom-left":b=w;break;case"left":b=h;break;case"right":b=-h}return[b,y]}(l,r[0])}function uh(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function s_(l,r,c,h,b,y,w,E,I,O,R){let B=y.textMaxSize.evaluate(r,{});void 0===B&&(B=w);const H=l.layers[0].layout,j=H.get("icon-offset").evaluate(r,{},R),$=Cm(c.horizontal),se=w/24,oe=l.tilePixelRatio*se,_e=l.tilePixelRatio*B/24,De=l.tilePixelRatio*E,fe=l.tilePixelRatio*H.get("symbol-spacing"),we=H.get("text-padding")*l.tilePixelRatio,Ve=function(Ze,Dt,yt,un=1){const mi=Ze.get("icon-padding").evaluate(Dt,{},yt),ci=mi&&mi.values;return[ci[0]*un,ci[1]*un,ci[2]*un,ci[3]*un]}(H,r,R,l.tilePixelRatio),Be=H.get("text-max-angle")/180*Math.PI,ct="viewport"!==H.get("text-rotation-alignment")&&"point"!==H.get("symbol-placement"),bt="map"===H.get("icon-rotation-alignment")&&"point"!==H.get("symbol-placement"),st=H.get("symbol-placement"),nt=fe/2,et=H.get("icon-text-fit");let dt;h&&"none"!==et&&(l.allowVerticalPlacement&&c.vertical&&(dt=e_(h,c.vertical,et,H.get("icon-text-fit-padding"),j,se)),$&&(h=e_(h,$,et,H.get("icon-text-fit-padding"),j,se)));const rt=(Ze,Dt)=>{Dt.x<0||Dt.x>=Dn||Dt.y<0||Dt.y>=Dn||function(yt,un,mi,ci,Wi,ss,So,Bi,qi,Zi,Vo,Uo,zi,En,To,sr,ar,lr,Ei,Io,rn,Gr,bo,cr,$s){const Dr=yt.addToLineVertexArray(un,mi);let Wr,Sa,as,qr,Er=0,dl=0,Ud=0,Vm=0,fh=-1,__=-1;const Gs={};let v_=U(""),mh=0,Ap=0;if(void 0===Bi._unevaluatedLayout.getValue("text-radial-offset")?[mh,Ap]=Bi.layout.get("text-offset").evaluate(rn,{},cr).map(Sr=>Sr*go):(mh=Bi.layout.get("text-radial-offset").evaluate(rn,{},cr)*go,Ap=wm),yt.allowVerticalPlacement&&ci.vertical){const Sr=Bi.layout.get("text-rotate").evaluate(rn,{},cr)+90;as=new yp(qi,un,Zi,Vo,Uo,ci.vertical,zi,En,To,Sr),So&&(qr=new yp(qi,un,Zi,Vo,Uo,So,ar,lr,To,Sr))}if(Wi){const Sr=Bi.layout.get("icon-rotate").evaluate(rn,{}),Ws="none"!==Bi.layout.get("icon-text-fit"),Ta=o_(Wi,Sr,bo,Ws),gh=So?o_(So,Sr,bo,Ws):void 0;Sa=new yp(qi,un,Zi,Vo,Uo,Wi,ar,lr,!1,Sr),Er=4*Ta.length;const x_=yt.iconSizeData;let Nc=null;"source"===x_.kind?(Nc=[al*Bi.layout.get("icon-size").evaluate(rn,{})],Nc[0]>rs&&yn(`${yt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===x_.kind&&(Nc=[al*Gr.compositeIconSizes[0].evaluate(rn,{},cr),al*Gr.compositeIconSizes[1].evaluate(rn,{},cr)],(Nc[0]>rs||Nc[1]>rs)&&yn(`${yt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),yt.addSymbols(yt.icon,Ta,Nc,Io,Ei,rn,v.WritingMode.none,un,Dr.lineStartIndex,Dr.lineLength,-1,cr),fh=yt.icon.placedSymbolArray.length-1,gh&&(dl=4*gh.length,yt.addSymbols(yt.icon,gh,Nc,Io,Ei,rn,v.WritingMode.vertical,un,Dr.lineStartIndex,Dr.lineLength,-1,cr),__=yt.icon.placedSymbolArray.length-1)}const Um=Object.keys(ci.horizontal);for(const Sr of Um){const Ws=ci.horizontal[Sr];if(!Wr){v_=U(Ws.text);const gh=Bi.layout.get("text-rotate").evaluate(rn,{},cr);Wr=new yp(qi,un,Zi,Vo,Uo,Ws,zi,En,To,gh)}const Ta=1===Ws.positionedLines.length;if(Ud+=wp(yt,un,Ws,ss,Bi,To,rn,sr,Dr,ci.vertical?v.WritingMode.horizontal:v.WritingMode.horizontalOnly,Ta?Um:[Sr],Gs,fh,Gr,cr),Ta)break}ci.vertical&&(Vm+=wp(yt,un,ci.vertical,ss,Bi,To,rn,sr,Dr,v.WritingMode.vertical,["vertical"],Gs,__,Gr,cr));const Rc=Wr?Wr.boxStartIndex:yt.collisionBoxArray.length,Dy=Wr?Wr.boxEndIndex:yt.collisionBoxArray.length,Hm=as?as.boxStartIndex:yt.collisionBoxArray.length,Op=as?as.boxEndIndex:yt.collisionBoxArray.length,Ey=Sa?Sa.boxStartIndex:yt.collisionBoxArray.length,jm=Sa?Sa.boxEndIndex:yt.collisionBoxArray.length,Pp=qr?qr.boxStartIndex:yt.collisionBoxArray.length,Ds=qr?qr.boxEndIndex:yt.collisionBoxArray.length;let Es=-1;const Hd=(Sr,Ws)=>Sr&&Sr.circleDiameter?Math.max(Sr.circleDiameter,Ws):Ws;Es=Hd(Wr,Es),Es=Hd(as,Es),Es=Hd(Sa,Es),Es=Hd(qr,Es);const y_=Es>-1?1:0;y_&&(Es*=$s/go),yt.glyphOffsetArray.length>=Ac.MAX_GLYPHS&&yn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==rn.sortKey&&yt.addToSortKeyRanges(yt.symbolInstances.length,rn.sortKey),yt.symbolInstances.emplaceBack(un.x,un.y,Gs.right>=0?Gs.right:-1,Gs.center>=0?Gs.center:-1,Gs.left>=0?Gs.left:-1,Gs.vertical||-1,fh,__,v_,Rc,Dy,Hm,Op,Ey,jm,Pp,Ds,Zi,Ud,Vm,Er,dl,y_,0,zi,mh,Ap,Es)}(l,Dt,Ze,c,h,b,dt,l.layers[0],l.collisionBoxArray,r.index,r.sourceLayerIndex,l.index,oe,[we,we,we,we],ct,I,De,Ve,bt,j,r,y,O,R,w)};if("line"===st)for(const Ze of vm(r.geometry,0,0,Dn,Dn)){const Dt=n_(Ze,fe,Be,c.vertical||$,h,24,_e,l.overscaling,Dn);for(const yt of Dt)$&&yy(l,$.text,nt,yt)||rt(Ze,yt)}else if("line-center"===st){for(const Ze of r.geometry)if(Ze.length>1){const Dt=t_(Ze,Be,c.vertical||$,h,24,_e);Dt&&rt(Ze,Dt)}}else if("Polygon"===r.type)for(const Ze of Jl(r.geometry,0)){const Dt=vy(Ze,16);rt(Ze[0],new Da(Dt.x,Dt.y,0))}else if("LineString"===r.type)for(const Ze of r.geometry)rt(Ze,new Da(Ze[0].x,Ze[0].y,0));else if("Point"===r.type)for(const Ze of r.geometry)for(const Dt of Ze)rt([Dt],new Da(Dt.x,Dt.y,0))}const rs=32640;function wp(l,r,c,h,b,y,w,E,I,O,R,B,H,j,$){const se=function(De,fe,we,Ve,Be,ct,bt,st){const nt=Ve.layout.get("text-rotate").evaluate(ct,{})*Math.PI/180,et=[];for(const dt of fe.positionedLines)for(const rt of dt.positionedGlyphs){if(!rt.rect)continue;const Ze=rt.rect||{};let Dt=4,yt=!0,un=1,mi=0;const ci=(Be||st)&&rt.vertical,Wi=rt.metrics.advance*rt.scale/2;if(st&&fe.verticalizable&&(mi=dt.lineOffset/2-(rt.imageName?-(go-rt.metrics.width*rt.scale)/2:(rt.scale-1)*go)),rt.imageName){const Ei=bt[rt.imageName];yt=Ei.sdf,un=Ei.pixelRatio,Dt=1/un}const ss=Be?[rt.x+Wi,rt.y]:[0,0];let So=Be?[0,0]:[rt.x+Wi+we[0],rt.y+we[1]-mi],Bi=[0,0];ci&&(Bi=So,So=[0,0]);const qi=(rt.metrics.left-Dt)*rt.scale-Wi+So[0],Zi=(-rt.metrics.top-Dt)*rt.scale+So[1],Vo=qi+Ze.w*rt.scale/un,Uo=Zi+Ze.h*rt.scale/un,zi=new Pt(qi,Zi),En=new Pt(Vo,Zi),To=new Pt(qi,Uo),sr=new Pt(Vo,Uo);if(ci){const Ei=new Pt(-Wi,Wi-rh),Io=-Math.PI/2,rn=12-Wi,Gr=new Pt(22-rn,-(rt.imageName?rn:0)),bo=new Pt(...Bi);zi._rotateAround(Io,Ei)._add(Gr)._add(bo),En._rotateAround(Io,Ei)._add(Gr)._add(bo),To._rotateAround(Io,Ei)._add(Gr)._add(bo),sr._rotateAround(Io,Ei)._add(Gr)._add(bo)}if(nt){const Ei=Math.sin(nt),Io=Math.cos(nt),rn=[Io,-Ei,Ei,Io];zi._matMult(rn),En._matMult(rn),To._matMult(rn),sr._matMult(rn)}const ar=new Pt(0,0),lr=new Pt(0,0);et.push({tl:zi,tr:En,bl:To,br:sr,tex:Ze,writingMode:fe.writingMode,glyphOffset:ss,sectionIndex:rt.sectionIndex,isSDF:yt,pixelOffsetTL:ar,pixelOffsetBR:lr,minFontScaleX:0,minFontScaleY:0})}return et}(0,c,E,b,y,w,h,l.allowVerticalPlacement),oe=l.textSizeData;let _e=null;"source"===oe.kind?(_e=[al*b.layout.get("text-size").evaluate(w,{})],_e[0]>rs&&yn(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===oe.kind&&(_e=[al*j.compositeTextSizes[0].evaluate(w,{},$),al*j.compositeTextSizes[1].evaluate(w,{},$)],(_e[0]>rs||_e[1]>rs)&&yn(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),l.addSymbols(l.text,se,_e,E,y,w,O,r,I.lineStartIndex,I.lineLength,H,$);for(const De of R)B[De]=l.text.placedSymbolArray.length-1;return 4*se.length}function Cm(l){for(const r in l)return l[r];return null}function yy(l,r,c,h){const b=l.compareText;if(r in b){const y=b[r];for(let w=y.length-1;w>=0;w--)if(h.dist(y[w])<c)return!0}else b[r]=[];return b[r].push(h),!1}const Dm=Tc.VectorTileFeature.types,xy=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Cp(l,r,c,h,b,y,w,E,I,O,R,B,H){const j=E?Math.min(rs,Math.round(E[0])):0,$=E?Math.min(rs,Math.round(E[1])):0;l.emplaceBack(r,c,Math.round(32*h),Math.round(32*b),y,w,(j<<1)+(I?1:0),$,16*O,16*R,256*B,256*H)}function Em(l,r,c){l.emplaceBack(r.x,r.y,c),l.emplaceBack(r.x,r.y,c),l.emplaceBack(r.x,r.y,c),l.emplaceBack(r.x,r.y,c)}function wy(l){for(const r of l.sections)if(Eo(r.text))return!0;return!1}class Sm{constructor(r){this.layoutVertexArray=new g,this.indexArray=new x,this.programConfigurations=r,this.segments=new k,this.dynamicLayoutVertexArray=new a,this.opacityVertexArray=new u,this.hasVisibleVertices=!1,this.placedSymbolArray=new wd}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(r,c,h,b){this.isEmpty()||(h&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,th.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,uy.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,xy,!0),this.opacityVertexBuffer.itemSize=1),(h||b)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ot("SymbolBuffers",Sm);class Tm{constructor(r,c,h){this.layoutVertexArray=new r,this.layoutAttributes=c,this.indexArray=new h,this.segments=new k,this.collisionVertexArray=new m}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,Hb.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ot("CollisionBuffers",Tm);class Ac{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(w=>w.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Xf([]),this.placementViewportMatrix=Xf([]);const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wr(this.zoom,c["text-size"]),this.iconSizeData=wr(this.zoom,c["icon-size"]);const h=this.layers[0].layout,b=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap="never"!==Mm(h,"text-overlap","text-allow-overlap")||"never"!==Mm(h,"icon-overlap","icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==y&&!b.isConstant(),this.sortFeaturesByY=("viewport-y"===y||"auto"===y&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===h.get("symbol-placement")&&(this.writingModes=h.get("text-writing-mode").map(w=>v.WritingMode[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=r.sourceID}createArrays(){this.text=new Sm(new en(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Sm(new en(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new tl,this.lineVertexArray=new ba,this.symbolInstances=new rr}calculateGlyphDependencies(r,c,h,b,y){for(let w=0;w<r.length;w++)if(c[r.charCodeAt(w)]=!0,(h||b)&&y){const E=nh[r.charAt(w)];E&&(c[E.charCodeAt(0)]=!0)}}populate(r,c,h){const b=this.layers[0],y=b.layout,w=y.get("text-font"),E=y.get("text-field"),I=y.get("icon-image"),O=("constant"!==E.value.kind||E.value.value instanceof to&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&("constant"!==w.value.kind||w.value.value.length>0),R="constant"!==I.value.kind||!!I.value.value||Object.keys(I.parameters).length>0,B=y.get("symbol-sort-key");if(this.features=[],!O&&!R)return;const H=c.iconDependencies,j=c.glyphDependencies,$=c.availableImages,se=new pi(this.zoom);for(const{feature:oe,id:_e,index:De,sourceLayerIndex:fe}of r){const we=b._featureFilter.needGeometry,Ve=Gi(oe,we);if(!b._featureFilter.filter(se,Ve,h))continue;let Be,ct;if(we||(Ve.geometry=Qn(oe)),O){const st=b.getValueAndResolveTokens("text-field",Ve,h,$),nt=to.factory(st);wy(nt)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===xs()||this.hasRTLText&&ii.isParsed())&&(Be=jb(nt,b,Ve))}if(R){const st=b.getValueAndResolveTokens("icon-image",Ve,h,$);ct=st instanceof Co?st:Co.fromString(st)}if(!Be&&!ct)continue;const bt=this.sortFeaturesByKey?B.evaluate(Ve,{},h):void 0;if(this.features.push({id:_e,text:Be,icon:ct,index:De,sourceLayerIndex:fe,geometry:Ve.geometry,properties:oe.properties,type:Dm[oe.type],sortKey:bt}),ct&&(H[ct.name]=!0),Be){const st=w.evaluate(Ve,{},h).join(","),nt="viewport"!==y.get("text-rotation-alignment")&&"point"!==y.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(v.WritingMode.vertical)>=0;for(const et of Be.sections)if(et.image)H[et.image.name]=!0;else{const dt=Wl(Be.toString()),rt=et.fontStack||st,Ze=j[rt]=j[rt]||{};this.calculateGlyphDependencies(et.text,Ze,nt,this.allowVerticalPlacement,dt)}}}"line"===y.get("symbol-placement")&&(this.features=function(oe){const _e={},De={},fe=[];let we=0;function Ve(st){fe.push(oe[st]),we++}function Be(st,nt,et){const dt=De[st];return delete De[st],De[nt]=dt,fe[dt].geometry[0].pop(),fe[dt].geometry[0]=fe[dt].geometry[0].concat(et[0]),dt}function ct(st,nt,et){const dt=_e[nt];return delete _e[nt],_e[st]=dt,fe[dt].geometry[0].shift(),fe[dt].geometry[0]=et[0].concat(fe[dt].geometry[0]),dt}function bt(st,nt,et){const dt=et?nt[0][nt[0].length-1]:nt[0][0];return`${st}:${dt.x}:${dt.y}`}for(let st=0;st<oe.length;st++){const nt=oe[st],et=nt.geometry,dt=nt.text?nt.text.toString():null;if(!dt){Ve(st);continue}const rt=bt(dt,et),Ze=bt(dt,et,!0);if(rt in De&&Ze in _e&&De[rt]!==_e[Ze]){const Dt=ct(rt,Ze,et),yt=Be(rt,Ze,fe[Dt].geometry);delete _e[rt],delete De[Ze],De[bt(dt,fe[yt].geometry,!0)]=yt,fe[Dt].geometry=null}else rt in De?Be(rt,Ze,et):Ze in _e?ct(rt,Ze,et):(Ve(st),_e[rt]=we-1,De[Ze]=we-1)}return fe.filter(st=>st.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((oe,_e)=>oe.sortKey-_e.sortKey)}update(r,c,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,c,this.layers,h),this.icon.programConfigurations.updatePaintArrays(r,c,this.layers,h))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,c){const h=this.lineVertexArray.length;if(void 0!==r.segment){let b=r.dist(c[r.segment+1]),y=r.dist(c[r.segment]);const w={};for(let E=r.segment+1;E<c.length;E++)w[E]={x:c[E].x,y:c[E].y,tileUnitDistanceFromAnchor:b},E<c.length-1&&(b+=c[E+1].dist(c[E]));for(let E=r.segment||0;E>=0;E--)w[E]={x:c[E].x,y:c[E].y,tileUnitDistanceFromAnchor:y},E>0&&(y+=c[E-1].dist(c[E]));for(let E=0;E<c.length;E++){const I=w[E];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(r,c,h,b,y,w,E,I,O,R,B,H){const j=r.indexArray,$=r.layoutVertexArray,se=r.segments.prepareSegment(4*c.length,$,j,this.canOverlap?w.sortKey:void 0),oe=this.glyphOffsetArray.length,_e=se.vertexLength,De=this.allowVerticalPlacement&&E===v.WritingMode.vertical?Math.PI/2:0,fe=w.text&&w.text.sections;for(let we=0;we<c.length;we++){const{tl:Ve,tr:Be,bl:ct,br:bt,tex:st,pixelOffsetTL:nt,pixelOffsetBR:et,minFontScaleX:dt,minFontScaleY:rt,glyphOffset:Ze,isSDF:Dt,sectionIndex:yt}=c[we],un=se.vertexLength,mi=Ze[1];Cp($,I.x,I.y,Ve.x,mi+Ve.y,st.x,st.y,h,Dt,nt.x,nt.y,dt,rt),Cp($,I.x,I.y,Be.x,mi+Be.y,st.x+st.w,st.y,h,Dt,et.x,nt.y,dt,rt),Cp($,I.x,I.y,ct.x,mi+ct.y,st.x,st.y+st.h,h,Dt,nt.x,et.y,dt,rt),Cp($,I.x,I.y,bt.x,mi+bt.y,st.x+st.w,st.y+st.h,h,Dt,et.x,et.y,dt,rt),Em(r.dynamicLayoutVertexArray,I,De),j.emplaceBack(un,un+1,un+2),j.emplaceBack(un+1,un+2,un+3),se.vertexLength+=4,se.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ze[0]),we!==c.length-1&&yt===c[we+1].sectionIndex||r.programConfigurations.populatePaintArrays($.length,w,w.index,{},H,fe&&fe[yt])}r.placedSymbolArray.emplaceBack(I.x,I.y,oe,this.glyphOffsetArray.length-oe,_e,O,R,I.segment,h?h[0]:0,h?h[1]:0,b[0],b[1],E,0,!1,0,B)}_addCollisionDebugVertex(r,c,h,b,y,w){return c.emplaceBack(0,0),r.emplaceBack(h.x,h.y,b,y,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(r,c,h,b,y,w,E){const I=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),O=I.vertexLength,R=y.layoutVertexArray,B=y.collisionVertexArray,H=E.anchorX,j=E.anchorY;this._addCollisionDebugVertex(R,B,w,H,j,new Pt(r,c)),this._addCollisionDebugVertex(R,B,w,H,j,new Pt(h,c)),this._addCollisionDebugVertex(R,B,w,H,j,new Pt(h,b)),this._addCollisionDebugVertex(R,B,w,H,j,new Pt(r,b)),I.vertexLength+=4;const $=y.indexArray;$.emplaceBack(O,O+1),$.emplaceBack(O+1,O+2),$.emplaceBack(O+2,O+3),$.emplaceBack(O+3,O),I.primitiveLength+=4}addDebugCollisionBoxes(r,c,h,b){for(let y=r;y<c;y++){const w=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,b?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Tm(p,Od.members,D),this.iconCollisionBox=new Tm(p,Od.members,D);for(let r=0;r<this.symbolInstances.length;r++){const c=this.symbolInstances.get(r);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(r,c,h,b,y,w,E,I,O){const R={};for(let B=c;B<h;B++){const H=r.get(B);R.textBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},R.textFeatureIndex=H.featureIndex;break}for(let B=b;B<y;B++){const H=r.get(B);R.verticalTextBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},R.verticalTextFeatureIndex=H.featureIndex;break}for(let B=w;B<E;B++){const H=r.get(B);R.iconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},R.iconFeatureIndex=H.featureIndex;break}for(let B=I;B<O;B++){const H=r.get(B);R.verticalIconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},R.verticalIconFeatureIndex=H.featureIndex;break}return R}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const h=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,c){const h=r.placedSymbolArray.get(c),b=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<b;y+=4)r.indexArray.emplaceBack(y,y+1,y+2),r.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const c=Math.sin(r),h=Math.cos(r),b=[],y=[],w=[];for(let E=0;E<this.symbolInstances.length;++E){w.push(E);const I=this.symbolInstances.get(E);b.push(0|Math.round(c*I.anchorX+h*I.anchorY)),y.push(I.featureIndex)}return w.sort((E,I)=>b[E]-b[I]||y[I]-y[E]),w}addToSortKeyRanges(r,c){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===c?h.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const h=this.symbolInstances.get(c);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((b,y,w)=>{b>=0&&w.indexOf(b)===y&&this.addIndicesForPlacedSymbol(this.text,b)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}ot("SymbolBucket",Ac,{omit:["layers","collisionBoxArray","features","compareText"]}),Ac.MAX_GLYPHS=65535,Ac.addDynamicAttributes=Em;const Im=new yr({"symbol-placement":new wt(Re.layout_symbol["symbol-placement"]),"symbol-spacing":new wt(Re.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new wt(Re.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new kt(Re.layout_symbol["symbol-sort-key"]),"symbol-z-order":new wt(Re.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new wt(Re.layout_symbol["icon-allow-overlap"]),"icon-overlap":new wt(Re.layout_symbol["icon-overlap"]),"icon-ignore-placement":new wt(Re.layout_symbol["icon-ignore-placement"]),"icon-optional":new wt(Re.layout_symbol["icon-optional"]),"icon-rotation-alignment":new wt(Re.layout_symbol["icon-rotation-alignment"]),"icon-size":new kt(Re.layout_symbol["icon-size"]),"icon-text-fit":new wt(Re.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new wt(Re.layout_symbol["icon-text-fit-padding"]),"icon-image":new kt(Re.layout_symbol["icon-image"]),"icon-rotate":new kt(Re.layout_symbol["icon-rotate"]),"icon-padding":new kt(Re.layout_symbol["icon-padding"]),"icon-keep-upright":new wt(Re.layout_symbol["icon-keep-upright"]),"icon-offset":new kt(Re.layout_symbol["icon-offset"]),"icon-anchor":new kt(Re.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new wt(Re.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new wt(Re.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new wt(Re.layout_symbol["text-rotation-alignment"]),"text-field":new kt(Re.layout_symbol["text-field"]),"text-font":new kt(Re.layout_symbol["text-font"]),"text-size":new kt(Re.layout_symbol["text-size"]),"text-max-width":new kt(Re.layout_symbol["text-max-width"]),"text-line-height":new wt(Re.layout_symbol["text-line-height"]),"text-letter-spacing":new kt(Re.layout_symbol["text-letter-spacing"]),"text-justify":new kt(Re.layout_symbol["text-justify"]),"text-radial-offset":new kt(Re.layout_symbol["text-radial-offset"]),"text-variable-anchor":new wt(Re.layout_symbol["text-variable-anchor"]),"text-anchor":new kt(Re.layout_symbol["text-anchor"]),"text-max-angle":new wt(Re.layout_symbol["text-max-angle"]),"text-writing-mode":new wt(Re.layout_symbol["text-writing-mode"]),"text-rotate":new kt(Re.layout_symbol["text-rotate"]),"text-padding":new wt(Re.layout_symbol["text-padding"]),"text-keep-upright":new wt(Re.layout_symbol["text-keep-upright"]),"text-transform":new kt(Re.layout_symbol["text-transform"]),"text-offset":new kt(Re.layout_symbol["text-offset"]),"text-allow-overlap":new wt(Re.layout_symbol["text-allow-overlap"]),"text-overlap":new wt(Re.layout_symbol["text-overlap"]),"text-ignore-placement":new wt(Re.layout_symbol["text-ignore-placement"]),"text-optional":new wt(Re.layout_symbol["text-optional"])});var Dp={paint:new yr({"icon-opacity":new kt(Re.paint_symbol["icon-opacity"]),"icon-color":new kt(Re.paint_symbol["icon-color"]),"icon-halo-color":new kt(Re.paint_symbol["icon-halo-color"]),"icon-halo-width":new kt(Re.paint_symbol["icon-halo-width"]),"icon-halo-blur":new kt(Re.paint_symbol["icon-halo-blur"]),"icon-translate":new wt(Re.paint_symbol["icon-translate"]),"icon-translate-anchor":new wt(Re.paint_symbol["icon-translate-anchor"]),"text-opacity":new kt(Re.paint_symbol["text-opacity"]),"text-color":new kt(Re.paint_symbol["text-color"],{runtimeType:gr,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new kt(Re.paint_symbol["text-halo-color"]),"text-halo-width":new kt(Re.paint_symbol["text-halo-width"]),"text-halo-blur":new kt(Re.paint_symbol["text-halo-blur"]),"text-translate":new wt(Re.paint_symbol["text-translate"]),"text-translate-anchor":new wt(Re.paint_symbol["text-translate-anchor"])}),layout:Im};class Ep{constructor(r){if(void 0===r.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:bs,this.defaultValue=r}evaluate(r){if(r.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(r.formattedSection))return c.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ot("FormatSectionOverride",Ep,{omit:["defaultValue"]});class Sp extends ws{constructor(r){super(r,Dp)}recalculate(r,c){if(super.recalculate(r,c),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const h=this.layout.get("text-writing-mode");if(h){const b=[];for(const y of h)b.indexOf(y)<0&&b.push(y);this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,c,h,b){const y=this.layout.get(r).evaluate(c,{},h,b),w=this._unevaluatedLayout._values[r];return w.isDataDriven()||od(w.value)||!y?y:(E=c.properties,y.replace(/{([^{}]+)}/g,(O,R)=>R in E?String(E[R]):""));var E}createBucket(r){return new Ac(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Dp.paint.overridableProperties){if(!Sp.hasPaintOverride(this.layout,r))continue;const c=this.paint.get(r),h=new Ep(c),b=new jl(h,c.property.specification);let y=null;y="constant"===c.value.kind||"source"===c.value.kind?new Tu("source",b):new sd("composite",b,c.value.zoomStops),this.paint._values[r]=new es(c.property,y,c.parameters)}}_handleOverridablePaintPropertyUpdate(r,c,h){return!(!this.layout||c.isDataDriven()||h.isDataDriven())&&Sp.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,c){const h=r.get("text-field"),b=Dp.paint.properties[c];let y=!1;const w=E=>{for(const I of E)if(b.overrides&&b.overrides.hasOverride(I))return void(y=!0)};if("constant"===h.value.kind&&h.value.value instanceof to)w(h.value.value.sections);else if("source"===h.value.kind){const E=O=>{y||(O instanceof V&&Q(O.value)===Fo?w(O.value.sections):O instanceof Wa?w(O.sections):O.eachChild(E))},I=h.value;I._styleExpression&&E(I._styleExpression.expression)}return y}}function Mm(l,r,c){let h="never";const b=l.get(r);return b?h=b:l.get(c)&&(h="always"),h}var a_={paint:new yr({"background-color":new wt(Re.paint_background["background-color"]),"background-pattern":new np(Re.paint_background["background-pattern"]),"background-opacity":new wt(Re.paint_background["background-opacity"])})},l_={paint:new yr({"raster-opacity":new wt(Re.paint_raster["raster-opacity"]),"raster-hue-rotate":new wt(Re.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new wt(Re.paint_raster["raster-brightness-min"]),"raster-brightness-max":new wt(Re.paint_raster["raster-brightness-max"]),"raster-saturation":new wt(Re.paint_raster["raster-saturation"]),"raster-contrast":new wt(Re.paint_raster["raster-contrast"]),"raster-resampling":new wt(Re.paint_raster["raster-resampling"]),"raster-fade-duration":new wt(Re.paint_raster["raster-fade-duration"])})};class Oc extends ws{constructor(r){super(r,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=r}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const c_={circle:class extends ws{constructor(l){super(l,$u)}createBucket(l){return new ts(l)}queryRadius(l){const r=l;return jr("circle-radius",this,r)+jr("circle-stroke-width",this,r)+ya(this.paint.get("circle-translate"))}queryIntersectsFeature(l,r,c,h,b,y,w,E){const I=Ed(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,w),O=this.paint.get("circle-radius").evaluate(r,c)+this.paint.get("circle-stroke-width").evaluate(r,c),R="map"===this.paint.get("circle-pitch-alignment"),B=R?I:($=E,I.map(se=>em(se,$))),H=R?O*w:O;var $;for(const j of h)for(const $ of j){const se=R?$:em($,E);let oe=H;const _e=Gu([],[$.x,$.y,0,1],E);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?oe*=_e[3]/y.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(oe*=y.cameraToCenterDistance/_e[3]),Dd(B,se,oe))return!0}return!1}},heatmap:class extends ws{createBucket(l){return new Td(l)}constructor(l){super(l,Ib),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){"heatmap-color"===l&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=qu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends ws{constructor(l){super(l,_C)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends ws{constructor(l){super(l,xC)}recalculate(l,r){super.recalculate(l,r);const c=this.paint._values["fill-outline-color"];"constant"===c.value.kind&&void 0===c.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new Lb(l)}queryRadius(){return ya(this.paint.get("fill-translate"))}queryIntersectsFeature(l,r,c,h,b,y,w){return Li(Ed(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,w),h)}isTileClipped(){return!0}},"fill-extrusion":class extends ws{constructor(l){super(l,dm)}createBucket(l){return new cm(l)}queryRadius(){return ya(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(l,r,c,h,b,y,w,E){const I=Ed(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,w),O=this.paint.get("fill-extrusion-height").evaluate(r,c),R=this.paint.get("fill-extrusion-base").evaluate(r,c),B=function(j,$,se,oe){const _e=[];for(const De of j){const fe=[De.x,De.y,0,1];Gu(fe,fe,$),_e.push(new Pt(fe[0]/fe[3],fe[1]/fe[3]))}return _e}(I,E),H=function(j,$,se,oe){const _e=[],De=[],fe=oe[8]*$,we=oe[9]*$,Ve=oe[10]*$,Be=oe[11]*$,ct=oe[8]*se,bt=oe[9]*se,st=oe[10]*se,nt=oe[11]*se;for(const et of j){const dt=[],rt=[];for(const Ze of et){const Dt=Ze.x,yt=Ze.y,un=oe[0]*Dt+oe[4]*yt+oe[12],mi=oe[1]*Dt+oe[5]*yt+oe[13],ci=oe[2]*Dt+oe[6]*yt+oe[14],Wi=oe[3]*Dt+oe[7]*yt+oe[15],ss=ci+Ve,So=Wi+Be,Bi=un+ct,qi=mi+bt,Zi=ci+st,Vo=Wi+nt,Uo=new Pt((un+fe)/So,(mi+we)/So);Uo.z=ss/So,dt.push(Uo);const zi=new Pt(Bi/Vo,qi/Vo);zi.z=Zi/Vo,rt.push(zi)}_e.push(dt),De.push(rt)}return[_e,De]}(h,R,O,E);return function(j,$,se){let oe=1/0;Li(se,$)&&(oe=ry(se,$[0]));for(let _e=0;_e<$.length;_e++){const De=$[_e],fe=j[_e];for(let we=0;we<De.length-1;we++){const Ve=De[we],Be=[Ve,De[we+1],fe[we+1],fe[we],Ve];va(se,Be)&&(oe=Math.min(oe,ry(se,Be)))}}return oe!==1/0&&oe}(H[0],H[1],B)}},line:class extends ws{constructor(l){super(l,fp),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(l){"line-gradient"===l&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Vn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,r){super.recalculate(l,r),this.paint._values["line-floorwidth"]=Ad.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new eh(l)}queryRadius(l){const r=l,c=um(jr("line-width",this,r),jr("line-gap-width",this,r)),h=jr("line-offset",this,r);return c/2+Math.abs(h)+ya(this.paint.get("line-translate"))}queryIntersectsFeature(l,r,c,h,b,y,w){const E=Ed(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,w),I=w/2*um(this.paint.get("line-width").evaluate(r,c),this.paint.get("line-gap-width").evaluate(r,c)),O=this.paint.get("line-offset").evaluate(r,c);return O&&(h=function(R,B){const H=[];for(let j=0;j<R.length;j++){const $=R[j],se=[];for(let oe=0;oe<$.length;oe++){const _e=$[oe-1],De=$[oe],fe=$[oe+1],we=0===oe?new Pt(0,0):De.sub(_e)._unit()._perp(),Ve=oe===$.length-1?new Pt(0,0):fe.sub(De)._unit()._perp(),Be=we._add(Ve)._unit(),ct=Be.x*Ve.x+Be.y*Ve.y;0!==ct&&Be._mult(1/ct),se.push(Be._mult(B)._add(De))}H.push(se)}return H}(h,O*w)),function(R,B,H){for(let j=0;j<B.length;j++){const $=B[j];if(R.length>=3)for(let se=0;se<$.length;se++)if(Hr(R,$[se]))return!0;if(fi(R,$,H))return!0}return!1}(E,h,I)}isTileClipped(){return!0}},symbol:Sp,background:class extends ws{constructor(l){super(l,a_)}},raster:class extends ws{constructor(l){super(l,l_)}}};class d_{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const km=6371008.8;class Ai{constructor(r,c){if(isNaN(r)||isNaN(c))throw new Error(`Invalid LngLat object: (${r}, ${c})`);if(this.lng=+r,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ai(Oe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const c=Math.PI/180,h=this.lat*c,b=r.lat*c,y=Math.sin(h)*Math.sin(b)+Math.cos(h)*Math.cos(b)*Math.cos((r.lng-this.lng)*c);return km*Math.acos(Math.min(y,1))}toBounds(r=0){const c=360*r/40075017,h=c/Math.cos(Math.PI/180*this.lat);return new u_(new Ai(this.lng-h,this.lat-c),new Ai(this.lng+h,this.lat+c))}static convert(r){if(r instanceof Ai)return r;if(Array.isArray(r)&&(2===r.length||3===r.length))return new Ai(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&"object"==typeof r&&null!==r)return new Ai(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class ll{constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):4===r.length?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))}setNorthEast(r){return this._ne=r instanceof Ai?new Ai(r.lng,r.lat):Ai.convert(r),this}setSouthWest(r){return this._sw=r instanceof Ai?new Ai(r.lng,r.lat):Ai.convert(r),this}extend(r){const c=this._sw,h=this._ne;let b,y;if(r instanceof Ai)b=r,y=r;else{if(!(r instanceof ll))return Array.isArray(r)?4===r.length||r.every(Array.isArray)?this.extend(ll.convert(r)):this.extend(Ai.convert(r)):this;if(b=r._sw,y=r._ne,!b||!y)return this}return c||h?(c.lng=Math.min(b.lng,c.lng),c.lat=Math.min(b.lat,c.lat),h.lng=Math.max(y.lng,h.lng),h.lat=Math.max(y.lat,h.lat)):(this._sw=new Ai(b.lng,b.lat),this._ne=new Ai(y.lng,y.lat)),this}getCenter(){return new Ai((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ai(this.getWest(),this.getNorth())}getSouthEast(){return new Ai(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:h}=Ai.convert(r);let b=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&b}static convert(r){return r instanceof ll?r:r&&new ll(r)}}var u_=ll;const Am=2*Math.PI*km;function Om(l){return Am*Math.cos(l*Math.PI/180)}function Pm(l){return(180+l)/360}function Tp(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function Rm(l,r){return l/Om(r)}function Ld(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}class Pc{constructor(r,c,h=0){this.x=+r,this.y=+c,this.z=+h}static fromLngLat(r,c=0){const h=Ai.convert(r);return new Pc(Pm(h.lng),Tp(h.lat),Rm(c,h.lat))}toLngLat(){return new Ai(360*this.x-180,Ld(this.y))}toAltitude(){return this.z*Om(Ld(this.y))}meterInMercatorCoordinateUnits(){return 1/Am*(r=Ld(this.y),1/Math.cos(r*Math.PI/180));var r}}function Nm(l,r,c){var h=2*Math.PI*6378137/256/Math.pow(2,c);return[l*h-2*Math.PI*6378137/2,r*h-2*Math.PI*6378137/2]}class hh{constructor(r,c,h){if(r<0||r>25||h<0||h>=Math.pow(2,r)||c<0||c>=Math.pow(2,r))throw new Error(`x=${c}, y=${h}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=c,this.y=h,this.key=cl(0,r,r,c,h)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,c,h){const b=(w=this.y,E=this.z,I=Nm(256*(y=this.x),256*(w=Math.pow(2,E)-w-1),E),O=Nm(256*(y+1),256*(w+1),E),I[0]+","+I[1]+","+O[0]+","+O[1]);var y,w,E,I,O;const R=function(B,H,j){let $,se="";for(let oe=B;oe>0;oe--)$=1<<oe-1,se+=(H&$?1:0)+(j&$?2:0);return se}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===h?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,R).replace(/{bbox-epsg-3857}/g,b)}isChildOf(r){const c=this.z-r.z;return c>0&&r.x===this.x>>c&&r.y===this.y>>c}getTilePoint(r){const c=Math.pow(2,this.z);return new Pt((r.x*c-this.x)*Dn,(r.y*c-this.y)*Dn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ip{constructor(r,c){this.wrap=r,this.canonical=c,this.key=cl(r,c.z,c.z,c.x,c.y)}}class Cr{constructor(r,c,h,b,y){if(r<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${h}`);this.overscaledZ=r,this.wrap=c,this.canonical=new hh(h,+b,+y),this.key=cl(c,r,h,b,y)}clone(){return new Cr(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-r;return r>this.canonical.z?new Cr(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Cr(r,this.wrap,r,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(r,c){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-r;return r>this.canonical.z?cl(this.wrap*+c,r,this.canonical.z,this.canonical.x,this.canonical.y):cl(this.wrap*+c,r,r,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const c=this.canonical.z-r.canonical.z;return 0===r.overscaledZ||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>c&&r.canonical.y===this.canonical.y>>c}children(r){if(this.overscaledZ>=r)return[new Cr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,h=2*this.canonical.x,b=2*this.canonical.y;return[new Cr(c,this.wrap,c,h,b),new Cr(c,this.wrap,c,h+1,b),new Cr(c,this.wrap,c,h,b+1),new Cr(c,this.wrap,c,h+1,b+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Cr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Cr(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ip(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Pc(r.x-this.wrap,r.y))}}function cl(l,r,c,h,b){(l*=2)<0&&(l=-1*l-1);const y=1<<c;return(y*y*l+y*b+h).toString(36)+c.toString(36)+r.toString(36)}ot("CanonicalTileID",hh),ot("OverscaledTileID",Cr,{omit:["posMatrix"]});class h_{constructor(r,c,h){if(this.uid=r,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(h&&"mapbox"!==h&&"terrarium"!==h)return void yn(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=c.height;const b=this.dim=c.height-2;this.data=new Uint32Array(c.data.buffer),this.encoding=h||"mapbox";for(let y=0;y<b;y++)this.data[this._idx(-1,y)]=this.data[this._idx(0,y)],this.data[this._idx(b,y)]=this.data[this._idx(b-1,y)],this.data[this._idx(y,-1)]=this.data[this._idx(y,0)],this.data[this._idx(y,b)]=this.data[this._idx(y,b-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(b,-1)]=this.data[this._idx(b-1,0)],this.data[this._idx(-1,b)]=this.data[this._idx(0,b-1)],this.data[this._idx(b,b)]=this.data[this._idx(b-1,b-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let y=0;y<b;y++)for(let w=0;w<b;w++){const E=this.get(y,w);E>this.max&&(this.max=E),E<this.min&&(this.min=E)}}get(r,c){const h=new Uint8Array(this.data.buffer),b=4*this._idx(r,c);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(h[b],h[b+1],h[b+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(r,c){if(r<-1||r>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(r+1)}_unpackMapbox(r,c,h){return(256*r*256+256*c+h)/10-1e4}_unpackTerrarium(r,c,h){return 256*r+c+h/256-32768}getPixels(){return new xr({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,c,h){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let b=c*this.dim,y=c*this.dim+this.dim,w=h*this.dim,E=h*this.dim+this.dim;switch(c){case-1:b=y-1;break;case 1:y=b+1}switch(h){case-1:w=E-1;break;case 1:E=w+1}const I=-c*this.dim,O=-h*this.dim;for(let R=w;R<E;R++)for(let B=b;B<y;B++)this.data[this._idx(B,R)]=r.data[this._idx(B+I,R+O)]}}ot("DEMData",h_);class Fm{constructor(r){this._stringToNumber={},this._numberToString=[];for(let c=0;c<r.length;c++){const h=r[c];this._stringToNumber[h]=c,this._numberToString[c]=h}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class p_{constructor(r,c,h,b,y){this.type="Feature",this._vectorTileFeature=r,r._z=c,r._x=h,r._y=b,this.properties=r.properties,this.id=y}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const c in this)"_geometry"!==c&&"_vectorTileFeature"!==c&&(r[c]=this[c]);return r}}class f_{constructor(r,c){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new $t(Dn,16,0),this.grid3D=new $t(Dn,16,0),this.featureIndexArray=new js,this.promoteId=c}insert(r,c,h,b,y,w){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,b,y);const I=w?this.grid3D:this.grid;for(let O=0;O<c.length;O++){const R=c[O],B=[1/0,1/0,-1/0,-1/0];for(let H=0;H<R.length;H++){const j=R[H];B[0]=Math.min(B[0],j.x),B[1]=Math.min(B[1],j.y),B[2]=Math.max(B[2],j.x),B[3]=Math.max(B[3],j.y)}B[0]<Dn&&B[1]<Dn&&B[2]>=0&&B[3]>=0&&I.insert(E,B[0],B[1],B[2],B[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Tc.VectorTile(new ec(this.rawTileData)).layers,this.sourceLayerCoder=new Fm(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,c,h,b){this.loadVTLayers();const y=r.params||{},w=Dn/r.tileSize/r.scale,E=Mu(y.filter),I=r.queryGeometry,O=r.queryPadding*w,R=Lm(I),B=this.grid.query(R.minX-O,R.minY-O,R.maxX+O,R.maxY+O),H=Lm(r.cameraQueryGeometry),j=this.grid3D.query(H.minX-O,H.minY-O,H.maxX+O,H.maxY+O,(oe,_e,De,fe)=>function(we,Ve,Be,ct,bt){for(const nt of we)if(Ve<=nt.x&&Be<=nt.y&&ct>=nt.x&&bt>=nt.y)return!0;const st=[new Pt(Ve,Be),new Pt(Ve,bt),new Pt(ct,bt),new Pt(ct,Be)];if(we.length>2)for(const nt of st)if(Hr(we,nt))return!0;for(let nt=0;nt<we.length-1;nt++)if(ju(we[nt],we[nt+1],st))return!0;return!1}(r.cameraQueryGeometry,oe-O,_e-O,De+O,fe+O));for(const oe of j)B.push(oe);B.sort(g_);const $={};let se;for(let oe=0;oe<B.length;oe++){const _e=B[oe];if(_e===se)continue;se=_e;const De=this.featureIndexArray.get(_e);let fe=null;this.loadMatchingFeature($,De.bucketIndex,De.sourceLayerIndex,De.featureIndex,E,y.layers,y.availableImages,c,h,b,(we,Ve,Be)=>(fe||(fe=Qn(we)),Ve.queryIntersectsFeature(I,we,Be,fe,this.z,r.transform,w,r.pixelPosMatrix)))}return $}loadMatchingFeature(r,c,h,b,y,w,E,I,O,R,B){const H=this.bucketLayerIDs[c];if(w&&!function(oe,_e){for(let De=0;De<oe.length;De++)if(_e.indexOf(oe[De])>=0)return!0;return!1}(w,H))return;const j=this.sourceLayerCoder.decode(h),$=this.vtLayers[j].feature(b);if(y.needGeometry){const oe=Gi($,!0);if(!y.filter(new pi(this.tileID.overscaledZ),oe,this.tileID.canonical))return}else if(!y.filter(new pi(this.tileID.overscaledZ),$))return;const se=this.getId($,j);for(let oe=0;oe<H.length;oe++){const _e=H[oe];if(w&&w.indexOf(_e)<0)continue;const De=I[_e];if(!De)continue;let fe={};se&&R&&(fe=R.getState(De.sourceLayer||"_geojsonTileLayer",se));const we=Qo({},O[_e]);we.paint=m_(we.paint,De.paint,$,fe,E),we.layout=m_(we.layout,De.layout,$,fe,E);const Ve=!B||B($,De,fe);if(!Ve)continue;const Be=new p_($,this.z,this.x,this.y,se);Be.layer=we;let ct=r[_e];void 0===ct&&(ct=r[_e]=[]),ct.push({featureIndex:b,feature:Be,intersectionZ:Ve})}}lookupSymbolFeatures(r,c,h,b,y,w,E,I){const O={};this.loadVTLayers();const R=Mu(y);for(const B of r)this.loadMatchingFeature(O,h,b,B,R,w,E,I,c);return O}hasLayer(r){for(const c of this.bucketLayerIDs)for(const h of c)if(r===h)return!0;return!1}getId(r,c){let h=r.id;return this.promoteId&&(h=r.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[c]],"boolean"==typeof h&&(h=Number(h))),h}}function m_(l,r,c,h,b){return Na(l,(y,w)=>{const E=r instanceof Fu?r.get(w):null;return E&&E.evaluate?E.evaluate(c,h,b):E})}function Lm(l){let r=1/0,c=1/0,h=-1/0,b=-1/0;for(const y of l)r=Math.min(r,y.x),c=Math.min(c,y.y),h=Math.max(h,y.x),b=Math.max(b,y.y);return{minX:r,minY:c,maxX:h,maxY:b}}function g_(l,r){return r-l}function Bd(l,r,c,h,b,y){if(b-h<=c)return;const w=h+b>>1;Mp(l,r,w,h,b,y%2),Bd(l,r,c,h,w-1,y+1),Bd(l,r,c,w+1,b,y+1)}function Mp(l,r,c,h,b,y){for(;b>h;){if(b-h>600){const O=b-h+1,R=c-h+1,B=Math.log(O),H=.5*Math.exp(2*B/3),j=.5*Math.sqrt(B*H*(O-H)/O)*(R-O/2<0?-1:1);Mp(l,r,c,Math.max(h,Math.floor(c-R*H/O+j)),Math.min(b,Math.floor(c+(O-R)*H/O+j)),y)}const w=r[2*c+y];let E=h,I=b;for(Ea(l,r,h,c),r[2*b+y]>w&&Ea(l,r,h,b);E<I;){for(Ea(l,r,E,I),E++,I--;r[2*E+y]<w;)E++;for(;r[2*I+y]>w;)I--}r[2*h+y]===w?Ea(l,r,h,I):(I++,Ea(l,r,I,b)),I<=c&&(h=I+1),c<=I&&(b=I-1)}}function Ea(l,r,c,h){Bm(l,c,h),Bm(r,2*c,2*h),Bm(r,2*c+1,2*h+1)}function Bm(l,r,c){const h=l[r];l[r]=l[c],l[c]=h}function b_(l,r,c,h){const b=l-c,y=r-h;return b*b+y*y}ot("FeatureIndex",f_,{omit:["rawTileData","sourceLayerCoder"]});const AC=l=>l[0],Cy=l=>l[1];var ph;v.PerformanceMarkers=void 0,(ph=v.PerformanceMarkers||(v.PerformanceMarkers={})).create="create",ph.load="load",ph.fullLoad="fullLoad";let kp=null,zd=[];const Vd=1e3/30,zm={mark(l){performance.mark(l)},frame(l){const r=l;null!=kp&&zd.push(r-kp),kp=r},clearMetrics(){kp=null,zd=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const l in v.PerformanceMarkers)performance.clearMarks(v.PerformanceMarkers[l])},getPerformanceMetrics(){performance.measure("loadTime",v.PerformanceMarkers.create,v.PerformanceMarkers.load),performance.measure("fullLoadTime",v.PerformanceMarkers.create,v.PerformanceMarkers.fullLoad);const l=performance.getEntriesByName("loadTime")[0].duration,r=performance.getEntriesByName("fullLoadTime")[0].duration,c=zd.length,h=1/(zd.reduce((y,w)=>y+w,0)/c/1e3),b=zd.filter(y=>y>Vd).reduce((y,w)=>y+(w-Vd)/Vd,0);return{loadTime:l,fullLoadTime:r,fps:h,percentDroppedFrames:b/(c+b)*100}}};v.AJAXError=Os,v.ARRAY_TYPE=xa,v.Actor=class{constructor(l,r,c){this.target=l,this.parent=r,this.mapId=c,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},ks(["receive","process"],this),this.invoker=new d_(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Rr()?l:window}send(l,r,c,h,b=!1){const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);c&&(this.callbacks[y]=c);const w=As(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:l,hasCallback:!!c,targetMapId:h,mustQueue:b,sourceMapId:this.mapId,data:Ci(r,w)},w),{cancel:()=>{c&&delete this.callbacks[y],this.target.postMessage({id:y,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(l){const r=l.data,c=r.id;if(c&&(!r.targetMapId||this.mapId===r.targetMapId))if("<cancel>"===r.type){delete this.tasks[c];const h=this.cancelCallbacks[c];delete this.cancelCallbacks[c],h&&h()}else Rr()||r.mustQueue?(this.tasks[c]=r,this.taskQueue.push(c),this.invoker.trigger()):this.processTask(c,r)}process(){if(!this.taskQueue.length)return;const l=this.taskQueue.shift(),r=this.tasks[l];delete this.tasks[l],this.taskQueue.length&&this.invoker.trigger(),r&&this.processTask(l,r)}processTask(l,r){if("<response>"===r.type){const c=this.callbacks[l];delete this.callbacks[l],c&&(r.error?c(Lr(r.error)):c(null,Lr(r.data)))}else{let c=!1;const h=As(this.globalScope)?void 0:[],b=r.hasCallback?(E,I)=>{c=!0,delete this.cancelCallbacks[l],this.target.postMessage({id:l,type:"<response>",sourceMapId:this.mapId,error:E?Ci(E):null,data:Ci(I,h)},h)}:E=>{c=!0};let y=null;const w=Lr(r.data);if(this.parent[r.type])y=this.parent[r.type](r.sourceMapId,w,b);else if(this.parent.getWorkerSource){const E=r.type.split(".");y=this.parent.getWorkerSource(r.sourceMapId,E[0],w.source)[E[1]](w,b)}else b(new Error(`Could not find function ${r.type}`));!c&&y&&y.cancel&&(this.cancelCallbacks[l]=y.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},v.AlphaImage=Ql,v.CanonicalTileID=hh,v.CollisionBoxArray=Bo,v.CollisionCircleLayoutArray=class extends gd{},v.Color=An,v.DEMData=h_,v.DataConstantProperty=wt,v.DictionaryCoder=Fm,v.EXTENT=Dn,v.ErrorEvent=Gn,v.EvaluationParameters=pi,v.Event=sa,v.Evented=xn,v.FeatureIndex=f_,v.FillBucket=Lb,v.FillExtrusionBucket=cm,v.GeoJSONFeature=p_,v.ImageAtlas=Yb,v.ImagePosition=Kb,v.KDBush=class{constructor(l,r=AC,c=Cy,h=64,b=Float64Array){this.nodeSize=h,this.points=l;const y=l.length<65536?Uint16Array:Uint32Array,w=this.ids=new y(l.length),E=this.coords=new b(2*l.length);for(let I=0;I<l.length;I++)w[I]=I,E[2*I]=r(l[I]),E[2*I+1]=c(l[I]);Bd(w,E,h,0,w.length-1,0)}range(l,r,c,h){return function(b,y,w,E,I,O,R){const B=[0,b.length-1,0],H=[];let j,$;for(;B.length;){const se=B.pop(),oe=B.pop(),_e=B.pop();if(oe-_e<=R){for(let we=_e;we<=oe;we++)j=y[2*we],$=y[2*we+1],j>=w&&j<=I&&$>=E&&$<=O&&H.push(b[we]);continue}const De=Math.floor((_e+oe)/2);j=y[2*De],$=y[2*De+1],j>=w&&j<=I&&$>=E&&$<=O&&H.push(b[De]);const fe=(se+1)%2;(0===se?w<=j:E<=$)&&(B.push(_e),B.push(De-1),B.push(fe)),(0===se?I>=j:O>=$)&&(B.push(De+1),B.push(oe),B.push(fe))}return H}(this.ids,this.coords,l,r,c,h,this.nodeSize)}within(l,r,c){return function(h,b,y,w,E,I){const O=[0,h.length-1,0],R=[],B=E*E;for(;O.length;){const H=O.pop(),j=O.pop(),$=O.pop();if(j-$<=I){for(let fe=$;fe<=j;fe++)b_(b[2*fe],b[2*fe+1],y,w)<=B&&R.push(h[fe]);continue}const se=Math.floor(($+j)/2),oe=b[2*se],_e=b[2*se+1];b_(oe,_e,y,w)<=B&&R.push(h[se]);const De=(H+1)%2;(0===H?y-E<=oe:w-E<=_e)&&(O.push($),O.push(se-1),O.push(De)),(0===H?y+E>=oe:w+E>=_e)&&(O.push(se+1),O.push(j),O.push(De))}return R}(this.ids,this.coords,l,r,c,this.nodeSize)}},v.LineBucket=eh,v.LineStripIndexArray=class extends Fi{},v.LngLat=Ai,v.LngLatBounds=u_,v.MercatorCoordinate=Pc,v.ONE_EM=go,v.OverscaledTileID=Cr,v.PerformanceUtils=zm,v.Pos3dArray=class extends yc{},v.PosArray=Cd,v.Properties=yr,v.QuadTriangleArray=class extends _d{},v.RGBAImage=xr,v.RasterBoundsArray=class extends el{},v.RequestPerformance=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return 0===l.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},v.SegmentVector=k,v.SymbolBucket=Ac,v.Transitionable=_c,v.TriangleIndexArray=x,v.Uniform1f=Ne,v.Uniform1i=class extends Se{constructor(l,r){super(l,r),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},v.Uniform2f=class extends Se{constructor(l,r){super(l,r),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},v.Uniform3f=class extends Se{constructor(l,r){super(l,r),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},v.Uniform4f=ze,v.UniformColor=Ge,v.UniformMatrix4f=class extends Se{constructor(l,r){super(l,r),this.current=He}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let r=1;r<16;r++)if(l[r]!==this.current[r]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},v.UnwrappedTileID=Ip,v.ValidationError=ke,v.ZoomHistory=Di,v.addDynamicAttributes=Em,v.arrayBufferToImage=function(l,r){const c=new Image;c.onload=()=>{r(null,c),URL.revokeObjectURL(c.src),c.onload=null,window.requestAnimationFrame(()=>{c.src=Fa})},c.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(l)],{type:"image/png"});c.src=l.byteLength?URL.createObjectURL(h):Fa},v.arrayBufferToImageBitmap=function(l,r){const c=new Blob([new Uint8Array(l)],{type:"image/png"});createImageBitmap(c).then(h=>{r(null,h)}).catch(h=>{r(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},v.asyncAll=function(l,r,c){if(!l.length)return c(null,[]);let h=l.length;const b=new Array(l.length);let y=null;l.forEach((w,E)=>{r(w,(I,O)=>{I&&(y=I),b[E]=O,0==--h&&c(y,b)})})},v.bezier=fs,v.bindAll=ks,v.clamp=Yt,v.clipLine=vm,v.clone=function(l){var r=new xa(16);return r[0]=l[0],r[1]=l[1],r[2]=l[2],r[3]=l[3],r[4]=l[4],r[5]=l[5],r[6]=l[6],r[7]=l[7],r[8]=l[8],r[9]=l[9],r[10]=l[10],r[11]=l[11],r[12]=l[12],r[13]=l[13],r[14]=l[14],r[15]=l[15],r},v.clone$1=No,v.collisionCircleLayout=mp,v.config=La,v.copy=function(l,r){return l[0]=r[0],l[1]=r[1],l[2]=r[2],l[3]=r[3],l[4]=r[4],l[5]=r[5],l[6]=r[6],l[7]=r[7],l[8]=r[8],l[9]=r[9],l[10]=r[10],l[11]=r[11],l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15],l},v.create=function(){var l=new xa(16);return xa!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},v.createExpression=rd,v.createFilter=Mu,v.createLayout=$i,v.createStyleLayer=function(l){return"custom"===l.type?new Oc(l):new c_[l.type](l)},v.dot=function(l,r){return l[0]*r[0]+l[1]*r[1]+l[2]*r[2]+l[3]*r[3]},v.earthRadius=km,v.ease=kl,v.emitValidationErrors=_t,v.equals=function(l,r){var c=l[0],h=l[1],b=l[2],y=l[3],w=l[4],E=l[5],I=l[6],O=l[7],R=l[8],B=l[9],H=l[10],j=l[11],$=l[12],se=l[13],oe=l[14],_e=l[15],De=r[0],fe=r[1],we=r[2],Ve=r[3],Be=r[4],ct=r[5],bt=r[6],st=r[7],nt=r[8],et=r[9],dt=r[10],rt=r[11],Ze=r[12],Dt=r[13],yt=r[14],un=r[15];return Math.abs(c-De)<=ao*Math.max(1,Math.abs(c),Math.abs(De))&&Math.abs(h-fe)<=ao*Math.max(1,Math.abs(h),Math.abs(fe))&&Math.abs(b-we)<=ao*Math.max(1,Math.abs(b),Math.abs(we))&&Math.abs(y-Ve)<=ao*Math.max(1,Math.abs(y),Math.abs(Ve))&&Math.abs(w-Be)<=ao*Math.max(1,Math.abs(w),Math.abs(Be))&&Math.abs(E-ct)<=ao*Math.max(1,Math.abs(E),Math.abs(ct))&&Math.abs(I-bt)<=ao*Math.max(1,Math.abs(I),Math.abs(bt))&&Math.abs(O-st)<=ao*Math.max(1,Math.abs(O),Math.abs(st))&&Math.abs(R-nt)<=ao*Math.max(1,Math.abs(R),Math.abs(nt))&&Math.abs(B-et)<=ao*Math.max(1,Math.abs(B),Math.abs(et))&&Math.abs(H-dt)<=ao*Math.max(1,Math.abs(H),Math.abs(dt))&&Math.abs(j-rt)<=ao*Math.max(1,Math.abs(j),Math.abs(rt))&&Math.abs($-Ze)<=ao*Math.max(1,Math.abs($),Math.abs(Ze))&&Math.abs(se-Dt)<=ao*Math.max(1,Math.abs(se),Math.abs(Dt))&&Math.abs(oe-yt)<=ao*Math.max(1,Math.abs(oe),Math.abs(yt))&&Math.abs(_e-un)<=ao*Math.max(1,Math.abs(_e),Math.abs(un))},v.evaluateSizeForFeature=function(l,{uSize:r,uSizeT:c},{lowerSize:h,upperSize:b}){return"source"===l.kind?h/al:"composite"===l.kind?ai(h/al,b/al,c):r},v.evaluateSizeForZoom=function(l,r){let c=0,h=0;if("constant"===l.kind)h=l.layoutSize;else if("source"!==l.kind){const{interpolationType:b,minZoom:y,maxZoom:w}=l,E=b?Yt(Nr.interpolationFactor(b,r,y,w),0,1):0;"camera"===l.kind?h=ai(l.minSize,l.maxSize,E):c=E}return{uSizeT:c,uSize:h}},v.evaluateVariableOffset=xp,v.evented=Zl,v.exported=Zc,v.extend=Qo,v.filterObject=Al,v.fromScaling=function(l,r){return l[0]=r[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=r[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=r[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},v.getAnchorAlignment=bm,v.getAnchorJustification=uh,v.getArrayBuffer=Ba,v.getJSON=function(l,r){return Ol(Qo(l,{type:"json"}),r)},v.getOverlapMode=Mm,v.getRTLTextPluginStatus=xs,v.getReferrer=cn,v.getVideo=function(l,r){const c=window.document.createElement("video");c.muted=!0,c.onloadstart=function(){r(null,c)};for(let h=0;h<l.length;h++){const b=window.document.createElement("source");hc(l[h])||(c.crossOrigin="Anonymous"),b.src=l[h],c.appendChild(b)}return{cancel:()=>{}}},v.identity=Xf,v.invert=function(l,r){var c=r[0],h=r[1],b=r[2],y=r[3],w=r[4],E=r[5],I=r[6],O=r[7],R=r[8],B=r[9],H=r[10],j=r[11],$=r[12],se=r[13],oe=r[14],_e=r[15],De=c*E-h*w,fe=c*I-b*w,we=c*O-y*w,Ve=h*I-b*E,Be=h*O-y*E,ct=b*O-y*I,bt=R*se-B*$,st=R*oe-H*$,nt=R*_e-j*$,et=B*oe-H*se,dt=B*_e-j*se,rt=H*_e-j*oe,Ze=De*rt-fe*dt+we*et+Ve*nt-Be*st+ct*bt;return Ze?(l[0]=(E*rt-I*dt+O*et)*(Ze=1/Ze),l[1]=(b*dt-h*rt-y*et)*Ze,l[2]=(se*ct-oe*Be+_e*Ve)*Ze,l[3]=(H*Be-B*ct-j*Ve)*Ze,l[4]=(I*nt-w*rt-O*st)*Ze,l[5]=(c*rt-b*nt+y*st)*Ze,l[6]=(oe*we-$*ct-_e*fe)*Ze,l[7]=(R*ct-H*we+j*fe)*Ze,l[8]=(w*dt-E*nt+O*bt)*Ze,l[9]=(h*nt-c*dt-y*bt)*Ze,l[10]=($*Be-se*we+_e*De)*Ze,l[11]=(B*we-R*Be-j*De)*Ze,l[12]=(E*st-w*et-I*bt)*Ze,l[13]=(c*et-h*st+b*bt)*Ze,l[14]=(se*fe-$*Ve-oe*De)*Ze,l[15]=(R*Ve-B*fe+H*De)*Ze,l):null},v.isImageBitmap=mr,v.isSafari=As,v.isWorker=Rr,v.keysDifference=function(l,r){const c=[];for(const h in l)h in r||c.push(h);return c},v.lazyLoadRTLTextPlugin=function(){ii.isLoading()||ii.isLoaded()||"deferred"!==xs()||Xa()},v.makeRequest=Ol,v.mapObject=Na,v.mercatorXfromLng=Pm,v.mercatorYfromLat=Tp,v.mercatorZfromAltitude=Rm,v.mul=Jf,v.mul$1=function(l,r,c){return l[0]=r[0]*c[0],l[1]=r[1]*c[1],l[2]=r[2]*c[2],l[3]=r[3]*c[3],l},v.multiply=ty,v.nextPowerOfTwo=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},v.number=ai,v.ortho=function(l,r,c,h,b,y,w){var E=1/(r-c),I=1/(h-b),O=1/(y-w);return l[0]=-2*E,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*I,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*O,l[11]=0,l[12]=(r+c)*E,l[13]=(b+h)*I,l[14]=(w+y)*O,l[15]=1,l},v.parseCacheControl=function(l){const r={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,h,b,y)=>{const w=b||y;return r[h]=!w||w.toLowerCase(),""}),r["max-age"]){const c=parseInt(r["max-age"],10);isNaN(c)?delete r["max-age"]:r["max-age"]=c}return r},v.parseGlyphPbf=function(l){return new ec(l).readFields(IC,[])},v.pbf=ec,v.performSymbolLayout=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=Dn/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const r=l.bucket.layers[0].layout,c=l.bucket.layers[0]._unevaluatedLayout._values,h={layoutIconSize:c["icon-size"].possiblyEvaluate(new pi(l.bucket.zoom+1),l.canonical),layoutTextSize:c["text-size"].possiblyEvaluate(new pi(l.bucket.zoom+1),l.canonical),textMaxSize:c["text-size"].possiblyEvaluate(new pi(18))};if("composite"===l.bucket.textSizeData.kind){const{minZoom:I,maxZoom:O}=l.bucket.textSizeData;h.compositeTextSizes=[c["text-size"].possiblyEvaluate(new pi(I),l.canonical),c["text-size"].possiblyEvaluate(new pi(O),l.canonical)]}if("composite"===l.bucket.iconSizeData.kind){const{minZoom:I,maxZoom:O}=l.bucket.iconSizeData;h.compositeIconSizes=[c["icon-size"].possiblyEvaluate(new pi(I),l.canonical),c["icon-size"].possiblyEvaluate(new pi(O),l.canonical)]}const b=r.get("text-line-height")*go,y="viewport"!==r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),w=r.get("text-keep-upright"),E=r.get("text-size");for(const I of l.bucket.features){const O=r.get("text-font").evaluate(I,{},l.canonical).join(","),R=E.evaluate(I,{},l.canonical),B=h.layoutTextSize.evaluate(I,{},l.canonical),H=h.layoutIconSize.evaluate(I,{},l.canonical),j={horizontal:{},vertical:void 0},$=I.text;let se,oe=[0,0];if($){const fe=$.toString(),we=r.get("text-letter-spacing").evaluate(I,{},l.canonical)*go,Ve=on(fe)?we:0,Be=r.get("text-anchor").evaluate(I,{},l.canonical),ct=r.get("text-variable-anchor");if(!ct){const dt=r.get("text-radial-offset").evaluate(I,{},l.canonical);oe=dt?xp(Be,[dt*go,wm]):r.get("text-offset").evaluate(I,{},l.canonical).map(rt=>rt*go)}let bt=y?"center":r.get("text-justify").evaluate(I,{},l.canonical);const st=r.get("symbol-placement"),nt="point"===st?r.get("text-max-width").evaluate(I,{},l.canonical)*go:0,et=()=>{l.bucket.allowVerticalPlacement&&Wl(fe)&&(j.vertical=sh($,l.glyphMap,l.glyphPositions,l.imagePositions,O,nt,b,Be,"left",Ve,oe,v.WritingMode.vertical,!0,st,B,R))};if(!y&&ct){const dt="auto"===bt?ct.map(Ze=>uh(Ze)):[bt];let rt=!1;for(let Ze=0;Ze<dt.length;Ze++){const Dt=dt[Ze];if(!j.horizontal[Dt])if(rt)j.horizontal[Dt]=j.horizontal[0];else{const yt=sh($,l.glyphMap,l.glyphPositions,l.imagePositions,O,nt,b,"center",Dt,Ve,oe,v.WritingMode.horizontal,!1,st,B,R);yt&&(j.horizontal[Dt]=yt,rt=1===yt.positionedLines.length)}}et()}else{"auto"===bt&&(bt=uh(Be));const dt=sh($,l.glyphMap,l.glyphPositions,l.imagePositions,O,nt,b,Be,bt,Ve,oe,v.WritingMode.horizontal,!1,st,B,R);dt&&(j.horizontal[bt]=dt),et(),Wl(fe)&&y&&w&&(j.vertical=sh($,l.glyphMap,l.glyphPositions,l.imagePositions,O,nt,b,Be,bt,Ve,oe,v.WritingMode.vertical,!1,st,B,R))}}let _e=!1;if(I.icon&&I.icon.name){const fe=l.imageMap[I.icon.name];fe&&(se=Jb(l.imagePositions[I.icon.name],r.get("icon-offset").evaluate(I,{},l.canonical),r.get("icon-anchor").evaluate(I,{},l.canonical)),_e=!!fe.sdf,void 0===l.bucket.sdfIcons?l.bucket.sdfIcons=_e:l.bucket.sdfIcons!==_e&&yn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(fe.pixelRatio!==l.bucket.pixelRatio||0!==r.get("icon-rotate").constantOr(1))&&(l.bucket.iconsNeedLinear=!0))}const De=Cm(j.horizontal)||j.vertical;l.bucket.iconsInText=!!De&&De.iconsInText,(De||se)&&s_(l.bucket,I,j,se,l.imageMap,h,B,H,oe,_e,l.canonical)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},v.perspective=function(l,r,c,h,b){var y,w=1/Math.tan(r/2);return l[0]=w/c,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=w,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,null!=b&&b!==1/0?(l[10]=(b+h)*(y=1/(h-b)),l[14]=2*b*h*y):(l[10]=-1,l[14]=-2*h),l},v.pick=function(l,r){const c={};for(let h=0;h<r.length;h++){const b=r[h];b in l&&(c[b]=l[b])}return c},v.plugin=ii,v.pointGeometry=Pt,v.polygonIntersectsPolygon=va,v.potpack=gy,v.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],v.register=ot,v.registerForPluginStateChange=function(l){return l({pluginStatus:fn,pluginURL:Vs}),Zl.on("pluginStateChange",l),l},v.renderColorRamp=qu,v.rotateX=function(l,r,c){var h=Math.sin(c),b=Math.cos(c),y=r[4],w=r[5],E=r[6],I=r[7],O=r[8],R=r[9],B=r[10],H=r[11];return r!==l&&(l[0]=r[0],l[1]=r[1],l[2]=r[2],l[3]=r[3],l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15]),l[4]=y*b+O*h,l[5]=w*b+R*h,l[6]=E*b+B*h,l[7]=I*b+H*h,l[8]=O*b-y*h,l[9]=R*b-w*h,l[10]=B*b-E*h,l[11]=H*b-I*h,l},v.rotateZ=function(l,r,c){var h=Math.sin(c),b=Math.cos(c),y=r[0],w=r[1],E=r[2],I=r[3],O=r[4],R=r[5],B=r[6],H=r[7];return r!==l&&(l[8]=r[8],l[9]=r[9],l[10]=r[10],l[11]=r[11],l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15]),l[0]=y*b+O*h,l[1]=w*b+R*h,l[2]=E*b+B*h,l[3]=I*b+H*h,l[4]=O*b-y*h,l[5]=R*b-w*h,l[6]=B*b-E*h,l[7]=H*b-I*h,l},v.scale=function(l,r,c){var h=c[0],b=c[1],y=c[2];return l[0]=r[0]*h,l[1]=r[1]*h,l[2]=r[2]*h,l[3]=r[3]*h,l[4]=r[4]*b,l[5]=r[5]*b,l[6]=r[6]*b,l[7]=r[7]*b,l[8]=r[8]*y,l[9]=r[9]*y,l[10]=r[10]*y,l[11]=r[11]*y,l[12]=r[12],l[13]=r[13],l[14]=r[14],l[15]=r[15],l},v.setRTLTextPlugin=function(l,r,c=!1){if(fn===Jr||fn===Br||fn===Qa)throw new Error("setRTLTextPlugin cannot be called multiple times.");Vs=Zc.resolveURL(l),fn=Jr,ud=r,ql(),c||Xa()},v.spec=Re,v.sphericalToCartesian=function([l,r,c]){return r+=90,r*=Math.PI/180,c*=Math.PI/180,{x:l*Math.cos(r)*Math.sin(c),y:l*Math.sin(r)*Math.sin(c),z:l*Math.cos(c)}},v.toEvaluationFeature=Gi,v.transformMat4=Gu,v.translate=function(l,r,c){var h,b,y,w,E,I,O,R,B,H,j,$,se=c[0],oe=c[1],_e=c[2];return r===l?(l[12]=r[0]*se+r[4]*oe+r[8]*_e+r[12],l[13]=r[1]*se+r[5]*oe+r[9]*_e+r[13],l[14]=r[2]*se+r[6]*oe+r[10]*_e+r[14],l[15]=r[3]*se+r[7]*oe+r[11]*_e+r[15]):(b=r[1],y=r[2],w=r[3],E=r[4],I=r[5],O=r[6],R=r[7],B=r[8],H=r[9],j=r[10],$=r[11],l[0]=h=r[0],l[1]=b,l[2]=y,l[3]=w,l[4]=E,l[5]=I,l[6]=O,l[7]=R,l[8]=B,l[9]=H,l[10]=j,l[11]=$,l[12]=h*se+E*oe+B*_e+r[12],l[13]=b*se+I*oe+H*_e+r[13],l[14]=y*se+O*oe+j*_e+r[14],l[15]=w*se+R*oe+$*_e+r[15]),l},v.triggerPluginCompletionEvent=hd,v.unicodeBlockLookup=tt,v.uniqueId=function(){return pr++},v.validateCustomStyleLayer=function(l){const r=[],c=l.id;return void 0===c&&r.push({message:`layers.${c}: missing required property "id"`}),void 0===l.render&&r.push({message:`layers.${c}: missing required method "render"`}),l.renderingMode&&"2d"!==l.renderingMode&&"3d"!==l.renderingMode&&r.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),r},v.validateLight=Pu,v.validateStyle=Za,v.vectorTile=Tc,v.warnOnce=yn,v.wrap=Oe}),pu(0,function(v){function di(Q){const L=typeof Q;if("number"===L||"boolean"===L||"string"===L||null==Q)return JSON.stringify(Q);if(Array.isArray(Q)){let te="[";for(const le of Q)te+=`${di(le)},`;return`${te}]`}const V=Object.keys(Q).sort();let q="{";for(let te=0;te<V.length;te++)q+=`${JSON.stringify(V[te])}:${di(Q[V[te]])},`;return`${q}}`}function Ms(Q){let L="";for(const V of v.refProperties)L+=`/${di(Q[V])}`;return L}class fs{constructor(L){this.keyCache={},L&&this.replace(L)}replace(L){this._layerConfigs={},this._layers={},this.update(L,[])}update(L,V){for(const te of L){this._layerConfigs[te.id]=te;const le=this._layers[te.id]=v.createStyleLayer(te);le._featureFilter=v.createFilter(le.filter),this.keyCache[te.id]&&delete this.keyCache[te.id]}for(const te of V)delete this.keyCache[te],delete this._layerConfigs[te],delete this._layers[te];this.familiesBySource={};const q=function(te,le){const pe={};for(let ce=0;ce<te.length;ce++){const ye=le&&le[te[ce].id]||Ms(te[ce]);le&&(le[te[ce].id]=ye);let Ie=pe[ye];Ie||(Ie=pe[ye]=[]),Ie.push(te[ce])}const de=[];for(const ce in pe)de.push(pe[ce]);return de}(Object.values(this._layerConfigs),this.keyCache);for(const te of q){const le=te.map(je=>this._layers[je.id]),pe=le[0];if("none"===pe.visibility)continue;const de=pe.source||"";let ce=this.familiesBySource[de];ce||(ce=this.familiesBySource[de]={});const ye=pe.sourceLayer||"_geojsonTileLayer";let Ie=ce[ye];Ie||(Ie=ce[ye]=[]),Ie.push(le)}}}class kl{constructor(L){const V={},q=[];for(const de in L){const ce=L[de],ye=V[de]={};for(const Ie in ce){const je=ce[+Ie];if(!je||0===je.bitmap.width||0===je.bitmap.height)continue;const Ae={x:0,y:0,w:je.bitmap.width+2,h:je.bitmap.height+2};q.push(Ae),ye[Ie]={rect:Ae,metrics:je.metrics}}}const{w:te,h:le}=v.potpack(q),pe=new v.AlphaImage({width:te||1,height:le||1});for(const de in L){const ce=L[de];for(const ye in ce){const Ie=ce[+ye];if(!Ie||0===Ie.bitmap.width||0===Ie.bitmap.height)continue;const je=V[de][ye].rect;v.AlphaImage.copy(Ie.bitmap,pe,{x:0,y:0},{x:je.x+1,y:je.y+1},Ie.bitmap)}}this.image=pe,this.positions=V}}v.register("GlyphAtlas",kl);class Yt{constructor(L){this.tileID=new v.OverscaledTileID(L.tileID.overscaledZ,L.tileID.wrap,L.tileID.canonical.z,L.tileID.canonical.x,L.tileID.canonical.y),this.uid=L.uid,this.zoom=L.zoom,this.pixelRatio=L.pixelRatio,this.tileSize=L.tileSize,this.source=L.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=L.showCollisionBoxes,this.collectResourceTiming=!!L.collectResourceTiming,this.returnDependencies=!!L.returnDependencies,this.promoteId=L.promoteId}parse(L,V,q,te,le){this.status="parsing",this.data=L,this.collisionBoxArray=new v.CollisionBoxArray;const pe=new v.DictionaryCoder(Object.keys(L.layers).sort()),de=new v.FeatureIndex(this.tileID,this.promoteId);de.bucketLayerIDs=[];const ce={},ye={featureIndex:de,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:q},Ie=V.familiesBySource[this.source];for(const dn in Ie){const pn=L.layers[dn];if(!pn)continue;1===pn.version&&v.warnOnce(`Vector tile source "${this.source}" layer "${dn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const qn=pe.encode(dn),ui=[];for(let fo=0;fo<pn.length;fo++){const Ni=pn.feature(fo),ja=de.getId(Ni,dn);ui.push({feature:Ni,id:ja,index:fo,sourceLayerIndex:qn})}for(const fo of Ie[dn]){const Ni=fo[0];Ni.source!==this.source&&v.warnOnce(`layer.source = ${Ni.source} does not equal this.source = ${this.source}`),Ni.minzoom&&this.zoom<Math.floor(Ni.minzoom)||Ni.maxzoom&&this.zoom>=Ni.maxzoom||"none"!==Ni.visibility&&(Oe(fo,this.zoom,q),(ce[Ni.id]=Ni.createBucket({index:de.bucketLayerIDs.length,layers:fo,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:qn,sourceID:this.source})).populate(ui,ye,this.tileID.canonical),de.bucketLayerIDs.push(fo.map(ja=>ja.id)))}}let je,Ae,Tt,ht;const pt=v.mapObject(ye.glyphDependencies,dn=>Object.keys(dn).map(Number));Object.keys(pt).length?te.send("getGlyphs",{uid:this.uid,stacks:pt,source:this.source,tileID:this.tileID,type:"glyphs"},(dn,pn)=>{je||(je=dn,Ae=pn,ti.call(this))}):Ae={};const gt=Object.keys(ye.iconDependencies);gt.length?te.send("getImages",{icons:gt,source:this.source,tileID:this.tileID,type:"icons"},(dn,pn)=>{je||(je=dn,Tt=pn,ti.call(this))}):Tt={};const mn=Object.keys(ye.patternDependencies);function ti(){if(je)return le(je);if(Ae&&Tt&&ht){const dn=new kl(Ae),pn=new v.ImageAtlas(Tt,ht);for(const qn in ce){const ui=ce[qn];ui instanceof v.SymbolBucket?(Oe(ui.layers,this.zoom,q),v.performSymbolLayout({bucket:ui,glyphMap:Ae,glyphPositions:dn.positions,imageMap:Tt,imagePositions:pn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):ui.hasPattern&&(ui instanceof v.LineBucket||ui instanceof v.FillBucket||ui instanceof v.FillExtrusionBucket)&&(Oe(ui.layers,this.zoom,q),ui.addFeatures(ye,this.tileID.canonical,pn.patternPositions))}this.status="done",le(null,{buckets:Object.values(ce).filter(qn=>!qn.isEmpty()),featureIndex:de,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:dn.image,imageAtlas:pn,glyphMap:this.returnDependencies?Ae:null,iconMap:this.returnDependencies?Tt:null,glyphPositions:this.returnDependencies?dn.positions:null})}}mn.length?te.send("getImages",{icons:mn,source:this.source,tileID:this.tileID,type:"patterns"},(dn,pn)=>{je||(je=dn,ht=pn,ti.call(this))}):ht={},ti.call(this)}}function Oe(Q,L,V){const q=new v.EvaluationParameters(L);for(const te of Q)te.recalculate(q,V)}function Qo(Q,L){const V=v.getArrayBuffer(Q.request,(q,te,le,pe)=>{q?L(q):te&&L(null,{vectorTile:new v.vectorTile.VectorTile(new v.pbf(te)),rawData:te,cacheControl:le,expires:pe})});return()=>{V.cancel(),L()}}class pr{constructor(L,V,q,te){this.actor=L,this.layerIndex=V,this.availableImages=q,this.loadVectorData=te||Qo,this.loading={},this.loaded={}}loadTile(L,V){const q=L.uid;this.loading||(this.loading={});const te=!!(L&&L.request&&L.request.collectResourceTiming)&&new v.RequestPerformance(L.request),le=this.loading[q]=new Yt(L);le.abort=this.loadVectorData(L,(pe,de)=>{if(delete this.loading[q],pe||!de)return le.status="done",this.loaded[q]=le,V(pe);const ce=de.rawData,ye={};de.expires&&(ye.expires=de.expires),de.cacheControl&&(ye.cacheControl=de.cacheControl);const Ie={};if(te){const je=te.finish();je&&(Ie.resourceTiming=JSON.parse(JSON.stringify(je)))}le.vectorTile=de.vectorTile,le.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,(je,Ae)=>{if(je||!Ae)return V(je);V(null,v.extend({rawTileData:ce.slice(0)},Ae,ye,Ie))}),this.loaded=this.loaded||{},this.loaded[q]=le})}reloadTile(L,V){const q=this.loaded,te=L.uid,le=this;if(q&&q[te]){const pe=q[te];pe.showCollisionBoxes=L.showCollisionBoxes;const de=(ce,ye)=>{const Ie=pe.reloadCallback;Ie&&(delete pe.reloadCallback,pe.parse(pe.vectorTile,le.layerIndex,this.availableImages,le.actor,Ie)),V(ce,ye)};"parsing"===pe.status?pe.reloadCallback=de:"done"===pe.status&&(pe.vectorTile?pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,de):de())}}abortTile(L,V){const q=this.loading,te=L.uid;q&&q[te]&&q[te].abort&&(q[te].abort(),delete q[te]),V()}removeTile(L,V){const q=this.loaded,te=L.uid;q&&q[te]&&delete q[te],V()}}class ks{constructor(){this.loaded={}}loadTile(L,V){const{uid:q,encoding:te,rawImageData:le}=L,pe=v.isImageBitmap(le)?this.getImageData(le):le,de=new v.DEMData(q,pe,te);this.loaded=this.loaded||{},this.loaded[q]=de,V(null,de)}getImageData(L){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(L.width,L.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=L.width,this.offscreenCanvas.height=L.height,this.offscreenCanvasContext.drawImage(L,0,0,L.width,L.height);const V=this.offscreenCanvasContext.getImageData(-1,-1,L.width+2,L.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new v.RGBAImage({width:V.width,height:V.height},V.data)}removeTile(L){const V=this.loaded,q=L.uid;V&&V[q]&&delete V[q]}}var Na=function Q(L,V){var q,te=L&&L.type;if("FeatureCollection"===te)for(q=0;q<L.features.length;q++)Q(L.features[q],V);else if("GeometryCollection"===te)for(q=0;q<L.geometries.length;q++)Q(L.geometries[q],V);else if("Feature"===te)Q(L.geometry,V);else if("Polygon"===te)Al(L.coordinates,V);else if("MultiPolygon"===te)for(q=0;q<L.coordinates.length;q++)Al(L.coordinates[q],V);return L};function Al(Q,L){if(0!==Q.length){No(Q[0],L);for(var V=1;V<Q.length;V++)No(Q[V],!L)}}function No(Q,L){for(var V=0,q=0,te=0,le=Q.length,pe=le-1;te<le;pe=te++){var de=(Q[te][0]-Q[pe][0])*(Q[pe][1]+Q[te][1]),ce=V+de;q+=Math.abs(V)>=Math.abs(de)?V-ce+de:de-ce+V,V=ce}V+q>=0!=!!L&&Q.reverse()}const fr=v.vectorTile.VectorTileFeature.prototype.toGeoJSON;var yn={},po={get exports(){return yn},set exports(Q){yn=Q}},dc=v.pointGeometry,Rr=v.vectorTile.VectorTileFeature,ra=As;function As(Q,L){this.options=L||{},this.features=Q,this.length=Q.length}function mr(Q,L){this.id="number"==typeof Q.id?Q.id:void 0,this.type=Q.type,this.rawGeometry=1===Q.type?[Q.geometry]:Q.geometry,this.properties=Q.tags,this.extent=L||4096}As.prototype.feature=function(Q){return new mr(this.features[Q],this.options.extent)},mr.prototype.loadGeometry=function(){var Q=this.rawGeometry;this.geometry=[];for(var L=0;L<Q.length;L++){for(var V=Q[L],q=[],te=0;te<V.length;te++)q.push(new dc(V[te][0],V[te][1]));this.geometry.push(q)}return this.geometry},mr.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Q=this.geometry,L=1/0,V=-1/0,q=1/0,te=-1/0,le=0;le<Q.length;le++)for(var pe=Q[le],de=0;de<pe.length;de++){var ce=pe[de];L=Math.min(L,ce.x),V=Math.max(V,ce.x),q=Math.min(q,ce.y),te=Math.max(te,ce.y)}return[L,q,V,te]},mr.prototype.toGeoJSON=Rr.prototype.toGeoJSON;var Fa=v.pbf,ms=ra;function ei(Q){var L=new Fa;return function(V,q){for(var te in V.layers)q.writeMessage(3,Zc,V.layers[te])}(Q,L),L.finish()}function Zc(Q,L){var V;L.writeVarintField(15,Q.version||1),L.writeStringField(1,Q.name||""),L.writeVarintField(5,Q.extent||4096);var q={keys:[],values:[],keycache:{},valuecache:{}};for(V=0;V<Q.length;V++)q.feature=Q.feature(V),L.writeMessage(2,Pt,q);var te=q.keys;for(V=0;V<te.length;V++)L.writeStringField(3,te[V]);var le=q.values;for(V=0;V<le.length;V++)L.writeMessage(4,uc,le[V])}function Pt(Q,L){var V=Q.feature;void 0!==V.id&&L.writeVarintField(1,V.id),L.writeMessage(2,Ri,Q),L.writeVarintField(3,V.type),L.writeMessage(4,cn,V)}function Ri(Q,L){var V=Q.feature,q=Q.keys,te=Q.values,le=Q.keycache,pe=Q.valuecache;for(var de in V.properties){var ce=V.properties[de],ye=le[de];if(null!==ce){void 0===ye&&(q.push(de),le[de]=ye=q.length-1),L.writeVarint(ye);var Ie=typeof ce;"string"!==Ie&&"boolean"!==Ie&&"number"!==Ie&&(ce=JSON.stringify(ce));var je=Ie+":"+ce,Ae=pe[je];void 0===Ae&&(te.push(ce),pe[je]=Ae=te.length-1),L.writeVarint(Ae)}}}function La(Q,L){return(L<<3)+(7&Q)}function Os(Q){return Q<<1^Q>>31}function cn(Q,L){for(var V=Q.loadGeometry(),q=Q.type,te=0,le=0,pe=V.length,de=0;de<pe;de++){var ce=V[de],ye=1;1===q&&(ye=ce.length),L.writeVarint(La(1,ye));for(var Ie=3===q?ce.length-1:ce.length,je=0;je<Ie;je++){1===je&&1!==q&&L.writeVarint(La(2,Ie-1));var Ae=ce[je].x-te,Tt=ce[je].y-le;L.writeVarint(Os(Ae)),L.writeVarint(Os(Tt)),te+=Ae,le+=Tt}3===q&&L.writeVarint(La(7,1))}}function uc(Q,L){var V=typeof Q;"string"===V?L.writeStringField(1,Q):"boolean"===V?L.writeBooleanField(7,Q):"number"===V&&(Q%1!=0?L.writeDoubleField(3,Q):Q<0?L.writeSVarintField(6,Q):L.writeVarintField(5,Q))}po.exports=ei,yn.fromVectorTileJs=ei,yn.fromGeojsonVt=function(Q,L){L=L||{};var V={};for(var q in Q)V[q]=new ms(Q[q].features,L),V[q].name=q,V[q].version=L.version,V[q].extent=L.extent;return ei({layers:V})},yn.GeoJSONWrapper=ms;const Ol={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Q=>Q},Ba=Math.fround||(hc=new Float32Array(1),Q=>(hc[0]=+Q,hc[0]));var hc;class Ht{constructor(L){this.options=Xo(Object.create(Ol),L),this.trees=new Array(this.options.maxZoom+1)}load(L){const{log:V,minZoom:q,maxZoom:te,nodeSize:le}=this.options;V&&console.time("total time");const pe=`prepare ${L.length} points`;V&&console.time(pe),this.points=L;let de=[];for(let ce=0;ce<L.length;ce++)L[ce].geometry&&de.push(sa(L[ce],ce));this.trees[te+1]=new v.KDBush(de,Wn,gs,le,Float32Array),V&&console.timeEnd(pe);for(let ce=te;ce>=q;ce--){const ye=+Date.now();de=this._cluster(de,ce),this.trees[ce]=new v.KDBush(de,Wn,gs,le,Float32Array),V&&console.log("z%d: %d clusters in %dms",ce,de.length,+Date.now()-ye)}return V&&console.timeEnd("total time"),this}getClusters(L,V){let q=((L[0]+180)%360+360)%360-180;const te=Math.max(-90,Math.min(90,L[1]));let le=180===L[2]?180:((L[2]+180)%360+360)%360-180;const pe=Math.max(-90,Math.min(90,L[3]));if(L[2]-L[0]>=360)q=-180,le=180;else if(q>le){const Ie=this.getClusters([q,te,180,pe],V),je=this.getClusters([-180,te,le,pe],V);return Ie.concat(je)}const de=this.trees[this._limitZoom(V)],ce=de.range(Re(q),ke(pe),Re(le),ke(te)),ye=[];for(const Ie of ce){const je=de.points[Ie];ye.push(je.numPoints?Gn(je):this.points[je.index])}return ye}getChildren(L){const V=this._getOriginId(L),q=this._getOriginZoom(L),te="No cluster with the specified id.",le=this.trees[q];if(!le)throw new Error(te);const pe=le.points[V];if(!pe)throw new Error(te);const de=this.options.radius/(this.options.extent*Math.pow(2,q-1)),ce=le.within(pe.x,pe.y,de),ye=[];for(const Ie of ce){const je=le.points[Ie];je.parentId===L&&ye.push(je.numPoints?Gn(je):this.points[je.index])}if(0===ye.length)throw new Error(te);return ye}getLeaves(L,V,q){const te=[];return this._appendLeaves(te,L,V=V||10,q=q||0,0),te}getTile(L,V,q){const te=this.trees[this._limitZoom(L)],le=Math.pow(2,L),{extent:pe,radius:de}=this.options,ce=de/pe,ye=(q-ce)/le,Ie=(q+1+ce)/le,je={features:[]};return this._addTileFeatures(te.range((V-ce)/le,ye,(V+1+ce)/le,Ie),te.points,V,q,le,je),0===V&&this._addTileFeatures(te.range(1-ce/le,ye,1,Ie),te.points,le,q,le,je),V===le-1&&this._addTileFeatures(te.range(0,ye,ce/le,Ie),te.points,-1,q,le,je),je.features.length?je:null}getClusterExpansionZoom(L){let V=this._getOriginZoom(L)-1;for(;V<=this.options.maxZoom;){const q=this.getChildren(L);if(V++,1!==q.length)break;L=q[0].properties.cluster_id}return V}_appendLeaves(L,V,q,te,le){const pe=this.getChildren(V);for(const de of pe){const ce=de.properties;if(ce&&ce.cluster?le+ce.point_count<=te?le+=ce.point_count:le=this._appendLeaves(L,ce.cluster_id,q,te,le):le<te?le++:L.push(de),L.length===q)break}return le}_addTileFeatures(L,V,q,te,le,pe){for(const de of L){const ce=V[de],ye=ce.numPoints;let Ie,je,Ae;if(ye)Ie=xn(ce),je=ce.x,Ae=ce.y;else{const pt=this.points[ce.index];Ie=pt.properties,je=Re(pt.geometry.coordinates[0]),Ae=ke(pt.geometry.coordinates[1])}const Tt={type:1,geometry:[[Math.round(this.options.extent*(je*le-q)),Math.round(this.options.extent*(Ae*le-te))]],tags:Ie};let ht;ye?ht=ce.id:this.options.generateId?ht=ce.index:this.points[ce.index].id&&(ht=this.points[ce.index].id),void 0!==ht&&(Tt.id=ht),pe.features.push(Tt)}}_limitZoom(L){return Math.max(this.options.minZoom,Math.min(Math.floor(+L),this.options.maxZoom+1))}_cluster(L,V){const q=[],{radius:te,extent:le,reduce:pe,minPoints:de}=this.options,ce=te/(le*Math.pow(2,V));for(let ye=0;ye<L.length;ye++){const Ie=L[ye];if(Ie.zoom<=V)continue;Ie.zoom=V;const je=this.trees[V+1],Ae=je.within(Ie.x,Ie.y,ce),Tt=Ie.numPoints||1;let ht=Tt;for(const pt of Ae){const gt=je.points[pt];gt.zoom>V&&(ht+=gt.numPoints||1)}if(ht>Tt&&ht>=de){let pt=Ie.x*Tt,gt=Ie.y*Tt,mn=pe&&Tt>1?this._map(Ie,!0):null;const ti=(ye<<5)+(V+1)+this.points.length;for(const dn of Ae){const pn=je.points[dn];if(pn.zoom<=V)continue;pn.zoom=V;const qn=pn.numPoints||1;pt+=pn.x*qn,gt+=pn.y*qn,pn.parentId=ti,pe&&(mn||(mn=this._map(Ie,!0)),pe(mn,this._map(pn)))}Ie.parentId=ti,q.push(za(pt/ht,gt/ht,ti,ht,mn))}else if(q.push(Ie),ht>1)for(const pt of Ae){const gt=je.points[pt];gt.zoom<=V||(gt.zoom=V,q.push(gt))}}return q}_getOriginId(L){return L-this.points.length>>5}_getOriginZoom(L){return(L-this.points.length)%32}_map(L,V){if(L.numPoints)return V?Xo({},L.properties):L.properties;const q=this.points[L.index].properties,te=this.options.map(q);return V&&te===q?Xo({},te):te}}function za(Q,L,V,q,te){return{x:Ba(Q),y:Ba(L),zoom:1/0,id:V,parentId:-1,numPoints:q,properties:te}}function sa(Q,L){const[V,q]=Q.geometry.coordinates;return{x:Ba(Re(V)),y:Ba(ke(q)),zoom:1/0,index:L,parentId:-1}}function Gn(Q){return{type:"Feature",id:Q.id,properties:xn(Q),geometry:{type:"Point",coordinates:[(L=Q.x,360*(L-.5)),Va(Q.y)]}};var L}function xn(Q){const L=Q.numPoints,V=L>=1e4?`${Math.round(L/1e3)}k`:L>=1e3?Math.round(L/100)/10+"k":L;return Xo(Xo({},Q.properties),{cluster:!0,cluster_id:Q.id,point_count:L,point_count_abbreviated:V})}function Re(Q){return Q/360+.5}function ke(Q){const L=Math.sin(Q*Math.PI/180),V=.5-.25*Math.log((1+L)/(1-L))/Math.PI;return V<0?0:V>1?1:V}function Va(Q){const L=(180-360*Q)*Math.PI/180;return 360*Math.atan(Math.exp(L))/Math.PI-90}function Xo(Q,L){for(const V in L)Q[V]=L[V];return Q}function Wn(Q){return Q.x}function gs(Q){return Q.y}function Jo(Q,L,V,q){for(var te,le=q,pe=V-L>>1,de=V-L,ce=Q[L],ye=Q[L+1],Ie=Q[V],je=Q[V+1],Ae=L+3;Ae<V;Ae+=3){var Tt=Pl(Q[Ae],Q[Ae+1],ce,ye,Ie,je);if(Tt>le)te=Ae,le=Tt;else if(Tt===le){var ht=Math.abs(Ae-pe);ht<de&&(te=Ae,de=ht)}}le>q&&(te-L>3&&Jo(Q,L,te,q),Q[te+2]=le,V-te>3&&Jo(Q,te,V,q))}function Pl(Q,L,V,q,te,le){var pe=te-V,de=le-q;if(0!==pe||0!==de){var ce=((Q-V)*pe+(L-q)*de)/(pe*pe+de*de);ce>1?(V=te,q=le):ce>0&&(V+=pe*ce,q+=de*ce)}return(pe=Q-V)*pe+(de=L-q)*de}function bs(Q,L,V,q){var te={id:void 0===Q?null:Q,type:L,geometry:V,tags:q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(le){var pe=le.geometry,de=le.type;if("Point"===de||"MultiPoint"===de||"LineString"===de)it(le,pe);else if("Polygon"===de||"MultiLineString"===de)for(var ce=0;ce<pe.length;ce++)it(le,pe[ce]);else if("MultiPolygon"===de)for(ce=0;ce<pe.length;ce++)for(var ye=0;ye<pe[ce].length;ye++)it(le,pe[ce][ye])}(te),te}function it(Q,L){for(var V=0;V<L.length;V+=3)Q.minX=Math.min(Q.minX,L[V]),Q.minY=Math.min(Q.minY,L[V+1]),Q.maxX=Math.max(Q.maxX,L[V]),Q.maxY=Math.max(Q.maxY,L[V+1])}function Jt(Q,L,V,q){if(L.geometry){var te=L.geometry.coordinates,le=L.geometry.type,pe=Math.pow(V.tolerance/((1<<V.maxZoom)*V.extent),2),de=[],ce=L.id;if(V.promoteId?ce=L.properties[V.promoteId]:V.generateId&&(ce=q||0),"Point"===le)Gt(te,de);else if("MultiPoint"===le)for(var ye=0;ye<te.length;ye++)Gt(te[ye],de);else if("LineString"===le)gr(te,de,pe,!1);else if("MultiLineString"===le){if(V.lineMetrics){for(ye=0;ye<te.length;ye++)gr(te[ye],de=[],pe,!1),Q.push(bs(ce,"LineString",de,L.properties));return}_s(te,de,pe,!1)}else if("Polygon"===le)_s(te,de,pe,!0);else{if("MultiPolygon"!==le){if("GeometryCollection"===le){for(ye=0;ye<L.geometry.geometries.length;ye++)Jt(Q,{id:ce,geometry:L.geometry.geometries[ye],properties:L.properties},V,q);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ye=0;ye<te.length;ye++){var Ie=[];_s(te[ye],Ie,pe,!0),de.push(Ie)}}Q.push(bs(ce,le,de,L.properties))}}function Gt(Q,L){L.push(Rt(Q[0])),L.push(Ps(Q[1])),L.push(0)}function gr(Q,L,V,q){for(var te,le,pe=0,de=0;de<Q.length;de++){var ce=Rt(Q[de][0]),ye=Ps(Q[de][1]);L.push(ce),L.push(ye),L.push(0),de>0&&(pe+=q?(te*ye-ce*le)/2:Math.sqrt(Math.pow(ce-te,2)+Math.pow(ye-le,2))),te=ce,le=ye}var Ie=L.length-3;L[2]=1,Jo(L,0,Ie,V),L[Ie+2]=1,L.size=Math.abs(pe),L.start=0,L.end=L.size}function _s(Q,L,V,q){for(var te=0;te<Q.length;te++){var le=[];gr(Q[te],le,V,q),L.push(le)}}function Rt(Q){return Q/360+.5}function Ps(Q){var L=Math.sin(Q*Math.PI/180),V=.5-.25*Math.log((1+L)/(1-L))/Math.PI;return V<0?0:V>1?1:V}function Fo(Q,L,V,q,te,le,pe,de){if(q/=L,le>=(V/=L)&&pe<q)return Q;if(pe<V||le>=q)return null;for(var ce=[],ye=0;ye<Q.length;ye++){var Ie=Q[ye],je=Ie.geometry,Ae=Ie.type,Tt=0===te?Ie.minX:Ie.minY,ht=0===te?Ie.maxX:Ie.maxY;if(Tt>=V&&ht<q)ce.push(Ie);else if(!(ht<V||Tt>=q)){var pt=[];if("Point"===Ae||"MultiPoint"===Ae)aa(je,pt,V,q,te);else if("LineString"===Ae)br(je,pt,V,q,te,!1,de.lineMetrics);else if("MultiLineString"===Ae)zn(je,pt,V,q,te,!1);else if("Polygon"===Ae)zn(je,pt,V,q,te,!0);else if("MultiPolygon"===Ae)for(var gt=0;gt<je.length;gt++){var mn=[];zn(je[gt],mn,V,q,te,!0),mn.length&&pt.push(mn)}if(pt.length){if(de.lineMetrics&&"LineString"===Ae){for(gt=0;gt<pt.length;gt++)ce.push(bs(Ie.id,Ae,pt[gt],Ie.tags));continue}"LineString"!==Ae&&"MultiLineString"!==Ae||(1===pt.length?(Ae="LineString",pt=pt[0]):Ae="MultiLineString"),"Point"!==Ae&&"MultiPoint"!==Ae||(Ae=3===pt.length?"Point":"MultiPoint"),ce.push(bs(Ie.id,Ae,pt,Ie.tags))}}}return ce.length?ce:null}function aa(Q,L,V,q,te){for(var le=0;le<Q.length;le+=3){var pe=Q[le+te];pe>=V&&pe<=q&&(L.push(Q[le]),L.push(Q[le+1]),L.push(Q[le+2]))}}function br(Q,L,V,q,te,le,pe){for(var de,ce,ye=er(Q),Ie=0===te?_r:Rl,je=Q.start,Ae=0;Ae<Q.length-3;Ae+=3){var Tt=Q[Ae],ht=Q[Ae+1],pt=Q[Ae+2],gt=Q[Ae+3],mn=Q[Ae+4],ti=0===te?Tt:ht,dn=0===te?gt:mn,pn=!1;pe&&(de=Math.sqrt(Math.pow(Tt-gt,2)+Math.pow(ht-mn,2))),ti<V?dn>V&&(ce=Ie(ye,Tt,ht,gt,mn,V),pe&&(ye.start=je+de*ce)):ti>q?dn<q&&(ce=Ie(ye,Tt,ht,gt,mn,q),pe&&(ye.start=je+de*ce)):pc(ye,Tt,ht,pt),dn<V&&ti>=V&&(ce=Ie(ye,Tt,ht,gt,mn,V),pn=!0),dn>q&&ti<=q&&(ce=Ie(ye,Tt,ht,gt,mn,q),pn=!0),!le&&pn&&(pe&&(ye.end=je+de*ce),L.push(ye),ye=er(Q)),pe&&(je+=de)}var qn=Q.length-3;Tt=Q[qn],ht=Q[qn+1],pt=Q[qn+2],(ti=0===te?Tt:ht)>=V&&ti<=q&&pc(ye,Tt,ht,pt),qn=ye.length-3,le&&qn>=3&&(ye[qn]!==ye[0]||ye[qn+1]!==ye[1])&&pc(ye,ye[0],ye[1],ye[2]),ye.length&&L.push(ye)}function er(Q){var L=[];return L.size=Q.size,L.start=Q.start,L.end=Q.end,L}function zn(Q,L,V,q,te,le){for(var pe=0;pe<Q.length;pe++)br(Q[pe],L,V,q,te,le,!1)}function pc(Q,L,V,q){Q.push(L),Q.push(V),Q.push(q)}function _r(Q,L,V,q,te,le){var pe=(le-L)/(q-L);return Q.push(le),Q.push(V+(te-V)*pe),Q.push(1),pe}function Rl(Q,L,V,q,te,le){var pe=(le-V)/(te-V);return Q.push(L+(q-L)*pe),Q.push(le),Q.push(1),pe}function wn(Q,L){for(var V=[],q=0;q<Q.length;q++){var te,le=Q[q],pe=le.type;if("Point"===pe||"MultiPoint"===pe||"LineString"===pe)te=la(le.geometry,L);else if("MultiLineString"===pe||"Polygon"===pe){te=[];for(var de=0;de<le.geometry.length;de++)te.push(la(le.geometry[de],L))}else if("MultiPolygon"===pe)for(te=[],de=0;de<le.geometry.length;de++){for(var ce=[],ye=0;ye<le.geometry[de].length;ye++)ce.push(la(le.geometry[de][ye],L));te.push(ce)}V.push(bs(le.id,pe,te,le.tags))}return V}function la(Q,L){var V=[];V.size=Q.size,void 0!==Q.start&&(V.start=Q.start,V.end=Q.end);for(var q=0;q<Q.length;q+=3)V.push(Q[q]+L,Q[q+1],Q[q+2]);return V}function fc(Q,L){if(Q.transformed)return Q;var V,q,te,le=1<<Q.z,pe=Q.x,de=Q.y;for(V=0;V<Q.features.length;V++){var ce=Q.features[V],ye=ce.geometry,Ie=ce.type;if(ce.geometry=[],1===Ie)for(q=0;q<ye.length;q+=2)ce.geometry.push(Ua(ye[q],ye[q+1],L,le,pe,de));else for(q=0;q<ye.length;q++){var je=[];for(te=0;te<ye[q].length;te+=2)je.push(Ua(ye[q][te],ye[q][te+1],L,le,pe,de));ce.geometry.push(je)}}return Q.transformed=!0,Q}function Ua(Q,L,V,q,te,le){return[Math.round(V*(Q*q-te)),Math.round(V*(L*q-le))]}function Kc(Q,L,V,q,te){for(var le=L===te.maxZoom?0:te.tolerance/((1<<L)*te.extent),pe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:V,y:q,z:L,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},de=0;de<Q.length;de++){pe.numFeatures++,ca(pe,Q[de],le,te);var ce=Q[de].minX,ye=Q[de].minY,Ie=Q[de].maxX,je=Q[de].maxY;ce<pe.minX&&(pe.minX=ce),ye<pe.minY&&(pe.minY=ye),Ie>pe.maxX&&(pe.maxX=Ie),je>pe.maxY&&(pe.maxY=je)}return pe}function ca(Q,L,V,q){var te=L.geometry,le=L.type,pe=[];if("Point"===le||"MultiPoint"===le)for(var de=0;de<te.length;de+=3)pe.push(te[de]),pe.push(te[de+1]),Q.numPoints++,Q.numSimplified++;else if("LineString"===le)Ha(pe,te,Q,V,!1,!1);else if("MultiLineString"===le||"Polygon"===le)for(de=0;de<te.length;de++)Ha(pe,te[de],Q,V,"Polygon"===le,0===de);else if("MultiPolygon"===le)for(var ce=0;ce<te.length;ce++){var ye=te[ce];for(de=0;de<ye.length;de++)Ha(pe,ye[de],Q,V,!0,0===de)}if(pe.length){var Ie=L.tags||null;if("LineString"===le&&q.lineMetrics){for(var je in Ie={},L.tags)Ie[je]=L.tags[je];Ie.mapbox_clip_start=te.start/te.size,Ie.mapbox_clip_end=te.end/te.size}var Ae={geometry:pe,type:"Polygon"===le||"MultiPolygon"===le?3:"LineString"===le||"MultiLineString"===le?2:1,tags:Ie};null!==L.id&&(Ae.id=L.id),Q.features.push(Ae)}}function Ha(Q,L,V,q,te,le){var pe=q*q;if(q>0&&L.size<(te?pe:q))V.numPoints+=L.length/3;else{for(var de=[],ce=0;ce<L.length;ce+=3)(0===q||L[ce+2]>pe)&&(V.numSimplified++,de.push(L[ce]),de.push(L[ce+1])),V.numPoints++;te&&function(ye,Ie){for(var je=0,Ae=0,Tt=ye.length,ht=Tt-2;Ae<Tt;ht=Ae,Ae+=2)je+=(ye[Ae]-ye[ht])*(ye[Ae+1]+ye[ht+1]);if(je>0===Ie)for(Ae=0,Tt=ye.length;Ae<Tt/2;Ae+=2){var pt=ye[Ae],gt=ye[Ae+1];ye[Ae]=ye[Tt-2-Ae],ye[Ae+1]=ye[Tt-1-Ae],ye[Tt-2-Ae]=pt,ye[Tt-1-Ae]=gt}}(de,le),Q.push(de)}}function An(Q,L){var V=(L=this.options=function(te,le){for(var pe in le)te[pe]=le[pe];return te}(Object.create(this.options),L)).debug;if(V&&console.time("preprocess data"),L.maxZoom<0||L.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(L.promoteId&&L.generateId)throw new Error("promoteId and generateId cannot be used together.");var te,le,pe,de,ce,ye,q=function(te,le){var pe=[];if("FeatureCollection"===te.type)for(var de=0;de<te.features.length;de++)Jt(pe,te.features[de],le,de);else Jt(pe,"Feature"===te.type?te:{geometry:te},le);return pe}(Q,L);this.tiles={},this.tileCoords=[],V&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",L.indexMaxZoom,L.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),de=te=q,ce=Fo(te,1,-1-(pe=(le=L).buffer/le.extent),pe,0,-1,2,le),ye=Fo(te,1,1-pe,2+pe,0,-1,2,le),(ce||ye)&&(de=Fo(te,1,-pe,1+pe,0,-1,2,le)||[],ce&&(de=wn(ce,1).concat(de)),ye&&(de=de.concat(wn(ye,-1)))),(q=de).length&&this.splitTile(q,0,0,0),V&&(q.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Nl(Q,L,V){return 32*((1<<Q)*V+L)+Q}function tr(Q,L){return L?Q.properties[L]:Q.id}function to(Q,L){if(null==Q)return!0;if("Feature"===Q.type)return null!=tr(Q,L);if("FeatureCollection"===Q.type){const V=new Set;for(const q of Q.features){const te=tr(q,L);if(null==te||V.has(te))return!1;V.add(te)}return!0}return!1}function Hi(Q,L){const V=new Map;if(null!=Q)if("Feature"===Q.type)V.set(tr(Q,L),Q);else for(const q of Q.features)V.set(tr(q,L),q);return V}function Co(Q,L){const V=Q.tileID.canonical;if(!this._geoJSONIndex)return L(null,null);const q=this._geoJSONIndex.getTile(V.z,V.x,V.y);if(!q)return L(null,null);const te=new class{constructor(pe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=v.EXTENT,this.length=pe.length,this._features=pe}feature(pe){return new class{constructor(de){this._feature=de,this.extent=v.EXTENT,this.type=de.type,this.properties=de.tags,"id"in de&&!isNaN(de.id)&&(this.id=parseInt(de.id,10))}loadGeometry(){if(1===this._feature.type){const de=[];for(const ce of this._feature.geometry)de.push([new v.pointGeometry(ce[0],ce[1])]);return de}{const de=[];for(const ce of this._feature.geometry){const ye=[];for(const Ie of ce)ye.push(new v.pointGeometry(Ie[0],Ie[1]));de.push(ye)}return de}}toGeoJSON(de,ce,ye){return fr.call(this,de,ce,ye)}}(this._features[pe])}}(q.features);let le=yn(te);0===le.byteOffset&&le.byteLength===le.buffer.byteLength||(le=new Uint8Array(le)),L(null,{vectorTile:te,rawData:le.buffer})}An.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},An.prototype.splitTile=function(Q,L,V,q,te,le,pe){for(var de=[Q,L,V,q],ce=this.options,ye=ce.debug;de.length;){q=de.pop(),V=de.pop(),L=de.pop(),Q=de.pop();var Ie=1<<L,je=Nl(L,V,q),Ae=this.tiles[je];if(!Ae&&(ye>1&&console.time("creation"),Ae=this.tiles[je]=Kc(Q,L,V,q,ce),this.tileCoords.push({z:L,x:V,y:q}),ye)){ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",L,V,q,Ae.numFeatures,Ae.numPoints,Ae.numSimplified),console.timeEnd("creation"));var Tt="z"+L;this.stats[Tt]=(this.stats[Tt]||0)+1,this.total++}if(Ae.source=Q,te){if(L===ce.maxZoom||L===te)continue;var ht=1<<te-L;if(V!==Math.floor(le/ht)||q!==Math.floor(pe/ht))continue}else if(L===ce.indexMaxZoom||Ae.numPoints<=ce.indexMaxPoints)continue;if(Ae.source=null,0!==Q.length){ye>1&&console.time("clipping");var pt,gt,mn,ti,dn,pn,qn=.5*ce.buffer/ce.extent,ui=.5-qn,fo=.5+qn,Ni=1+qn;pt=gt=mn=ti=null,dn=Fo(Q,Ie,V-qn,V+fo,0,Ae.minX,Ae.maxX,ce),pn=Fo(Q,Ie,V+ui,V+Ni,0,Ae.minX,Ae.maxX,ce),Q=null,dn&&(pt=Fo(dn,Ie,q-qn,q+fo,1,Ae.minY,Ae.maxY,ce),gt=Fo(dn,Ie,q+ui,q+Ni,1,Ae.minY,Ae.maxY,ce),dn=null),pn&&(mn=Fo(pn,Ie,q-qn,q+fo,1,Ae.minY,Ae.maxY,ce),ti=Fo(pn,Ie,q+ui,q+Ni,1,Ae.minY,Ae.maxY,ce),pn=null),ye>1&&console.timeEnd("clipping"),de.push(pt||[],L+1,2*V,2*q),de.push(gt||[],L+1,2*V,2*q+1),de.push(mn||[],L+1,2*V+1,2*q),de.push(ti||[],L+1,2*V+1,2*q+1)}}},An.prototype.getTile=function(Q,L,V){var q=this.options,te=q.extent,le=q.debug;if(Q<0||Q>24)return null;var pe=1<<Q,de=Nl(Q,L=(L%pe+pe)%pe,V);if(this.tiles[de])return fc(this.tiles[de],te);le>1&&console.log("drilling down to z%d-%d-%d",Q,L,V);for(var ce,ye=Q,Ie=L,je=V;!ce&&ye>0;)ye--,Ie=Math.floor(Ie/2),je=Math.floor(je/2),ce=this.tiles[Nl(ye,Ie,je)];return ce&&ce.source?(le>1&&console.log("found parent tile z%d-%d-%d",ye,Ie,je),le>1&&console.time("drilling down"),this.splitTile(ce.source,ye,Ie,je,Q,L,V),le>1&&console.timeEnd("drilling down"),this.tiles[de]?fc(this.tiles[de],te):null):null};class Do extends pr{constructor(L,V,q,te){super(L,V,q,Co),this._dataUpdateable=new Map,this.loadGeoJSON=(le,pe)=>{const{promoteId:de}=le;if(le.request)return v.getJSON(le.request,(ce,ye,Ie,je)=>{this._dataUpdateable=to(ye,de)?Hi(ye,de):void 0,pe(ce,ye,Ie,je)});if("string"==typeof le.data)try{const ce=JSON.parse(le.data);this._dataUpdateable=to(ce,de)?Hi(ce,de):void 0,pe(null,ce)}catch{pe(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`))}else le.dataDiff?this._dataUpdateable?(function(ce,ye,Ie){var je,Ae,Tt,ht;if(ye.removeAll&&ce.clear(),ye.remove)for(const pt of ye.remove)ce.delete(pt);if(ye.add)for(const pt of ye.add){const gt=tr(pt,Ie);null!=gt&&ce.set(gt,pt)}if(ye.update)for(const pt of ye.update){let gt=ce.get(pt.id);if(null==gt)continue;const mn=!pt.removeAllProperties&&((null===(je=pt.removeProperties)||void 0===je?void 0:je.length)>0||(null===(Ae=pt.addOrUpdateProperties)||void 0===Ae?void 0:Ae.length)>0);if((pt.newGeometry||pt.removeAllProperties||mn)&&(gt={...gt},ce.set(pt.id,gt),mn&&(gt.properties={...gt.properties})),pt.newGeometry&&(gt.geometry=pt.newGeometry),pt.removeAllProperties)gt.properties={};else if((null===(Tt=pt.removeProperties)||void 0===Tt?void 0:Tt.length)>0)for(const ti of pt.removeProperties)Object.prototype.hasOwnProperty.call(gt.properties,ti)&&delete gt.properties[ti];if((null===(ht=pt.addOrUpdateProperties)||void 0===ht?void 0:ht.length)>0)for(const{key:ti,value:dn}of pt.addOrUpdateProperties)gt.properties[ti]=dn}}(this._dataUpdateable,le.dataDiff,de),pe(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):pe(new Error(`Cannot update existing geojson data in ${le.source}`)):pe(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},te&&(this.loadGeoJSON=te)}loadData(L,V){var q;null===(q=this._pendingRequest)||void 0===q||q.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const te=!!(L&&L.request&&L.request.collectResourceTiming)&&new v.RequestPerformance(L.request);this._pendingCallback=V,this._pendingRequest=this.loadGeoJSON(L,(le,pe)=>{if(delete this._pendingCallback,delete this._pendingRequest,le||!pe)return V(le);if("object"!=typeof pe)return V(new Error(`Input data given to '${L.source}' is not a valid GeoJSON object.`));{Na(pe,!0);try{if(L.filter){const ce=v.createExpression(L.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===ce.result)throw new Error(ce.value.map(Ie=>`${Ie.key}: ${Ie.message}`).join(", "));pe={type:"FeatureCollection",features:pe.features.filter(Ie=>ce.value.evaluate({zoom:0},Ie))}}this._geoJSONIndex=L.cluster?new Ht(function({superclusterOptions:ce,clusterProperties:ye}){if(!ye||!ce)return ce;const Ie={},je={},Ae={accumulated:null,zoom:0},Tt={properties:null},ht=Object.keys(ye);for(const pt of ht){const[gt,mn]=ye[pt],ti=v.createExpression(mn),dn=v.createExpression("string"==typeof gt?[gt,["accumulated"],["get",pt]]:gt);Ie[pt]=ti.value,je[pt]=dn.value}return ce.map=pt=>{Tt.properties=pt;const gt={};for(const mn of ht)gt[mn]=Ie[mn].evaluate(Ae,Tt);return gt},ce.reduce=(pt,gt)=>{Tt.properties=gt;for(const mn of ht)Ae.accumulated=pt[mn],pt[mn]=je[mn].evaluate(Ae,Tt)},ce}(L)).load(pe.features):new An(ce=pe,L.geojsonVtOptions)}catch(ce){return V(ce)}this.loaded={};const de={};if(te){const ce=te.finish();ce&&(de.resourceTiming={},de.resourceTiming[L.source]=JSON.parse(JSON.stringify(ce)))}V(null,de)}var ce})}reloadTile(L,V){const q=this.loaded;return q&&q[L.uid]?super.reloadTile(L,V):this.loadTile(L,V)}removeSource(L,V){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),V()}getClusterExpansionZoom(L,V){try{V(null,this._geoJSONIndex.getClusterExpansionZoom(L.clusterId))}catch(q){V(q)}}getClusterChildren(L,V){try{V(null,this._geoJSONIndex.getChildren(L.clusterId))}catch(q){V(q)}}getClusterLeaves(L,V){try{V(null,this._geoJSONIndex.getLeaves(L.clusterId,L.limit,L.offset))}catch(q){V(q)}}}class Rs{constructor(L){this.self=L,this.actor=new v.Actor(L,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:pr,geojson:Do},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(V,q)=>{if(this.workerSourceTypes[V])throw new Error(`Worker source with name "${V}" already registered.`);this.workerSourceTypes[V]=q},this.self.registerRTLTextPlugin=V=>{if(v.plugin.isParsed())throw new Error("RTL text plugin already registered.");v.plugin.applyArabicShaping=V.applyArabicShaping,v.plugin.processBidirectionalText=V.processBidirectionalText,v.plugin.processStyledBidirectionalText=V.processStyledBidirectionalText}}setReferrer(L,V){this.referrer=V}setImages(L,V,q){this.availableImages[L]=V;for(const te in this.workerSources[L]){const le=this.workerSources[L][te];for(const pe in le)le[pe].availableImages=V}q()}setLayers(L,V,q){this.getLayerIndex(L).replace(V),q()}updateLayers(L,V,q){this.getLayerIndex(L).update(V.layers,V.removedIds),q()}loadTile(L,V,q){this.getWorkerSource(L,V.type,V.source).loadTile(V,q)}loadDEMTile(L,V,q){this.getDEMWorkerSource(L,V.source).loadTile(V,q)}reloadTile(L,V,q){this.getWorkerSource(L,V.type,V.source).reloadTile(V,q)}abortTile(L,V,q){this.getWorkerSource(L,V.type,V.source).abortTile(V,q)}removeTile(L,V,q){this.getWorkerSource(L,V.type,V.source).removeTile(V,q)}removeDEMTile(L,V){this.getDEMWorkerSource(L,V.source).removeTile(V)}removeSource(L,V,q){if(!this.workerSources[L]||!this.workerSources[L][V.type]||!this.workerSources[L][V.type][V.source])return;const te=this.workerSources[L][V.type][V.source];delete this.workerSources[L][V.type][V.source],void 0!==te.removeSource?te.removeSource(V,q):q()}loadWorkerSource(L,V,q){try{this.self.importScripts(V.url),q()}catch(te){q(te.toString())}}syncRTLPluginState(L,V,q){try{v.plugin.setState(V);const te=v.plugin.getPluginURL();if(v.plugin.isLoaded()&&!v.plugin.isParsed()&&null!=te){this.self.importScripts(te);const le=v.plugin.isParsed();q(le?void 0:new Error(`RTL Text Plugin failed to import scripts from ${te}`),le)}}catch(te){q(te.toString())}}getAvailableImages(L){let V=this.availableImages[L];return V||(V=[]),V}getLayerIndex(L){let V=this.layerIndexes[L];return V||(V=this.layerIndexes[L]=new fs),V}getWorkerSource(L,V,q){return this.workerSources[L]||(this.workerSources[L]={}),this.workerSources[L][V]||(this.workerSources[L][V]={}),this.workerSources[L][V][q]||(this.workerSources[L][V][q]=new this.workerSourceTypes[V]({send:(le,pe,de)=>{this.actor.send(le,pe,de,L)}},this.getLayerIndex(L),this.getAvailableImages(L))),this.workerSources[L][V][q]}getDEMWorkerSource(L,V){return this.demWorkerSources[L]||(this.demWorkerSources[L]={}),this.demWorkerSources[L][V]||(this.demWorkerSources[L][V]=new ks),this.demWorkerSources[L][V]}}return v.isWorker()&&(self.worker=new Rs(self)),Rs}),pu(0,function(v){var di=Ms;function Ms(g){return a=g,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var p,m,x=new Blob([""],{type:"text/javascript"}),D=URL.createObjectURL(x);try{m=new Worker(D),p=!0}catch{p=!1}return m&&m.terminate(),URL.revokeObjectURL(D),p}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var p=document.createElement("canvas");p.width=p.height=1;var m=p.getContext("2d");if(!m)return!1;var x=m.getImageData(0,0,1,1);return x&&x.width===p.width}()||(void 0===fs[u=a&&a.failIfMajorPerformanceCaveat]&&(fs[u]=function(p){var m,D,S,M,x=(D=p,S=document.createElement("canvas"),(M=Object.create(Ms.webGLContextAttributes)).failIfMajorPerformanceCaveat=D,S.getContext("webgl",M)||S.getContext("experimental-webgl",M));if(!x)return!1;try{m=x.createShader(x.VERTEX_SHADER)}catch{return!1}return!(!m||x.isContextLost())&&(x.shaderSource(m,"void main() {}"),x.compileShader(m),!0===x.getShaderParameter(m,x.COMPILE_STATUS))}(u)),!fs[u]||document.documentMode));var a,u}var fs={};Ms.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};var kl="3.0.0-pre.4";function Yt(g,a){if(Array.isArray(g)){if(!Array.isArray(a)||g.length!==a.length)return!1;for(let u=0;u<g.length;u++)if(!Yt(g[u],a[u]))return!1;return!0}if("object"==typeof g&&null!==g&&null!==a){if("object"!=typeof a||Object.keys(g).length!==Object.keys(a).length)return!1;for(const u in g)if(!Yt(g[u],a[u]))return!1;return!0}return g===a}class Oe{static testProp(a){if(!Oe.docStyle)return a[0];for(let u=0;u<a.length;u++)if(a[u]in Oe.docStyle)return a[u];return a[0]}static create(a,u,p){const m=window.document.createElement(a);return void 0!==u&&(m.className=u),p&&p.appendChild(m),m}static createNS(a,u){return window.document.createElementNS(a,u)}static disableDrag(){Oe.docStyle&&Oe.selectProp&&(Oe.userSelect=Oe.docStyle[Oe.selectProp],Oe.docStyle[Oe.selectProp]="none")}static enableDrag(){Oe.docStyle&&Oe.selectProp&&(Oe.docStyle[Oe.selectProp]=Oe.userSelect)}static setTransform(a,u){a.style[Oe.transformProp]=u}static addEventListener(a,u,p,m={}){a.addEventListener(u,p,"passive"in m?m:m.capture)}static removeEventListener(a,u,p,m={}){a.removeEventListener(u,p,"passive"in m?m:m.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",Oe.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",Oe.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",Oe.suppressClickInternal,!0)},0)}static mousePos(a,u){const p=a.getBoundingClientRect();return new v.pointGeometry(u.clientX-p.left-a.clientLeft,u.clientY-p.top-a.clientTop)}static touchPos(a,u){const p=a.getBoundingClientRect(),m=[];for(let x=0;x<u.length;x++)m.push(new v.pointGeometry(u[x].clientX-p.left-a.clientLeft,u[x].clientY-p.top-a.clientTop));return m}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}}Oe.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,Oe.selectProp=Oe.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),Oe.transformProp=Oe.testProp(["transform","WebkitTransform"]);const Qo={supported:!1,testSupport:function(g){!Na&&ks&&(Al?No(g):pr=g)}};let pr,ks,Na=!1,Al=!1;function No(g){const a=g.createTexture();g.bindTexture(g.TEXTURE_2D,a);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,ks),g.isContextLost())return;Qo.supported=!0}catch{}g.deleteTexture(a),Na=!0}var fr;typeof document<"u"&&(ks=document.createElement("img"),ks.onload=function(){pr&&No(pr),pr=null,Al=!0},ks.onerror=function(){Na=!0,pr=null},ks.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(g){let a,u,p,m;g.resetRequestQueue=()=>{a=[],u=0,p=0,m={}},g.addThrottleControl=S=>{const M=p++;return m[M]=S,M},g.removeThrottleControl=S=>{delete m[S]};const x=()=>{const S=Object.keys(m);let M=!1;if(S.length>0)for(const k of S)if(M=m[k](),M)break;return M};g.getImage=(S,M)=>{Qo.supported&&(S.headers||(S.headers={}),S.headers.accept="image/webp,*/*");const k={requestParameters:S,callback:M,cancelled:!1,completed:!1,cancel:()=>{}};return a.push(k),x()||g.processQueue(),k};const D=S=>{const{requestParameters:M,callback:k}=S;return v.getArrayBuffer(M,(F,N,U,X)=>{var ee,K;F?k(F):N&&(ee=N,K=(ee,K)=>{null!=ee?k(ee):null!=K&&k(null,K,{cacheControl:U,expires:X})},"function"==typeof createImageBitmap?v.arrayBufferToImageBitmap(ee,K):v.arrayBufferToImage(ee,K)),S.cancelled||(S.completed=!0,u--,x()||g.processQueue())})};g.processQueue=(S=0)=>{S<=0&&(S=x()?v.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:v.config.MAX_PARALLEL_IMAGE_REQUESTS);for(let M=u;M<S&&a.length>0;M++){const k=a.shift();if(k.cancelled)continue;const F=D(k);u++,k.innerRequest=F,k.cancel=()=>{var N;(N=k).completed||N.cancelled||(u--,N.cancelled=!0,N.innerRequest.cancel(),g.processQueue())}}return a.length}}(fr||(fr={})),fr.resetRequestQueue();var yn,g,po=fr;(g=yn||(yn={})).Glyphs="Glyphs",g.Image="Image",g.Source="Source",g.SpriteImage="SpriteImage",g.SpriteJSON="SpriteJSON",g.Style="Style",g.Tile="Tile",g.Unknown="Unknown";class dc{constructor(a){this._transformRequestFn=a}transformRequest(a,u){return this._transformRequestFn&&this._transformRequestFn(a,u)||{url:a}}normalizeSpriteURL(a,u,p){const m=function(x){const D=x.match(Rr);if(!D)throw new Error(`Unable to parse URL "${x}"`);return{protocol:D[1],authority:D[2],path:D[3]||"/",params:D[4]?D[4].split("&"):[]}}(a);return m.path+=`${u}${p}`,function(x){const D=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${D}`}(m)}setTransformRequest(a){this._transformRequestFn=a}}const Rr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ra(g){var a=new v.ARRAY_TYPE(3);return a[0]=g[0],a[1]=g[1],a[2]=g[2],a}var As,mr=function(g,a,u){return g[0]=a[0]-u[0],g[1]=a[1]-u[1],g[2]=a[2]-u[2],g};As=new v.ARRAY_TYPE(3),v.ARRAY_TYPE!=Float32Array&&(As[0]=0,As[1]=0,As[2]=0);var Fa=function(g){var a=g[0],u=g[1];return a*a+u*u};function ms(g){return"string"==typeof g?[{id:"default",url:g}]:g??[]}!function(){var g=new v.ARRAY_TYPE(2);v.ARRAY_TYPE!=Float32Array&&(g[0]=0,g[1]=0)}();class ei{constructor(a,u,p,m){this.context=a,this.format=p,this.texture=a.gl.createTexture(),this.update(u,m)}update(a,u,p){const{width:m,height:x}=a,D=!(this.size&&this.size[0]===m&&this.size[1]===x||p),{context:S}=this,{gl:M}=S;if(this.useMipmap=Boolean(u&&u.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!u||!1!==u.premultiply)),D)this.size=[m,x],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||v.isImageBitmap(a)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,a):M.texImage2D(M.TEXTURE_2D,0,this.format,m,x,0,this.format,M.UNSIGNED_BYTE,a.data);else{const{x:k,y:F}=p||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||v.isImageBitmap(a)?M.texSubImage2D(M.TEXTURE_2D,0,k,F,M.RGBA,M.UNSIGNED_BYTE,a):M.texSubImage2D(M.TEXTURE_2D,0,k,F,m,x,M.RGBA,M.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(a,u,p){const{context:m}=this,{gl:x}=m;x.bindTexture(x.TEXTURE_2D,this.texture),p!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=x.LINEAR),a!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,a),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,p||a),this.filter=a),u!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,u),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function Zc(g){const{userImage:a}=g;return!!(a&&a.render&&a.render())&&(g.data.replace(new Uint8Array(a.data.buffer)),!0)}class Pt extends v.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new v.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:u,callback:p}of this.requestors)this._notify(u,p);this.requestors=[]}}getImage(a){const u=this.images[a];if(u&&!u.data&&u.spriteData){const p=u.spriteData;u.data=new v.RGBAImage({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(a,u){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,u)&&(this.images[a]=u)}_validate(a,u){let p=!0;const m=u.data||u.spriteData;return this._validateStretch(u.stretchX,m&&m.width)||(this.fire(new v.ErrorEvent(new Error(`Image "${a}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,m&&m.height)||(this.fire(new v.ErrorEvent(new Error(`Image "${a}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new v.ErrorEvent(new Error(`Image "${a}" has invalid "content" value`))),p=!1),p}_validateStretch(a,u){if(!a)return!0;let p=0;for(const m of a){if(m[0]<p||m[1]<m[0]||u<m[1])return!1;p=m[1]}return!0}_validateContent(a,u){if(!a)return!0;if(4!==a.length)return!1;const p=u.spriteData,m=p&&p.width||u.data.width,x=p&&p.height||u.data.height;return!(a[0]<0||m<a[0]||a[1]<0||x<a[1]||a[2]<0||m<a[2]||a[3]<0||x<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,u,p=!0){const m=this.getImage(a);if(p&&(m.data.width!==u.data.width||m.data.height!==u.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=m.version+1,this.images[a]=u,this.updatedImages[a]=!0}removeImage(a){const u=this.images[a];delete this.images[a],delete this.patterns[a],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a,u){let p=!0;if(!this.isLoaded())for(const m of a)this.images[m]||(p=!1);this.isLoaded()||p?this._notify(a,u):this.requestors.push({ids:a,callback:u})}_notify(a,u){const p={};for(const m of a){const x=this.getImage(m);x?p[m]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:Boolean(x.userImage&&x.userImage.render)}:(this.fire(new v.Event("styleimagemissing",{id:m})),v.warnOnce(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`))}u(null,p)}getPixelSize(){const{width:a,height:u}=this.atlasImage;return{width:a,height:u}}getPattern(a){const u=this.patterns[a],p=this.getImage(a);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const m={w:p.data.width+2,h:p.data.height+2,x:0,y:0},x=new v.ImagePosition(m,p);this.patterns[a]={bin:m,position:x}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const u=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ei(a,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const x in this.patterns)a.push(this.patterns[x].bin);const{w:u,h:p}=v.potpack(a),m=this.atlasImage;m.resize({width:u||1,height:p||1});for(const x in this.patterns){const{bin:D}=this.patterns[x],S=D.x+1,M=D.y+1,k=this.getImage(x).data,F=k.width,N=k.height;v.RGBAImage.copy(k,m,{x:0,y:0},{x:S,y:M},{width:F,height:N}),v.RGBAImage.copy(k,m,{x:0,y:N-1},{x:S,y:M-1},{width:F,height:1}),v.RGBAImage.copy(k,m,{x:0,y:0},{x:S,y:M+N},{width:F,height:1}),v.RGBAImage.copy(k,m,{x:F-1,y:0},{x:S-1,y:M},{width:1,height:N}),v.RGBAImage.copy(k,m,{x:0,y:0},{x:S+F,y:M},{width:1,height:N})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const u of a){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.getImage(u);p||v.warnOnce(`Image with ID: "${u}" was not found`),Zc(p)&&this.updateImage(u,p)}}}const Ri=1e20;function La(g,a,u,p,m,x,D,S,M){for(let k=a;k<a+p;k++)Os(g,u*x+k,x,m,D,S,M);for(let k=u;k<u+m;k++)Os(g,k*x+a,1,p,D,S,M)}function Os(g,a,u,p,m,x,D){x[0]=0,D[0]=-Ri,D[1]=Ri,m[0]=g[a];for(let S=1,M=0,k=0;S<p;S++){m[S]=g[a+S*u];const F=S*S;do{const N=x[M];k=(m[S]-m[N]+F-N*N)/(S-N)/2}while(k<=D[M]&&--M>-1);M++,x[M]=S,D[M]=k,D[M+1]=Ri}for(let S=0,M=0;S<p;S++){for(;D[M+1]<S;)M++;const k=x[M],F=S-k;g[a+S*u]=m[k]+F*F}}class cn{constructor(a,u){this.requestManager=a,this.localIdeographFontFamily=u,this.entries={}}setURL(a){this.url=a}getGlyphs(a,u){const p=[];for(const m in a)for(const x of a[m])p.push({stack:m,id:x});v.asyncAll(p,({stack:m,id:x},D)=>{let S=this.entries[m];S||(S=this.entries[m]={glyphs:{},requests:{},ranges:{}});let M=S.glyphs[x];if(void 0!==M)return void D(null,{stack:m,id:x,glyph:M});if(M=this._tinySDF(S,m,x),M)return S.glyphs[x]=M,void D(null,{stack:m,id:x,glyph:M});const k=Math.floor(x/256);if(256*k>65535)return void D(new Error("glyphs > 65535 not supported"));if(S.ranges[k])return void D(null,{stack:m,id:x,glyph:M});if(!this.url)return void D(new Error("glyphsUrl is not set"));let F=S.requests[k];F||(F=S.requests[k]=[],cn.loadGlyphRange(m,k,this.url,this.requestManager,(N,U)=>{if(U){for(const X in U)this._doesCharSupportLocalGlyph(+X)||(S.glyphs[+X]=U[+X]);S.ranges[k]=!0}for(const X of F)X(N,U);delete S.requests[k]})),F.push((N,U)=>{N?D(N):U&&D(null,{stack:m,id:x,glyph:U[x]||null})})},(m,x)=>{if(m)u(m);else if(x){const D={};for(const{stack:S,id:M,glyph:k}of x)(D[S]||(D[S]={}))[M]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics};u(null,D)}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(v.unicodeBlockLookup["CJK Unified Ideographs"](a)||v.unicodeBlockLookup["Hangul Syllables"](a)||v.unicodeBlockLookup.Hiragana(a)||v.unicodeBlockLookup.Katakana(a))}_tinySDF(a,u,p){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(p))return;let x=a.tinySDF;if(!x){let S="400";/bold/i.test(u)?S="900":/medium/i.test(u)?S="500":/light/i.test(u)&&(S="200"),x=a.tinySDF=new cn.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:m,fontWeight:S})}const D=x.draw(String.fromCharCode(p));return{id:p,bitmap:new v.AlphaImage({width:D.width||30,height:D.height||30},D.data),metrics:{width:D.glyphWidth||24,height:D.glyphHeight||24,left:D.glyphLeft||0,top:D.glyphTop-27||-8,advance:D.glyphAdvance||24}}}}cn.loadGlyphRange=function(g,a,u,p,m){const x=256*a,D=x+255,S=p.transformRequest(u.replace("{fontstack}",g).replace("{range}",`${x}-${D}`),yn.Glyphs);v.getArrayBuffer(S,(M,k)=>{if(M)m(M);else if(k){const F={};for(const N of v.parseGlyphPbf(k))F[N.id]=N;m(null,F)}})},cn.TinySDF=class{constructor({fontSize:g=24,buffer:a=3,radius:u=8,cutoff:p=.25,fontFamily:m="sans-serif",fontWeight:x="normal",fontStyle:D="normal"}={}){this.buffer=a,this.cutoff=p,this.radius=u;const S=this.size=g+4*a,M=this._createCanvas(S),k=this.ctx=M.getContext("2d",{willReadFrequently:!0});k.font=`${D} ${x} ${g}px ${m}`,k.textBaseline="alphabetic",k.textAlign="left",k.fillStyle="black",this.gridOuter=new Float64Array(S*S),this.gridInner=new Float64Array(S*S),this.f=new Float64Array(S),this.z=new Float64Array(S+1),this.v=new Uint16Array(S)}_createCanvas(g){const a=document.createElement("canvas");return a.width=a.height=g,a}draw(g){const{width:a,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:m,actualBoundingBoxRight:x}=this.ctx.measureText(g),D=Math.ceil(u),S=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-m))),M=Math.min(this.size-this.buffer,D+Math.ceil(p)),k=S+2*this.buffer,F=M+2*this.buffer,N=Math.max(k*F,0),U=new Uint8ClampedArray(N),X={data:U,width:k,height:F,glyphWidth:S,glyphHeight:M,glyphTop:D,glyphLeft:0,glyphAdvance:a};if(0===S||0===M)return X;const{ctx:ee,buffer:K,gridInner:re,gridOuter:ue}=this;ee.clearRect(K,K,S,M),ee.fillText(g,K,K+D);const he=ee.getImageData(K,K,S,M);ue.fill(Ri,0,N),re.fill(0,0,N);for(let ie=0;ie<M;ie++)for(let ve=0;ve<S;ve++){const xe=he.data[4*(ie*S+ve)+3]/255;if(0===xe)continue;const Se=(ie+K)*k+ve+K;if(1===xe)ue[Se]=0,re[Se]=Ri;else{const Ne=.5-xe;ue[Se]=Ne>0?Ne*Ne:0,re[Se]=Ne<0?Ne*Ne:0}}La(ue,0,0,k,F,k,this.f,this.v,this.z),La(re,K,K,S,M,k,this.f,this.v,this.z);for(let ie=0;ie<N;ie++){const ve=Math.sqrt(ue[ie])-Math.sqrt(re[ie]);U[ie]=Math.round(255-255*(ve/this.radius+this.cutoff))}return X}};const uc=new v.Properties({anchor:new v.DataConstantProperty(v.spec.light.anchor),position:new class{constructor(){this.specification=v.spec.light.position}possiblyEvaluate(g,a){return v.sphericalToCartesian(g.expression.evaluate(a))}interpolate(g,a,u){return{x:v.number(g.x,a.x,u),y:v.number(g.y,a.y,u),z:v.number(g.z,a.z,u)}}},color:new v.DataConstantProperty(v.spec.light.color),intensity:new v.DataConstantProperty(v.spec.light.intensity)}),Ol="-transition";class Ba extends v.Evented{constructor(a){super(),this._transitionable=new v.Transitionable(uc),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,u={}){if(!this._validate(v.validateLight,a,u))for(const p in a){const m=a[p];p.endsWith(Ol)?this._transitionable.setTransition(p.slice(0,-Ol.length),m):this._transitionable.setValue(p,m)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,u,p){return(!p||!1!==p.validate)&&v.emitValidationErrors(this,a.call(v.validateStyle,v.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:v.spec})))}}class hc{constructor(a,u){this.width=a,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,u){const p=a.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(a,u)),this.dashEntry[p]}getDashRanges(a,u,p){const m=[];let x=a.length%2==1?-a[a.length-1]*p:0,D=a[0]*p,S=!0;m.push({left:x,right:D,isDash:S,zeroLength:0===a[0]});let M=a[0];for(let k=1;k<a.length;k++){S=!S;const F=a[k];x=M*p,M+=F,D=M*p,m.push({left:x,right:D,isDash:S,zeroLength:0===F})}return m}addRoundDash(a,u,p){const m=u/2;for(let x=-p;x<=p;x++){const D=this.width*(this.nextRow+p+x);let S=0,M=a[S];for(let k=0;k<this.width;k++){k/M.right>1&&(M=a[++S]);const F=Math.abs(k-M.left),N=Math.abs(k-M.right),U=Math.min(F,N);let X;const ee=x/p*(m+1);if(M.isDash){const K=m-Math.abs(ee);X=Math.sqrt(U*U+K*K)}else X=m-Math.sqrt(U*U+ee*ee);this.data[D+k]=Math.max(0,Math.min(255,X+128))}}}addRegularDash(a){for(let S=a.length-1;S>=0;--S){const M=a[S],k=a[S+1];M.zeroLength?a.splice(S,1):k&&k.isDash===M.isDash&&(k.left=M.left,a.splice(S,1))}const u=a[0],p=a[a.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const m=this.width*this.nextRow;let x=0,D=a[x];for(let S=0;S<this.width;S++){S/D.right>1&&(D=a[++x]);const M=Math.abs(S-D.left),k=Math.abs(S-D.right),F=Math.min(M,k);this.data[m+S]=Math.max(0,Math.min(255,(D.isDash?F:-F)+128))}}addDash(a,u){const p=u?7:0,m=2*p+1;if(this.nextRow+m>this.height)return v.warnOnce("LineAtlas out of space"),null;let x=0;for(let S=0;S<a.length;S++)x+=a[S];if(0!==x){const S=this.width/x,M=this.getDashRanges(a,this.width,S);u?this.addRoundDash(M,S,p):this.addRegularDash(M)}const D={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:x};return this.nextRow+=m,this.dirty=!0,D}bind(a){const u=a.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class Ht{constructor(a,u,p){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=p;const m=this.workerPool.acquire(p);for(let x=0;x<m.length;x++){const D=new Ht.Actor(m[x],u,p);D.name=`Worker ${x}`,this.actors.push(D)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,u,p){v.asyncAll(this.actors,(m,x)=>{m.send(a,u,x)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}}function za(g,a,u){const p=function(m,x){if(m)return u(m);if(x){const D=v.pick(v.extend(x,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);x.vector_layers&&(D.vectorLayers=x.vector_layers,D.vectorLayerIds=D.vectorLayers.map(S=>S.id)),u(null,D)}};return g.url?v.getJSON(a.transformRequest(g.url,yn.Source),p):v.exported.frame(()=>p(null,g))}Ht.Actor=v.Actor;class sa{constructor(a,u,p){this.bounds=v.LngLatBounds.convert(this.validateBounds(a)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(a){return Array.isArray(a)&&4===a.length?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const u=Math.pow(2,a.z),p=Math.floor(v.mercatorXfromLng(this.bounds.getWest())*u),m=Math.floor(v.mercatorYfromLat(this.bounds.getNorth())*u),x=Math.ceil(v.mercatorXfromLng(this.bounds.getEast())*u),D=Math.ceil(v.mercatorYfromLat(this.bounds.getSouth())*u);return a.x>=p&&a.x<x&&a.y>=m&&a.y<D}}class Gn extends v.Evented{constructor(a,u,p,m){if(super(),this.id=a,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,v.extend(this,v.pick(u,["url","scheme","tileSize","promoteId"])),this._options=v.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){this._loaded=!1,this.fire(new v.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=za(this._options,this.map._requestManager,(a,u)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a?this.fire(new v.ErrorEvent(a)):u&&(v.extend(this,u),u.bounds&&(this.tileBounds=new sa(u.bounds,this.minzoom,this.maxzoom)),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return v.extend({},this._options)}loadTile(a,u){const p=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(p,yn.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(D,S){return delete a.request,a.aborted?u(null):D&&404!==D.status?u(D):(S&&S.resourceTiming&&(a.resourceTiming=S.resourceTiming),this.map._refreshExpiredTiles&&S&&a.setExpiryData(S),a.loadVectorData(S,this.map.painter),u(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}m.request.collectResourceTiming=this._collectResourceTiming,a.actor&&"expired"!==a.state?"loading"===a.state?a.reloadCallback=u:a.request=a.actor.send("reloadTile",m,x.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",m,x.bind(this)))}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0)}unloadTile(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class xn extends v.Evented{constructor(a,u,p,m){super(),this.id=a,this.dispatcher=p,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=v.extend({type:"raster"},u),v.extend(this,v.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new v.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=za(this._options,this.map._requestManager,(a,u)=>{this._tileJSONRequest=null,this._loaded=!0,a?this.fire(new v.ErrorEvent(a)):u&&(v.extend(this,u),u.bounds&&(this.tileBounds=new sa(u.bounds,this.minzoom,this.maxzoom)),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return v.extend({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a,u){const p=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.request=po.getImage(this.map._requestManager.transformRequest(p,yn.Tile),(m,x,D)=>{if(delete a.request,a.aborted)a.state="unloaded",u(null);else if(m)a.state="errored",u(m);else if(x){this.map._refreshExpiredTiles&&a.setExpiryData(D);const S=this.map.painter.context,M=S.gl;a.texture=this.map.painter.getTileTexture(x.width),a.texture?a.texture.update(x,{useMipmap:!0}):(a.texture=new ei(S,x,M.RGBA,{useMipmap:!0}),a.texture.bind(M.LINEAR,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),S.extTextureFilterAnisotropic&&M.texParameterf(M.TEXTURE_2D,S.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,S.extTextureFilterAnisotropicMax)),a.state="loaded",u(null)}})}abortTile(a,u){a.request&&(a.request.cancel(),delete a.request),u()}unloadTile(a,u){a.texture&&this.map.painter.saveTileTexture(a.texture),u()}hasTransition(){return!1}}let Re;class ke extends xn{constructor(a,u,p,m){super(a,u,p,m),this.type="raster-dem",this.maxzoom=22,this._options=v.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(a,u){const p=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function m(x,D){x&&(a.state="errored",u(x)),D&&(a.dem=D,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded",u(null))}a.request=po.getImage(this.map._requestManager.transformRequest(p,yn.Tile),function(x,D){if(delete a.request,a.aborted)a.state="unloaded",u(null);else if(x)a.state="errored",u(x);else if(D){this.map._refreshExpiredTiles&&a.setExpiryData(D),delete D.cacheControl,delete D.expires;const S=v.isImageBitmap(D)&&(null==Re&&(Re=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),Re)?D:v.exported.getImageData(D,1),M={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:S,encoding:this.encoding};a.actor&&"expired"!==a.state||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",M,m.bind(this)))}}.bind(this)),a.neighboringTiles=this._getNeighboringTiles(a.tileID)}_getNeighboringTiles(a){const u=a.canonical,p=Math.pow(2,u.z),m=(u.x-1+p)%p,x=0===u.x?a.wrap-1:a.wrap,D=(u.x+1+p)%p,S=u.x+1===p?a.wrap+1:a.wrap,M={};return M[new v.OverscaledTileID(a.overscaledZ,x,u.z,m,u.y).key]={backfilled:!1},M[new v.OverscaledTileID(a.overscaledZ,S,u.z,D,u.y).key]={backfilled:!1},u.y>0&&(M[new v.OverscaledTileID(a.overscaledZ,x,u.z,m,u.y-1).key]={backfilled:!1},M[new v.OverscaledTileID(a.overscaledZ,a.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},M[new v.OverscaledTileID(a.overscaledZ,S,u.z,D,u.y-1).key]={backfilled:!1}),u.y+1<p&&(M[new v.OverscaledTileID(a.overscaledZ,x,u.z,m,u.y+1).key]={backfilled:!1},M[new v.OverscaledTileID(a.overscaledZ,a.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},M[new v.OverscaledTileID(a.overscaledZ,S,u.z,D,u.y+1).key]={backfilled:!1}),M}unloadTile(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&a.actor.send("removeDEMTile",{uid:a.uid,source:this.id})}}class Va extends v.Evented{constructor(a,u,p,m){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(m),this._data=u.data,this._options=v.extend({},u),this._collectResourceTiming=u.collectResourceTiming,void 0!==u.maxzoom&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const x=v.EXTENT/this.tileSize;this.workerOptions=v.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(void 0!==u.buffer?u.buffer:128)*x,tolerance:(void 0!==u.tolerance?u.tolerance:.375)*x,extent:v.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:void 0!==u.clusterMaxZoom?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:v.EXTENT,radius:(u.clusterRadius||50)*x,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}load(){this._updateWorkerData()}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData(),this}updateData(a){return this._updateWorkerData(a),this}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(void 0!==a.clusterRadius&&(this.workerOptions.superclusterOptions.radius=a.clusterRadius),void 0!==a.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=a.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(a,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},u),this}getClusterChildren(a,u){return this.actor.send("geojson.getClusterChildren",{clusterId:a,source:this.id},u),this}getClusterLeaves(a,u,p,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:u,offset:p},m),this}_updateWorkerData(a){const u=v.extend({},this.workerOptions);a?u.dataDiff=a:"string"==typeof this._data?(u.request=this.map._requestManager.transformRequest(v.exported.resolveURL(this._data),yn.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new v.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(p,m)=>{if(this._pendingLoads--,this._removed||m&&m.abandoned)return void this.fire(new v.Event("dataabort",{dataType:"source"}));let x=null;if(m&&m.resourceTiming&&m.resourceTiming[this.id]&&(x=m.resourceTiming[this.id].slice(0)),p)return void this.fire(new v.ErrorEvent(p));const D={dataType:"source"};this._collectResourceTiming&&x&&x.length>0&&v.extend(D,{resourceTiming:x}),this.fire(new v.Event("data",{...D,sourceDataType:"metadata"})),this.fire(new v.Event("data",{...D,sourceDataType:"content"}))})}loaded(){return 0===this._pendingLoads}loadTile(a,u){const p=a.actor?"reloadTile":"loadTile";a.actor=this.actor;const m={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};a.request=this.actor.send(p,m,(x,D)=>(delete a.request,a.unloadVectorData(),a.aborted?u(null):x?u(x):(a.loadVectorData(D,this.map.painter,"reloadTile"===p),u(null))))}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.aborted=!0}unloadTile(a){a.unloadVectorData(),this.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return v.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Xo=v.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Wn extends v.Evented{constructor(a,u,p,m){super(),this.id=a,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=u}load(a,u){this._loaded=!1,this.fire(new v.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=po.getImage(this.map._requestManager.transformRequest(this.url,yn.Image),(p,m)=>{this._request=null,this._loaded=!0,p?this.fire(new v.ErrorEvent(p)):m&&(this.image=m,a&&(this.coordinates=a),u&&u(),this._finishLoading())})}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=a.url,this.load(a.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(a){this.coordinates=a;const u=a.map(v.MercatorCoordinate.fromLngLat);this.tileID=function(m){let x=1/0,D=1/0,S=-1/0,M=-1/0;for(const U of m)x=Math.min(x,U.x),D=Math.min(D,U.y),S=Math.max(S,U.x),M=Math.max(M,U.y);const k=Math.max(S-x,M-D),F=Math.max(0,Math.floor(-Math.log(k)/Math.LN2)),N=Math.pow(2,F);return new v.CanonicalTileID(F,Math.floor((x+S)/2*N),Math.floor((D+M)/2*N))}(u),this.minzoom=this.maxzoom=this.tileID.z;const p=u.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new v.RasterBoundsArray,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,v.EXTENT,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,v.EXTENT),this._boundsArray.emplaceBack(p[2].x,p[2].y,v.EXTENT,v.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new v.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const a=this.map.painter.context,u=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Xo.members)),this.boundsSegments||(this.boundsSegments=v.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ei(a,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const p in this.tiles){const m=this.tiles[p];"loaded"!==m.state&&(m.state="loaded",m.texture=this.texture)}}loadTile(a,u){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},u(null)):(a.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class gs extends Wn{constructor(a,u,p,m){super(a,u,p,m),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const a=this.options;this.urls=[];for(const u of a.urls)this.urls.push(this.map._requestManager.transformRequest(u,yn.Source).url);v.getVideo(this.urls,(u,p)=>{this._loaded=!0,u?this.fire(new v.ErrorEvent(u)):p&&(this.video=p,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){const u=this.video.seekable;a<u.start(0)||a>u.end(0)?this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const a=this.map.painter.context,u=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Xo.members)),this.boundsSegments||(this.boundsSegments=v.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new ei(a,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const p in this.tiles){const m=this.tiles[p];"loaded"!==m.state&&(m.state="loaded",m.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Jo extends Wn{constructor(a,u,p,m){super(a,u,p,m),u.coordinates?Array.isArray(u.coordinates)&&4===u.coordinates.length&&!u.coordinates.some(x=>!Array.isArray(x)||2!==x.length||x.some(D=>"number"!=typeof D))||this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${a}`,null,'missing required property "coordinates"'))),u.animate&&"boolean"!=typeof u.animate&&this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),u.canvas?"string"==typeof u.canvas||u.canvas instanceof HTMLCanvasElement||this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new v.ErrorEvent(new v.ValidationError(`sources.${a}`,null,'missing required property "canvas"'))),this.options=u,this.animate=void 0===u.animate||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new v.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const u=this.map.painter.context,p=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Xo.members)),this.boundsSegments||(this.boundsSegments=v.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ei(u,this.canvas,p.RGBA,{premultiply:!0});for(const m in this.tiles){const x=this.tiles[m];"loaded"!==x.state&&(x.state="loaded",x.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}const Pl={vector:Gn,raster:xn,"raster-dem":ke,geojson:Va,video:gs,image:Wn,canvas:Jo};function bs(g,a){const u=v.create();return v.translate(u,u,[1,1,0]),v.scale(u,u,[.5*g.width,.5*g.height,1]),v.multiply(u,u,g.calculatePosMatrix(a.toUnwrapped()))}function it(g,a,u,p,m,x){const D=function(N,U,X){if(N)for(const ee of N){const K=U[ee];if(K&&K.source===X&&"fill-extrusion"===K.type)return!0}else for(const ee in U){const K=U[ee];if(K.source===X&&"fill-extrusion"===K.type)return!0}return!1}(m&&m.layers,a,g.id),S=x.maxPitchScaleFactor(),M=g.tilesIn(p,S,D);M.sort(Jt);const k=[];for(const N of M)k.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(a,u,g._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,m,x,S,bs(g.transform,N.tileID))});const F=function(N){const U={},X={};for(const ee of N){const K=ee.queryResults,re=ee.wrappedTileID,ue=X[re]=X[re]||{};for(const he in K){const ie=K[he],ve=ue[he]=ue[he]||{},xe=U[he]=U[he]||[];for(const Se of ie)ve[Se.featureIndex]||(ve[Se.featureIndex]=!0,xe.push(Se))}}return U}(k);for(const N in F)F[N].forEach(U=>{const X=U.feature,ee=g.getFeatureState(X.layer["source-layer"],X.id);X.source=X.layer.source,X.layer["source-layer"]&&(X.sourceLayer=X.layer["source-layer"]),X.state=ee});return F}function Jt(g,a){const u=g.tileID,p=a.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}class Gt{constructor(a,u){this.tileID=a,this.uid=v.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){const u=a+this.timeAdded;u<v.exported.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(m,x){const D={};if(!x)return D;for(const S of m){const M=S.layerIds.map(k=>x.getLayer(k)).filter(Boolean);if(0!==M.length){S.layers=M,S.stateDependentLayerIds&&(S.stateDependentLayers=S.stateDependentLayerIds.map(k=>M.filter(F=>F.id===k)[0]));for(const k of M)D[k.id]=S}}return D}(a.buckets,u.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const x=this.buckets[m];if(x instanceof v.SymbolBucket){if(this.hasSymbolBuckets=!0,!p)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const x=this.buckets[m];if(x instanceof v.SymbolBucket&&x.hasRTLText){this.hasRTLText=!0,v.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const m in this.buckets){const x=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(m).queryRadius(x))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new v.CollisionBoxArray}unloadVectorData(){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(const p in this.buckets){const m=this.buckets[p];m.uploadPending()&&m.upload(a)}const u=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ei(a,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ei(a,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,u,p,m,x,D,S,M,k,F){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:x,scale:D,tileSize:this.tileSize,pixelPosMatrix:F,transform:M,params:S,queryPadding:this.queryPadding*k},a,u,p):{}}querySourceFeatures(a,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const m=p.loadVTLayers(),x=u&&u.sourceLayer?u.sourceLayer:"",D=m._geojsonTileLayer||m[x];if(!D)return;const S=v.createFilter(u&&u.filter),{z:M,x:k,y:F}=this.tileID.canonical,N={z:M,x:k,y:F};for(let U=0;U<D.length;U++){const X=D.feature(U);if(S.needGeometry){const re=v.toEvaluationFeature(X,!0);if(!S.filter(new v.EvaluationParameters(this.tileID.overscaledZ),re,this.tileID.canonical))continue}else if(!S.filter(new v.EvaluationParameters(this.tileID.overscaledZ),X))continue;const ee=p.getId(X,x),K=new v.GeoJSONFeature(X,M,k,F,ee);K.tile=N,a.push(K)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const u=this.expirationTime;if(a.cacheControl){const p=v.parseCacheControl(a.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const p=Date.now();let m=!1;if(this.expirationTime>p)m=!1;else if(u)if(this.expirationTime<u)m=!0;else{const x=this.expirationTime-u;x?this.expirationTime=p+Math.max(x,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(a,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(a).length)return;const p=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!u.style.hasLayer(m))continue;const x=this.buckets[m],D=x.layers[0].sourceLayer||"_geojsonTileLayer",S=p[D],M=a[D];if(!S||!M||0===Object.keys(M).length)continue;x.update(M,S,this.imageAtlas&&this.imageAtlas.patternPositions||{});const k=u&&u.style&&u.style.getLayer(m);k&&(this.queryPadding=Math.max(this.queryPadding,k.queryRadius(x)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<v.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=v.exported.now()+a}setDependencies(a,u){const p={};for(const m of u)p[m]=!0;this.dependencies[a]=p}hasDependency(a,u){for(const p of a){const m=this.dependencies[p];if(m)for(const x of u)if(m[x])return!0}return!1}}class gr{constructor(a,u){this.max=a,this.onRemove=u,this.reset()}reset(){for(const a in this.data)for(const u of this.data[a])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(a,u,p){const m=a.wrapped().key;void 0===this.data[m]&&(this.data[m]=[]);const x={value:u,timeout:void 0};if(void 0!==p&&(x.timeout=setTimeout(()=>{this.remove(a,x)},p)),this.data[m].push(x),this.order.push(m),this.order.length>this.max){const D=this._getAndRemoveByKey(this.order[0]);D&&this.onRemove(D)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const u=this.data[a].shift();return u.timeout&&clearTimeout(u.timeout),0===this.data[a].length&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),u.value}getByKey(a){const u=this.data[a];return u?u[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,u){if(!this.has(a))return this;const p=a.wrapped().key,m=void 0===u?0:this.data[p].indexOf(u),x=this.data[p][m];return this.data[p].splice(m,1),x.timeout&&clearTimeout(x.timeout),0===this.data[p].length&&delete this.data[p],this.onRemove(x.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(a){const u=[];for(const p in this.data)for(const m of this.data[p])a(m.value)||u.push(m);for(const p of u)this.remove(p.value.tileID,p)}}class _s{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,u,p){const m=String(u);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][m]=this.stateChanges[a][m]||{},v.extend(this.stateChanges[a][m],p),null===this.deletedStates[a]){this.deletedStates[a]={};for(const x in this.state[a])x!==m&&(this.deletedStates[a][x]=null)}else if(this.deletedStates[a]&&null===this.deletedStates[a][m]){this.deletedStates[a][m]={};for(const x in this.state[a][m])p[x]||(this.deletedStates[a][m][x]=null)}else for(const x in p)this.deletedStates[a]&&this.deletedStates[a][m]&&null===this.deletedStates[a][m][x]&&delete this.deletedStates[a][m][x]}removeFeatureState(a,u,p){if(null===this.deletedStates[a])return;const m=String(u);if(this.deletedStates[a]=this.deletedStates[a]||{},p&&void 0!==u)null!==this.deletedStates[a][m]&&(this.deletedStates[a][m]=this.deletedStates[a][m]||{},this.deletedStates[a][m][p]=null);else if(void 0!==u)if(this.stateChanges[a]&&this.stateChanges[a][m])for(p in this.deletedStates[a][m]={},this.stateChanges[a][m])this.deletedStates[a][m][p]=null;else this.deletedStates[a][m]=null;else this.deletedStates[a]=null}getState(a,u){const p=String(u),m=v.extend({},(this.state[a]||{})[p],(this.stateChanges[a]||{})[p]);if(null===this.deletedStates[a])return{};if(this.deletedStates[a]){const x=this.deletedStates[a][u];if(null===x)return{};for(const D in x)delete m[D]}return m}initializeTileState(a,u){a.setFeatureState(this.state,u)}coalesceChanges(a,u){const p={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const x={};for(const D in this.stateChanges[m])this.state[m][D]||(this.state[m][D]={}),v.extend(this.state[m][D],this.stateChanges[m][D]),x[D]=this.state[m][D];p[m]=x}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const x={};if(null===this.deletedStates[m])for(const D in this.state[m])x[D]={},this.state[m][D]={};else for(const D in this.deletedStates[m]){if(null===this.deletedStates[m][D])this.state[m][D]={};else for(const S of Object.keys(this.deletedStates[m][D]))delete this.state[m][D][S];x[D]=this.state[m][D]}p[m]=p[m]||{},v.extend(p[m],x)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(p).length)for(const m in a)a[m].setFeatureState(p,u)}}class Rt extends v.Evented{constructor(a,u,p){super(),this.id=a,this.dispatcher=p,this.on("data",m=>{"source"===m.dataType&&"metadata"===m.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===m.dataType&&"content"===m.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(m,x,D,S){const M=new Pl[x.type](m,x,D,S);if(M.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${M.id}`);return v.bindAll(["load","abort","unload","serialize","prepare"],M),M}(a,u,p,this),this._tiles={},this._cache=new gr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new _s}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const a in this._tiles){const u=this._tiles[a];if("loaded"!==u.state&&"errored"!==u.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,u){return this._source.loadTile(a,u)}_unloadTile(a){if(this._source.unloadTile)return this._source.unloadTile(a,()=>{})}_abortTile(a){this._source.abortTile&&this._source.abortTile(a,()=>{}),this._source.fire(new v.Event("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(a),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(Ps).map(a=>a.key)}getRenderableIds(a){const u=[];for(const p in this._tiles)this._isIdRenderable(p,a)&&u.push(this._tiles[p]);return a?u.sort((p,m)=>{const x=p.tileID,D=m.tileID,S=new v.pointGeometry(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),M=new v.pointGeometry(D.canonical.x,D.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-D.overscaledZ||M.y-S.y||M.x-S.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(Ps).map(p=>p.key)}hasRenderableParent(a){const u=this.findLoadedParent(a,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(a,u){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(u||!this._tiles[a].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)"errored"!==this._tiles[a].state&&this._reloadTile(a,"reloading")}}_reloadTile(a,u){const p=this._tiles[a];p&&("loading"!==p.state&&(p.state=u),this._loadTile(p,this._tileLoaded.bind(this,p,a,u)))}_tileLoaded(a,u,p,m){if(m)return a.state="errored",void(404!==m.status?this._source.fire(new v.ErrorEvent(m,{tile:a})):this.update(this.transform,this.terrain));a.timeAdded=v.exported.now(),"expired"===p&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(u,a),"raster-dem"===this.getSource().type&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new v.Event("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){const u=this.getRenderableIds();for(let m=0;m<u.length;m++){const x=u[m];if(a.neighboringTiles&&a.neighboringTiles[x]){const D=this.getTileByID(x);p(a,D),p(D,a)}}function p(m,x){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let D=x.tileID.canonical.x-m.tileID.canonical.x;const S=x.tileID.canonical.y-m.tileID.canonical.y,M=Math.pow(2,m.tileID.canonical.z),k=x.tileID.key;0===D&&0===S||Math.abs(S)>1||(Math.abs(D)>1&&(1===Math.abs(D+M)?D+=M:1===Math.abs(D-M)&&(D-=M)),x.dem&&m.dem&&(m.dem.backfillBorder(x.dem,D,S),m.neighboringTiles&&m.neighboringTiles[k]&&(m.neighboringTiles[k].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,u,p,m){for(const x in this._tiles){let D=this._tiles[x];if(m[x]||!D.hasData()||D.tileID.overscaledZ<=u||D.tileID.overscaledZ>p)continue;let S=D.tileID;for(;D&&D.tileID.overscaledZ>u+1;){const k=D.tileID.scaledTo(D.tileID.overscaledZ-1);D=this._tiles[k.key],D&&D.hasData()&&(S=k)}let M=S;for(;M.overscaledZ>u;)if(M=M.scaledTo(M.overscaledZ-1),a[M.key]){m[S.key]=S;break}}}findLoadedParent(a,u){if(a.key in this._loadedParentTiles){const p=this._loadedParentTiles[a.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=a.overscaledZ-1;p>=u;p--){const m=a.scaledTo(p),x=this._getLoadedTile(m);if(x)return x}}_getLoadedTile(a){const u=this._tiles[a.key];return u&&u.hasData()?u:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){const u=Math.ceil(a.width/this._source.tileSize)+1,p=Math.ceil(a.height/this._source.tileSize)+1,m=Math.floor(u*p*5),x="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(x)}handleWrapJump(a){const u=Math.round((a-(void 0===this._prevLng?a:this._prevLng))/360);if(this._prevLng=a,u){const p={};for(const m in this._tiles){const x=this._tiles[m];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+u),p[x.tileID.key]=x}this._tiles=p;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(a,u){if(this.transform=a,this.terrain=u,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(k=>new v.OverscaledTileID(k.canonical.z,k.wrap,k.canonical.z,k.canonical.x,k.canonical.y)):(p=a.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(p=p.filter(k=>this._source.hasTile(k)))):p=[];const m=a.coveringZoomLevel(this._source),x=Math.max(m-Rt.maxOverzooming,this._source.minzoom),D=Math.max(m+Rt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const k={};for(const F of p)if(F.canonical.z>this._source.minzoom){const N=F.scaledTo(F.canonical.z-1);k[N.key]=N;const U=F.scaledTo(Math.max(this._source.minzoom,Math.min(F.canonical.z,5)));k[U.key]=U}p=p.concat(Object.values(k))}const S=this._updateRetainedTiles(p,m);if(Fo(this._source.type)){const k={},F={},N=Object.keys(S);for(const U of N){const X=S[U],ee=this._tiles[U];if(!ee||ee.fadeEndTime&&ee.fadeEndTime<=v.exported.now())continue;const K=this.findLoadedParent(X,x);K&&(this._addTile(K.tileID),k[K.tileID.key]=K.tileID),F[U]=X}this._retainLoadedChildren(F,m,D,S);for(const U in k)S[U]||(this._coveredTiles[U]=!0,S[U]=k[U]);if(u){const U={},X={};for(const ee of p)this._tiles[ee.key].hasData()?U[ee.key]=ee:X[ee.key]=ee;for(const ee in X){const K=X[ee].children(this._source.maxzoom);this._tiles[K[0].key]&&this._tiles[K[1].key]&&this._tiles[K[2].key]&&this._tiles[K[3].key]&&(U[K[0].key]=S[K[0].key]=K[0],U[K[1].key]=S[K[1].key]=K[1],U[K[2].key]=S[K[2].key]=K[2],U[K[3].key]=S[K[3].key]=K[3],delete X[ee])}for(const ee in X){const K=this.findLoadedParent(X[ee],this._source.minzoom);if(K){U[K.tileID.key]=S[K.tileID.key]=K.tileID;for(const re in U)U[re].isChildOf(K.tileID)&&delete U[re]}}for(const ee in this._tiles)U[ee]||(this._coveredTiles[ee]=!0)}}for(const k in S)this._tiles[k].clearFadeHold();const M=v.keysDifference(this._tiles,S);for(const k of M){const F=this._tiles[k];F.hasSymbolBuckets&&!F.holdingForFade()?F.setHoldDuration(this.map._fadeDuration):F.hasSymbolBuckets&&!F.symbolFadeFinished()||this._removeTile(k)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,u){const p={},m={},x=Math.max(u-Rt.maxOverzooming,this._source.minzoom),D=Math.max(u+Rt.maxUnderzooming,this._source.minzoom),S={};for(const M of a){const k=this._addTile(M);p[M.key]=M,k.hasData()||u<this._source.maxzoom&&(S[M.key]=M)}this._retainLoadedChildren(S,u,D,p);for(const M of a){let k=this._tiles[M.key];if(k.hasData())continue;if(u+1>this._source.maxzoom){const N=M.children(this._source.maxzoom)[0],U=this.getTile(N);if(U&&U.hasData()){p[N.key]=N;continue}}else{const N=M.children(this._source.maxzoom);if(p[N[0].key]&&p[N[1].key]&&p[N[2].key]&&p[N[3].key])continue}let F=k.wasRequested();for(let N=M.overscaledZ-1;N>=x;--N){const U=M.scaledTo(N);if(m[U.key]||(m[U.key]=!0,k=this.getTile(U),!k&&F&&(k=this._addTile(U)),k&&(p[U.key]=U,F=k.wasRequested(),k.hasData())))break}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const u=[];let p,m=this._tiles[a].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){p=this._loadedParentTiles[m.key];break}u.push(m.key);const x=m.scaledTo(m.overscaledZ-1);if(p=this._getLoadedTile(x),p)break;m=x}for(const x of u)this._loadedParentTiles[x]=p}}_addTile(a){let u=this._tiles[a.key];if(u)return u;u=this._cache.getAndRemove(a),u&&(this._setTileReloadTimer(a.key,u),u.tileID=a,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,u)));const p=u;return u||(u=new Gt(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,a.key,u.state))),u.uses++,this._tiles[a.key]=u,p||this._source.fire(new v.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(a,u){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const p=u.getExpiryTimeout();p&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},p))}_removeTile(a){const u=this._tiles[a];u&&(u.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),u.uses>0||(u.hasData()&&"reloading"!==u.state?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,u,p){const m=[],x=this.transform;if(!x)return m;const D=p?x.getCameraQueryGeometry(a):a,S=a.map(ee=>x.pointCoordinate(ee,this.terrain)),M=D.map(ee=>x.pointCoordinate(ee,this.terrain)),k=this.getIds();let F=1/0,N=1/0,U=-1/0,X=-1/0;for(const ee of M)F=Math.min(F,ee.x),N=Math.min(N,ee.y),U=Math.max(U,ee.x),X=Math.max(X,ee.y);for(let ee=0;ee<k.length;ee++){const K=this._tiles[k[ee]];if(K.holdingForFade())continue;const re=K.tileID,ue=Math.pow(2,x.zoom-K.tileID.overscaledZ),he=u*K.queryPadding*v.EXTENT/K.tileSize/ue,ie=[re.getTilePoint(new v.MercatorCoordinate(F,N)),re.getTilePoint(new v.MercatorCoordinate(U,X))];if(ie[0].x-he<v.EXTENT&&ie[0].y-he<v.EXTENT&&ie[1].x+he>=0&&ie[1].y+he>=0){const ve=S.map(Se=>re.getTilePoint(Se)),xe=M.map(Se=>re.getTilePoint(Se));m.push({tile:K,tileID:re,queryGeometry:ve,cameraQueryGeometry:xe,scale:ue})}}return m}getVisibleCoordinates(a){const u=this.getRenderableIds(a).map(p=>this._tiles[p].tileID);for(const p of u)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Fo(this._source.type))for(const a in this._tiles){const u=this._tiles[a];if(void 0!==u.fadeEndTime&&u.fadeEndTime>=v.exported.now())return!0}return!1}setFeatureState(a,u,p){this._state.updateState(a=a||"_geojsonTileLayer",u,p)}removeFeatureState(a,u,p){this._state.removeFeatureState(a=a||"_geojsonTileLayer",u,p)}getFeatureState(a,u){return this._state.getState(a=a||"_geojsonTileLayer",u)}setDependencies(a,u,p){const m=this._tiles[a];m&&m.setDependencies(u,p)}reloadTilesForDependencies(a,u){for(const p in this._tiles)this._tiles[p].hasDependency(a,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(a,u))}}function Ps(g,a){const u=Math.abs(2*g.wrap)-+(g.wrap<0),p=Math.abs(2*a.wrap)-+(a.wrap<0);return g.overscaledZ-a.overscaledZ||p-u||a.canonical.y-g.canonical.y||a.canonical.x-g.canonical.x}function Fo(g){return"raster"===g||"image"===g||"video"===g}Rt.maxOverzooming=10,Rt.maxUnderzooming=3;const aa="mapboxgl_preloaded_worker_pool";class br{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<br.workerCount;)this.workers.push(new Worker(_a.workerUrl));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],0===this.numActive()&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[aa]}numActive(){return Object.keys(this.active).length}}const er=Math.floor(v.exported.hardwareConcurrency/2);let zn;function pc(){return zn||(zn=new br),zn}function _r(g,a){const u={};for(const p in g)"ref"!==p&&(u[p]=g[p]);return v.refProperties.forEach(p=>{p in a&&(u[p]=a[p])}),u}function Rl(g){g=g.slice();const a=Object.create(null);for(let u=0;u<g.length;u++)a[g[u].id]=g[u];for(let u=0;u<g.length;u++)"ref"in g[u]&&(g[u]=_r(g[u],a[g[u].ref]));return g}br.workerCount=Math.max(Math.min(er,6),1);const wn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function la(g,a,u){u.push({command:wn.addSource,args:[g,a[g]]})}function fc(g,a,u){a.push({command:wn.removeSource,args:[g]}),u[g]=!0}function Ua(g,a,u,p){fc(g,u,p),la(g,a,u)}function Kc(g,a,u){let p;for(p in g[u])if(Object.prototype.hasOwnProperty.call(g[u],p)&&"data"!==p&&!Yt(g[u][p],a[u][p]))return!1;for(p in a[u])if(Object.prototype.hasOwnProperty.call(a[u],p)&&"data"!==p&&!Yt(g[u][p],a[u][p]))return!1;return!0}function ca(g,a,u,p,m,x){let D;for(D in a=a||{},g=g||{})Object.prototype.hasOwnProperty.call(g,D)&&(Yt(g[D],a[D])||u.push({command:x,args:[p,D,a[D],m]}));for(D in a)Object.prototype.hasOwnProperty.call(a,D)&&!Object.prototype.hasOwnProperty.call(g,D)&&(Yt(g[D],a[D])||u.push({command:x,args:[p,D,a[D],m]}))}function Ha(g){return g.id}function An(g,a){return g[a.id]=a,g}class Nl{constructor(a,u){this.reset(a,u)}reset(a,u){this.points=a||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(1===this.points.length)return this.points[0];a=v.clamp(a,0,1);let u=1,p=this._distances[u];const m=a*this.paddedLength+this.padding;for(;p<m&&u<this._distances.length;)p=this._distances[++u];const x=u-1,D=this._distances[x],S=p-D,M=S>0?(m-D)/S:0;return this.points[x].mult(1-M).add(this.points[u].mult(M))}}function tr(g,a){let u=!0;return"always"===g||"never"!==g&&"never"!==a||(u=!1),u}class to{constructor(a,u,p){const m=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(a/p),this.yCellCount=Math.ceil(u/p);for(let D=0;D<this.xCellCount*this.yCellCount;D++)m.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=u,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,u,p,m,x){this._forEachCell(u,p,m,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(m),this.bboxes.push(x)}insertCircle(a,u,p,m){this._forEachCell(u-m,p-m,u+m,p+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(u),this.circles.push(p),this.circles.push(m)}_insertBoxCell(a,u,p,m,x,D){this.boxCells[x].push(D)}_insertCircleCell(a,u,p,m,x,D){this.circleCells[x].push(D)}_query(a,u,p,m,x,D,S){if(p<0||a>this.width||m<0||u>this.height)return[];const M=[];if(a<=0&&u<=0&&this.width<=p&&this.height<=m){if(x)return[{key:null,x1:a,y1:u,x2:p,y2:m}];for(let k=0;k<this.boxKeys.length;k++)M.push({key:this.boxKeys[k],x1:this.bboxes[4*k],y1:this.bboxes[4*k+1],x2:this.bboxes[4*k+2],y2:this.bboxes[4*k+3]});for(let k=0;k<this.circleKeys.length;k++){const F=this.circles[3*k],N=this.circles[3*k+1],U=this.circles[3*k+2];M.push({key:this.circleKeys[k],x1:F-U,y1:N-U,x2:F+U,y2:N+U})}}else this._forEachCell(a,u,p,m,this._queryCell,M,{hitTest:x,overlapMode:D,seenUids:{box:{},circle:{}}},S);return M}query(a,u,p,m){return this._query(a,u,p,m,!1,null)}hitTest(a,u,p,m,x,D){return this._query(a,u,p,m,!0,x,D).length>0}hitTestCircle(a,u,p,m,x){const D=a-p,S=a+p,M=u-p,k=u+p;if(S<0||D>this.width||k<0||M>this.height)return!1;const F=[];return this._forEachCell(D,M,S,k,this._queryCellCircle,F,{hitTest:!0,overlapMode:m,circle:{x:a,y:u,radius:p},seenUids:{box:{},circle:{}}},x),F.length>0}_queryCell(a,u,p,m,x,D,S,M){const{seenUids:k,hitTest:F,overlapMode:N}=S,U=this.boxCells[x];if(null!==U){const ee=this.bboxes;for(const K of U)if(!k.box[K]){k.box[K]=!0;const re=4*K,ue=this.boxKeys[K];if(a<=ee[re+2]&&u<=ee[re+3]&&p>=ee[re+0]&&m>=ee[re+1]&&(!M||M(ue))&&(!F||!tr(N,ue.overlapMode))&&(D.push({key:ue,x1:ee[re],y1:ee[re+1],x2:ee[re+2],y2:ee[re+3]}),F))return!0}}const X=this.circleCells[x];if(null!==X){const ee=this.circles;for(const K of X)if(!k.circle[K]){k.circle[K]=!0;const re=3*K,ue=this.circleKeys[K];if(this._circleAndRectCollide(ee[re],ee[re+1],ee[re+2],a,u,p,m)&&(!M||M(ue))&&(!F||!tr(N,ue.overlapMode))){const he=ee[re],ie=ee[re+1],ve=ee[re+2];if(D.push({key:ue,x1:he-ve,y1:ie-ve,x2:he+ve,y2:ie+ve}),F)return!0}}}return!1}_queryCellCircle(a,u,p,m,x,D,S,M){const{circle:k,seenUids:F,overlapMode:N}=S,U=this.boxCells[x];if(null!==U){const ee=this.bboxes;for(const K of U)if(!F.box[K]){F.box[K]=!0;const re=4*K,ue=this.boxKeys[K];if(this._circleAndRectCollide(k.x,k.y,k.radius,ee[re+0],ee[re+1],ee[re+2],ee[re+3])&&(!M||M(ue))&&!tr(N,ue.overlapMode))return D.push(!0),!0}}const X=this.circleCells[x];if(null!==X){const ee=this.circles;for(const K of X)if(!F.circle[K]){F.circle[K]=!0;const re=3*K,ue=this.circleKeys[K];if(this._circlesCollide(ee[re],ee[re+1],ee[re+2],k.x,k.y,k.radius)&&(!M||M(ue))&&!tr(N,ue.overlapMode))return D.push(!0),!0}}}_forEachCell(a,u,p,m,x,D,S,M){const k=this._convertToXCellCoord(a),F=this._convertToYCellCoord(u),N=this._convertToXCellCoord(p),U=this._convertToYCellCoord(m);for(let X=k;X<=N;X++)for(let ee=F;ee<=U;ee++)if(x.call(this,a,u,p,m,this.xCellCount*ee+X,D,S,M))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,u,p,m,x,D){const S=m-a,M=x-u,k=p+D;return k*k>S*S+M*M}_circleAndRectCollide(a,u,p,m,x,D,S){const M=(D-m)/2,k=Math.abs(a-(m+M));if(k>M+p)return!1;const F=(S-x)/2,N=Math.abs(u-(x+F));if(N>F+p)return!1;if(k<=M||N<=F)return!0;const U=k-M,X=N-F;return U*U+X*X<=p*p}}function Hi(g,a,u,p,m){const x=v.create();return a?(v.scale(x,x,[1/m,1/m,1]),u||v.rotateZ(x,x,p.angle)):v.multiply(x,p.labelPlaneMatrix,g),x}function Co(g,a,u,p,m){if(a){const x=v.clone(g);return v.scale(x,x,[m,m,1]),u||v.rotateZ(x,x,-p.angle),x}return p.glCoordMatrix}function Do(g,a,u){let p;u?(p=[g.x,g.y,u(g.x,g.y),1],v.transformMat4(p,p,a)):(p=[g.x,g.y,0,1],ye(p,p,a));const m=p[3];return{point:new v.pointGeometry(p[0]/m,p[1]/m),signedDistanceFromCamera:m}}function Rs(g,a){return.5+g/a*.5}function Q(g,a){const u=g[0]/g[3],p=g[1]/g[3];return u>=-a[0]&&u<=a[0]&&p>=-a[1]&&p<=a[1]}function L(g,a,u,p,m,x,D,S,M,k){const F=p?g.textSizeData:g.iconSizeData,N=v.evaluateSizeForZoom(F,u.transform.zoom),U=[256/u.width*2+1,256/u.height*2+1],X=p?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;X.clear();const ee=g.lineVertexArray,K=p?g.text.placedSymbolArray:g.icon.placedSymbolArray,re=u.transform.width/u.transform.height;let ue=!1;for(let he=0;he<K.length;he++){const ie=K.get(he);if(ie.hidden||ie.writingMode===v.WritingMode.vertical&&!ue){ce(ie.numGlyphs,X);continue}let ve;if(ue=!1,k?(ve=[ie.anchorX,ie.anchorY,k(ie.anchorX,ie.anchorY),1],v.transformMat4(ve,ve,a)):(ve=[ie.anchorX,ie.anchorY,0,1],ye(ve,ve,a)),!Q(ve,U)){ce(ie.numGlyphs,X);continue}const xe=Rs(u.transform.cameraToCenterDistance,ve[3]),Se=v.evaluateSizeForFeature(F,N,ie),Ne=D?Se/xe:Se*xe,ze=new v.pointGeometry(ie.anchorX,ie.anchorY),Ge=Do(ze,m,k).point,He={},Ke=te(ie,Ne,!1,S,a,m,x,g.glyphOffsetArray,ee,X,Ge,ze,He,re,M,k);ue=Ke.useVertical,(Ke.notEnoughRoom||ue||Ke.needsFlipping&&te(ie,Ne,!0,S,a,m,x,g.glyphOffsetArray,ee,X,Ge,ze,He,re,M,k).notEnoughRoom)&&ce(ie.numGlyphs,X)}p?g.text.dynamicLayoutVertexBuffer.updateData(X):g.icon.dynamicLayoutVertexBuffer.updateData(X)}function V(g,a,u,p,m,x,D,S,M,k,F,N,U){const X=S.glyphStartIndex+S.numGlyphs,ee=S.lineStartIndex,K=S.lineStartIndex+S.lineLength,re=a.getoffsetX(S.glyphStartIndex),ue=a.getoffsetX(X-1),he=pe(g*re,u,p,m,x,D,S.segment,ee,K,M,k,F,N,U);if(!he)return null;const ie=pe(g*ue,u,p,m,x,D,S.segment,ee,K,M,k,F,N,U);return ie?{first:he,last:ie}:null}function q(g,a,u,p){return g===v.WritingMode.horizontal&&Math.abs(u.y-a.y)>Math.abs(u.x-a.x)*p?{useVertical:!0}:(g===v.WritingMode.vertical?a.y<u.y:a.x>u.x)?{needsFlipping:!0}:null}function te(g,a,u,p,m,x,D,S,M,k,F,N,U,X,ee,K){const re=a/24,ue=g.lineOffsetX*re,he=g.lineOffsetY*re;let ie;if(g.numGlyphs>1){const ve=g.glyphStartIndex+g.numGlyphs,xe=g.lineStartIndex,Se=g.lineStartIndex+g.lineLength,Ne=V(re,S,ue,he,u,F,N,g,M,x,U,ee,K);if(!Ne)return{notEnoughRoom:!0};const ze=Do(Ne.first.point,D,K).point,Ge=Do(Ne.last.point,D,K).point;if(p&&!u){const He=q(g.writingMode,ze,Ge,X);if(He)return He}ie=[Ne.first];for(let He=g.glyphStartIndex+1;He<ve-1;He++)ie.push(pe(re*S.getoffsetX(He),ue,he,u,F,N,g.segment,xe,Se,M,x,U,ee,K));ie.push(Ne.last)}else{if(p&&!u){const xe=Do(N,m,K).point,Se=g.lineStartIndex+g.segment+1,Ne=new v.pointGeometry(M.getx(Se),M.gety(Se)),ze=Do(Ne,m,K),Ge=ze.signedDistanceFromCamera>0?ze.point:le(N,Ne,xe,1,m,K),He=q(g.writingMode,xe,Ge,X);if(He)return He}const ve=pe(re*S.getoffsetX(g.glyphStartIndex),ue,he,u,F,N,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,M,x,U,ee,K);if(!ve)return{notEnoughRoom:!0};ie=[ve]}for(const ve of ie)v.addDynamicAttributes(k,ve.point,ve.angle);return{}}function le(g,a,u,p,m,x){const D=Do(g.add(g.sub(a)._unit()),m,x).point,S=u.sub(D);return u.add(S._mult(p/S.mag()))}function pe(g,a,u,p,m,x,D,S,M,k,F,N,U,X){const ee=p?g-a:g+a;let K=ee>0?1:-1,re=0;p&&(K*=-1,re=Math.PI),K<0&&(re+=Math.PI);let ue=K>0?S+D:S+D+1,he=m,ie=m,ve=0,xe=0;const Se=Math.abs(ee),Ne=[];for(;ve+xe<=Se;){if(ue+=K,ue<S||ue>=M)return null;if(ie=he,Ne.push(he),he=N[ue],void 0===he){const ft=new v.pointGeometry(k.getx(ue),k.gety(ue)),Ot=Do(ft,F,X);if(Ot.signedDistanceFromCamera>0)he=N[ue]=Ot.point;else{const Bt=ue-K;he=le(0===ve?x:new v.pointGeometry(k.getx(Bt),k.gety(Bt)),ft,ie,Se-ve+1,F,X)}}ve+=xe,xe=ie.dist(he)}const ze=(Se-ve)/xe,Ge=he.sub(ie),He=Ge.mult(ze)._add(ie);He._add(Ge._unit()._perp()._mult(u*K));const Ke=re+Math.atan2(he.y-ie.y,he.x-ie.x);return Ne.push(He),{point:He,angle:U?Ke:0,path:Ne}}const de=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ce(g,a){for(let u=0;u<g;u++){const p=a.length;a.resize(p+4),a.float32.set(de,3*p)}}function ye(g,a,u){const p=a[0],m=a[1];return g[0]=u[0]*p+u[4]*m+u[12],g[1]=u[1]*p+u[5]*m+u[13],g[3]=u[3]*p+u[7]*m+u[15],g}const Ie=100;class je{constructor(a,u=new to(a.width+200,a.height+200,25),p=new to(a.width+200,a.height+200,25)){this.transform=a,this.grid=u,this.ignoredGrid=p,this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+Ie,this.screenBottomBoundary=a.height+Ie,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,u,p,m,x,D){const S=this.projectAndGetPerspectiveRatio(m,a.anchorPointX,a.anchorPointY,D),M=p*S.perspectiveRatio,k=a.x1*M+S.point.x,F=a.y1*M+S.point.y,N=a.x2*M+S.point.x,U=a.y2*M+S.point.y;return!this.isInsideGrid(k,F,N,U)||"always"!==u&&this.grid.hitTest(k,F,N,U,u,x)||S.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[k,F,N,U],offscreen:this.isOffscreen(k,F,N,U)}}placeCollisionCircles(a,u,p,m,x,D,S,M,k,F,N,U,X,ee){const K=[],re=new v.pointGeometry(u.anchorX,u.anchorY),ue=Do(re,D,ee),he=Rs(this.transform.cameraToCenterDistance,ue.signedDistanceFromCamera),ie=(F?x/he:x*he)/v.ONE_EM,ve=Do(re,S,ee).point,xe=V(ie,m,u.lineOffsetX*ie,u.lineOffsetY*ie,!1,ve,re,u,p,S,{},!1,ee);let Se=!1,Ne=!1,ze=!0;if(xe){const Ge=.5*U*he+X,He=new v.pointGeometry(-100,-100),Ke=new v.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),ft=new Nl,Ot=xe.first,Bt=xe.last;let mt=[];for(let en=Ot.path.length-1;en>=1;en--)mt.push(Ot.path[en]);for(let en=1;en<Bt.path.length;en++)mt.push(Bt.path[en]);const Cn=2.5*Ge;if(M){const en=mt.map(gn=>Do(gn,M,ee));mt=en.some(gn=>gn.signedDistanceFromCamera<=0)?[]:en.map(gn=>gn.point)}let kn=[];if(mt.length>0){const en=mt[0].clone(),gn=mt[0].clone();for(let Yn=1;Yn<mt.length;Yn++)en.x=Math.min(en.x,mt[Yn].x),en.y=Math.min(en.y,mt[Yn].y),gn.x=Math.max(gn.x,mt[Yn].x),gn.y=Math.max(gn.y,mt[Yn].y);kn=en.x>=He.x&&gn.x<=Ke.x&&en.y>=He.y&&gn.y<=Ke.y?[mt]:gn.x<He.x||en.x>Ke.x||gn.y<He.y||en.y>Ke.y?[]:v.clipLine([mt],He.x,He.y,Ke.x,Ke.y)}for(const en of kn){ft.reset(en,.25*Ge);let gn=0;gn=ft.length<=.5*Ge?1:Math.ceil(ft.paddedLength/Cn)+1;for(let Yn=0;Yn<gn;Yn++){const Dn=Yn/Math.max(gn-1,1),zr=ft.lerp(Dn),Vr=zr.x+Ie,Qn=zr.y+Ie;K.push(Vr,Qn,Ge,0);const Gi=Vr-Ge,bn=Qn-Ge,ts=Vr+Ge,va=Qn+Ge;if(ze=ze&&this.isOffscreen(Gi,bn,ts,va),Ne=Ne||this.isInsideGrid(Gi,bn,ts,va),"always"!==a&&this.grid.hitTestCircle(Vr,Qn,Ge,a,N)&&(Se=!0,!k))return{circles:[],offscreen:!1,collisionDetected:Se}}}}return{circles:!k&&Se||!Ne||he<this.perspectiveRatioCutoff?[]:K,offscreen:ze,collisionDetected:Se}}queryRenderedSymbols(a){if(0===a.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const u=[];let p=1/0,m=1/0,x=-1/0,D=-1/0;for(const F of a){const N=new v.pointGeometry(F.x+Ie,F.y+Ie);p=Math.min(p,N.x),m=Math.min(m,N.y),x=Math.max(x,N.x),D=Math.max(D,N.y),u.push(N)}const S=this.grid.query(p,m,x,D).concat(this.ignoredGrid.query(p,m,x,D)),M={},k={};for(const F of S){const N=F.key;if(void 0===M[N.bucketInstanceId]&&(M[N.bucketInstanceId]={}),M[N.bucketInstanceId][N.featureIndex])continue;const U=[new v.pointGeometry(F.x1,F.y1),new v.pointGeometry(F.x2,F.y1),new v.pointGeometry(F.x2,F.y2),new v.pointGeometry(F.x1,F.y2)];v.polygonIntersectsPolygon(u,U)&&(M[N.bucketInstanceId][N.featureIndex]=!0,void 0===k[N.bucketInstanceId]&&(k[N.bucketInstanceId]=[]),k[N.bucketInstanceId].push(N.featureIndex))}return k}insertCollisionBox(a,u,p,m,x,D){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:x,collisionGroupID:D,overlapMode:u},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,u,p,m,x,D){const S=p?this.ignoredGrid:this.grid,M={bucketInstanceId:m,featureIndex:x,collisionGroupID:D,overlapMode:u};for(let k=0;k<a.length;k+=4)S.insertCircle(M,a[k],a[k+1],a[k+2])}projectAndGetPerspectiveRatio(a,u,p,m){let x;return m?(x=[u,p,m(u,p),1],v.transformMat4(x,x,a)):(x=[u,p,0,1],ye(x,x,a)),{point:new v.pointGeometry((x[0]/x[3]+1)/2*this.transform.width+Ie,(-x[1]/x[3]+1)/2*this.transform.height+Ie),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(a,u,p,m){return p<Ie||a>=this.screenRightBoundary||m<Ie||u>this.screenBottomBoundary}isInsideGrid(a,u,p,m){return p>=0&&a<this.gridRightBoundary&&m>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const a=v.identity([]);return v.translate(a,a,[-100,-100,0]),a}}function Ae(g,a,u){return a*(v.EXTENT/(g.tileSize*Math.pow(2,u-g.tileID.overscaledZ)))}class Tt{constructor(a,u,p,m){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?u:-u))):m&&p?1:0,this.placed=p}isHidden(){return 0===this.opacity&&!this.placed}}class ht{constructor(a,u,p,m,x){this.text=new Tt(a?a.text:null,u,p,x),this.icon=new Tt(a?a.icon:null,u,m,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class pt{constructor(a,u,p){this.text=a,this.icon=u,this.skipFade=p}}class gt{constructor(){this.invProjMatrix=v.create(),this.viewportMatrix=v.create(),this.circles=[]}}class mn{constructor(a,u,p,m,x){this.bucketInstanceId=a,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=m,this.tileID=x}}class ti{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const u=++this.maxGroupID;this.collisionGroups[a]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[a]}}function dn(g,a,u,p,m){const{horizontalAlign:x,verticalAlign:D}=v.getAnchorAlignment(g),S=-(x-.5)*a,M=-(D-.5)*u,k=v.evaluateVariableOffset(g,p);return new v.pointGeometry(S+k[0]*m,M+k[1]*m)}function pn(g,a,u,p,m,x){const{x1:D,x2:S,y1:M,y2:k,anchorPointX:F,anchorPointY:N}=g,U=new v.pointGeometry(a,u);return p&&U._rotate(m?x:-x),{x1:D+U.x,y1:M+U.y,x2:S+U.x,y2:k+U.y,anchorPointX:F,anchorPointY:N}}class qn{constructor(a,u,p,m,x){this.transform=a.clone(),this.terrain=u,this.collisionIndex=new je(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new ti(m),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(a,u,p,m){const x=p.getBucket(u),D=p.latestFeatureIndex;if(!x||!D||u.id!==x.layerIds[0])return;const S=p.collisionBoxArray,M=x.layers[0].layout,k=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),F=p.tileSize/v.EXTENT,N=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),U="map"===M.get("text-pitch-alignment"),X="map"===M.get("text-rotation-alignment"),ee=Ae(p,1,this.transform.zoom),K=Hi(N,U,X,this.transform,ee);let re=null;if(U){const he=Co(N,U,X,this.transform,ee);re=v.multiply([],this.transform.labelPlaneMatrix,he)}this.retainedQueryData[x.bucketInstanceId]=new mn(x.bucketInstanceId,D,x.sourceLayerIndex,x.index,p.tileID);const ue={bucket:x,layout:M,posMatrix:N,textLabelPlaneMatrix:K,labelToScreenMatrix:re,scale:k,textPixelRatio:F,holdingForFade:p.holdingForFade(),collisionBoxArray:S,partiallyEvaluatedTextSize:v.evaluateSizeForZoom(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(m)for(const he of x.sortKeyRanges){const{sortKey:ie,symbolInstanceStart:ve,symbolInstanceEnd:xe}=he;a.push({sortKey:ie,symbolInstanceStart:ve,symbolInstanceEnd:xe,parameters:ue})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:ue})}attemptAnchorPlacement(a,u,p,m,x,D,S,M,k,F,N,U,X,ee,K,re){const ue=[U.textOffset0,U.textOffset1],he=dn(a,p,m,ue,x),ie=this.collisionIndex.placeCollisionBox(pn(u,he.x,he.y,D,S,this.transform.angle),N,M,k,F.predicate,re);if((!K||0!==this.collisionIndex.placeCollisionBox(pn(K,he.x,he.y,D,S,this.transform.angle),N,M,k,F.predicate,re).box.length)&&ie.box.length>0){let ve;if(this.prevPlacement&&this.prevPlacement.variableOffsets[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID].text&&(ve=this.prevPlacement.variableOffsets[U.crossTileID].anchor),0===U.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[U.crossTileID]={textOffset:ue,width:p,height:m,anchor:a,textBoxScale:x,prevAnchor:ve},this.markUsedJustification(X,a,U,ee),X.allowVerticalPlacement&&(this.markUsedOrientation(X,ee,U),this.placedOrientations[U.crossTileID]=ee),{shift:he,placedGlyphBoxes:ie}}}placeLayerBucketPart(a,u,p){const{bucket:m,layout:x,posMatrix:D,textLabelPlaneMatrix:S,labelToScreenMatrix:M,textPixelRatio:k,holdingForFade:F,collisionBoxArray:N,partiallyEvaluatedTextSize:U,collisionGroup:X}=a.parameters,ee=x.get("text-optional"),K=x.get("icon-optional"),re=v.getOverlapMode(x,"text-overlap","text-allow-overlap"),ue="always"===re,he=v.getOverlapMode(x,"icon-overlap","icon-allow-overlap"),ie="always"===he,ve="map"===x.get("text-rotation-alignment"),xe="map"===x.get("text-pitch-alignment"),Se="none"!==x.get("icon-text-fit"),Ne="viewport-y"===x.get("symbol-z-order"),ze=ue&&(ie||!m.hasIconData()||K),Ge=ie&&(ue||!m.hasTextData()||ee);!m.collisionArrays&&N&&m.deserializeCollisionBoxes(N);const He=(Ke,ft)=>{if(u[Ke.crossTileID])return;if(F)return void(this.placements[Ke.crossTileID]=new pt(!1,!1,!1));let Ot=!1,Bt=!1,mt=!0,Cn=null,kn={box:null,offscreen:null},en={box:null,offscreen:null},gn=null,Yn=null,Dn=null,zr=0,Vr=0,Qn=0;ft.textFeatureIndex?zr=ft.textFeatureIndex:Ke.useRuntimeCollisionCircles&&(zr=Ke.featureIndex),ft.verticalTextFeatureIndex&&(Vr=ft.verticalTextFeatureIndex);const Gi=this.retainedQueryData[m.bucketInstanceId].tileID,bn=this.terrain?(Li,fi)=>this.terrain.getElevation(Gi,Li,fi):null;for(const Li of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const fi=ft[Li];fi&&(fi.elevation=bn?bn(fi.anchorPointX,fi.anchorPointY):0)}const ts=ft.textBox;if(ts){const Li=Pn=>{let ro=v.WritingMode.horizontal;if(m.allowVerticalPlacement&&!Pn&&this.prevPlacement){const so=this.prevPlacement.placedOrientations[Ke.crossTileID];so&&(this.placedOrientations[Ke.crossTileID]=so,ro=so,this.markUsedOrientation(m,ro,Ke))}return ro},fi=(Pn,ro)=>{if(m.allowVerticalPlacement&&Ke.numVerticalGlyphVertices>0&&ft.verticalTextBox){for(const so of m.writingModes)if(so===v.WritingMode.vertical?(kn=ro(),en=kn):kn=Pn(),kn&&kn.box&&kn.box.length)break}else kn=Pn()};if(x.get("text-variable-anchor")){let Pn=x.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ke.crossTileID]){const oi=this.prevPlacement.variableOffsets[Ke.crossTileID];Pn.indexOf(oi.anchor)>0&&(Pn=Pn.filter(Ur=>Ur!==oi.anchor),Pn.unshift(oi.anchor))}const ro=(oi,Ur,Hr)=>{const ju=oi.x2-oi.x1,jr=oi.y2-oi.y1,ya=Ke.textBoxScale,Ed=Se&&"never"===he?Ur:null;let Sd={box:[],offscreen:!1};const $u="never"!==re?2*Pn.length:Pn.length;for(let ao=0;ao<$u;++ao){const xa=this.attemptAnchorPlacement(Pn[ao%Pn.length],oi,ju,jr,ya,ve,xe,k,D,X,ao>=Pn.length?re:"never",Ke,m,Hr,Ed,bn);if(xa&&(Sd=xa.placedGlyphBoxes,Sd&&Sd.box&&Sd.box.length)){Ot=!0,Cn=xa.shift;break}}return Sd};fi(()=>ro(ts,ft.iconBox,v.WritingMode.horizontal),()=>{const oi=ft.verticalTextBox;return m.allowVerticalPlacement&&!(kn&&kn.box&&kn.box.length)&&Ke.numVerticalGlyphVertices>0&&oi?ro(oi,ft.verticalIconBox,v.WritingMode.vertical):{box:null,offscreen:null}}),kn&&(Ot=kn.box,mt=kn.offscreen);const so=Li(kn&&kn.box);if(!Ot&&this.prevPlacement){const oi=this.prevPlacement.variableOffsets[Ke.crossTileID];oi&&(this.variableOffsets[Ke.crossTileID]=oi,this.markUsedJustification(m,oi.anchor,Ke,so))}}else{const Pn=(ro,so)=>{const oi=this.collisionIndex.placeCollisionBox(ro,re,k,D,X.predicate,bn);return oi&&oi.box&&oi.box.length&&(this.markUsedOrientation(m,so,Ke),this.placedOrientations[Ke.crossTileID]=so),oi};fi(()=>Pn(ts,v.WritingMode.horizontal),()=>{const ro=ft.verticalTextBox;return m.allowVerticalPlacement&&Ke.numVerticalGlyphVertices>0&&ro?Pn(ro,v.WritingMode.vertical):{box:null,offscreen:null}}),Li(kn&&kn.box&&kn.box.length)}}if(gn=kn,Ot=gn&&gn.box&&gn.box.length>0,mt=gn&&gn.offscreen,Ke.useRuntimeCollisionCircles){const Li=m.text.placedSymbolArray.get(Ke.centerJustifiedTextSymbolIndex),fi=v.evaluateSizeForFeature(m.textSizeData,U,Li),Pn=x.get("text-padding");Yn=this.collisionIndex.placeCollisionCircles(re,Li,m.lineVertexArray,m.glyphOffsetArray,fi,D,S,M,p,xe,X.predicate,Ke.collisionCircleDiameter,Pn,bn),Yn.circles.length&&Yn.collisionDetected&&!p&&v.warnOnce("Collisions detected, but collision boxes are not shown"),Ot=ue||Yn.circles.length>0&&!Yn.collisionDetected,mt=mt&&Yn.offscreen}if(ft.iconFeatureIndex&&(Qn=ft.iconFeatureIndex),ft.iconBox){const Li=fi=>{const Pn=Se&&Cn?pn(fi,Cn.x,Cn.y,ve,xe,this.transform.angle):fi;return this.collisionIndex.placeCollisionBox(Pn,he,k,D,X.predicate,bn)};en&&en.box&&en.box.length&&ft.verticalIconBox?(Dn=Li(ft.verticalIconBox),Bt=Dn.box.length>0):(Dn=Li(ft.iconBox),Bt=Dn.box.length>0),mt=mt&&Dn.offscreen}const va=ee||0===Ke.numHorizontalGlyphVertices&&0===Ke.numVerticalGlyphVertices,Dd=K||0===Ke.numIconVertices;if(va||Dd?Dd?va||(Bt=Bt&&Ot):Ot=Bt&&Ot:Bt=Ot=Bt&&Ot,Ot&&gn&&gn.box&&this.collisionIndex.insertCollisionBox(gn.box,re,x.get("text-ignore-placement"),m.bucketInstanceId,en&&en.box&&Vr?Vr:zr,X.ID),Bt&&Dn&&this.collisionIndex.insertCollisionBox(Dn.box,he,x.get("icon-ignore-placement"),m.bucketInstanceId,Qn,X.ID),Yn&&(Ot&&this.collisionIndex.insertCollisionCircles(Yn.circles,re,x.get("text-ignore-placement"),m.bucketInstanceId,zr,X.ID),p)){const Li=m.bucketInstanceId;let fi=this.collisionCircleArrays[Li];void 0===fi&&(fi=this.collisionCircleArrays[Li]=new gt);for(let Pn=0;Pn<Yn.circles.length;Pn+=4)fi.circles.push(Yn.circles[Pn+0]),fi.circles.push(Yn.circles[Pn+1]),fi.circles.push(Yn.circles[Pn+2]),fi.circles.push(Yn.collisionDetected?1:0)}if(0===Ke.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===m.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ke.crossTileID]=new pt(Ot||ze,Bt||Ge,mt||m.justReloaded),u[Ke.crossTileID]=!0};if(Ne){if(0!==a.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const Ke=m.getSortedSymbolIndexes(this.transform.angle);for(let ft=Ke.length-1;ft>=0;--ft){const Ot=Ke[ft];He(m.symbolInstances.get(Ot),m.collisionArrays[Ot])}}else for(let Ke=a.symbolInstanceStart;Ke<a.symbolInstanceEnd;Ke++)He(m.symbolInstances.get(Ke),m.collisionArrays[Ke]);if(p&&m.bucketInstanceId in this.collisionCircleArrays){const Ke=this.collisionCircleArrays[m.bucketInstanceId];v.invert(Ke.invProjMatrix,D),Ke.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(a,u,p,m){let x;x=m===v.WritingMode.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[v.getAnchorJustification(u)];const D=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const S of D)S>=0&&(a.text.placedSymbolArray.get(S).crossTileID=x>=0&&S!==x?0:p.crossTileID)}markUsedOrientation(a,u,p){const m=u===v.WritingMode.horizontal||u===v.WritingMode.horizontalOnly?u:0,x=u===v.WritingMode.vertical?u:0,D=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const S of D)a.text.placedSymbolArray.get(S).placedOrientation=m;p.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const m=u?u.symbolFadeChange(a):1,x=u?u.opacities:{},D=u?u.variableOffsets:{},S=u?u.placedOrientations:{};for(const M in this.placements){const k=this.placements[M],F=x[M];F?(this.opacities[M]=new ht(F,m,k.text,k.icon),p=p||k.text!==F.text.placed||k.icon!==F.icon.placed):(this.opacities[M]=new ht(null,m,k.text,k.icon,k.skipFade),p=p||k.text||k.icon)}for(const M in x){const k=x[M];if(!this.opacities[M]){const F=new ht(k,m,!1,!1);F.isHidden()||(this.opacities[M]=F,p=p||k.text.placed||k.icon.placed)}}for(const M in D)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=D[M]);for(const M in S)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=S[M]);if(u&&void 0===u.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=a:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:a)}updateLayerOpacities(a,u){const p={};for(const m of u){const x=m.getBucket(a);x&&m.latestFeatureIndex&&a.id===x.layerIds[0]&&this.updateBucketOpacities(x,p,m.collisionBoxArray)}}updateBucketOpacities(a,u,p){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const m=a.layers[0].layout,x=new ht(null,0,!1,!1,!0),D=m.get("text-allow-overlap"),S=m.get("icon-allow-overlap"),M=m.get("text-variable-anchor"),k="map"===m.get("text-rotation-alignment"),F="map"===m.get("text-pitch-alignment"),N="none"!==m.get("icon-text-fit"),U=new ht(null,0,D&&(S||!a.hasIconData()||m.get("icon-optional")),S&&(D||!a.hasTextData()||m.get("text-optional")),!0);!a.collisionArrays&&p&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(p);const X=(ee,K,re)=>{for(let ue=0;ue<K/4;ue++)ee.opacityVertexArray.emplaceBack(re);ee.hasVisibleVertices=ee.hasVisibleVertices||re!==da};for(let ee=0;ee<a.symbolInstances.length;ee++){const K=a.symbolInstances.get(ee),{numHorizontalGlyphVertices:re,numVerticalGlyphVertices:ue,crossTileID:he}=K;let ie=this.opacities[he];u[he]?ie=x:ie||(ie=U,this.opacities[he]=ie),u[he]=!0;const ve=K.numIconVertices>0,xe=this.placedOrientations[K.crossTileID],Se=xe===v.WritingMode.vertical,Ne=xe===v.WritingMode.horizontal||xe===v.WritingMode.horizontalOnly;if(re>0||ue>0){const ze=Ga(ie.text);X(a.text,re,Se?da:ze),X(a.text,ue,Ne?da:ze);const Ge=ie.text.isHidden();[K.rightJustifiedTextSymbolIndex,K.centerJustifiedTextSymbolIndex,K.leftJustifiedTextSymbolIndex].forEach(ft=>{ft>=0&&(a.text.placedSymbolArray.get(ft).hidden=Ge||Se?1:0)}),K.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(K.verticalPlacedTextSymbolIndex).hidden=Ge||Ne?1:0);const He=this.variableOffsets[K.crossTileID];He&&this.markUsedJustification(a,He.anchor,K,xe);const Ke=this.placedOrientations[K.crossTileID];Ke&&(this.markUsedJustification(a,"left",K,Ke),this.markUsedOrientation(a,Ke,K))}if(ve){const ze=Ga(ie.icon),Ge=!(N&&K.verticalPlacedIconSymbolIndex&&Se);K.placedIconSymbolIndex>=0&&(X(a.icon,K.numIconVertices,Ge?ze:da),a.icon.placedSymbolArray.get(K.placedIconSymbolIndex).hidden=ie.icon.isHidden()),K.verticalPlacedIconSymbolIndex>=0&&(X(a.icon,K.numVerticalIconVertices,Ge?da:ze),a.icon.placedSymbolArray.get(K.verticalPlacedIconSymbolIndex).hidden=ie.icon.isHidden())}if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const ze=a.collisionArrays[ee];if(ze){let Ge=new v.pointGeometry(0,0);if(ze.textBox||ze.verticalTextBox){let Ke=!0;if(M){const ft=this.variableOffsets[he];ft?(Ge=dn(ft.anchor,ft.width,ft.height,ft.textOffset,ft.textBoxScale),k&&Ge._rotate(F?this.transform.angle:-this.transform.angle)):Ke=!1}ze.textBox&&ui(a.textCollisionBox.collisionVertexArray,ie.text.placed,!Ke||Se,Ge.x,Ge.y),ze.verticalTextBox&&ui(a.textCollisionBox.collisionVertexArray,ie.text.placed,!Ke||Ne,Ge.x,Ge.y)}const He=Boolean(!Ne&&ze.verticalIconBox);ze.iconBox&&ui(a.iconCollisionBox.collisionVertexArray,ie.icon.placed,He,N?Ge.x:0,N?Ge.y:0),ze.verticalIconBox&&ui(a.iconCollisionBox.collisionVertexArray,ie.icon.placed,!He,N?Ge.x:0,N?Ge.y:0)}}}if(a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);if(a.bucketInstanceId in this.collisionCircleArrays){const ee=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=ee.invProjMatrix,a.placementViewportMatrix=ee.viewportMatrix,a.collisionCircleArray=ee.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return 0===this.fadeDuration?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>a}setStale(){this.stale=!0}}function ui(g,a,u,p,m){g.emplaceBack(a?1:0,u?1:0,p||0,m||0),g.emplaceBack(a?1:0,u?1:0,p||0,m||0),g.emplaceBack(a?1:0,u?1:0,p||0,m||0),g.emplaceBack(a?1:0,u?1:0,p||0,m||0)}const fo=Math.pow(2,25),Ni=Math.pow(2,24),ja=Math.pow(2,17),Kh=Math.pow(2,16),Yh=Math.pow(2,9),$a=Math.pow(2,8),Yc=Math.pow(2,1);function Ga(g){if(0===g.opacity&&!g.placed)return 0;if(1===g.opacity&&g.placed)return 4294967295;const a=g.placed?1:0,u=Math.floor(127*g.opacity);return u*fo+a*Ni+u*ja+a*Kh+u*Yh+a*$a+u*Yc+a}const da=0;class Qc{constructor(a){this._sortAcrossTiles="viewport-y"!==a.layout.get("symbol-z-order")&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,u,p,m,x){const D=this._bucketParts;for(;this._currentTileIndex<a.length;)if(u.getBucketParts(D,m,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,D.sort((S,M)=>S.sortKey-M.sortKey));this._currentPartIndex<D.length;)if(u.placeLayerBucketPart(D[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,x())return!0;return!1}}class xi{constructor(a,u,p,m,x,D,S,M){this.placement=new qn(a,u,D,S,M),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(a,u,p){const m=v.exported.now(),x=()=>{const D=v.exported.now()-m;return!this._forceFullPlacement&&D>2};for(;this._currentPlacementIndex>=0;){const D=u[a[this._currentPlacementIndex]],S=this.placement.collisionIndex.transform.zoom;if("symbol"===D.type&&(!D.minzoom||D.minzoom<=S)&&(!D.maxzoom||D.maxzoom>S)){if(this._inProgressLayer||(this._inProgressLayer=new Qc(D)),this._inProgressLayer.continuePlacement(p[D.source],this.placement,this._showCollisionBoxes,D,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const Qr=512/v.EXTENT/2;class fu{constructor(a,u,p){this.tileID=a,this.bucketInstanceId=p,this._symbolsByKey={};const m=new Map;for(let x=0;x<u.length;x++){const D=u.get(x),S=D.key,M=m.get(S);M?M.push(D):m.set(S,[D])}for(const[x,D]of m){const S={positions:D.map(M=>({x:Math.floor(M.anchorX*Qr),y:Math.floor(M.anchorY*Qr)})),crossTileIDs:D.map(M=>M.crossTileID)};if(S.positions.length>128){const M=new v.KDBush(S.positions,k=>k.x,k=>k.y,16,Uint16Array);delete M.points,delete S.positions,S.index=M}this._symbolsByKey[x]=S}}getScaledCoordinates(a,u){const{x:p,y:m,z:x}=this.tileID.canonical,{x:D,y:S,z:M}=u.canonical,k=Qr/Math.pow(2,M-x),F=(S*v.EXTENT+a.anchorY)*k,N=m*v.EXTENT*Qr;return{x:Math.floor((D*v.EXTENT+a.anchorX)*k-p*v.EXTENT*Qr),y:Math.floor(F-N)}}findMatches(a,u,p){const m=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let x=0;x<a.length;x++){const D=a.get(x);if(D.crossTileID)continue;const S=this._symbolsByKey[D.key];if(!S)continue;const M=this.getScaledCoordinates(D,u);if(S.index){const k=S.index.range(M.x-m,M.y-m,M.x+m,M.y+m).sort();for(const F of k){const N=S.crossTileIDs[F];if(!p[N]){p[N]=!0,D.crossTileID=N;break}}}else if(S.positions)for(let k=0;k<S.positions.length;k++){const F=S.positions[k],N=S.crossTileIDs[k];if(Math.abs(F.x-M.x)<=m&&Math.abs(F.y-M.y)<=m&&!p[N]){p[N]=!0,D.crossTileID=N;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class Fl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Vn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const u=Math.round((a-this.lng)/360);if(0!==u)for(const p in this.indexes){const m=this.indexes[p],x={};for(const D in m){const S=m[D];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+u),x[S.tileID.key]=S}this.indexes[p]=x}this.lng=a}addBucket(a,u,p){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let x=0;x<u.symbolInstances.length;x++)u.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const m=this.usedCrossTileIDs[a.overscaledZ];for(const x in this.indexes){const D=this.indexes[x];if(Number(x)>a.overscaledZ)for(const S in D){const M=D[S];M.tileID.isChildOf(a)&&M.findMatches(u.symbolInstances,a,m)}else{const S=D[a.scaledTo(Number(x)).key];S&&S.findMatches(u.symbolInstances,a,m)}}for(let x=0;x<u.symbolInstances.length;x++){const D=u.symbolInstances.get(x);D.crossTileID||(D.crossTileID=p.generate(),m[D.crossTileID]=!0)}return void 0===this.indexes[a.overscaledZ]&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new fu(a,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(a,u){for(const p of u.getCrossTileIDsLists())for(const m of p)delete this.usedCrossTileIDs[a][m]}removeStaleBuckets(a){let u=!1;for(const p in this.indexes){const m=this.indexes[p];for(const x in m)a[m[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,m[x]),delete m[x],u=!0)}return u}}class ai{constructor(){this.layerIndexes={},this.crossTileIDs=new Fl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,u,p){let m=this.layerIndexes[a.id];void 0===m&&(m=this.layerIndexes[a.id]=new Vn);let x=!1;const D={};m.handleWrapJump(p);for(const S of u){const M=S.getBucket(a);M&&a.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(S.tileID,M,this.crossTileIDs)&&(x=!0),D[M.bucketInstanceId]=!0)}return m.removeStaleBuckets(D)&&(x=!0),x}pruneUnusedLayers(a){const u={};a.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}const Fn=(g,a)=>v.emitValidationErrors(g,a&&a.filter(u=>"source.canvas"!==u.identifier)),Xc=v.pick(wn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Qh=v.pick(wn,["setCenter","setZoom","setBearing","setPitch"]),Nt=function(){const g={},a=v.spec.$version;for(const u in v.spec.$root){const p=v.spec.$root[u];if(p.required){let m=null;m="version"===u?a:"array"===p.type?[]:{},null!=m&&(g[u]=m)}}return g}();class It extends v.Evented{constructor(a,u={}){super(),this.map=a,this.dispatcher=new Ht(pc(),this,a._getMapId()),this.imageManager=new Pt,this.imageManager.setEventedParent(this),this.glyphManager=new cn(a._requestManager,u.localIdeographFontFamily),this.lineAtlas=new hc(256,512),this.crossTileSymbolIndex=new ai,this._spritesImagesIds={},this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new v.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",v.getReferrer());const p=this;this._rtlTextPluginCallback=It.registerForPluginStateChange(m=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:m.pluginStatus,pluginURL:m.pluginURL},(x,D)=>{if(v.triggerPluginCompletionEvent(x),D&&D.every(S=>S))for(const S in p.sourceCaches)p.sourceCaches[S].reload()})}),this.on("data",m=>{if("source"!==m.dataType||"metadata"!==m.sourceDataType)return;const x=this.sourceCaches[m.sourceId];if(!x)return;const D=x.getSource();if(D&&D.vectorLayerIds)for(const S in this._layers){const M=this._layers[S];M.source===D.id&&this._validateLayer(M)}})}loadURL(a,u={},p){this.fire(new v.Event("dataloading",{dataType:"style"})),u.validate="boolean"!=typeof u.validate||u.validate;const m=this.map._requestManager.transformRequest(a,yn.Style);this._request=v.getJSON(m,(x,D)=>{this._request=null,x?this.fire(new v.ErrorEvent(x)):D&&this._load(D,u,p)})}loadJSON(a,u={},p){this.fire(new v.Event("dataloading",{dataType:"style"})),this._request=v.exported.frame(()=>{this._request=null,u.validate=!1!==u.validate,this._load(a,u,p)})}loadEmpty(){this.fire(new v.Event("dataloading",{dataType:"style"})),this._load(Nt,{validate:!1})}_load(a,u,p){const m=u.transformStyle?u.transformStyle(p,a):a;if(u.validate&&Fn(this,v.validateStyle(m)))return;this._loaded=!0,this.stylesheet=m;for(const D in m.sources)this.addSource(D,m.sources[D],{validate:!1});m.sprite?this._loadSprite(m.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(m.glyphs);const x=Rl(this.stylesheet.layers);this._order=x.map(D=>D.id),this._layers={},this._serializedLayers={};for(let D of x)D=v.createStyleLayer(D),D.setEventedParent(this,{layer:{id:D.id}}),this._layers[D.id]=D,this._serializedLayers[D.id]=D.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ba(this.stylesheet.light),this.map.setTerrain(this.stylesheet.terrain),this.fire(new v.Event("data",{dataType:"style"})),this.fire(new v.Event("style.load"))}_loadSprite(a,u=!1,p){this.imageManager.setLoaded(!1),this._spriteRequest=function(m,x,D,S){const M=ms(m),k=D>1?"@2x":"";let F;const N=[],U=[],X={},ee={};for(const{id:re,url:ue}of M){const he=N.push(v.getJSON(x.transformRequest(x.normalizeSpriteURL(ue,k,".json"),yn.SpriteJSON),(ve,xe)=>{N.splice(he,1),F||(F=ve,X[re]=xe,K())})),ie=U.push(po.getImage(x.transformRequest(x.normalizeSpriteURL(ue,k,".png"),yn.SpriteImage),(ve,xe)=>{U.splice(ie,1),F||(F=ve,ee[re]=xe,K())}))}function K(){const re=Object.values(X).length,ue=Object.values(ee).length;if(F)S(F);else if(M.length===re&&re===ue){const he={};for(const ie in X){he[ie]={};const ve=v.exported.getImageCanvasContext(ee[ie]),xe=X[ie];for(const Se in xe){const{width:Ne,height:ze,x:Ge,y:He,sdf:Ke,pixelRatio:ft,stretchX:Ot,stretchY:Bt,content:mt}=xe[Se];he[ie][Se]={data:null,pixelRatio:ft,sdf:Ke,stretchX:Ot,stretchY:Bt,content:mt,spriteData:{width:Ne,height:ze,x:Ge,y:He,context:ve}}}}S(null,he)}}return{cancel(){if(N.length)for(const re of N)re.cancel(),N.splice(N.indexOf(re),1);if(U.length)for(const re of U)re.cancel(),U.splice(U.indexOf(re),1)}}}(a,this.map._requestManager,this.map.getPixelRatio(),(m,x)=>{if(this._spriteRequest=null,m)this.fire(new v.ErrorEvent(m));else if(x)for(const D in x){this._spritesImagesIds[D]=[];const S=this._spritesImagesIds[D]?this._spritesImagesIds[D].filter(M=>!(M in x)):[];for(const M of S)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in x[D]){const k="default"===D?M:`${D}:${M}`;this._spritesImagesIds[D].push(k),k in this.imageManager.images?this.imageManager.updateImage(k,x[D][M],!1):this.imageManager.addImage(k,x[D][M]),u&&(this._changedImages[k]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new v.Event("data",{dataType:"style"})),p&&p(m)})}_unloadSprite(){for(const a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new v.Event("data",{dataType:"style"}))}_validateLayer(a){const u=this.sourceCaches[a.source];if(!u)return;const p=a.sourceLayer;if(!p)return;const m=u.getSource();("geojson"===m.type||m.vectorLayerIds&&-1===m.vectorLayerIds.indexOf(p))&&this.fire(new v.ErrorEvent(new Error(`Source layer "${p}" does not exist on source "${m.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(a){const u=[];for(const p of a){const m=this._layers[p];"custom"!==m.type&&u.push(m.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;const u=this._changed;if(this._changed){const m=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(m.length||x.length)&&this._updateWorkerLayers(m,x);for(const D in this._updatedSources){const S=this._updatedSources[D];if("reload"===S)this._reloadSource(D);else{if("clear"!==S)throw new Error(`Invalid action ${S}`);this._clearSource(D)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const D in this._updatedPaintProps)this._layers[D].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}const p={};for(const m in this.sourceCaches){const x=this.sourceCaches[m];p[m]=x.used,x.used=!1}for(const m of this._order){const x=this._layers[m];x.recalculate(a,this._availableImages),!x.isHidden(a.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const m in p){const x=this.sourceCaches[m];p[m]!==x.used&&x.fire(new v.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(a),this.z=a.zoom,u&&this.fire(new v.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,u={}){if(this._checkLoaded(),a=u.transformStyle?u.transformStyle(this.serialize(),a):a,Fn(this,v.validateStyle(a)))return!1;(a=v.clone$1(a)).layers=Rl(a.layers);const p=function(x,D){if(!x)return[{command:wn.setStyle,args:[D]}];let S=[];try{if(!Yt(x.version,D.version))return[{command:wn.setStyle,args:[D]}];Yt(x.center,D.center)||S.push({command:wn.setCenter,args:[D.center]}),Yt(x.zoom,D.zoom)||S.push({command:wn.setZoom,args:[D.zoom]}),Yt(x.bearing,D.bearing)||S.push({command:wn.setBearing,args:[D.bearing]}),Yt(x.pitch,D.pitch)||S.push({command:wn.setPitch,args:[D.pitch]}),Yt(x.sprite,D.sprite)||S.push({command:wn.setSprite,args:[D.sprite]}),Yt(x.glyphs,D.glyphs)||S.push({command:wn.setGlyphs,args:[D.glyphs]}),Yt(x.transition,D.transition)||S.push({command:wn.setTransition,args:[D.transition]}),Yt(x.light,D.light)||S.push({command:wn.setLight,args:[D.light]});const M={},k=[];!function(N,U,X,ee){let K;for(K in U=U||{},N=N||{})Object.prototype.hasOwnProperty.call(N,K)&&(Object.prototype.hasOwnProperty.call(U,K)||fc(K,X,ee));for(K in U)Object.prototype.hasOwnProperty.call(U,K)&&(Object.prototype.hasOwnProperty.call(N,K)?Yt(N[K],U[K])||("geojson"===N[K].type&&"geojson"===U[K].type&&Kc(N,U,K)?X.push({command:wn.setGeoJSONSourceData,args:[K,U[K].data]}):Ua(K,U,X,ee)):la(K,U,X))}(x.sources,D.sources,k,M);const F=[];x.layers&&x.layers.forEach(N=>{M[N.source]?S.push({command:wn.removeLayer,args:[N.id]}):F.push(N)}),S=S.concat(k),function(N,U,X){U=U||[];const ee=(N=N||[]).map(Ha),K=U.map(Ha),re=N.reduce(An,{}),ue=U.reduce(An,{}),he=ee.slice(),ie=Object.create(null);let ve,xe,Se,Ne,ze,Ge,He;for(ve=0,xe=0;ve<ee.length;ve++)Se=ee[ve],Object.prototype.hasOwnProperty.call(ue,Se)?xe++:(X.push({command:wn.removeLayer,args:[Se]}),he.splice(he.indexOf(Se,xe),1));for(ve=0,xe=0;ve<K.length;ve++)Se=K[K.length-1-ve],he[he.length-1-ve]!==Se&&(Object.prototype.hasOwnProperty.call(re,Se)?(X.push({command:wn.removeLayer,args:[Se]}),he.splice(he.lastIndexOf(Se,he.length-xe),1)):xe++,Ge=he[he.length-ve],X.push({command:wn.addLayer,args:[ue[Se],Ge]}),he.splice(he.length-ve,0,Se),ie[Se]=!0);for(ve=0;ve<K.length;ve++)if(Se=K[ve],Ne=re[Se],ze=ue[Se],!ie[Se]&&!Yt(Ne,ze))if(Yt(Ne.source,ze.source)&&Yt(Ne["source-layer"],ze["source-layer"])&&Yt(Ne.type,ze.type)){for(He in ca(Ne.layout,ze.layout,X,Se,null,wn.setLayoutProperty),ca(Ne.paint,ze.paint,X,Se,null,wn.setPaintProperty),Yt(Ne.filter,ze.filter)||X.push({command:wn.setFilter,args:[Se,ze.filter]}),Yt(Ne.minzoom,ze.minzoom)&&Yt(Ne.maxzoom,ze.maxzoom)||X.push({command:wn.setLayerZoomRange,args:[Se,ze.minzoom,ze.maxzoom]}),Ne)Object.prototype.hasOwnProperty.call(Ne,He)&&"layout"!==He&&"paint"!==He&&"filter"!==He&&"metadata"!==He&&"minzoom"!==He&&"maxzoom"!==He&&(0===He.indexOf("paint.")?ca(Ne[He],ze[He],X,Se,He.slice(6),wn.setPaintProperty):Yt(Ne[He],ze[He])||X.push({command:wn.setLayerProperty,args:[Se,He,ze[He]]}));for(He in ze)Object.prototype.hasOwnProperty.call(ze,He)&&!Object.prototype.hasOwnProperty.call(Ne,He)&&"layout"!==He&&"paint"!==He&&"filter"!==He&&"metadata"!==He&&"minzoom"!==He&&"maxzoom"!==He&&(0===He.indexOf("paint.")?ca(Ne[He],ze[He],X,Se,He.slice(6),wn.setPaintProperty):Yt(Ne[He],ze[He])||X.push({command:wn.setLayerProperty,args:[Se,He,ze[He]]}))}else X.push({command:wn.removeLayer,args:[Se]}),Ge=he[he.lastIndexOf(Se)+1],X.push({command:wn.addLayer,args:[ze,Ge]})}(F,D.layers,S)}catch(M){console.warn("Unable to compute style diff:",M),S=[{command:wn.setStyle,args:[D]}]}return S}(this.serialize(),a).filter(x=>!(x.command in Qh));if(0===p.length)return!1;const m=p.filter(x=>!(x.command in Xc));if(m.length>0)throw new Error(`Unimplemented: ${m.map(x=>x.command).join(", ")}.`);return p.forEach(x=>{"setTransition"!==x.command&&this[x.command].apply(this,x.args)}),this.stylesheet=a,!0}addImage(a,u){if(this.getImage(a))return this.fire(new v.ErrorEvent(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,u),this._afterImageUpdated(a)}updateImage(a,u){this.imageManager.updateImage(a,u)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new v.ErrorEvent(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new v.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,u,p={}){if(this._checkLoaded(),void 0!==this.sourceCaches[a])throw new Error(`Source "${a}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(v.validateStyle.source,`sources.${a}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const m=this.sourceCaches[a]=new Rt(a,u,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:m.serialize(),sourceId:a})),m.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),void 0===this.sourceCaches[a])throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===a)return this.fire(new v.ErrorEvent(new Error(`Source "${a}" cannot be removed while layer "${p}" is using it.`)));const u=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],u.fire(new v.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,u){if(this._checkLoaded(),void 0===this.sourceCaches[a])throw new Error(`There is no source with this ID=${a}`);const p=this.sourceCaches[a].getSource();if("geojson"!==p.type)throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,u,p={}){this._checkLoaded();const m=a.id;if(this.getLayer(m))return void this.fire(new v.ErrorEvent(new Error(`Layer "${m}" already exists on this map.`)));let x;if("custom"===a.type){if(Fn(this,v.validateCustomStyleLayer(a)))return;x=v.createStyleLayer(a)}else{if("object"==typeof a.source&&(this.addSource(m,a.source),a=v.clone$1(a),a=v.extend(a,{source:m})),this._validate(v.validateStyle.layer,`layers.${m}`,a,{arrayIndex:-1},p))return;x=v.createStyleLayer(a),this._validateLayer(x),x.setEventedParent(this,{layer:{id:m}}),this._serializedLayers[x.id]=x.serialize()}const D=u?this._order.indexOf(u):this._order.length;if(u&&-1===D)this.fire(new v.ErrorEvent(new Error(`Cannot add layer "${m}" before non-existing layer "${u}".`)));else{if(this._order.splice(D,0,m),this._layerOrderChanged=!0,this._layers[m]=x,this._removedLayers[m]&&x.source&&"custom"!==x.type){const S=this._removedLayers[m];delete this._removedLayers[m],S.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(a,u){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new v.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===u)return;const p=this._order.indexOf(a);this._order.splice(p,1);const m=u?this._order.indexOf(u):this._order.length;u&&-1===m?this.fire(new v.ErrorEvent(new Error(`Cannot move layer "${a}" before non-existing layer "${u}".`))):(this._order.splice(m,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();const u=this._layers[a];if(!u)return void this.fire(new v.ErrorEvent(new Error(`Cannot remove non-existing layer "${a}".`)));u.setEventedParent(null);const p=this._order.indexOf(a);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=u,delete this._layers[a],delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],u.onRemove&&u.onRemove(this.map)}getLayer(a){return this._layers[a]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,u,p){this._checkLoaded();const m=this.getLayer(a);m?m.minzoom===u&&m.maxzoom===p||(null!=u&&(m.minzoom=u),null!=p&&(m.maxzoom=p),this._updateLayer(m)):this.fire(new v.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,u,p={}){this._checkLoaded();const m=this.getLayer(a);if(m){if(!Yt(m.filter,u))return null==u?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(v.validateStyle.filter,`layers.${m.id}.filter`,u,null,p)||(m.filter=v.clone$1(u),this._updateLayer(m)))}else this.fire(new v.ErrorEvent(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return v.clone$1(this.getLayer(a).filter)}setLayoutProperty(a,u,p,m={}){this._checkLoaded();const x=this.getLayer(a);x?Yt(x.getLayoutProperty(u),p)||(x.setLayoutProperty(u,p,m),this._updateLayer(x)):this.fire(new v.ErrorEvent(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,u){const p=this.getLayer(a);if(p)return p.getLayoutProperty(u);this.fire(new v.ErrorEvent(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,u,p,m={}){this._checkLoaded();const x=this.getLayer(a);x?Yt(x.getPaintProperty(u),p)||(x.setPaintProperty(u,p,m)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new v.ErrorEvent(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,u){return this.getLayer(a).getPaintProperty(u)}setFeatureState(a,u){this._checkLoaded();const p=a.source,m=a.sourceLayer,x=this.sourceCaches[p];if(void 0===x)return void this.fire(new v.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const D=x.getSource().type;"geojson"===D&&m?this.fire(new v.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==D||m?(void 0===a.id&&this.fire(new v.ErrorEvent(new Error("The feature id parameter must be provided."))),x.setFeatureState(m,a.id,u)):this.fire(new v.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,u){this._checkLoaded();const p=a.source,m=this.sourceCaches[p];if(void 0===m)return void this.fire(new v.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const x=m.getSource().type,D="vector"===x?a.sourceLayer:void 0;"vector"!==x||D?u&&"string"!=typeof a.id&&"number"!=typeof a.id?this.fire(new v.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(D,a.id,u):this.fire(new v.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();const u=a.source,p=a.sourceLayer,m=this.sourceCaches[u];if(void 0!==m)return"vector"!==m.getSource().type||p?(void 0===a.id&&this.fire(new v.ErrorEvent(new Error("The feature id parameter must be provided."))),m.getFeatureState(p,a.id)):void this.fire(new v.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new v.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return v.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return v.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:v.mapObject(this.sourceCaches,a=>a.serialize()),layers:this._serializeLayers(this._order)},a=>void 0!==a)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&"raster"!==this.sourceCaches[a.source].getSource().type&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(a){const u=D=>"fill-extrusion"===this._layers[D].type,p={},m=[];for(let D=this._order.length-1;D>=0;D--){const S=this._order[D];if(u(S)){p[S]=D;for(const M of a){const k=M[S];if(k)for(const F of k)m.push(F)}}}m.sort((D,S)=>S.intersectionZ-D.intersectionZ);const x=[];for(let D=this._order.length-1;D>=0;D--){const S=this._order[D];if(u(S))for(let M=m.length-1;M>=0;M--){const k=m[M].feature;if(p[k.layer.id]<D)break;x.push(k),m.pop()}else for(const M of a){const k=M[S];if(k)for(const F of k)x.push(F.feature)}}return x}queryRenderedFeatures(a,u,p){u&&u.filter&&this._validate(v.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const m={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new v.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const D of u.layers){const S=this._layers[D];if(!S)return this.fire(new v.ErrorEvent(new Error(`The layer '${D}' does not exist in the map's style and cannot be queried for features.`))),[];m[S.source]=!0}}const x=[];u.availableImages=this._availableImages;for(const D in this.sourceCaches)u.layers&&!m[D]||x.push(it(this.sourceCaches[D],this._layers,this._serializedLayers,a,u,p));return this.placement&&x.push(function(D,S,M,k,F,N,U){const X={},ee=N.queryRenderedSymbols(k),K=[];for(const re of Object.keys(ee).map(Number))K.push(U[re]);K.sort(Jt);for(const re of K){const ue=re.featureIndex.lookupSymbolFeatures(ee[re.bucketInstanceId],S,re.bucketIndex,re.sourceLayerIndex,F.filter,F.layers,F.availableImages,D);for(const he in ue){const ie=X[he]=X[he]||[],ve=ue[he];ve.sort((xe,Se)=>{const Ne=re.featureSortOrder;if(Ne){const ze=Ne.indexOf(xe.featureIndex);return Ne.indexOf(Se.featureIndex)-ze}return Se.featureIndex-xe.featureIndex});for(const xe of ve)ie.push(xe)}}for(const re in X)X[re].forEach(ue=>{const he=ue.feature,ie=M[D[re].source].getFeatureState(he.layer["source-layer"],he.id);he.source=he.layer.source,he.layer["source-layer"]&&(he.sourceLayer=he.layer["source-layer"]),he.state=ie});return X}(this._layers,this._serializedLayers,this.sourceCaches,a,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(a,u){u&&u.filter&&this._validate(v.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.sourceCaches[a];return p?function(m,x){const D=m.getRenderableIds().map(k=>m.getTileByID(k)),S=[],M={};for(let k=0;k<D.length;k++){const F=D[k],N=F.tileID.canonical.key;M[N]||(M[N]=!0,F.querySourceFeatures(S,x))}return S}(p,u):[]}addSourceType(a,u,p){return It.getSourceType(a)?p(new Error(`A source type called "${a}" already exists.`)):(It.setSourceType(a,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:u.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(a,u={}){this._checkLoaded();const p=this.light.getLight();let m=!1;for(const D in a)if(!Yt(a[D],p[D])){m=!0;break}if(!m)return;const x={now:v.exported.now(),transition:v.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,u),this.light.updateTransitions(x)}_validate(a,u,p,m,x={}){return(!x||!1!==x.validate)&&Fn(this,a.call(v.validateStyle,v.extend({key:u,style:this.serialize(),value:p,styleSpec:v.spec},m)))}_remove(a=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),v.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(const u in this.sourceCaches)this.sourceCaches[u].update(a,this.map.terrain)}_generateCollisionBoxes(){for(const a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,u,p,m,x=!1){let D=!1,S=!1;const M={};for(const k of this._order){const F=this._layers[k];if("symbol"!==F.type)continue;if(!M[F.source]){const U=this.sourceCaches[F.source];M[F.source]=U.getRenderableIds(!0).map(X=>U.getTileByID(X)).sort((X,ee)=>ee.tileID.overscaledZ-X.tileID.overscaledZ||(X.tileID.isLessThan(ee.tileID)?-1:1))}const N=this.crossTileSymbolIndex.addLayer(F,M[F.source],a.center.lng);D=D||N}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||0===p)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(v.exported.now(),a.zoom))&&(this.pauseablePlacement=new xi(a,this.map.terrain,this._order,x,u,p,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(v.exported.now()),S=!0),D&&this.pauseablePlacement.placement.setStale()),S||D)for(const k of this._order){const F=this._layers[k];"symbol"===F.type&&this.placement.updateLayerOpacities(F,M[F.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(v.exported.now())}_releaseSymbolFadeTiles(){for(const a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,u,p){this.imageManager.getImages(u.icons,p),this._updateTilesForChangedImages();const m=this.sourceCaches[u.source];m&&m.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(a,u,p){this.glyphManager.getGlyphs(u.stacks,p);const m=this.sourceCaches[u.source];m&&m.setDependencies(u.tileID.key,u.type,[""])}getResource(a,u,p){return v.makeRequest(u,p)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,u={}){this._checkLoaded(),a&&this._validate(v.validateStyle.glyphs,"glyphs",a,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,u,p={},m){this._checkLoaded();const x=[{id:a,url:u}],D=[...ms(this.stylesheet.sprite),...x];this._validate(v.validateStyle.sprite,"sprite",D,null,p)||(this.stylesheet.sprite=D,this._loadSprite(x,!0,m))}removeSprite(a){this._checkLoaded();const u=ms(this.stylesheet.sprite);if(u.find(p=>p.id===a)){if(this._spritesImagesIds[a])for(const p of this._spritesImagesIds[a])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===a),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new v.Event("data",{dataType:"style"}))}else this.fire(new v.ErrorEvent(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return ms(this.stylesheet.sprite)}setSprite(a,u={},p){this._checkLoaded(),a&&this._validate(v.validateStyle.sprite,"sprite",a,null,u)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,p):(this._unloadSprite(),p(null)))}}It.getSourceType=function(g){return Pl[g]},It.setSourceType=function(g,a){Pl[g]=a},It.registerForPluginStateChange=v.registerForPluginStateChange;var Ll=v.createLayout([{name:"a_pos",type:"Int16",components:2}]),mc="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Jc={prelude:Ln("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:Ln("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Ln("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ln("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:Ln("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ln("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:Ln("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ln("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ln("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ln("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Ln("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:Ln("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:Ln("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:Ln("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:Ln("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:Ln("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:Ln("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ln("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Ln("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:Ln("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:Ln("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:Ln("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:Ln("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Ln("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:Ln("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:Ln("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:Ln("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",mc),terrainDepth:Ln("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",mc),terrainCoords:Ln("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",mc)};function Ln(g,a){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=a.match(/attribute ([\w]+) ([\w]+)/g),m=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),D=x?x.concat(m):m,S={};return{fragmentSource:g=g.replace(u,(M,k,F,N,U)=>(S[U]=!0,"define"===k?`\n#ifndef HAS_UNIFORM_u_${U}\nvarying ${F} ${N} ${U};\n#else\nuniform ${F} ${N} u_${U};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${U}\n    ${F} ${N} ${U} = u_${U};\n#endif\n`)),vertexSource:a=a.replace(u,(M,k,F,N,U)=>{const X="float"===N?"vec2":"vec4",ee=U.match(/color/)?"color":X;return S[U]?"define"===k?`\n#ifndef HAS_UNIFORM_u_${U}\nuniform lowp float u_${U}_t;\nattribute ${F} ${X} a_${U};\nvarying ${F} ${N} ${U};\n#else\nuniform ${F} ${N} u_${U};\n#endif\n`:"vec4"===ee?`\n#ifndef HAS_UNIFORM_u_${U}\n    ${U} = a_${U};\n#else\n    ${F} ${N} ${U} = u_${U};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${U}\n    ${U} = unpack_mix_${ee}(a_${U}, u_${U}_t);\n#else\n    ${F} ${N} ${U} = u_${U};\n#endif\n`:"define"===k?`\n#ifndef HAS_UNIFORM_u_${U}\nuniform lowp float u_${U}_t;\nattribute ${F} ${X} a_${U};\n#else\nuniform ${F} ${N} u_${U};\n#endif\n`:"vec4"===ee?`\n#ifndef HAS_UNIFORM_u_${U}\n    ${F} ${N} ${U} = a_${U};\n#else\n    ${F} ${N} ${U} = u_${U};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${U}\n    ${F} ${N} ${U} = unpack_mix_${ee}(a_${U}, u_${U}_t);\n#else\n    ${F} ${N} ${U} = u_${U};\n#endif\n`}),staticAttributes:p,staticUniforms:D}}class Ye{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,u,p,m,x,D,S,M,k){this.context=a;let F=this.boundPaintVertexBuffers.length!==m.length;for(let N=0;!F&&N<m.length;N++)this.boundPaintVertexBuffers[N]!==m[N]&&(F=!0);a.extVertexArrayObject&&this.vao&&this.boundProgram===u&&this.boundLayoutVertexBuffer===p&&!F&&this.boundIndexBuffer===x&&this.boundVertexOffset===D&&this.boundDynamicVertexBuffer===S&&this.boundDynamicVertexBuffer2===M&&this.boundDynamicVertexBuffer3===k?(a.bindVertexArrayOES.set(this.vao),S&&S.bind(),x&&x.dynamicDraw&&x.bind(),M&&M.bind(),k&&k.bind()):this.freshBind(u,p,m,x,D,S,M,k)}freshBind(a,u,p,m,x,D,S,M){let k;const F=a.numAttributes,N=this.context,U=N.gl;if(N.extVertexArrayObject)this.vao&&this.destroy(),this.vao=N.extVertexArrayObject.createVertexArrayOES(),N.bindVertexArrayOES.set(this.vao),k=0,this.boundProgram=a,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=m,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=D,this.boundDynamicVertexBuffer2=S,this.boundDynamicVertexBuffer3=M;else{k=N.currentNumAttributes||0;for(let X=F;X<k;X++)U.disableVertexAttribArray(X)}u.enableAttributes(U,a);for(const X of p)X.enableAttributes(U,a);D&&D.enableAttributes(U,a),S&&S.enableAttributes(U,a),M&&M.enableAttributes(U,a),u.bind(),u.setVertexAttribPointers(U,a,x);for(const X of p)X.bind(),X.setVertexAttribPointers(U,a,x);D&&(D.bind(),D.setVertexAttribPointers(U,a,x)),m&&m.bind(),S&&(S.bind(),S.setVertexAttribPointers(U,a,x)),M&&(M.bind(),M.setVertexAttribPointers(U,a,x)),N.currentNumAttributes=F}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function ua(g){const a=[];for(let u=0;u<g.length;u++){if(null===g[u])continue;const p=g[u].split(" ");a.push(p.pop())}return a}class jt{constructor(a,u,p,m,x,D,S){const M=a.gl;this.program=M.createProgram();const k=ua(p.staticAttributes),F=m?m.getBinderAttributes():[],N=k.concat(F),U=Jc.prelude.staticUniforms?ua(Jc.prelude.staticUniforms):[],X=p.staticUniforms?ua(p.staticUniforms):[],ee=m?m.getBinderUniforms():[],K=U.concat(X).concat(ee),re=[];for(const Ne of K)re.indexOf(Ne)<0&&re.push(Ne);const ue=m?m.defines():[];D&&ue.push("#define OVERDRAW_INSPECTOR;"),S&&ue.push("#define TERRAIN3D;");const he=ue.concat(Jc.prelude.fragmentSource,p.fragmentSource).join("\n"),ie=ue.concat(Jc.prelude.vertexSource,p.vertexSource).join("\n"),ve=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);M.shaderSource(ve,he),M.compileShader(ve),M.attachShader(this.program,ve);const xe=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);M.shaderSource(xe,ie),M.compileShader(xe),M.attachShader(this.program,xe),this.attributes={};const Se={};this.numAttributes=N.length;for(let Ne=0;Ne<this.numAttributes;Ne++)N[Ne]&&(M.bindAttribLocation(this.program,Ne,N[Ne]),this.attributes[N[Ne]]=Ne);M.linkProgram(this.program),M.deleteShader(xe),M.deleteShader(ve);for(let Ne=0;Ne<re.length;Ne++){const ze=re[Ne];if(ze&&!Se[ze]){const Ge=M.getUniformLocation(this.program,ze);Ge&&(Se[ze]=Ge)}}var Ne,ze;this.fixedUniforms=x(a,Se),this.terrainUniforms={u_depth:new v.Uniform1i(Ne=a,(ze=Se).u_depth),u_terrain:new v.Uniform1i(Ne,ze.u_terrain),u_terrain_dim:new v.Uniform1f(Ne,ze.u_terrain_dim),u_terrain_matrix:new v.UniformMatrix4f(Ne,ze.u_terrain_matrix),u_terrain_unpack:new v.Uniform4f(Ne,ze.u_terrain_unpack),u_terrain_exaggeration:new v.Uniform1f(Ne,ze.u_terrain_exaggeration)},this.binderUniforms=m?m.getUniforms(a,Se):[]}draw(a,u,p,m,x,D,S,M,k,F,N,U,X,ee,K,re,ue,he){const ie=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(p),a.setStencilMode(m),a.setColorMode(x),a.setCullFace(D),M){a.activeTexture.set(ie.TEXTURE2),ie.bindTexture(ie.TEXTURE_2D,M.depthTexture),a.activeTexture.set(ie.TEXTURE3),ie.bindTexture(ie.TEXTURE_2D,M.texture);for(const xe in this.terrainUniforms)this.terrainUniforms[xe].set(M[xe])}for(const xe in this.fixedUniforms)this.fixedUniforms[xe].set(S[xe]);K&&K.setUniforms(a,this.binderUniforms,X,{zoom:ee});let ve=0;switch(u){case ie.LINES:ve=2;break;case ie.TRIANGLES:ve=3;break;case ie.LINE_STRIP:ve=1}for(const xe of U.get()){const Se=xe.vaos||(xe.vaos={});(Se[k]||(Se[k]=new Ye)).bind(a,this,F,K?K.getPaintVertexBuffers():[],N,xe.vertexOffset,re,ue,he),ie.drawElements(u,xe.primitiveLength*ve,ie.UNSIGNED_SHORT,xe.primitiveOffset*ve*2)}}}function Bn(g,a,u){const p=1/Ae(u,1,a.transform.tileZoom),m=Math.pow(2,u.tileID.overscaledZ),x=u.tileSize*Math.pow(2,a.transform.tileZoom)/m,D=x*(u.tileID.canonical.x+u.tileID.wrap*m),S=x*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[D>>16,S>>16],u_pixel_coord_lower:[65535&D,65535&S]}}const mu=(g,a,u,p)=>{const m=a.style.light,x=m.properties.get("position"),D=[x.x,x.y,x.z],S=(k=new v.ARRAY_TYPE(9),v.ARRAY_TYPE!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k);var k;"viewport"===m.properties.get("anchor")&&function(k,F){var N=Math.sin(F),U=Math.cos(F);k[0]=U,k[1]=N,k[2]=0,k[3]=-N,k[4]=U,k[5]=0,k[6]=0,k[7]=0,k[8]=1}(S,-a.transform.angle),function(k,F,N){var U=F[0],X=F[1],ee=F[2];k[0]=U*N[0]+X*N[3]+ee*N[6],k[1]=U*N[1]+X*N[4]+ee*N[7],k[2]=U*N[2]+X*N[5]+ee*N[8]}(D,D,S);const M=m.properties.get("color");return{u_matrix:g,u_lightpos:D,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+u,u_opacity:p}},xb=(g,a,u,p,m,x,D)=>v.extend(mu(g,a,u,p),Bn(x,a,D),{u_height_factor:-Math.pow(2,m.overscaledZ)/D.tileSize/8}),Bl=g=>({u_matrix:g}),Ns=(g,a,u,p)=>v.extend(Bl(g),Bn(u,a,p)),nr=(g,a)=>({u_matrix:g,u_world:a}),Nr=(g,a,u,p,m)=>v.extend(Ns(g,a,u,p),{u_world:m}),gu=(g,a,u,p)=>{const m=g.transform;let x,D;if("map"===p.paint.get("circle-pitch-alignment")){const S=Ae(u,1,m.zoom);x=!0,D=[S,S]}else x=!1,D=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+("map"===p.paint.get("circle-pitch-scale")),u_matrix:g.translatePosMatrix(a.posMatrix,u,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:D}},bu=(g,a,u)=>{const p=Ae(u,1,a.zoom),m=Math.pow(2,a.zoom-u.tileID.overscaledZ),x=u.tileID.overscaleFactor();return{u_matrix:g,u_camera_to_center_distance:a.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[a.pixelsToGLUnits[0]/(p*m),a.pixelsToGLUnits[1]/(p*m)],u_overscale_factor:x}},Fr=(g,a,u=1)=>({u_matrix:g,u_color:a,u_overlay:0,u_overlay_scale:u}),_u=g=>({u_matrix:g}),Xh=(g,a,u,p)=>({u_matrix:g,u_extrude_scale:Ae(a,1,u),u_intensity:p});function vu(g,a){const u=Math.pow(2,a.canonical.z),p=a.canonical.y;return[new v.MercatorCoordinate(0,p/u).toLngLat().lat,new v.MercatorCoordinate(0,(p+1)/u).toLngLat().lat]}const ed=(g,a,u,p)=>{const m=g.transform;return{u_matrix:no(g,a,u,p),u_ratio:1/Ae(a,1,m.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},yu=(g,a,u,p,m)=>v.extend(ed(g,a,u,m),{u_image:0,u_image_height:p}),xu=(g,a,u,p,m)=>{const x=g.transform,D=ep(a,x);return{u_matrix:no(g,a,u,m),u_texsize:a.imageAtlasTexture.size,u_ratio:1/Ae(a,1,x.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[D,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},Jh=(g,a,u,p,m,x)=>{const D=g.lineAtlas,S=ep(a,g.transform),M="round"===u.layout.get("line-cap"),k=D.getDash(p.from,M),F=D.getDash(p.to,M),N=k.width*m.fromScale,U=F.width*m.toScale;return v.extend(ed(g,a,u,x),{u_patternscale_a:[S/N,-k.height/2],u_patternscale_b:[S/U,-F.height/2],u_sdfgamma:D.width/(256*Math.min(N,U)*g.pixelRatio)/2,u_image:0,u_tex_y_a:k.y,u_tex_y_b:F.y,u_mix:m.t})};function ep(g,a){return 1/Ae(g,1,a.tileZoom)}function no(g,a,u,p){return g.translatePosMatrix(p?p.posMatrix:a.tileID.posMatrix,a,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Zn=(g,a,u,p,m)=>{return{u_matrix:g,u_tl_parent:a,u_scale_parent:u,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(D=m.paint.get("raster-saturation"),D>0?1-1/(1.001-D):-D),u_contrast_factor:(x=m.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:wb(m.paint.get("raster-hue-rotate"))};var x,D};function wb(g){g*=Math.PI/180;const a=Math.sin(g),u=Math.cos(g);return[(2*u+1)/3,(-Math.sqrt(3)*a-u+1)/3,(Math.sqrt(3)*a-u+1)/3]}const Wf=(g,a,u,p,m,x,D,S,M,k)=>{const F=m.transform;return{u_is_size_zoom_constant:+("constant"===g||"source"===g),u_is_size_feature_constant:+("constant"===g||"camera"===g),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:F.cameraToCenterDistance,u_pitch:F.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:F.width/F.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:D,u_coord_matrix:S,u_is_text:+M,u_pitch_with_map:+p,u_texsize:k,u_texture:0}},qf=(g,a,u,p,m,x,D,S,M,k,F)=>{const N=m.transform;return v.extend(Wf(g,a,u,p,m,x,D,S,M,k),{u_gamma_scale:p?Math.cos(N._pitch)*N.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:+F})},Ue=(g,a,u,p,m,x,D,S,M,k)=>v.extend(qf(g,a,u,p,m,x,D,S,!0,M,!0),{u_texsize_icon:k,u_texture_icon:1}),Cb=(g,a,u)=>({u_matrix:g,u_opacity:a,u_color:u}),Qe=(g,a,u,p,m,x)=>v.extend(function(D,S,M,k){const F=M.imageManager.getPattern(D.from.toString()),N=M.imageManager.getPattern(D.to.toString()),{width:U,height:X}=M.imageManager.getPixelSize(),ee=Math.pow(2,k.tileID.overscaledZ),K=k.tileSize*Math.pow(2,M.transform.tileZoom)/ee,re=K*(k.tileID.canonical.x+k.tileID.wrap*ee),ue=K*k.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:F.tl,u_pattern_br_a:F.br,u_pattern_tl_b:N.tl,u_pattern_br_b:N.br,u_texsize:[U,X],u_mix:S.t,u_pattern_size_a:F.displaySize,u_pattern_size_b:N.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/Ae(k,1,M.transform.tileZoom),u_pixel_coord_upper:[re>>16,ue>>16],u_pixel_coord_lower:[65535&re,65535&ue]}}(p,x,u,m),{u_matrix:g,u_opacity:a}),Wa={fillExtrusion:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_lightpos:new v.Uniform3f(g,a.u_lightpos),u_lightintensity:new v.Uniform1f(g,a.u_lightintensity),u_lightcolor:new v.Uniform3f(g,a.u_lightcolor),u_vertical_gradient:new v.Uniform1f(g,a.u_vertical_gradient),u_opacity:new v.Uniform1f(g,a.u_opacity)}),fillExtrusionPattern:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_lightpos:new v.Uniform3f(g,a.u_lightpos),u_lightintensity:new v.Uniform1f(g,a.u_lightintensity),u_lightcolor:new v.Uniform3f(g,a.u_lightcolor),u_vertical_gradient:new v.Uniform1f(g,a.u_vertical_gradient),u_height_factor:new v.Uniform1f(g,a.u_height_factor),u_image:new v.Uniform1i(g,a.u_image),u_texsize:new v.Uniform2f(g,a.u_texsize),u_pixel_coord_upper:new v.Uniform2f(g,a.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(g,a.u_pixel_coord_lower),u_scale:new v.Uniform3f(g,a.u_scale),u_fade:new v.Uniform1f(g,a.u_fade),u_opacity:new v.Uniform1f(g,a.u_opacity)}),fill:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix)}),fillPattern:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_image:new v.Uniform1i(g,a.u_image),u_texsize:new v.Uniform2f(g,a.u_texsize),u_pixel_coord_upper:new v.Uniform2f(g,a.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(g,a.u_pixel_coord_lower),u_scale:new v.Uniform3f(g,a.u_scale),u_fade:new v.Uniform1f(g,a.u_fade)}),fillOutline:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_world:new v.Uniform2f(g,a.u_world)}),fillOutlinePattern:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_world:new v.Uniform2f(g,a.u_world),u_image:new v.Uniform1i(g,a.u_image),u_texsize:new v.Uniform2f(g,a.u_texsize),u_pixel_coord_upper:new v.Uniform2f(g,a.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(g,a.u_pixel_coord_lower),u_scale:new v.Uniform3f(g,a.u_scale),u_fade:new v.Uniform1f(g,a.u_fade)}),circle:(g,a)=>({u_camera_to_center_distance:new v.Uniform1f(g,a.u_camera_to_center_distance),u_scale_with_map:new v.Uniform1i(g,a.u_scale_with_map),u_pitch_with_map:new v.Uniform1i(g,a.u_pitch_with_map),u_extrude_scale:new v.Uniform2f(g,a.u_extrude_scale),u_device_pixel_ratio:new v.Uniform1f(g,a.u_device_pixel_ratio),u_matrix:new v.UniformMatrix4f(g,a.u_matrix)}),collisionBox:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_camera_to_center_distance:new v.Uniform1f(g,a.u_camera_to_center_distance),u_pixels_to_tile_units:new v.Uniform1f(g,a.u_pixels_to_tile_units),u_extrude_scale:new v.Uniform2f(g,a.u_extrude_scale),u_overscale_factor:new v.Uniform1f(g,a.u_overscale_factor)}),collisionCircle:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_inv_matrix:new v.UniformMatrix4f(g,a.u_inv_matrix),u_camera_to_center_distance:new v.Uniform1f(g,a.u_camera_to_center_distance),u_viewport_size:new v.Uniform2f(g,a.u_viewport_size)}),debug:(g,a)=>({u_color:new v.UniformColor(g,a.u_color),u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_overlay:new v.Uniform1i(g,a.u_overlay),u_overlay_scale:new v.Uniform1f(g,a.u_overlay_scale)}),clippingMask:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix)}),heatmap:(g,a)=>({u_extrude_scale:new v.Uniform1f(g,a.u_extrude_scale),u_intensity:new v.Uniform1f(g,a.u_intensity),u_matrix:new v.UniformMatrix4f(g,a.u_matrix)}),heatmapTexture:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_world:new v.Uniform2f(g,a.u_world),u_image:new v.Uniform1i(g,a.u_image),u_color_ramp:new v.Uniform1i(g,a.u_color_ramp),u_opacity:new v.Uniform1f(g,a.u_opacity)}),hillshade:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_image:new v.Uniform1i(g,a.u_image),u_latrange:new v.Uniform2f(g,a.u_latrange),u_light:new v.Uniform2f(g,a.u_light),u_shadow:new v.UniformColor(g,a.u_shadow),u_highlight:new v.UniformColor(g,a.u_highlight),u_accent:new v.UniformColor(g,a.u_accent)}),hillshadePrepare:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_image:new v.Uniform1i(g,a.u_image),u_dimension:new v.Uniform2f(g,a.u_dimension),u_zoom:new v.Uniform1f(g,a.u_zoom),u_unpack:new v.Uniform4f(g,a.u_unpack)}),line:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_ratio:new v.Uniform1f(g,a.u_ratio),u_device_pixel_ratio:new v.Uniform1f(g,a.u_device_pixel_ratio),u_units_to_pixels:new v.Uniform2f(g,a.u_units_to_pixels)}),lineGradient:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_ratio:new v.Uniform1f(g,a.u_ratio),u_device_pixel_ratio:new v.Uniform1f(g,a.u_device_pixel_ratio),u_units_to_pixels:new v.Uniform2f(g,a.u_units_to_pixels),u_image:new v.Uniform1i(g,a.u_image),u_image_height:new v.Uniform1f(g,a.u_image_height)}),linePattern:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_texsize:new v.Uniform2f(g,a.u_texsize),u_ratio:new v.Uniform1f(g,a.u_ratio),u_device_pixel_ratio:new v.Uniform1f(g,a.u_device_pixel_ratio),u_image:new v.Uniform1i(g,a.u_image),u_units_to_pixels:new v.Uniform2f(g,a.u_units_to_pixels),u_scale:new v.Uniform3f(g,a.u_scale),u_fade:new v.Uniform1f(g,a.u_fade)}),lineSDF:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_ratio:new v.Uniform1f(g,a.u_ratio),u_device_pixel_ratio:new v.Uniform1f(g,a.u_device_pixel_ratio),u_units_to_pixels:new v.Uniform2f(g,a.u_units_to_pixels),u_patternscale_a:new v.Uniform2f(g,a.u_patternscale_a),u_patternscale_b:new v.Uniform2f(g,a.u_patternscale_b),u_sdfgamma:new v.Uniform1f(g,a.u_sdfgamma),u_image:new v.Uniform1i(g,a.u_image),u_tex_y_a:new v.Uniform1f(g,a.u_tex_y_a),u_tex_y_b:new v.Uniform1f(g,a.u_tex_y_b),u_mix:new v.Uniform1f(g,a.u_mix)}),raster:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_tl_parent:new v.Uniform2f(g,a.u_tl_parent),u_scale_parent:new v.Uniform1f(g,a.u_scale_parent),u_buffer_scale:new v.Uniform1f(g,a.u_buffer_scale),u_fade_t:new v.Uniform1f(g,a.u_fade_t),u_opacity:new v.Uniform1f(g,a.u_opacity),u_image0:new v.Uniform1i(g,a.u_image0),u_image1:new v.Uniform1i(g,a.u_image1),u_brightness_low:new v.Uniform1f(g,a.u_brightness_low),u_brightness_high:new v.Uniform1f(g,a.u_brightness_high),u_saturation_factor:new v.Uniform1f(g,a.u_saturation_factor),u_contrast_factor:new v.Uniform1f(g,a.u_contrast_factor),u_spin_weights:new v.Uniform3f(g,a.u_spin_weights)}),symbolIcon:(g,a)=>({u_is_size_zoom_constant:new v.Uniform1i(g,a.u_is_size_zoom_constant),u_is_size_feature_constant:new v.Uniform1i(g,a.u_is_size_feature_constant),u_size_t:new v.Uniform1f(g,a.u_size_t),u_size:new v.Uniform1f(g,a.u_size),u_camera_to_center_distance:new v.Uniform1f(g,a.u_camera_to_center_distance),u_pitch:new v.Uniform1f(g,a.u_pitch),u_rotate_symbol:new v.Uniform1i(g,a.u_rotate_symbol),u_aspect_ratio:new v.Uniform1f(g,a.u_aspect_ratio),u_fade_change:new v.Uniform1f(g,a.u_fade_change),u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_label_plane_matrix:new v.UniformMatrix4f(g,a.u_label_plane_matrix),u_coord_matrix:new v.UniformMatrix4f(g,a.u_coord_matrix),u_is_text:new v.Uniform1i(g,a.u_is_text),u_pitch_with_map:new v.Uniform1i(g,a.u_pitch_with_map),u_texsize:new v.Uniform2f(g,a.u_texsize),u_texture:new v.Uniform1i(g,a.u_texture)}),symbolSDF:(g,a)=>({u_is_size_zoom_constant:new v.Uniform1i(g,a.u_is_size_zoom_constant),u_is_size_feature_constant:new v.Uniform1i(g,a.u_is_size_feature_constant),u_size_t:new v.Uniform1f(g,a.u_size_t),u_size:new v.Uniform1f(g,a.u_size),u_camera_to_center_distance:new v.Uniform1f(g,a.u_camera_to_center_distance),u_pitch:new v.Uniform1f(g,a.u_pitch),u_rotate_symbol:new v.Uniform1i(g,a.u_rotate_symbol),u_aspect_ratio:new v.Uniform1f(g,a.u_aspect_ratio),u_fade_change:new v.Uniform1f(g,a.u_fade_change),u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_label_plane_matrix:new v.UniformMatrix4f(g,a.u_label_plane_matrix),u_coord_matrix:new v.UniformMatrix4f(g,a.u_coord_matrix),u_is_text:new v.Uniform1i(g,a.u_is_text),u_pitch_with_map:new v.Uniform1i(g,a.u_pitch_with_map),u_texsize:new v.Uniform2f(g,a.u_texsize),u_texture:new v.Uniform1i(g,a.u_texture),u_gamma_scale:new v.Uniform1f(g,a.u_gamma_scale),u_device_pixel_ratio:new v.Uniform1f(g,a.u_device_pixel_ratio),u_is_halo:new v.Uniform1i(g,a.u_is_halo)}),symbolTextAndIcon:(g,a)=>({u_is_size_zoom_constant:new v.Uniform1i(g,a.u_is_size_zoom_constant),u_is_size_feature_constant:new v.Uniform1i(g,a.u_is_size_feature_constant),u_size_t:new v.Uniform1f(g,a.u_size_t),u_size:new v.Uniform1f(g,a.u_size),u_camera_to_center_distance:new v.Uniform1f(g,a.u_camera_to_center_distance),u_pitch:new v.Uniform1f(g,a.u_pitch),u_rotate_symbol:new v.Uniform1i(g,a.u_rotate_symbol),u_aspect_ratio:new v.Uniform1f(g,a.u_aspect_ratio),u_fade_change:new v.Uniform1f(g,a.u_fade_change),u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_label_plane_matrix:new v.UniformMatrix4f(g,a.u_label_plane_matrix),u_coord_matrix:new v.UniformMatrix4f(g,a.u_coord_matrix),u_is_text:new v.Uniform1i(g,a.u_is_text),u_pitch_with_map:new v.Uniform1i(g,a.u_pitch_with_map),u_texsize:new v.Uniform2f(g,a.u_texsize),u_texsize_icon:new v.Uniform2f(g,a.u_texsize_icon),u_texture:new v.Uniform1i(g,a.u_texture),u_texture_icon:new v.Uniform1i(g,a.u_texture_icon),u_gamma_scale:new v.Uniform1f(g,a.u_gamma_scale),u_device_pixel_ratio:new v.Uniform1f(g,a.u_device_pixel_ratio),u_is_halo:new v.Uniform1i(g,a.u_is_halo)}),background:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_opacity:new v.Uniform1f(g,a.u_opacity),u_color:new v.UniformColor(g,a.u_color)}),backgroundPattern:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_opacity:new v.Uniform1f(g,a.u_opacity),u_image:new v.Uniform1i(g,a.u_image),u_pattern_tl_a:new v.Uniform2f(g,a.u_pattern_tl_a),u_pattern_br_a:new v.Uniform2f(g,a.u_pattern_br_a),u_pattern_tl_b:new v.Uniform2f(g,a.u_pattern_tl_b),u_pattern_br_b:new v.Uniform2f(g,a.u_pattern_br_b),u_texsize:new v.Uniform2f(g,a.u_texsize),u_mix:new v.Uniform1f(g,a.u_mix),u_pattern_size_a:new v.Uniform2f(g,a.u_pattern_size_a),u_pattern_size_b:new v.Uniform2f(g,a.u_pattern_size_b),u_scale_a:new v.Uniform1f(g,a.u_scale_a),u_scale_b:new v.Uniform1f(g,a.u_scale_b),u_pixel_coord_upper:new v.Uniform2f(g,a.u_pixel_coord_upper),u_pixel_coord_lower:new v.Uniform2f(g,a.u_pixel_coord_lower),u_tile_units_to_pixels:new v.Uniform1f(g,a.u_tile_units_to_pixels)}),terrain:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_texture:new v.Uniform1i(g,a.u_texture),u_ele_delta:new v.Uniform1f(g,a.u_ele_delta)}),terrainDepth:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_ele_delta:new v.Uniform1f(g,a.u_ele_delta)}),terrainCoords:(g,a)=>({u_matrix:new v.UniformMatrix4f(g,a.u_matrix),u_texture:new v.Uniform1i(g,a.u_texture),u_terrain_coords_id:new v.Uniform1f(g,a.u_terrain_coords_id),u_ele_delta:new v.Uniform1f(g,a.u_ele_delta)})};class wu{constructor(a,u,p){this.context=a;const m=a.gl;this.buffer=m.createBuffer(),this.dynamicDraw=Boolean(p),this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const td={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class zl{constructor(a,u,p,m){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=m,this.context=a;const x=a.gl;this.buffer=x.createBuffer(),a.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,u){for(let p=0;p<this.attributes.length;p++){const m=u.attributes[this.attributes[p].name];void 0!==m&&a.enableVertexAttribArray(m)}}setVertexAttribPointers(a,u,p){for(let m=0;m<this.attributes.length;m++){const x=this.attributes[m],D=u.attributes[x.name];void 0!==D&&a.vertexAttribPointer(D,x.components,a[td[x.type]],!1,this.itemSize,x.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class On{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Cu extends On{getDefault(){return v.Color.transparent}set(a){const u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Vl extends On{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class Fs extends On{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class Du extends On{getDefault(){return[!0,!0,!0,!0]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Ul extends On{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class At extends On{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class nd extends On{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const u=this.current;(a.func!==u.func||a.ref!==u.ref||a.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class Eu extends On{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class tn extends On{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=a,this.dirty=!1}}class gc extends On{getDefault(){return[0,1]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class Db extends On{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=a,this.dirty=!1}}class li extends On{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class id extends On{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.BLEND):u.disable(u.BLEND),this.current=a,this.dirty=!1}}class Eb extends On{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class Sb extends On{getDefault(){return v.Color.transparent}set(a){const u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Hl extends On{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class Su extends On{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=a,this.dirty=!1}}class jl extends On{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class od extends On{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class rd extends On{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class Tu extends On{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class sd extends On{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class $l extends On{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class Ls extends On{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class ad extends On{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class Le extends On{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Iu extends On{getDefault(){return null}set(a){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Qt extends On{constructor(a){super(a),this.vao=a.extVertexArrayObject}getDefault(){return null}set(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)}}class bc extends On{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class ha extends On{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class pa extends On{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class ld extends On{constructor(a,u){super(a),this.context=a,this.parent=u}getDefault(){return null}}class Zf extends ld{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Mu extends ld{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Bs{constructor(a,u,p,m){this.context=a,this.width=u,this.height=p;const x=a.gl,D=this.framebuffer=x.createFramebuffer();if(this.colorAttachment=new Zf(a,D),m&&(this.depthAttachment=new Mu(a,D)),x.checkFramebufferStatus(x.FRAMEBUFFER)!==x.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const a=this.context.gl,u=this.colorAttachment.get();if(u&&a.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&a.deleteRenderbuffer(p)}a.deleteFramebuffer(this.framebuffer)}}class Un{constructor(a,u,p){this.blendFunction=a,this.blendColor=u,this.mask=p}}Un.Replace=[1,0],Un.disabled=new Un(Un.Replace,v.Color.transparent,[!1,!1,!1,!1]),Un.unblended=new Un(Un.Replace,v.Color.transparent,[!0,!0,!0,!0]),Un.alphaBlended=new Un([1,771],v.Color.transparent,[!0,!0,!0,!0]);class vr{constructor(a){this.gl=a,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Cu(this),this.clearDepth=new Vl(this),this.clearStencil=new Fs(this),this.colorMask=new Du(this),this.depthMask=new Ul(this),this.stencilMask=new At(this),this.stencilFunc=new nd(this),this.stencilOp=new Eu(this),this.stencilTest=new tn(this),this.depthRange=new gc(this),this.depthTest=new Db(this),this.depthFunc=new li(this),this.blend=new id(this),this.blendFunc=new Eb(this),this.blendColor=new Sb(this),this.blendEquation=new Hl(this),this.cullFace=new Su(this),this.cullFaceSide=new jl(this),this.frontFace=new od(this),this.program=new rd(this),this.activeTexture=new Tu(this),this.viewport=new sd(this),this.bindFramebuffer=new $l(this),this.bindRenderbuffer=new Ls(this),this.bindTexture=new ad(this),this.bindVertexBuffer=new Le(this),this.bindElementBuffer=new Iu(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Qt(this),this.pixelStoreUnpack=new bc(this),this.pixelStoreUnpackPremultiplyAlpha=new ha(this),this.pixelStoreUnpackFlipY=new pa(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=a.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(a.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=a.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=a.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,u){return new wu(this,a,u)}createVertexBuffer(a,u,p){return new zl(this,a,u,p)}createRenderbuffer(a,u,p){const m=this.gl,x=m.createRenderbuffer();return this.bindRenderbuffer.set(x),m.renderbufferStorage(m.RENDERBUFFER,a,u,p),this.bindRenderbuffer.set(null),x}createFramebuffer(a,u,p){return new Bs(this,a,u,p)}clear({color:a,depth:u}){const p=this.gl;let m=0;a&&(m|=p.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),void 0!==u&&(m|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p.clear(m)}setCullFace(a){!1===a.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){Yt(a.blendFunction,Un.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class zt{constructor(a,u,p){this.func=a,this.mask=u,this.range=p}}zt.ReadOnly=!1,zt.ReadWrite=!0,zt.disabled=new zt(519,zt.ReadOnly,[0,1]);class ni{constructor(a,u,p,m,x,D){this.test=a,this.ref=u,this.mask=p,this.fail=m,this.depthFail=x,this.pass=D}}ni.disabled=new ni({func:519,mask:0},0,0,7680,7680,7680);class Kn{constructor(a,u,p){this.enable=a,this.mode=u,this.frontFace=p}}let fa;function cd(g,a,u,p,m,x,D){const S=g.context,M=S.gl,k=g.useProgram("collisionBox"),F=[];let N=0,U=0;for(let ie=0;ie<p.length;ie++){const ve=p[ie],xe=a.getTile(ve),Se=xe.getBucket(u);if(!Se)continue;let Ne=ve.posMatrix;0===m[0]&&0===m[1]||(Ne=g.translatePosMatrix(ve.posMatrix,xe,m,x));const ze=D?Se.textCollisionBox:Se.iconCollisionBox,Ge=Se.collisionCircleArray;if(Ge.length>0){const He=v.create(),Ke=Ne;v.mul(He,Se.placementInvProjMatrix,g.transform.glCoordMatrix),v.mul(He,He,Se.placementViewportMatrix),F.push({circleArray:Ge,circleOffset:U,transform:Ke,invTransform:He,coord:ve}),N+=Ge.length/4,U=N}ze&&k.draw(S,M.LINES,zt.disabled,ni.disabled,g.colorModeForRenderPass(),Kn.disabled,bu(Ne,g.transform,xe),g.style.map.terrain&&g.style.map.terrain.getTerrainData(ve),u.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,null,g.transform.zoom,null,null,ze.collisionVertexBuffer)}if(!D||!F.length)return;const X=g.useProgram("collisionCircle"),ee=new v.CollisionCircleLayoutArray;ee.resize(4*N),ee._trim();let K=0;for(const ie of F)for(let ve=0;ve<ie.circleArray.length/4;ve++){const xe=4*ve,Se=ie.circleArray[xe+0],Ne=ie.circleArray[xe+1],ze=ie.circleArray[xe+2],Ge=ie.circleArray[xe+3];ee.emplace(K++,Se,Ne,ze,Ge,0),ee.emplace(K++,Se,Ne,ze,Ge,1),ee.emplace(K++,Se,Ne,ze,Ge,2),ee.emplace(K++,Se,Ne,ze,Ge,3)}(!fa||fa.length<2*N)&&(fa=function(ie){const ve=2*ie,xe=new v.QuadTriangleArray;xe.resize(ve),xe._trim();for(let Se=0;Se<ve;Se++){const Ne=6*Se;xe.uint16[Ne+0]=4*Se+0,xe.uint16[Ne+1]=4*Se+1,xe.uint16[Ne+2]=4*Se+2,xe.uint16[Ne+3]=4*Se+2,xe.uint16[Ne+4]=4*Se+3,xe.uint16[Ne+5]=4*Se+0}return xe}(N));const re=S.createIndexBuffer(fa,!0),ue=S.createVertexBuffer(ee,v.collisionCircleLayout.members,!0);for(const ie of F){const ve={u_matrix:ie.transform,u_inv_matrix:ie.invTransform,u_camera_to_center_distance:(he=g.transform).cameraToCenterDistance,u_viewport_size:[he.width,he.height]};X.draw(S,M.TRIANGLES,zt.disabled,ni.disabled,g.colorModeForRenderPass(),Kn.disabled,ve,g.style.map.terrain&&g.style.map.terrain.getTerrainData(ie.coord),u.id,ue,re,v.SegmentVector.simpleSegment(0,2*ie.circleOffset,ie.circleArray.length,ie.circleArray.length/2),null,g.transform.zoom,null,null,null)}var he;ue.destroy(),re.destroy()}Kn.disabled=new Kn(!1,1029,2305),Kn.backCCW=new Kn(!0,1029,2305);const vs=v.identity(new Float32Array(16));function Gl(g,a,u,p,m,x){const{horizontalAlign:D,verticalAlign:S}=v.getAnchorAlignment(g),M=-(D-.5)*a,k=-(S-.5)*u,F=v.evaluateVariableOffset(g,p);return new v.pointGeometry((M/m+F[0])*x,(k/m+F[1])*x)}function tp(g,a,u,p,m,x,D,S,M,k,F){const N=g.text.placedSymbolArray,U=g.text.dynamicLayoutVertexArray,X=g.icon.dynamicLayoutVertexArray,ee={};U.clear();for(let K=0;K<N.length;K++){const re=N.get(K),ue=re.hidden||!re.crossTileID||g.allowVerticalPlacement&&!re.placedOrientation?null:p[re.crossTileID];if(ue){const he=new v.pointGeometry(re.anchorX,re.anchorY),ie=Do(he,u?D:x,F),ve=Rs(m.cameraToCenterDistance,ie.signedDistanceFromCamera);let xe=v.evaluateSizeForFeature(g.textSizeData,M,re)*ve/v.ONE_EM;u&&(xe*=g.tilePixelRatio/S);const{width:Se,height:Ne,anchor:ze,textOffset:Ge,textBoxScale:He}=ue,Ke=Gl(ze,Se,Ne,Ge,He,xe),ft=u?Do(he.add(Ke),x,F).point:ie.point.add(a?Ke.rotate(-m.angle):Ke),Ot=g.allowVerticalPlacement&&re.placedOrientation===v.WritingMode.vertical?Math.PI/2:0;for(let Bt=0;Bt<re.numGlyphs;Bt++)v.addDynamicAttributes(U,ft,Ot);k&&re.associatedIconIndex>=0&&(ee[re.associatedIconIndex]={shiftedAnchor:ft,angle:Ot})}else ce(re.numGlyphs,U)}if(k){X.clear();const K=g.icon.placedSymbolArray;for(let re=0;re<K.length;re++){const ue=K.get(re);if(ue.hidden)ce(ue.numGlyphs,X);else{const he=ee[re];if(he)for(let ie=0;ie<ue.numGlyphs;ie++)v.addDynamicAttributes(X,he.shiftedAnchor,he.angle);else ce(ue.numGlyphs,X)}}g.icon.dynamicLayoutVertexBuffer.updateData(X)}g.text.dynamicLayoutVertexBuffer.updateData(U)}function Wt(g,a,u){return u.iconsInText&&a?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function ma(g,a,u,p,m,x,D,S,M,k,F,N){const U=g.context,X=U.gl,ee=g.transform,K="map"===S,re="map"===M,ue="viewport"!==S&&"point"!==u.layout.get("symbol-placement"),he=K&&!re&&!ue,ie=!u.layout.get("symbol-sort-key").isConstant();let ve=!1;const xe=g.depthModeForSublayer(0,zt.ReadOnly),Se=u.layout.get("text-variable-anchor"),Ne=[];for(const ze of p){const Ge=a.getTile(ze),He=Ge.getBucket(u);if(!He)continue;const Ke=m?He.text:He.icon;if(!Ke||!Ke.segments.get().length||!Ke.hasVisibleVertices)continue;const ft=Ke.programConfigurations.get(u.id),Ot=m||He.sdfIcons,Bt=m?He.textSizeData:He.iconSizeData,mt=re||0!==ee.pitch,Cn=g.useProgram(Wt(Ot,m,He),ft),kn=v.evaluateSizeForZoom(Bt,ee.zoom),en=g.style.map.terrain&&g.style.map.terrain.getTerrainData(ze);let gn,Yn,Dn,zr,Vr=[0,0],Qn=null;if(m)Yn=Ge.glyphAtlasTexture,Dn=X.LINEAR,gn=Ge.glyphAtlasTexture.size,He.iconsInText&&(Vr=Ge.imageAtlasTexture.size,Qn=Ge.imageAtlasTexture,zr=mt||g.options.rotating||g.options.zooming||"composite"===Bt.kind||"camera"===Bt.kind?X.LINEAR:X.NEAREST);else{const Ur=1!==u.layout.get("icon-size").constantOr(0)||He.iconsNeedLinear;Yn=Ge.imageAtlasTexture,Dn=Ot||g.options.rotating||g.options.zooming||Ur||mt?X.LINEAR:X.NEAREST,gn=Ge.imageAtlasTexture.size}const Gi=Ae(Ge,1,g.transform.zoom),bn=Hi(ze.posMatrix,re,K,g.transform,Gi),ts=Co(ze.posMatrix,re,K,g.transform,Gi),va=Se&&He.hasTextData(),Dd="none"!==u.layout.get("icon-text-fit")&&va&&He.hasIconData();if(ue){const Ur=g.style.map.terrain?(ju,jr)=>g.style.map.terrain.getElevation(ze,ju,jr):null,Hr="map"===u.layout.get("text-rotation-alignment");L(He,ze.posMatrix,g,m,bn,ts,re,k,Hr,Ur)}const Li=g.translatePosMatrix(ze.posMatrix,Ge,x,D),fi=ue||m&&Se||Dd?vs:bn,Pn=g.translatePosMatrix(ts,Ge,x,D,!0),ro=Ot&&0!==u.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1);let so;so=Ot?He.iconsInText?Ue(Bt.kind,kn,he,re,g,Li,fi,Pn,gn,Vr):qf(Bt.kind,kn,he,re,g,Li,fi,Pn,m,gn,!0):Wf(Bt.kind,kn,he,re,g,Li,fi,Pn,m,gn);const oi={program:Cn,buffers:Ke,uniformValues:so,atlasTexture:Yn,atlasTextureIcon:Qn,atlasInterpolation:Dn,atlasInterpolationIcon:zr,isSDF:Ot,hasHalo:ro};if(ie&&He.canOverlap){ve=!0;const Ur=Ke.segments.get();for(const Hr of Ur)Ne.push({segments:new v.SegmentVector([Hr]),sortKey:Hr.sortKey,state:oi,terrainData:en})}else Ne.push({segments:Ke.segments,sortKey:0,state:oi,terrainData:en})}ve&&Ne.sort((ze,Ge)=>ze.sortKey-Ge.sortKey);for(const ze of Ne){const Ge=ze.state;if(U.activeTexture.set(X.TEXTURE0),Ge.atlasTexture.bind(Ge.atlasInterpolation,X.CLAMP_TO_EDGE),Ge.atlasTextureIcon&&(U.activeTexture.set(X.TEXTURE1),Ge.atlasTextureIcon&&Ge.atlasTextureIcon.bind(Ge.atlasInterpolationIcon,X.CLAMP_TO_EDGE)),Ge.isSDF){const He=Ge.uniformValues;Ge.hasHalo&&(He.u_is_halo=1,ku(Ge.buffers,ze.segments,u,g,Ge.program,xe,F,N,He,ze.terrainData)),He.u_is_halo=0}ku(Ge.buffers,ze.segments,u,g,Ge.program,xe,F,N,Ge.uniformValues,ze.terrainData)}}function ku(g,a,u,p,m,x,D,S,M,k){const F=p.context;m.draw(F,F.gl.TRIANGLES,x,D,S,Kn.disabled,M,k,u.id,g.layoutVertexBuffer,g.indexBuffer,a,u.paint,p.transform.zoom,g.programConfigurations.get(u.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function Au(g,a,u,p,m){if(!u||!p||!p.imageAtlas)return;const x=p.imageAtlas.patternPositions;let D=x[u.to.toString()],S=x[u.from.toString()];if(!D||!S){const M=m.getPaintProperty(a);D=x[M],S=x[M]}D&&S&&g.setConstantPatternPositions(D,S)}function Je(g,a,u,p,m,x,D){const S=g.context.gl,M="fill-pattern",k=u.paint.get(M),F=k&&k.constantOr(1),N=u.getCrossfadeParameters();let U,X,ee,K,re;D?(X=F&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=S.LINES):(X=F?"fillPattern":"fill",U=S.TRIANGLES);const ue=k.constantOr(null);for(const he of p){const ie=a.getTile(he);if(F&&!ie.patternsLoaded())continue;const ve=ie.getBucket(u);if(!ve)continue;const xe=ve.programConfigurations.get(u.id),Se=g.useProgram(X,xe),Ne=g.style.map.terrain&&g.style.map.terrain.getTerrainData(he);F&&(g.context.activeTexture.set(S.TEXTURE0),ie.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),xe.updatePaintBuffers(N)),Au(xe,M,ue,ie,u);const ze=Ne?he:null,Ge=g.translatePosMatrix(ze?ze.posMatrix:he.posMatrix,ie,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(D){K=ve.indexBuffer2,re=ve.segments2;const He=[S.drawingBufferWidth,S.drawingBufferHeight];ee="fillOutlinePattern"===X&&F?Nr(Ge,g,N,ie,He):nr(Ge,He)}else K=ve.indexBuffer,re=ve.segments,ee=F?Ns(Ge,g,N,ie):Bl(Ge);Se.draw(g.context,U,m,g.stencilModeForClipping(he),x,Kn.disabled,ee,Ne,u.id,ve.layoutVertexBuffer,K,re,u.paint,g.transform.zoom,xe)}}function dd(g,a,u,p,m,x,D){const S=g.context,M=S.gl,k="fill-extrusion-pattern",F=u.paint.get(k),N=F.constantOr(1),U=u.getCrossfadeParameters(),X=u.paint.get("fill-extrusion-opacity"),ee=F.constantOr(null);for(const K of p){const re=a.getTile(K),ue=re.getBucket(u);if(!ue)continue;const he=g.style.map.terrain&&g.style.map.terrain.getTerrainData(K),ie=ue.programConfigurations.get(u.id),ve=g.useProgram(N?"fillExtrusionPattern":"fillExtrusion",ie);N&&(g.context.activeTexture.set(M.TEXTURE0),re.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),ie.updatePaintBuffers(U)),Au(ie,k,ee,re,u);const xe=g.translatePosMatrix(K.posMatrix,re,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Se=u.paint.get("fill-extrusion-vertical-gradient"),Ne=N?xb(xe,g,Se,X,K,U,re):mu(xe,g,Se,X);ve.draw(S,S.gl.TRIANGLES,m,x,D,Kn.backCCW,Ne,he,u.id,ue.layoutVertexBuffer,ue.indexBuffer,ue.segments,u.paint,g.transform.zoom,ie,g.style.map.terrain&&ue.centroidVertexBuffer)}}function Ou(g,a,u,p,m,x,D){const S=g.context,M=S.gl,k=u.fbo;if(!k)return;const F=g.useProgram("hillshade"),N=g.style.map.terrain&&g.style.map.terrain.getTerrainData(a);S.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,k.colorAttachment.get()),F.draw(S,M.TRIANGLES,m,x,D,Kn.disabled,((U,X,ee,K)=>{const re=ee.paint.get("hillshade-shadow-color"),ue=ee.paint.get("hillshade-highlight-color"),he=ee.paint.get("hillshade-accent-color");let ie=ee.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===ee.paint.get("hillshade-illumination-anchor")&&(ie-=U.transform.angle);const ve=!U.options.moving;return{u_matrix:K?K.posMatrix:U.transform.calculatePosMatrix(X.tileID.toUnwrapped(),ve),u_image:0,u_latrange:vu(0,X.tileID),u_light:[ee.paint.get("hillshade-exaggeration"),ie],u_shadow:re,u_highlight:ue,u_accent:he}})(g,u,p,N?a:null),N,p.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}function We(g,a,u,p,m,x){const D=g.context,S=D.gl,M=a.dem;if(M&&M.data){const k=M.dim,F=M.stride,N=M.getPixels();if(D.activeTexture.set(S.TEXTURE1),D.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||g.getTileTexture(F),a.demTexture){const X=a.demTexture;X.update(N,{premultiply:!1}),X.bind(S.NEAREST,S.CLAMP_TO_EDGE)}else a.demTexture=new ei(D,N,S.RGBA,{premultiply:!1}),a.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);D.activeTexture.set(S.TEXTURE0);let U=a.fbo;if(!U){const X=new ei(D,{width:k,height:k,data:null},S.RGBA);X.bind(S.LINEAR,S.CLAMP_TO_EDGE),U=a.fbo=D.createFramebuffer(k,k,!0),U.colorAttachment.set(X.texture)}D.bindFramebuffer.set(U.framebuffer),D.viewport.set([0,0,k,k]),g.useProgram("hillshadePrepare").draw(D,S.TRIANGLES,p,m,x,Kn.disabled,((X,ee)=>{const K=ee.stride,re=v.create();return v.ortho(re,0,v.EXTENT,-v.EXTENT,0,0,1),v.translate(re,re,[0,-v.EXTENT,0]),{u_matrix:re,u_image:1,u_dimension:[K,K],u_zoom:X.overscaledZ,u_unpack:ee.getUnpackVector()}})(a.tileID,M),null,u.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),a.needsHillshadePrepare=!1}}function io(g,a,u,p,m,x){const D=p.paint.get("raster-fade-duration");if(!x&&D>0){const S=v.exported.now(),M=(S-g.timeAdded)/D,k=a?(S-a.timeAdded)/D:-1,F=u.getSource(),N=m.coveringZoomLevel({tileSize:F.tileSize,roundZoom:F.roundZoom}),U=!a||Math.abs(a.tileID.overscaledZ-N)>Math.abs(g.tileID.overscaledZ-N),X=U&&g.refreshedUponExpiration?1:v.clamp(U?M:1-k,0,1);return g.refreshedUponExpiration&&M>=1&&(g.refreshedUponExpiration=!1),a?{opacity:1,mix:1-X}:{opacity:X,mix:0}}return{opacity:1,mix:0}}const Hn=new v.Color(1,0,0,1),hi=new v.Color(0,1,0,1),wi=new v.Color(0,0,1,1),qa=new v.Color(1,0,1,1),Ii=new v.Color(0,1,1,1);function Za(g,a,u,p){Ka(g,0,a+u/2,g.transform.width,u,p)}function Pu(g,a,u,p){Ka(g,a-u/2,0,u,g.transform.height,p)}function Ka(g,a,u,p,m,x){const D=g.context,S=D.gl;S.enable(S.SCISSOR_TEST),S.scissor(a*g.pixelRatio,u*g.pixelRatio,p*g.pixelRatio,m*g.pixelRatio),D.clear({color:x}),S.disable(S.SCISSOR_TEST)}function zs(g,a,u){const p=g.context,m=p.gl,x=u.posMatrix,D=g.useProgram("debug"),S=zt.disabled,M=ni.disabled,k=g.colorModeForRenderPass(),F="$debug",N=g.style.map.terrain&&g.style.map.terrain.getTerrainData(u);p.activeTexture.set(m.TEXTURE0),g.emptyTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE);const U=a.getTileByID(u.key).latestRawTileData,X=Math.floor((U&&U.byteLength||0)/1024),ee=a.getTile(u).tileSize,K=512/Math.min(ee,512)*(u.overscaledZ/g.transform.zoom)*.5;let re=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(re+=` => ${u.overscaledZ}`),function(ue,he){ue.initDebugOverlayCanvas();const ie=ue.debugOverlayCanvas,ve=ue.context.gl,xe=ue.debugOverlayCanvas.getContext("2d");xe.clearRect(0,0,ie.width,ie.height),xe.shadowColor="white",xe.shadowBlur=2,xe.lineWidth=1.5,xe.strokeStyle="white",xe.textBaseline="top",xe.font="bold 36px Open Sans, sans-serif",xe.fillText(he,5,5),xe.strokeText(he,5,5),ue.debugOverlayTexture.update(ie),ue.debugOverlayTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)}(g,`${re} ${X}kB`),D.draw(p,m.TRIANGLES,S,M,Un.alphaBlended,Kn.disabled,Fr(x,v.Color.transparent,K),null,F,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),D.draw(p,m.LINE_STRIP,S,M,k,Kn.disabled,Fr(x,v.Color.red),N,F,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function _t(g,a,u){const p=g.context,m=p.gl,x=g.colorModeForRenderPass(),D=new zt(m.LEQUAL,zt.ReadWrite,g.depthRangeFor3D),S=g.useProgram("terrain"),M=a.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,g.width,g.height]);for(const k of u){const F=g.renderToTexture.getTexture(k),N=a.getTerrainData(k.tileID);p.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,F.texture);const U={u_matrix:g.transform.calculatePosMatrix(k.tileID.toUnwrapped()),u_texture:0,u_ele_delta:a.getMeshFrameDelta(g.transform.zoom)};S.draw(p,m.TRIANGLES,D,ni.disabled,x,Kn.backCCW,U,N,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}const $t={symbol:function(g,a,u,p,m){if("translucent"!==g.renderPass)return;const x=ni.disabled,D=g.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(S,M,k,F,N,U,X){const ee=M.transform,K="map"===N,re="map"===U;for(const ue of S){const he=F.getTile(ue),ie=he.getBucket(k);if(!ie||!ie.text||!ie.text.segments.get().length)continue;const ve=v.evaluateSizeForZoom(ie.textSizeData,ee.zoom),xe=Ae(he,1,M.transform.zoom),Se=Hi(ue.posMatrix,re,K,M.transform,xe),Ne="none"!==k.layout.get("icon-text-fit")&&ie.hasIconData();if(ve){const ze=Math.pow(2,ee.zoom-he.tileID.overscaledZ);tp(ie,K,re,X,ee,Se,ue.posMatrix,ze,ve,Ne,M.style.map.terrain?(Ge,He)=>M.style.map.terrain.getElevation(ue,Ge,He):null)}}}(p,g,u,a,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),m),0!==u.paint.get("icon-opacity").constantOr(1)&&ma(g,a,u,p,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),x,D),0!==u.paint.get("text-opacity").constantOr(1)&&ma(g,a,u,p,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),x,D),a.map.showCollisionBoxes&&(cd(g,a,u,p,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),cd(g,a,u,p,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(g,a,u,p){if("translucent"!==g.renderPass)return;const m=u.paint.get("circle-opacity"),x=u.paint.get("circle-stroke-width"),D=u.paint.get("circle-stroke-opacity"),S=!u.layout.get("circle-sort-key").isConstant();if(0===m.constantOr(1)&&(0===x.constantOr(1)||0===D.constantOr(1)))return;const M=g.context,k=M.gl,F=g.depthModeForSublayer(0,zt.ReadOnly),N=ni.disabled,U=g.colorModeForRenderPass(),X=[];for(let ee=0;ee<p.length;ee++){const K=p[ee],re=a.getTile(K),ue=re.getBucket(u);if(!ue)continue;const he=ue.programConfigurations.get(u.id),ie=g.useProgram("circle",he),ve=ue.layoutVertexBuffer,xe=ue.indexBuffer,Se=g.style.map.terrain&&g.style.map.terrain.getTerrainData(K),Ne={programConfiguration:he,program:ie,layoutVertexBuffer:ve,indexBuffer:xe,uniformValues:gu(g,K,re,u),terrainData:Se};if(S){const ze=ue.segments.get();for(const Ge of ze)X.push({segments:new v.SegmentVector([Ge]),sortKey:Ge.sortKey,state:Ne})}else X.push({segments:ue.segments,sortKey:0,state:Ne})}S&&X.sort((ee,K)=>ee.sortKey-K.sortKey);for(const ee of X){const{programConfiguration:K,program:re,layoutVertexBuffer:ue,indexBuffer:he,uniformValues:ie,terrainData:ve}=ee.state;re.draw(M,k.TRIANGLES,F,N,U,Kn.disabled,ie,ve,u.id,ue,he,ee.segments,u.paint,g.transform.zoom,K)}},heatmap:function(g,a,u,p){if(0!==u.paint.get("heatmap-opacity"))if("offscreen"===g.renderPass){const m=g.context,x=m.gl,D=ni.disabled,S=new Un([x.ONE,x.ONE],v.Color.transparent,[!0,!0,!0,!0]);(function(M,k,F){const N=M.gl;M.activeTexture.set(N.TEXTURE1),M.viewport.set([0,0,k.width/4,k.height/4]);let U=F.heatmapFbo;if(U)N.bindTexture(N.TEXTURE_2D,U.colorAttachment.get()),M.bindFramebuffer.set(U.framebuffer);else{const X=N.createTexture();N.bindTexture(N.TEXTURE_2D,X),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,N.CLAMP_TO_EDGE),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,N.CLAMP_TO_EDGE),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.LINEAR),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.LINEAR),U=F.heatmapFbo=M.createFramebuffer(k.width/4,k.height/4,!1),function(ee,K,re,ue){const he=ee.gl;he.texImage2D(he.TEXTURE_2D,0,he.RGBA,K.width/4,K.height/4,0,he.RGBA,ee.extRenderToTextureHalfFloat?ee.extTextureHalfFloat.HALF_FLOAT_OES:he.UNSIGNED_BYTE,null),ue.colorAttachment.set(re)}(M,k,X,U)}})(m,g,u),m.clear({color:v.Color.transparent});for(let M=0;M<p.length;M++){const k=p[M];if(a.hasRenderableParent(k))continue;const F=a.getTile(k),N=F.getBucket(u);if(!N)continue;const U=N.programConfigurations.get(u.id),X=g.useProgram("heatmap",U),{zoom:ee}=g.transform;X.draw(m,x.TRIANGLES,zt.disabled,D,S,Kn.disabled,Xh(k.posMatrix,F,ee,u.paint.get("heatmap-intensity")),null,u.id,N.layoutVertexBuffer,N.indexBuffer,N.segments,u.paint,g.transform.zoom,U)}m.viewport.set([0,0,g.width,g.height])}else"translucent"===g.renderPass&&(g.context.setColorMode(g.colorModeForRenderPass()),function(m,x){const D=m.context,S=D.gl,M=x.heatmapFbo;if(!M)return;D.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,M.colorAttachment.get()),D.activeTexture.set(S.TEXTURE1);let k=x.colorRampTexture;k||(k=x.colorRampTexture=new ei(D,x.colorRamp,S.RGBA)),k.bind(S.LINEAR,S.CLAMP_TO_EDGE),m.useProgram("heatmapTexture").draw(D,S.TRIANGLES,zt.disabled,ni.disabled,m.colorModeForRenderPass(),Kn.disabled,((F,N,U,X)=>{const ee=v.create();v.ortho(ee,0,F.width,F.height,0,0,1);const K=F.context.gl;return{u_matrix:ee,u_world:[K.drawingBufferWidth,K.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:N.paint.get("heatmap-opacity")}})(m,x),null,x.id,m.viewportBuffer,m.quadTriangleIndexBuffer,m.viewportSegments,x.paint,m.transform.zoom)}(g,u))},line:function(g,a,u,p){if("translucent"!==g.renderPass)return;const m=u.paint.get("line-opacity"),x=u.paint.get("line-width");if(0===m.constantOr(1)||0===x.constantOr(1))return;const D=g.depthModeForSublayer(0,zt.ReadOnly),S=g.colorModeForRenderPass(),M=u.paint.get("line-dasharray"),k=u.paint.get("line-pattern"),F=k.constantOr(1),N=u.paint.get("line-gradient"),U=u.getCrossfadeParameters(),X=F?"linePattern":M?"lineSDF":N?"lineGradient":"line",ee=g.context,K=ee.gl;let re=!0;for(const ue of p){const he=a.getTile(ue);if(F&&!he.patternsLoaded())continue;const ie=he.getBucket(u);if(!ie)continue;const ve=ie.programConfigurations.get(u.id),xe=g.context.program.get(),Se=g.useProgram(X,ve),Ne=re||Se.program!==xe,ze=g.style.map.terrain&&g.style.map.terrain.getTerrainData(ue),Ge=k.constantOr(null);if(Ge&&he.imageAtlas){const ft=he.imageAtlas,Ot=ft.patternPositions[Ge.to.toString()],Bt=ft.patternPositions[Ge.from.toString()];Ot&&Bt&&ve.setConstantPatternPositions(Ot,Bt)}const He=ze?ue:null,Ke=F?xu(g,he,u,U,He):M?Jh(g,he,u,M,U,He):N?yu(g,he,u,ie.lineClipsArray.length,He):ed(g,he,u,He);if(F)ee.activeTexture.set(K.TEXTURE0),he.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),ve.updatePaintBuffers(U);else if(M&&(Ne||g.lineAtlas.dirty))ee.activeTexture.set(K.TEXTURE0),g.lineAtlas.bind(ee);else if(N){const ft=ie.gradients[u.id];let Ot=ft.texture;if(u.gradientVersion!==ft.version){let Bt=256;if(u.stepInterpolant){const mt=a.getSource().maxzoom,Cn=ue.canonical.z===mt?Math.ceil(1<<g.transform.maxZoom-ue.canonical.z):1;Bt=v.clamp(v.nextPowerOfTwo(ie.maxLineLength/v.EXTENT*1024*Cn),256,ee.maxTextureSize)}ft.gradient=v.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:Bt,image:ft.gradient||void 0,clips:ie.lineClipsArray}),ft.texture?ft.texture.update(ft.gradient):ft.texture=new ei(ee,ft.gradient,K.RGBA),ft.version=u.gradientVersion,Ot=ft.texture}ee.activeTexture.set(K.TEXTURE0),Ot.bind(u.stepInterpolant?K.NEAREST:K.LINEAR,K.CLAMP_TO_EDGE)}Se.draw(ee,K.TRIANGLES,D,g.stencilModeForClipping(ue),S,Kn.disabled,Ke,ze,u.id,ie.layoutVertexBuffer,ie.indexBuffer,ie.segments,u.paint,g.transform.zoom,ve,ie.layoutVertexBuffer2),re=!1}},fill:function(g,a,u,p){const m=u.paint.get("fill-color"),x=u.paint.get("fill-opacity");if(0===x.constantOr(1))return;const D=g.colorModeForRenderPass(),S=u.paint.get("fill-pattern"),M=g.opaquePassEnabledForLayer()&&!S.constantOr(1)&&1===m.constantOr(v.Color.transparent).a&&1===x.constantOr(0)?"opaque":"translucent";if(g.renderPass===M){const k=g.depthModeForSublayer(1,"opaque"===g.renderPass?zt.ReadWrite:zt.ReadOnly);Je(g,a,u,p,k,D,!1)}if("translucent"===g.renderPass&&u.paint.get("fill-antialias")){const k=g.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,zt.ReadOnly);Je(g,a,u,p,k,D,!0)}},"fill-extrusion":function(g,a,u,p){const m=u.paint.get("fill-extrusion-opacity");if(0!==m&&"translucent"===g.renderPass){const x=new zt(g.context.gl.LEQUAL,zt.ReadWrite,g.depthRangeFor3D);if(1!==m||u.paint.get("fill-extrusion-pattern").constantOr(1))dd(g,a,u,p,x,ni.disabled,Un.disabled),dd(g,a,u,p,x,g.stencilModeFor3D(),g.colorModeForRenderPass());else{const D=g.colorModeForRenderPass();dd(g,a,u,p,x,ni.disabled,D)}}},hillshade:function(g,a,u,p){if("offscreen"!==g.renderPass&&"translucent"!==g.renderPass)return;const m=g.context,x=g.depthModeForSublayer(0,zt.ReadOnly),D=g.colorModeForRenderPass(),[S,M]="translucent"===g.renderPass?g.stencilConfigForOverlap(p):[{},p];for(const k of M){const F=a.getTile(k);void 0!==F.needsHillshadePrepare&&F.needsHillshadePrepare&&"offscreen"===g.renderPass?We(g,F,u,x,ni.disabled,D):"translucent"===g.renderPass&&Ou(g,k,F,u,x,S[k.overscaledZ],D)}m.viewport.set([0,0,g.width,g.height])},raster:function(g,a,u,p){if("translucent"!==g.renderPass||0===u.paint.get("raster-opacity")||!p.length)return;const m=g.context,x=m.gl,D=a.getSource(),S=g.useProgram("raster"),M=g.colorModeForRenderPass(),[k,F]=D instanceof Wn?[{},p]:g.stencilConfigForOverlap(p),N=F[F.length-1].overscaledZ,U=!g.options.moving;for(const X of F){const ee=g.depthModeForSublayer(X.overscaledZ-N,1===u.paint.get("raster-opacity")?zt.ReadWrite:zt.ReadOnly,x.LESS),K=a.getTile(X);K.registerFadeDuration(u.paint.get("raster-fade-duration"));const re=a.findLoadedParent(X,0),ue=io(K,re,a,u,g.transform,g.style.map.terrain);let he,ie;const ve="nearest"===u.paint.get("raster-resampling")?x.NEAREST:x.LINEAR;m.activeTexture.set(x.TEXTURE0),K.texture.bind(ve,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),m.activeTexture.set(x.TEXTURE1),re?(re.texture.bind(ve,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),he=Math.pow(2,re.tileID.overscaledZ-K.tileID.overscaledZ),ie=[K.tileID.canonical.x*he%1,K.tileID.canonical.y*he%1]):K.texture.bind(ve,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST);const xe=g.style.map.terrain&&g.style.map.terrain.getTerrainData(X),Se=xe?X:null,Ne=Se?Se.posMatrix:g.transform.calculatePosMatrix(X.toUnwrapped(),U),ze=Zn(Ne,ie||[0,0],he||1,ue,u);D instanceof Wn?S.draw(m,x.TRIANGLES,ee,ni.disabled,M,Kn.disabled,ze,xe,u.id,D.boundsBuffer,g.quadTriangleIndexBuffer,D.boundsSegments):S.draw(m,x.TRIANGLES,ee,k[X.overscaledZ],M,Kn.disabled,ze,xe,u.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}},background:function(g,a,u,p){const m=u.paint.get("background-color"),x=u.paint.get("background-opacity");if(0===x)return;const D=g.context,S=D.gl,M=g.transform,k=M.tileSize,F=u.paint.get("background-pattern");if(g.isPatternMissing(F))return;const N=!F&&1===m.a&&1===x&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==N)return;const U=ni.disabled,X=g.depthModeForSublayer(0,"opaque"===N?zt.ReadWrite:zt.ReadOnly),ee=g.colorModeForRenderPass(),K=g.useProgram(F?"backgroundPattern":"background"),re=p||M.coveringTiles({tileSize:k,terrain:g.style.map.terrain});F&&(D.activeTexture.set(S.TEXTURE0),g.imageManager.bind(g.context));const ue=u.getCrossfadeParameters();for(const he of re){const ie=p?he.posMatrix:g.transform.calculatePosMatrix(he.toUnwrapped()),ve=F?Qe(ie,x,g,F,{tileID:he,tileSize:k},ue):Cb(ie,x,m),xe=g.style.map.terrain&&g.style.map.terrain.getTerrainData(he);K.draw(D,S.TRIANGLES,X,U,ee,Kn.disabled,ve,xe,u.id,g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}},debug:function(g,a,u){for(let p=0;p<u.length;p++)zs(g,a,u[p])},custom:function(g,a,u){const p=g.context,m=u.implementation;if("offscreen"===g.renderPass){const x=m.prerender;x&&(g.setCustomLayerDefaults(),p.setColorMode(g.colorModeForRenderPass()),x.call(m,p.gl,g.transform.customLayerMatrix()),p.setDirty(),g.setBaseState())}else if("translucent"===g.renderPass){g.setCustomLayerDefaults(),p.setColorMode(g.colorModeForRenderPass()),p.setStencilMode(ni.disabled);const x="3d"===m.renderingMode?new zt(g.context.gl.LEQUAL,zt.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,zt.ReadOnly);p.setDepthMode(x),m.render(p.gl,g.transform.customLayerMatrix()),p.setDirty(),g.setBaseState(),p.bindFramebuffer.set(null)}}};class Jn{constructor(a,u){this.context=new vr(a),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:v.create(),renderTime:0},this.setup(),this.numSublayers=Rt.maxUnderzooming+Rt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ai,this.gpuTimers={}}resize(a,u,p){if(this.width=a*p,this.height=u*p,this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const a=this.context,u=new v.PosArray;u.emplaceBack(0,0),u.emplaceBack(v.EXTENT,0),u.emplaceBack(0,v.EXTENT),u.emplaceBack(v.EXTENT,v.EXTENT),this.tileExtentBuffer=a.createVertexBuffer(u,Ll.members),this.tileExtentSegments=v.SegmentVector.simpleSegment(0,0,4,2);const p=new v.PosArray;p.emplaceBack(0,0),p.emplaceBack(v.EXTENT,0),p.emplaceBack(0,v.EXTENT),p.emplaceBack(v.EXTENT,v.EXTENT),this.debugBuffer=a.createVertexBuffer(p,Ll.members),this.debugSegments=v.SegmentVector.simpleSegment(0,0,4,5);const m=new v.RasterBoundsArray;m.emplaceBack(0,0,0,0),m.emplaceBack(v.EXTENT,0,v.EXTENT,0),m.emplaceBack(0,v.EXTENT,0,v.EXTENT),m.emplaceBack(v.EXTENT,v.EXTENT,v.EXTENT,v.EXTENT),this.rasterBoundsBuffer=a.createVertexBuffer(m,Xo.members),this.rasterBoundsSegments=v.SegmentVector.simpleSegment(0,0,4,2);const x=new v.PosArray;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(x,Ll.members),this.viewportSegments=v.SegmentVector.simpleSegment(0,0,4,2);const D=new v.LineStripIndexArray;D.emplaceBack(0),D.emplaceBack(1),D.emplaceBack(3),D.emplaceBack(2),D.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(D);const S=new v.TriangleIndexArray;S.emplaceBack(0,1,2),S.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(S),this.emptyTexture=new ei(a,{width:1,height:1,data:new Uint8Array([0,0,0,0])},a.gl.RGBA);const M=this.context.gl;this.stencilClearMode=new ni({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const a=this.context,u=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=v.create();v.ortho(p,0,this.width,this.height,0,0,1),v.scale(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(a,u.TRIANGLES,zt.disabled,this.stencilClearMode,Un.disabled,Kn.disabled,_u(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,u){if(this.currentStencilSource===a.source||!a.isTileClipped()||!u||!u.length)return;this.currentStencilSource=a.source;const p=this.context,m=p.gl;this.nextStencilID+u.length>256&&this.clearStencil(),p.setColorMode(Un.disabled),p.setDepthMode(zt.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const D of u){const S=this._tileClippingMaskIDs[D.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(D);x.draw(p,m.TRIANGLES,zt.disabled,new ni({func:m.ALWAYS,mask:0},S,255,m.KEEP,m.KEEP,m.REPLACE),Un.disabled,Kn.disabled,_u(D.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,u=this.context.gl;return new ni({func:u.NOTEQUAL,mask:255},a,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(a){const u=this.context.gl;return new ni({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(a){const u=this.context.gl,p=a.sort((D,S)=>S.overscaledZ-D.overscaledZ),m=p[p.length-1].overscaledZ,x=p[0].overscaledZ-m+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const D={};for(let S=0;S<x;S++)D[S+m]=new ni({func:u.GEQUAL,mask:255},S+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=x,[D,p]}return[{[m]:ni.disabled},p]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new Un([a.CONSTANT_COLOR,a.ONE],new v.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Un.unblended:Un.alphaBlended}depthModeForSublayer(a,u,p){if(!this.opaquePassEnabledForLayer())return zt.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new zt(p||this.context.gl.LEQUAL,u,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,u){this.style=a,this.options=u,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(v.exported.now()),this.imageManager.beginFrame();const p=this.style._order,m=this.style.sourceCaches,x={},D={},S={};for(const M in m){const k=m[M];k.used&&k.prepare(this.context),x[M]=k.getVisibleCoordinates(),D[M]=x[M].slice().reverse(),S[M]=k.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<p.length;M++)if(this.style._layers[p[M]].is3D()){this.opaquePassCutoff=M;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const M=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!v.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||M.length)&&(v.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(k,F){const N=k.context,U=N.gl,X=Un.unblended,ee=new zt(U.LEQUAL,zt.ReadWrite,[0,1]),K=F.getTerrainMesh(),re=F.sourceCache.getRenderableTiles(),ue=k.useProgram("terrainDepth");N.bindFramebuffer.set(F.getFramebuffer("depth").framebuffer),N.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),N.clear({color:v.Color.transparent,depth:1});for(const he of re){const ie=F.getTerrainData(he.tileID),ve={u_matrix:k.transform.calculatePosMatrix(he.tileID.toUnwrapped()),u_ele_delta:F.getMeshFrameDelta(k.transform.zoom)};ue.draw(N,U.TRIANGLES,ee,ni.disabled,X,Kn.backCCW,ve,ie,"terrain",K.vertexBuffer,K.indexBuffer,K.segments)}N.bindFramebuffer.set(null),N.viewport.set([0,0,k.width,k.height])}(this,this.style.map.terrain),function(k,F){const N=k.context,U=N.gl,X=Un.unblended,ee=new zt(U.LEQUAL,zt.ReadWrite,[0,1]),K=F.getTerrainMesh(),re=F.getCoordsTexture(),ue=F.sourceCache.getRenderableTiles(),he=k.useProgram("terrainCoords");N.bindFramebuffer.set(F.getFramebuffer("coords").framebuffer),N.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),N.clear({color:v.Color.transparent,depth:1}),F.coordsIndex=[];for(const ie of ue){const ve=F.getTerrainData(ie.tileID);N.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,re.texture);const xe={u_matrix:k.transform.calculatePosMatrix(ie.tileID.toUnwrapped()),u_terrain_coords_id:(255-F.coordsIndex.length)/255,u_texture:0,u_ele_delta:F.getMeshFrameDelta(k.transform.zoom)};he.draw(N,U.TRIANGLES,ee,ni.disabled,X,Kn.backCCW,xe,ve,"terrain",K.vertexBuffer,K.indexBuffer,K.segments),F.coordsIndex.push(ie.tileID.key)}N.bindFramebuffer.set(null),N.viewport.set([0,0,k.width,k.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const M of p){const k=this.style._layers[M];if(!k.hasOffscreenPass()||k.isHidden(this.transform.zoom))continue;const F=D[k.source];("custom"===k.type||F.length)&&this.renderLayer(this,m[k.source],k,F)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?v.Color.black:v.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[p[this.currentLayer]],k=m[M.source],F=x[M.source];this._renderTileClippingMasks(M,F),this.renderLayer(this,k,M,F)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const M=this.style._layers[p[this.currentLayer]],k=m[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;const F=("symbol"===M.type?S:D)[M.source];this._renderTileClippingMasks(M,x[M.source]),this.renderLayer(this,k,M,F)}if(this.options.showTileBoundaries){const M=function(k,F){let N=null;const U=Object.values(k._layers).flatMap(re=>re.source&&!re.isHidden(F)?[k.sourceCaches[re.source]]:[]),X=U.filter(re=>"vector"===re.getSource().type),ee=U.filter(re=>"vector"!==re.getSource().type),K=re=>{(!N||N.getSource().maxzoom<re.getSource().maxzoom)&&(N=re)};return X.forEach(re=>K(re)),N||ee.forEach(re=>K(re)),N}(this.style,this.transform.zoom);M&&$t.debug(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){const k=M.transform.padding;Za(M,M.transform.height-(k.top||0),3,Hn),Za(M,k.bottom||0,3,hi),Pu(M,k.left||0,3,wi),Pu(M,M.transform.width-(k.right||0),3,qa);const F=M.transform.centerPoint;var N,U,X,ee;Ka(N=M,(U=F.x)-1,(X=M.transform.height-F.y)-10,2,20,ee=Ii),Ka(N,U-10,X-1,20,2,ee)}(this),this.context.setDefault()}renderLayer(a,u,p,m){p.isHidden(this.transform.zoom)||("background"===p.type||"custom"===p.type||(m||[]).length)&&(this.id=p.id,this.gpuTimingStart(p),$t[p.type](a,u,p,m,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(a){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;let p=this.gpuTimers[a.id];p||(p=this.gpuTimers[a.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),p.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,p.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const a=this.context.extTimerQuery;a.endQueryEXT(a.TIME_ELAPSED_EXT)}collectGpuTimers(){const a=this.gpuTimers;return this.gpuTimers={},a}queryGpuTimers(a){const u={};for(const p in a){const m=a[p],x=this.context.extTimerQuery,D=x.getQueryObjectEXT(m.query,x.QUERY_RESULT_EXT)/1e6;x.deleteQueryEXT(m.query),u[p]=D}return u}translatePosMatrix(a,u,p,m,x){if(!p[0]&&!p[1])return a;const D=x?"map"===m?this.transform.angle:0:"viewport"===m?-this.transform.angle:0;if(D){const k=Math.sin(D),F=Math.cos(D);p=[p[0]*F-p[1]*k,p[0]*k+p[1]*F]}const S=[x?p[0]:Ae(u,p[0],this.transform.zoom),x?p[1]:Ae(u,p[1],this.transform.zoom),0],M=new Float32Array(16);return v.translate(M,a,S),M}saveTileTexture(a){const u=this._tileTextures[a.size[0]];u?u.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const u=this._tileTextures[a];return u&&u.length>0?u.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;const u=this.imageManager.getPattern(a.from.toString()),p=this.imageManager.getPattern(a.to.toString());return!u||!p}useProgram(a,u){this.cache=this.cache||{};const p=a+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new jt(this.context,a,Jc[a],u,Wa[a],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ei(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class ot{constructor(a,u){this.points=a,this.planes=u}static fromInvProjectionMatrix(a,u,p){const m=Math.pow(2,p),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>{const M=1/(S=v.transformMat4([],S,a))[3]/u*m;return v.mul$1(S,S,[M,M,1/S[3],M])}),D=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const M=function(U,X){var ee=X[0],K=X[1],re=X[2],ue=ee*ee+K*K+re*re;return ue>0&&(ue=1/Math.sqrt(ue)),U[0]=X[0]*ue,U[1]=X[1]*ue,U[2]=X[2]*ue,U}([],(U=[],X=mr([],x[S[0]],x[S[1]]),ee=mr([],x[S[2]],x[S[1]]),K=X[0],he=ee[0],U[0]=(re=X[1])*(ve=ee[2])-(ue=X[2])*(ie=ee[1]),U[1]=ue*he-K*ve,U[2]=K*ie-re*he,U)),k=-((F=M)[0]*(N=x[S[1]])[0]+F[1]*N[1]+F[2]*N[2]);var U,X,ee,K,re,ue,he,ie,ve,F,N;return M.concat(k)});return new ot(x,D)}}class Xr{constructor(a,u){var p,m,x;this.min=a,this.max=u,this.center=function(p,m,x){return p[0]=.5*m[0],p[1]=.5*m[1],p[2]=.5*m[2],p}([],((p=[])[0]=(m=this.min)[0]+(x=this.max)[0],p[1]=m[1]+x[1],p[2]=m[2]+x[2],p))}quadrant(a){const u=[a%2==0,a<2],p=ra(this.min),m=ra(this.max);for(let x=0;x<u.length;x++)p[x]=u[x]?this.min[x]:this.center[x],m[x]=u[x]?this.center[x]:this.max[x];return m[2]=this.max[2],new Xr(p,m)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersects(a){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let m=0;m<a.planes.length;m++){const x=a.planes[m];let D=0;for(let S=0;S<u.length;S++)v.dot(x,u[S])>=0&&D++;if(0===D)return 0;D!==u.length&&(p=!1)}if(p)return 2;for(let m=0;m<3;m++){let x=Number.MAX_VALUE,D=-Number.MAX_VALUE;for(let S=0;S<a.points.length;S++){const M=a.points[S][m]-this.min[m];x=Math.min(x,M),D=Math.max(D,M)}if(D<0||x>this.max[m]-this.min[m])return 0}return 1}}class Ci{constructor(a=0,u=0,p=0,m=0){if(isNaN(a)||a<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=u,this.left=p,this.right=m}interpolate(a,u,p){return null!=u.top&&null!=a.top&&(this.top=v.number(a.top,u.top,p)),null!=u.bottom&&null!=a.bottom&&(this.bottom=v.number(a.bottom,u.bottom,p)),null!=u.left&&null!=a.left&&(this.left=v.number(a.left,u.left,p)),null!=u.right&&null!=a.right&&(this.right=v.number(a.right,u.right,p)),this}getCenter(a,u){const p=v.clamp((this.left+a-this.right)/2,0,a),m=v.clamp((this.top+u-this.bottom)/2,0,u);return new v.pointGeometry(p,m)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new Ci(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Lr{constructor(a,u,p,m,x){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=void 0===x||!!x,this._minZoom=a||0,this._maxZoom=u||22,this._minPitch=p??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new v.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ci,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const a=new Lr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return a.tileSize=this.tileSize,a.latRange=this.latRange,a.width=this.width,a.height=this.height,a._center=this._center,a._elevation=this._elevation,a.zoom=this.zoom,a.angle=this.angle,a._fov=this._fov,a._pitch=this._pitch,a._unmodified=this._unmodified,a._edgeInsets=this._edgeInsets.clone(),a._calcMatrices(),a}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(a){void 0===a?a=!0:null===a&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new v.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(a){const u=-v.wrap(a,-180,180)*Math.PI/180;var p;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=(p=new v.ARRAY_TYPE(4),v.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p),function(p,m,x){var D=m[0],S=m[1],M=m[2],k=m[3],F=Math.sin(x),N=Math.cos(x);p[0]=D*N+M*F,p[1]=S*N+k*F,p[2]=D*-F+M*N,p[3]=S*-F+k*N}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const u=v.clamp(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=a/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(a){const u=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,u,p){this._unmodified=!1,this._edgeInsets.interpolate(a,u,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const u=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(a){const u=[new v.UnwrappedTileID(0,a)];if(this._renderWorldCopies){const p=this.pointCoordinate(new v.pointGeometry(0,0)),m=this.pointCoordinate(new v.pointGeometry(this.width,0)),x=this.pointCoordinate(new v.pointGeometry(this.width,this.height)),D=this.pointCoordinate(new v.pointGeometry(0,this.height)),S=Math.floor(Math.min(p.x,m.x,x.x,D.x)),M=Math.floor(Math.max(p.x,m.x,x.x,D.x)),k=1;for(let F=S-k;F<=M+k;F++)0!==F&&u.push(new v.UnwrappedTileID(F,a))}return u}coveringTiles(a){var u,p;let m=this.coveringZoomLevel(a);const x=m;if(void 0!==a.minzoom&&m<a.minzoom)return[];void 0!==a.maxzoom&&m>a.maxzoom&&(m=a.maxzoom);const D=this.pointCoordinate(this.getCameraPoint()),S=v.MercatorCoordinate.fromLngLat(this.center),M=Math.pow(2,m),k=[M*D.x,M*D.y,0],F=[M*S.x,M*S.y,0],N=ot.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m);let U=a.minzoom||0;!a.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(U=m);const X=a.terrain?2/Math.min(this.tileSize,a.tileSize)*this.tileSize:3,ee=ie=>({aabb:new Xr([ie*M,0,0],[(ie+1)*M,M,0]),zoom:0,x:0,y:0,wrap:ie,fullyVisible:!1}),K=[],re=[],ue=m,he=a.reparseOverscaled?x:m;if(this._renderWorldCopies)for(let ie=1;ie<=3;ie++)K.push(ee(-ie)),K.push(ee(ie));for(K.push(ee(0));K.length>0;){const ie=K.pop(),ve=ie.x,xe=ie.y;let Se=ie.fullyVisible;if(!Se){const Ke=ie.aabb.intersects(N);if(0===Ke)continue;Se=2===Ke}const Ne=a.terrain?k:F,ze=ie.aabb.distanceX(Ne),Ge=ie.aabb.distanceY(Ne),He=Math.max(Math.abs(ze),Math.abs(Ge));if(ie.zoom===ue||He>X+(1<<ue-ie.zoom)-2&&ie.zoom>=U){const Ke=ue-ie.zoom,ft=k[0]-.5-(ve<<Ke),Ot=k[1]-.5-(xe<<Ke);re.push({tileID:new v.OverscaledTileID(ie.zoom===ue?he:ie.zoom,ie.wrap,ie.zoom,ve,xe),distanceSq:Fa([F[0]-.5-ve,F[1]-.5-xe]),tileDistanceToCamera:Math.sqrt(ft*ft+Ot*Ot)})}else for(let Ke=0;Ke<4;Ke++){const ft=(ve<<1)+Ke%2,Ot=(xe<<1)+(Ke>>1),Bt=ie.zoom+1;let mt=ie.aabb.quadrant(Ke);if(a.terrain){const Cn=new v.OverscaledTileID(Bt,ie.wrap,Bt,ft,Ot),kn=a.terrain.getMinMaxElevation(Cn),en=null!==(u=kn.minElevation)&&void 0!==u?u:this.elevation,gn=null!==(p=kn.maxElevation)&&void 0!==p?p:this.elevation;mt=new Xr([mt.min[0],mt.min[1],en],[mt.max[0],mt.max[1],gn])}K.push({aabb:mt,zoom:Bt,x:ft,y:Ot,wrap:ie.wrap,fullyVisible:Se})}}return re.sort((ie,ve)=>ie.distanceSq-ve.distanceSq).map(ie=>ie.tileID)}resize(a,u){this.width=a,this.height=u,this.pixelsToGLUnits=[2/a,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const u=v.clamp(a.lat,-this.maxValidLatitude,this.maxValidLatitude);return new v.pointGeometry(v.mercatorXfromLng(a.lng)*this.worldSize,v.mercatorYfromLat(u)*this.worldSize)}unproject(a){return new v.MercatorCoordinate(a.x/this.worldSize,a.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(a){this.freezeElevation||(this.elevation=a?this.getElevation(this._center,a):0)}getElevation(a,u){const p=v.MercatorCoordinate.fromLngLat(a),m=(1<<this.tileZoom)*v.EXTENT,x=p.x*m,D=p.y*m,S=Math.floor(x/v.EXTENT),M=Math.floor(D/v.EXTENT),k=new v.OverscaledTileID(this.tileZoom,0,this.tileZoom,S,M);return u.getElevation(k,x%v.EXTENT,D%v.EXTENT,v.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(a){const u=this.pointLocation(this.centerPoint,a),p=this.getElevation(u,a);if(!(this.elevation-p))return;const m=this.getCameraPosition(),x=v.MercatorCoordinate.fromLngLat(m.lngLat,m.altitude),D=v.MercatorCoordinate.fromLngLat(u,p),S=x.x-D.x,M=x.y-D.y,k=x.z-D.z,F=Math.sqrt(S*S+M*M+k*k),N=this.scaleZoom(this.cameraToCenterDistance/F/this.tileSize);this._elevation=p,this._center=u,this.zoom=N}setLocationAtPoint(a,u){const p=this.pointCoordinate(u),m=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(a),D=new v.MercatorCoordinate(x.x-(p.x-m.x),x.y-(p.y-m.y));this.center=this.coordinateLocation(D),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(a,u){return u?this.coordinatePoint(this.locationCoordinate(a),this.getElevation(a,u),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(a))}pointLocation(a,u){return this.coordinateLocation(this.pointCoordinate(a,u))}locationCoordinate(a){return v.MercatorCoordinate.fromLngLat(a)}coordinateLocation(a){return a&&a.toLngLat()}pointCoordinate(a,u){if(u){const U=u.pointCoordinate(a);if(null!=U)return U}const p=[a.x,a.y,0,1],m=[a.x,a.y,1,1];v.transformMat4(p,p,this.pixelMatrixInverse),v.transformMat4(m,m,this.pixelMatrixInverse);const x=p[3],D=m[3],S=p[1]/x,M=m[1]/D,k=p[2]/x,F=m[2]/D,N=k===F?0:(0-k)/(F-k);return new v.MercatorCoordinate(v.number(p[0]/x,m[0]/D,N)/this.worldSize,v.number(S,M,N)/this.worldSize)}coordinatePoint(a,u=0,p=this.pixelMatrix){const m=[a.x*this.worldSize,a.y*this.worldSize,u,1];return v.transformMat4(m,m,p),new v.pointGeometry(m[0]/m[3],m[1]/m[3])}getBounds(){const a=Math.max(0,this.height/2-this.getHorizon());return(new v.LngLatBounds).extend(this.pointLocation(new v.pointGeometry(0,a))).extend(this.pointLocation(new v.pointGeometry(this.width,a))).extend(this.pointLocation(new v.pointGeometry(this.width,this.height))).extend(this.pointLocation(new v.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new v.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(a){a?(this.lngRange=[a.getWest(),a.getEast()],this.latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(a,u=!1){const p=a.key,m=u?this._alignedPosMatrixCache:this._posMatrixCache;if(m[p])return m[p];const x=a.canonical,D=this.worldSize/this.zoomScale(x.z),S=x.x+Math.pow(2,x.z)*a.wrap,M=v.identity(new Float64Array(16));return v.translate(M,M,[S*D,x.y*D,0]),v.scale(M,M,[D/v.EXTENT,D/v.EXTENT,1]),v.multiply(M,u?this.alignedProjMatrix:this.projMatrix,M),m[p]=new Float32Array(M),m[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let a,u,p,m,x=-90,D=90,S=-180,M=180;const k=this.size,F=this._unmodified;if(this.latRange){const X=this.latRange;x=v.mercatorYfromLat(X[1])*this.worldSize,D=v.mercatorYfromLat(X[0])*this.worldSize,a=D-x<k.y?k.y/(D-x):0}if(this.lngRange){const X=this.lngRange;S=v.wrap(v.mercatorXfromLng(X[0])*this.worldSize,0,this.worldSize),M=v.wrap(v.mercatorXfromLng(X[1])*this.worldSize,0,this.worldSize),M<S&&(M+=this.worldSize),u=M-S<k.x?k.x/(M-S):0}const N=this.point,U=Math.max(u||0,a||0);if(U)return this.center=this.unproject(new v.pointGeometry(u?(M+S)/2:N.x,a?(D+x)/2:N.y)),this.zoom+=this.scaleZoom(U),this._unmodified=F,void(this._constraining=!1);if(this.latRange){const X=N.y,ee=k.y/2;X-ee<x&&(m=x+ee),X+ee>D&&(m=D-ee)}if(this.lngRange){const X=(S+M)/2,ee=v.wrap(N.x,X-this.worldSize/2,X+this.worldSize/2),K=k.x/2;ee-K<S&&(p=S+K),ee+K>M&&(p=M-K)}void 0===p&&void 0===m||(this.center=this.unproject(new v.pointGeometry(void 0!==p?p:N.x,void 0!==m?m:N.y)).wrap()),this._unmodified=F,this._constraining=!1}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,u=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=v.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let m=v.identity(new Float64Array(16));v.scale(m,m,[this.width/2,-this.height/2,1]),v.translate(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=v.identity(new Float64Array(16)),v.scale(m,m,[1,-1,1]),v.translate(m,m,[-1,-1,0]),v.scale(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const x=this._elevation<0?this.cameraToCenterDistance:this.cameraToSeaLevelDistance,D=Math.PI/2+this._pitch,S=this._fov*(.5+a.y/this.height),M=Math.sin(S)*x/Math.sin(v.clamp(Math.PI-D-S,.01,Math.PI-.01)),k=this.getHorizon(),F=2*Math.atan(k/this.cameraToCenterDistance)*(.5+a.y/(2*k)),N=Math.sin(F)*x/Math.sin(v.clamp(Math.PI-D-F,.01,Math.PI-.01)),U=Math.min(M,N),X=1.01*(Math.cos(Math.PI/2-this._pitch)*U+x),ee=this.height/50;m=new Float64Array(16),v.perspective(m,this._fov,this.width/this.height,ee,X),m[8]=2*-a.x/this.width,m[9]=2*a.y/this.height,v.scale(m,m,[1,-1,1]),v.translate(m,m,[0,0,-this.cameraToCenterDistance]),v.rotateX(m,m,this._pitch),v.rotateZ(m,m,this.angle),v.translate(m,m,[-u,-p,0]),this.mercatorMatrix=v.scale([],m,[this.worldSize,this.worldSize,this.worldSize]),v.scale(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=v.multiply(new Float64Array(16),this.labelPlaneMatrix,m),v.translate(m,m,[0,0,-this.elevation]),this.projMatrix=m,this.invProjMatrix=v.invert([],m),this.pixelMatrix3D=v.multiply(new Float64Array(16),this.labelPlaneMatrix,m);const K=this.width%2/2,re=this.height%2/2,ue=Math.cos(this.angle),he=Math.sin(this.angle),ie=u-Math.round(u)+ue*K+he*re,ve=p-Math.round(p)+ue*re+he*K,xe=new Float64Array(m);if(v.translate(xe,xe,[ie>.5?ie-1:ie,ve>.5?ve-1:ve,0]),this.alignedProjMatrix=xe,m=v.invert(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const a=this.pointCoordinate(new v.pointGeometry(0,0)),u=[a.x*this.worldSize,a.y*this.worldSize,0,1];return v.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new v.pointGeometry(0,a))}getCameraQueryGeometry(a){const u=this.getCameraPoint();if(1===a.length)return[a[0],u];{let p=u.x,m=u.y,x=u.x,D=u.y;for(const S of a)p=Math.min(p,S.x),m=Math.min(m,S.y),x=Math.max(x,S.x),D=Math.max(D,S.y);return[new v.pointGeometry(p,m),new v.pointGeometry(x,m),new v.pointGeometry(x,D),new v.pointGeometry(p,D),new v.pointGeometry(p,m)]}}}class Di{constructor(a){this._hashName=a&&encodeURIComponent(a),v.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(u,p){let m=!1,x=null;const D=()=>{x=null,m&&(u(),x=setTimeout(D,300),m=!1)};return()=>(m=!0,x||D(),x)}(this._updateHashUnthrottled.bind(this))}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(a){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,m=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,m),D=Math.round(u.lng*x)/x,S=Math.round(u.lat*x)/x,M=this._map.getBearing(),k=this._map.getPitch();let F="";if(F+=a?`/${D}/${S}/${p}`:`${p}/${S}/${D}`,(M||k)&&(F+="/"+Math.round(10*M)/10),k&&(F+=`/${Math.round(k)}`),this._hashName){const N=this._hashName;let U=!1;const X=window.location.hash.slice(1).split("&").map(ee=>{const K=ee.split("=")[0];return K===N?(U=!0,`${K}=${F}`):ee}).filter(ee=>ee);return U||X.push(`${N}=${F}`),`#${X.join("&")}`}return`#${F}`}_getCurrentHash(){const a=window.location.hash.replace("#","");if(this._hashName){let u;return a.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(u=p)}),(u&&u[1]||"").split("/")}return a.split("/")}_onHashChange(){const a=this._getCurrentHash();if(a.length>=3&&!a.some(u=>isNaN(u))){const u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(a[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:u,pitch:+(a[4]||0)}),!0}return!1}_updateHashUnthrottled(){const a=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,a)}catch{}}}const tt={linearity:.3,easing:v.bezier(0,0,.3,1)},Wl=v.extend({deceleration:2500,maxSpeed:1400},tt),on=v.extend({deceleration:20,maxSpeed:1400},tt),Ru=v.extend({deceleration:1e3,maxSpeed:360},tt),Ya=v.extend({deceleration:1e3,maxSpeed:90},tt);class Nu{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:v.exported.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,u=v.exported.now();for(;a.length>0&&u-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new v.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)u.zoom+=x.zoomDelta||0,u.bearing+=x.bearingDelta||0,u.pitch+=x.pitchDelta||0,x.panDelta&&u.pan._add(x.panDelta),x.around&&(u.around=x.around),x.pinchAround&&(u.pinchAround=x.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(u.pan.mag()){const x=ji(u.pan.mag(),p,v.extend({},Wl,a||{}));m.offset=u.pan.mult(x.amount/u.pan.mag()),m.center=this._map.transform.center,ys(m,x)}if(u.zoom){const x=ji(u.zoom,p,on);m.zoom=this._map.transform.zoom+x.amount,ys(m,x)}if(u.bearing){const x=ji(u.bearing,p,Ru);m.bearing=this._map.transform.bearing+v.clamp(x.amount,-179,179),ys(m,x)}if(u.pitch){const x=ji(u.pitch,p,Ya);m.pitch=this._map.transform.pitch+x.amount,ys(m,x)}if(m.zoom||m.bearing){const x=void 0===u.pinchAround?u.around:u.pinchAround;m.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),v.extend(m,{noMoveStart:!0})}}function ys(g,a){(!g.duration||g.duration<a.duration)&&(g.duration=a.duration,g.easing=a.easing)}function ji(g,a,u){const{maxSpeed:p,linearity:m,deceleration:x}=u,D=v.clamp(g*m/(a/1e3),-p,p),S=Math.abs(D)/(x*m);return{easing:u.easing,duration:1e3*S,amount:D*(S/2)}}class Eo extends v.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u,p,m={}){const x=Oe.mousePos(u.getCanvasContainer(),p),D=u.unproject(x);super(a,v.extend({point:x,lngLat:D,originalEvent:p},m)),this._defaultPrevented=!1,this.target=u}}class Jr extends v.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u,p){const m="touchend"===a?p.changedTouches:p.touches,x=Oe.touchPos(u.getCanvasContainer(),m),D=x.map(M=>u.unproject(M)),S=x.reduce((M,k,F,N)=>M.add(k.div(N.length)),new v.pointGeometry(0,0));super(a,{points:x,point:S,lngLats:D,lngLat:u.unproject(S),originalEvent:p}),this._defaultPrevented=!1}}class Br extends v.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u,p){super(a,{originalEvent:p}),this._defaultPrevented=!1}}class Qa{constructor(a,u){this._map=a,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new Br(a.type,this._map,a))}mousedown(a,u){return this._mousedownPos=u,this._firePreventable(new Eo(a.type,this._map,a))}mouseup(a){this._map.fire(new Eo(a.type,this._map,a))}click(a,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Eo(a.type,this._map,a))}dblclick(a){return this._firePreventable(new Eo(a.type,this._map,a))}mouseover(a){this._map.fire(new Eo(a.type,this._map,a))}mouseout(a){this._map.fire(new Eo(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Jr(a.type,this._map,a))}touchmove(a){this._map.fire(new Jr(a.type,this._map,a))}touchend(a){this._map.fire(new Jr(a.type,this._map,a))}touchcancel(a){this._map.fire(new Jr(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ud{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new Eo(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Eo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new Eo(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fn{constructor(a,u){this._map=a,this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,u){this.isEnabled()&&a.shiftKey&&0===a.button&&(Oe.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(a,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=p,this._box||(this._box=Oe.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));const x=Math.min(m.x,p.x),D=Math.max(m.x,p.x),S=Math.min(m.y,p.y),M=Math.max(m.y,p.y);Oe.setTransform(this._box,`translate(${x}px,${S}px)`),this._box.style.width=D-x+"px",this._box.style.height=M-S+"px"}mouseupWindow(a,u){if(!this._active||0!==a.button)return;const p=this._startPos,m=u;if(this.reset(),Oe.suppressClick(),p.x!==m.x||p.y!==m.y)return this._map.fire(new v.Event("boxzoomend",{originalEvent:a})),{cameraAnimation:x=>x.fitScreenCoordinates(p,m,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&27===a.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(Oe.remove(this._box),this._box=null),Oe.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,u){return this._map.fire(new v.Event(a,{originalEvent:u}))}}function Vs(g,a){if(g.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${a.length}`);const u={};for(let p=0;p<g.length;p++)u[g[p].identifier]=a[p];return u}class hd{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=a.timeStamp),p.length===this.numTouches&&(this.centroid=function(m){const x=new v.pointGeometry(0,0);for(const D of m)x._add(D);return x.div(m.length)}(u),this.touches=Vs(p,u)))}touchmove(a,u,p){if(this.aborted||!this.centroid)return;const m=Vs(p,u);for(const x in this.touches){const D=m[x];(!D||D.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(a,u,p){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),0===p.length){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class ql{constructor(a){this.singleTap=new hd(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,u,p){this.singleTap.touchstart(a,u,p)}touchmove(a,u,p){this.singleTap.touchmove(a,u,p)}touchend(a,u,p){const m=this.singleTap.touchend(a,u,p);if(m){const x=a.timeStamp-this.lastTime<500,D=!this.lastTap||this.lastTap.dist(m)<30;if(x&&D||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Zl{constructor(){this._zoomIn=new ql({numTouches:1,numTaps:2}),this._zoomOut=new ql({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,u,p){this._zoomIn.touchstart(a,u,p),this._zoomOut.touchstart(a,u,p)}touchmove(a,u,p){this._zoomIn.touchmove(a,u,p),this._zoomOut.touchmove(a,u,p)}touchend(a,u,p){const m=this._zoomIn.touchend(a,u,p),x=this._zoomOut.touchend(a,u,p);return m?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()+1,around:D.unproject(m)},{originalEvent:a})}):x?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()-1,around:D.unproject(x)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xs{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){const u=this._moveFunction(...a);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(a,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,u){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);const m=u.length?u[0]:u;return!this._moved&&m.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(p,m))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&Oe.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Xa={0:1,2:2};class ii{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){const u=Oe.mouseButton(a);this._eventButton=u}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(u,p){const m=Xa[p];return void 0===u.buttons||(u.buttons&m)!==m}(a,this._eventButton)}isValidEndEvent(a){return Oe.mouseButton(a)===this._eventButton}}class pi{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return 1===a.targetTouches.length}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}const oo=g=>{g.mousedown=g.dragStart,g.mousemoveWindow=g.dragMove,g.mouseup=g.dragEnd,g.contextmenu=function(a){a.preventDefault()}},ir=({enable:g,clickTolerance:a,bearingDegreesPerPixelMoved:u=.8})=>{const p=new ii({checkCorrectEvent:m=>0===Oe.mouseButton(m)&&m.ctrlKey||2===Oe.mouseButton(m)});return new xs({clickTolerance:a,move:(m,x)=>({bearingDelta:(x.x-m.x)*u}),moveStateManager:p,enable:g,assignEvents:oo})},_c=({enable:g,clickTolerance:a,pitchDegreesPerPixelMoved:u=-.5})=>{const p=new ii({checkCorrectEvent:m=>0===Oe.mouseButton(m)&&m.ctrlKey||2===Oe.mouseButton(m)});return new xs({clickTolerance:a,move:(m,x)=>({pitchDelta:(x.y-m.y)*u}),moveStateManager:p,enable:g,assignEvents:oo})};class Kl{constructor(a,u){this._minTouches=a.cooperativeGestures?2:1,this._clickTolerance=a.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new v.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(a,u,p){return this._calculateTransform(a,u,p)}touchmove(a,u,p){if(this._map._cooperativeGestures&&(2===this._minTouches&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(a,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return a.preventDefault(),this._calculateTransform(a,u,p)}touchend(a,u,p){this._calculateTransform(a,u,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,u,p){p.length>0&&(this._active=!0);const m=Vs(p,u),x=new v.pointGeometry(0,0),D=new v.pointGeometry(0,0);let S=0;for(const k in m){const F=m[k],N=this._touches[k];N&&(x._add(F),D._add(F.sub(N)),S++,m[k]=F)}if(this._touches=m,S<this._minTouches||!D.mag())return;const M=D.div(S);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(S),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ja{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(a){}_move(a,u,p){return{}}touchstart(a,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(a,u,p){if(!this._firstTwoTouches)return;a.preventDefault();const[m,x]=this._firstTwoTouches,D=or(p,u,m),S=or(p,u,x);if(!D||!S)return;const M=this._aroundCenter?null:D.add(S).div(2);return this._move([D,S],M,a)}touchend(a,u,p){if(!this._firstTwoTouches)return;const[m,x]=this._firstTwoTouches,D=or(p,u,m),S=or(p,u,x);D&&S||(this._active&&Oe.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&"center"===a.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function or(g,a,u){for(let p=0;p<g.length;p++)if(g[p].identifier===u)return a[p]}function es(g,a){return Math.log(g/a)/Math.LN2}class Fu extends Ja{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,u){const p=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(es(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:es(this._distance,p),pinchAround:u}}}function wt(g,a){return 180*g.angleWith(a)/Math.PI}class kt extends Ja{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,u){const p=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:wt(this._vector,p),pinchAround:u}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const u=25/(Math.PI*this._minDiameter)*360,p=wt(a,this._startVector);return Math.abs(p)<u}}function vc(g){return Math.abs(g.y)>Math.abs(g.x)}class np extends Ja{constructor(a){super(),this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,u,p){super.touchstart(a,u,p),this._currentTouchCount=p.length}_start(a){this._lastPoints=a,vc(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,u,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const m=a[0].sub(this._lastPoints[0]),x=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,x,p.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(m.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(a,u,p){if(void 0!==this._valid)return this._valid;const m=a.mag()>=2,x=u.mag()>=2;if(!m&&!x)return;if(!m||!x)return void 0===this._firstMove&&(this._firstMove=p),p-this._firstMove<100&&void 0;const D=a.y>0==u.y>0;return vc(a)&&vc(u)&&D}}const ip={panStep:100,bearingStep:15,pitchStep:10};class yr{constructor(){const a=ip;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let u=0,p=0,m=0,x=0,D=0;switch(a.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:a.shiftKey?p=-1:(a.preventDefault(),x=-1);break;case 39:a.shiftKey?p=1:(a.preventDefault(),x=1);break;case 38:a.shiftKey?m=1:(a.preventDefault(),D=-1);break;case 40:a.shiftKey?m=-1:(a.preventDefault(),D=1);break;default:return}return this._rotationDisabled&&(p=0,m=0),{cameraAnimation:S=>{const M=S.getZoom();S.easeTo({duration:300,easeId:"keyboardHandler",easing:Lu,zoom:u?Math.round(M)+u*(a.shiftKey?2:1):M,bearing:S.getBearing()+p*this._bearingStep,pitch:S.getPitch()+m*this._pitchStep,offset:[-x*this._panStep,-D*this._panStep],center:S.getCenter()},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Lu(g){return g*(2-g)}const ws=4.000244140625;class Tb{constructor(a,u){this._map=a,this._el=a.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,v.bindAll(["_onTimeout"],this)}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=a&&"center"===a.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(a){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;a.preventDefault()}let u=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const p=v.exported.now(),m=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,0!==u&&u%ws==0?this._type="wheel":0!==u&&Math.abs(u)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(m*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),a.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=a,this._delta-=u,this._active||this._start(a)),a.preventDefault()}_onTimeout(a){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(a)}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=Oe.mousePos(this._el,a);this._around=v.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(u)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._map.transform;if(0!==this._delta){const S="wheel"===this._type&&Math.abs(this._delta)>ws?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*S)));this._delta<0&&0!==M&&(M=1/M);const k="number"==typeof this._targetZoom?a.zoomScale(this._targetZoom):a.scale;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(k*M))),"wheel"===this._type&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u="number"==typeof this._targetZoom?this._targetZoom:a.zoom,p=this._startZoom,m=this._easing;let x,D=!1;if("wheel"===this._type&&p&&m){const S=Math.min((v.exported.now()-this._lastWheelEventTime)/200,1),M=m(S);x=v.number(p,u,M),S<1?this._frameId||(this._frameId=!0):D=!0}else x=u,D=!0;return this._active=!0,D&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!D,zoomDelta:x-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let u=v.ease;if(this._prevEase){const p=this._prevEase,m=(v.exported.now()-p.start)/p.duration,x=p.easing(m+.01)-p.easing(m),D=.27/Math.sqrt(x*x+1e-4)*.01,S=Math.sqrt(.0729-D*D);u=v.bezier(D,S,.25,1)}return this._prevEase={start:v.exported.now(),duration:a,easing:u},u}reset(){this._active=!1}}class Bu{constructor(a,u){this._clickZoom=a,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Mi{constructor(){this.reset()}reset(){this._active=!1}dblclick(a,u){return a.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:p.getZoom()+(a.shiftKey?-1:1),around:p.unproject(u)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $i{constructor(){this._tap=new ql({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(a,u,p){this._swipePoint||(this._tapTime&&a.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?p.length>0&&(this._swipePoint=u[0],this._swipeTouch=p[0].identifier):this._tap.touchstart(a,u,p))}touchmove(a,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const m=u[0],x=m.y-this._swipePoint.y;return this._swipePoint=m,a.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(a,u,p)}touchend(a,u,p){this._tapTime?this._swipePoint&&0===p.length&&this.reset():this._tap.touchend(a,u,p)&&(this._tapTime=a.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kf{constructor(a,u,p){this._el=a,this._mousePan=u,this._touchPan=p}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class pd{constructor(a,u,p){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=u,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class yc{constructor(a,u,p,m){this._el=a,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const el=g=>g.zoom||g.drag||g.pitch||g.rotate;class op extends v.Event{}function fd(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class md{constructor(a,u){this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Nu(a),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u),v.bindAll(["handleEvent","handleWindowEvent"],this);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,x,D]of this._listeners)Oe.addEventListener(m,x,m===document?this.handleWindowEvent:this.handleEvent,D)}destroy(){for(const[a,u,p]of this._listeners)Oe.removeEventListener(a,u,a===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(a){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new Qa(u,a));const m=u.boxZoom=new fn(u,a);this._add("boxZoom",m);const x=new Zl,D=new Mi;u.doubleClickZoom=new Bu(D,x),this._add("tapZoom",x),this._add("clickZoom",D);const S=new $i;this._add("tapDragZoom",S);const M=u.touchPitch=new np(u);this._add("touchPitch",M);const k=ir(a),F=_c(a);u.dragRotate=new pd(a,k,F),this._add("mouseRotate",k,["mousePitch"]),this._add("mousePitch",F,["mouseRotate"]);const N=(({enable:ue,clickTolerance:he})=>{const ie=new ii({checkCorrectEvent:ve=>0===Oe.mouseButton(ve)&&!ve.ctrlKey});return new xs({clickTolerance:he,move:(ve,xe)=>({around:xe,panDelta:xe.sub(ve)}),activateOnStart:!0,moveStateManager:ie,enable:ue,assignEvents:oo})})(a),U=new Kl(a,u);u.dragPan=new Kf(p,N,U),this._add("mousePan",N),this._add("touchPan",U,["touchZoom","touchRotate"]);const X=new kt,ee=new Fu;u.touchZoomRotate=new yc(p,ee,X,S),this._add("touchRotate",X,["touchPan","touchZoom"]),this._add("touchZoom",ee,["touchPan","touchRotate"]);const K=u.scrollZoom=new Tb(u,this);this._add("scrollZoom",K,["mousePan"]);const re=u.keyboard=new yr;this._add("keyboard",re),this._add("blockableMapEvent",new ud(u));for(const ue of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])a.interactive&&a[ue]&&u[ue].enable(a[ue])}_add(a,u,p){this._handlers.push({handlerName:a,handler:u,allowed:p}),this._handlersById[a]=u}stop(a){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(el(this._eventsInProgress))||this.isZooming()}_blockedByActive(a,u,p){for(const m in a)if(m!==p&&(!u||u.indexOf(m)<0))return!0;return!1}handleWindowEvent(a){this.handleEvent(a,`${a.type}Window`)}_getMapTouches(a){const u=[];for(const p of a)this._el.contains(p.target)&&u.push(p);return u}handleEvent(a,u){if("blur"===a.type)return void this.stop(!0);this._updatingCamera=!0;const p="renderFrame"===a.type?void 0:a,m={needsRenderFrame:!1},x={},D={},S=a.touches,M=S?this._getMapTouches(S):void 0,k=M?Oe.touchPos(this._el,M):Oe.mousePos(this._el,a);for(const{handlerName:U,handler:X,allowed:ee}of this._handlers){if(!X.isEnabled())continue;let K;this._blockedByActive(D,ee,U)?X.reset():X[u||a.type]&&(K=X[u||a.type](a,k,M),this.mergeHandlerResult(m,x,K,U,p),K&&K.needsRenderFrame&&this._triggerRenderFrame()),(K||X.isActive())&&(D[U]=X)}const F={};for(const U in this._previousActiveHandlers)D[U]||(F[U]=p);this._previousActiveHandlers=D,(Object.keys(F).length||fd(m))&&(this._changes.push([m,x,F]),this._triggerRenderFrame()),(Object.keys(D).length||fd(m))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:N}=m;N&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],N(this._map))}mergeHandlerResult(a,u,p,m,x){if(!p)return;v.extend(a,p);const D={handlerName:m,originalEvent:p.originalEvent||x};void 0!==p.zoomDelta&&(u.zoom=D),void 0!==p.panDelta&&(u.drag=D),void 0!==p.pitchDelta&&(u.pitch=D),void 0!==p.bearingDelta&&(u.rotate=D)}_applyChanges(){const a={},u={},p={};for(const[m,x,D]of this._changes)m.panDelta&&(a.panDelta=(a.panDelta||new v.pointGeometry(0,0))._add(m.panDelta)),m.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+m.pitchDelta),void 0!==m.around&&(a.around=m.around),void 0!==m.pinchAround&&(a.pinchAround=m.pinchAround),m.noInertia&&(a.noInertia=m.noInertia),v.extend(u,x),v.extend(p,D);this._updateMapTransform(a,u,p),this._changes=[]}_updateMapTransform(a,u,p){const m=this._map,x=m.transform,D=m.terrain;if(!(fd(a)||D&&this._terrainMovement))return this._fireEvents(u,p,!0);let{panDelta:S,zoomDelta:M,bearingDelta:k,pitchDelta:F,around:N,pinchAround:U}=a;void 0!==U&&(N=U),m._stop(!0),N=N||m.transform.centerPoint;const X=x.pointLocation(S?N.sub(S):N);k&&(x.bearing+=k),F&&(x.pitch+=F),M&&(x.zoom+=M),D?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(S)):x.setLocationAtPoint(X,N):(this._terrainMovement=!0,x.freezeElevation=!0,x.setLocationAtPoint(X,N),this._map.once("moveend",()=>{x.freezeElevation=!1,this._terrainMovement=!1,x.recalculateZoom(m.terrain)})):x.setLocationAtPoint(X,N),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(u,p,!0)}_fireEvents(a,u,p){const m=el(this._eventsInProgress),x=el(a),D={};for(const F in a){const{originalEvent:N}=a[F];this._eventsInProgress[F]||(D[`${F}start`]=N),this._eventsInProgress[F]=a[F]}!m&&x&&this._fireEvent("movestart",x.originalEvent);for(const F in D)this._fireEvent(F,D[F]);x&&this._fireEvent("move",x.originalEvent);for(const F in a){const{originalEvent:N}=a[F];this._fireEvent(F,N)}const S={};let M;for(const F in this._eventsInProgress){const{handlerName:N,originalEvent:U}=this._eventsInProgress[F];this._handlersById[N].isActive()||(delete this._eventsInProgress[F],M=u[N]||U,S[`${F}end`]=M)}for(const F in S)this._fireEvent(F,S[F]);const k=el(this._eventsInProgress);if(p&&(m||x)&&!k){this._updatingCamera=!0;const F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),N=U=>0!==U&&-this._bearingSnap<U&&U<this._bearingSnap;F?(N(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:M})):(this._map.fire(new v.Event("moveend",{originalEvent:M})),N(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(a,u){this._map.fire(new v.Event(a,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new op("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Us={extend:(g,...a)=>v.extend(g,...a),run(g){g()},logToElement(g,a=!1,u="log"){const p=window.document.getElementById(u);p&&(a&&(p.innerHTML=""),p.innerHTML+=`<br>${g}`)}};class zu extends v.Evented{constructor(a,u){super(),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=u.bearingSnap,v.bindAll(["_renderFrameCallback"],this)}getCenter(){return new v.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(a,u){return this.jumpTo({center:a},u)}panBy(a,u,p){return a=v.pointGeometry.convert(a).mult(-1),this.panTo(this.transform.center,v.extend({offset:a},u),p)}panTo(a,u,p){return this.easeTo(v.extend({center:a},u),p)}getZoom(){return this.transform.zoom}setZoom(a,u){return this.jumpTo({zoom:a},u),this}zoomTo(a,u,p){return this.easeTo(v.extend({zoom:a},u),p)}zoomIn(a,u){return this.zoomTo(this.getZoom()+1,a,u),this}zoomOut(a,u){return this.zoomTo(this.getZoom()-1,a,u),this}getBearing(){return this.transform.bearing}setBearing(a,u){return this.jumpTo({bearing:a},u),this}getPadding(){return this.transform.padding}setPadding(a,u){return this.jumpTo({padding:a},u),this}rotateTo(a,u,p){return this.easeTo(v.extend({bearing:a},u),p)}resetNorth(a,u){return this.rotateTo(0,v.extend({duration:1e3},a),u),this}resetNorthPitch(a,u){return this.easeTo(v.extend({bearing:0,pitch:0,duration:1e3},a),u),this}snapToNorth(a,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,u):this}getPitch(){return this.transform.pitch}setPitch(a,u){return this.jumpTo({pitch:a},u),this}cameraForBounds(a,u){a=v.LngLatBounds.convert(a);const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),p,u)}_cameraForBoxAndBearing(a,u,p,m){const x={top:0,bottom:0,right:0,left:0};if("number"==typeof(m=v.extend({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding){const xe=m.padding;m.padding={top:xe,bottom:xe,right:xe,left:xe}}m.padding=v.extend(x,m.padding);const D=this.transform,S=D.padding,M=D.project(v.LngLat.convert(a)),k=D.project(v.LngLat.convert(u)),F=M.rotate(-p*Math.PI/180),N=k.rotate(-p*Math.PI/180),U=new v.pointGeometry(Math.max(F.x,N.x),Math.max(F.y,N.y)),X=new v.pointGeometry(Math.min(F.x,N.x),Math.min(F.y,N.y)),ee=U.sub(X),K=(D.width-(S.left+S.right+m.padding.left+m.padding.right))/ee.x,re=(D.height-(S.top+S.bottom+m.padding.top+m.padding.bottom))/ee.y;if(re<0||K<0)return void v.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ue=Math.min(D.scaleZoom(D.scale*Math.min(K,re)),m.maxZoom),he=v.pointGeometry.convert(m.offset),ie=new v.pointGeometry((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(p*Math.PI/180),ve=he.add(ie).mult(D.scale/D.zoomScale(ue));return{center:D.unproject(M.add(k).div(2).sub(ve)),zoom:ue,bearing:p}}fitBounds(a,u,p){return this._fitInternal(this.cameraForBounds(a,u),u,p)}fitScreenCoordinates(a,u,p,m,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(v.pointGeometry.convert(a)),this.transform.pointLocation(v.pointGeometry.convert(u)),p,m),m,x)}_fitInternal(a,u,p){return a?(delete(u=v.extend(a,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(a,u){this.stop();const p=this.transform;let m=!1,x=!1,D=!1;return"zoom"in a&&p.zoom!==+a.zoom&&(m=!0,p.zoom=+a.zoom),void 0!==a.center&&(p.center=v.LngLat.convert(a.center)),"bearing"in a&&p.bearing!==+a.bearing&&(x=!0,p.bearing=+a.bearing),"pitch"in a&&p.pitch!==+a.pitch&&(D=!0,p.pitch=+a.pitch),null==a.padding||p.isPaddingEqual(a.padding)||(p.padding=a.padding),this.fire(new v.Event("movestart",u)).fire(new v.Event("move",u)),m&&this.fire(new v.Event("zoomstart",u)).fire(new v.Event("zoom",u)).fire(new v.Event("zoomend",u)),x&&this.fire(new v.Event("rotatestart",u)).fire(new v.Event("rotate",u)).fire(new v.Event("rotateend",u)),D&&this.fire(new v.Event("pitchstart",u)).fire(new v.Event("pitch",u)).fire(new v.Event("pitchend",u)),this.fire(new v.Event("moveend",u))}calculateCameraOptionsFromTo(a,u,p,m=0){const x=v.MercatorCoordinate.fromLngLat(a,u),D=v.MercatorCoordinate.fromLngLat(p,m),S=D.x-x.x,M=D.y-x.y,k=D.z-x.z,F=Math.hypot(S,M,k);if(0===F)throw new Error("Can't calculate camera options with same From and To");const N=Math.hypot(S,M),U=this.transform.scaleZoom(this.transform.cameraToCenterDistance/F/this.transform.tileSize),X=180*Math.atan2(S,-M)/Math.PI;let ee=180*Math.acos(N/F)/Math.PI;return ee=k<0?90-ee:90+ee,{center:D.toLngLat(),zoom:U,pitch:ee,bearing:X}}easeTo(a,u){this._stop(!1,a.easeId),(!1===(a=v.extend({offset:[0,0],duration:500,easing:v.ease},a)).animate||!a.essential&&v.exported.prefersReducedMotion)&&(a.duration=0);const p=this.transform,m=this.getZoom(),x=this.getBearing(),D=this.getPitch(),S=this.getPadding(),M="zoom"in a?+a.zoom:m,k="bearing"in a?this._normalizeBearing(a.bearing,x):x,F="pitch"in a?+a.pitch:D,N="padding"in a?a.padding:p.padding,U=v.pointGeometry.convert(a.offset);let X=p.centerPoint.add(U);const ee=p.pointLocation(X),K=v.LngLat.convert(a.center||ee);this._normalizeCenter(K);const re=p.project(ee),ue=p.project(K).sub(re),he=p.zoomScale(M-m);let ie,ve;a.around&&(ie=v.LngLat.convert(a.around),ve=p.locationPoint(ie));const xe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||M!==m,this._rotating=this._rotating||x!==k,this._pitching=this._pitching||F!==D,this._padding=!p.isPaddingEqual(N),this._easeId=a.easeId,this._prepareEase(u,a.noMoveStart,xe),this.terrain&&this._prepareElevation(K),this._ease(Se=>{if(this._zooming&&(p.zoom=v.number(m,M,Se)),this._rotating&&(p.bearing=v.number(x,k,Se)),this._pitching&&(p.pitch=v.number(D,F,Se)),this._padding&&(p.interpolatePadding(S,N,Se),X=p.centerPoint.add(U)),this.terrain&&!a.freezeElevation&&this._updateElevation(Se),ie)p.setLocationAtPoint(ie,ve);else{const Ne=p.zoomScale(p.zoom-m),ze=M>m?Math.min(2,he):Math.max(.5,he),Ge=Math.pow(ze,1-Se),He=p.unproject(re.add(ue.mult(Se*Ge)).mult(Ne));p.setLocationAtPoint(p.renderWorldCopies?He.wrap():He,X)}this._fireMoveEvents(u)},Se=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,Se)},a),this}_prepareEase(a,u,p={}){this._moving=!0,u||p.moving||this.fire(new v.Event("movestart",a)),this._zooming&&!p.zooming&&this.fire(new v.Event("zoomstart",a)),this._rotating&&!p.rotating&&this.fire(new v.Event("rotatestart",a)),this._pitching&&!p.pitching&&this.fire(new v.Event("pitchstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.transform.getElevation(a,this.terrain),this.transform.freezeElevation=!0}_updateElevation(a){const u=this.transform.getElevation(this._elevationCenter,this.terrain);if(a<1&&u!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(p-(u-(p*a+this._elevationStart))/(1-a)),this._elevationTarget=u}this.transform.elevation=v.number(this._elevationStart,this._elevationTarget,a)}_finalizeElevation(){this.transform.freezeElevation=!1,this.transform.recalculateZoom(this.terrain)}_fireMoveEvents(a){this.fire(new v.Event("move",a)),this._zooming&&this.fire(new v.Event("zoom",a)),this._rotating&&this.fire(new v.Event("rotate",a)),this._pitching&&this.fire(new v.Event("pitch",a))}_afterEase(a,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const p=this._zooming,m=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new v.Event("zoomend",a)),m&&this.fire(new v.Event("rotateend",a)),x&&this.fire(new v.Event("pitchend",a)),this.fire(new v.Event("moveend",a))}flyTo(a,u){if(!a.essential&&v.exported.prefersReducedMotion){const mt=v.pick(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(mt,u)}this.stop(),a=v.extend({offset:[0,0],speed:1.2,curve:1.42,easing:v.ease},a);const p=this.transform,m=this.getZoom(),x=this.getBearing(),D=this.getPitch(),S=this.getPadding(),M="zoom"in a?v.clamp(+a.zoom,p.minZoom,p.maxZoom):m,k="bearing"in a?this._normalizeBearing(a.bearing,x):x,F="pitch"in a?+a.pitch:D,N="padding"in a?a.padding:p.padding,U=p.zoomScale(M-m),X=v.pointGeometry.convert(a.offset);let ee=p.centerPoint.add(X);const K=p.pointLocation(ee),re=v.LngLat.convert(a.center||K);this._normalizeCenter(re);const ue=p.project(K),he=p.project(re).sub(ue);let ie=a.curve;const ve=Math.max(p.width,p.height),xe=ve/U,Se=he.mag();if("minZoom"in a){const mt=v.clamp(Math.min(a.minZoom,m,M),p.minZoom,p.maxZoom),Cn=ve/p.zoomScale(mt-m);ie=Math.sqrt(Cn/Se*2)}const Ne=ie*ie;function ze(mt){const Cn=(xe*xe-ve*ve+(mt?-1:1)*Ne*Ne*Se*Se)/(2*(mt?xe:ve)*Ne*Se);return Math.log(Math.sqrt(Cn*Cn+1)-Cn)}function Ge(mt){return(Math.exp(mt)-Math.exp(-mt))/2}function He(mt){return(Math.exp(mt)+Math.exp(-mt))/2}const Ke=ze(0);let ft=function(mt){return He(Ke)/He(Ke+ie*mt)},Ot=function(mt){return ve*((He(Ke)*(Ge(Cn=Ke+ie*mt)/He(Cn))-Ge(Ke))/Ne)/Se;var Cn},Bt=(ze(1)-Ke)/ie;if(Math.abs(Se)<1e-6||!isFinite(Bt)){if(Math.abs(ve-xe)<1e-6)return this.easeTo(a,u);const mt=xe<ve?-1:1;Bt=Math.abs(Math.log(xe/ve))/ie,Ot=function(){return 0},ft=function(Cn){return Math.exp(mt*ie*Cn)}}return a.duration="duration"in a?+a.duration:1e3*Bt/("screenSpeed"in a?+a.screenSpeed/ie:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=x!==k,this._pitching=F!==D,this._padding=!p.isPaddingEqual(N),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(re),this._ease(mt=>{const Cn=mt*Bt,kn=1/ft(Cn);p.zoom=1===mt?M:m+p.scaleZoom(kn),this._rotating&&(p.bearing=v.number(x,k,mt)),this._pitching&&(p.pitch=v.number(D,F,mt)),this._padding&&(p.interpolatePadding(S,N,mt),ee=p.centerPoint.add(X)),this.terrain&&!a.freezeElevation&&this._updateElevation(mt);const en=1===mt?re:p.unproject(ue.add(he.mult(Ot(Cn))).mult(kn));p.setLocationAtPoint(p.renderWorldCopies?en.wrap():en,ee),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,u)}if(!a){const p=this.handlers;p&&p.stop(!1)}return this}_ease(a,u,p){!1===p.animate||0===p.duration?(a(1),u()):(this._easeStart=v.exported.now(),this._easeOptions=p,this._onEaseFrame=a,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const a=Math.min((v.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(a,u){a=v.wrap(a,-180,180);const p=Math.abs(a-u);return Math.abs(a-360-u)<p&&(a-=360),Math.abs(a+360-u)<p&&(a+=360),a}_normalizeCenter(a){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const p=a.lng-u.center.lng;a.lng+=p>180?-360:p<-180?360:0}}class Mn{constructor(a={}){this.options=a,v.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options&&this.options.compact,this._container=Oe.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=Oe.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Oe.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){Oe.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,u){const p=this._map._getUIString(`AttributionControl.${u}`);a.title=p,a.setAttribute("aria-label",p)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))}_updateData(a){!a||"metadata"!==a.sourceDataType&&"visibility"!==a.sourceDataType&&"style"!==a.dataType&&"terrain"!==a.type||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(m=>"string"!=typeof m?"":m)):"string"==typeof this.options.customAttribution&&a.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const u=this._map.style.sourceCaches;for(const m in u){const x=u[m];if(x.used||x.usedForTerrain){const D=x.getSource();D.attribution&&a.indexOf(D.attribution)<0&&a.push(D.attribution)}}a=a.filter(m=>String(m).trim()),a.sort((m,x)=>m.length-x.length),a=a.filter((m,x)=>{for(let D=x+1;D<a.length;D++)if(a[D].indexOf(m)>=0)return!1;return!0});const p=a.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,a.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")}}class xc{constructor(a={}){this.options=a,v.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=Oe.create("div","maplibregl-ctrl");const u=Oe.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){Oe.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const a=this._container.children;if(a.length){const u=a[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&u.classList.add("maplibregl-compact"):u.classList.remove("maplibregl-compact")}}}class Vu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const u=++this._id;return this._queue.push({callback:a,id:u,cancelled:!1}),u}remove(a){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const m of p)if(m.id===a)return void(m.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Uu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var gd=v.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class bd extends v.Evented{constructor(a){super(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,a.usedForTerrain=!0,a.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,u){this.sourceCache.update(a,u),this._renderableTilesKeys=[];const p={};for(const m of a.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))p[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),v.ortho(m.posMatrix,0,v.EXTENT,0,v.EXTENT,0,1),this._tiles[m.key]=new Gt(m,this.tileSize));for(const m in this._tiles)p[m]||delete this._tiles[m]}freeRtt(a){for(const u in this._tiles){const p=this._tiles[u];(!a||p.tileID.equals(a)||p.tileID.isChildOf(a)||a.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a){const u={};for(const p of this._renderableTilesKeys){const m=this._tiles[p].tileID;if(m.canonical.equals(a.canonical)){const x=a.clone();x.posMatrix=new Float64Array(16),v.ortho(x.posMatrix,0,v.EXTENT,0,v.EXTENT,0,1),u[p]=x}else if(m.canonical.isChildOf(a.canonical)){const x=a.clone();x.posMatrix=new Float64Array(16);const D=m.canonical.z-a.canonical.z,S=m.canonical.x-(m.canonical.x>>D<<D),M=m.canonical.y-(m.canonical.y>>D<<D),k=v.EXTENT>>D;v.ortho(x.posMatrix,0,k,0,k,0,1),v.translate(x.posMatrix,x.posMatrix,[-S*k,-M*k,0]),u[p]=x}else if(a.canonical.isChildOf(m.canonical)){const x=a.clone();x.posMatrix=new Float64Array(16);const D=a.canonical.z-m.canonical.z,S=a.canonical.x-(a.canonical.x>>D<<D),M=a.canonical.y-(a.canonical.y>>D<<D),k=v.EXTENT>>D;v.ortho(x.posMatrix,0,v.EXTENT,0,v.EXTENT,0,1),v.translate(x.posMatrix,x.posMatrix,[S*k,M*k,0]),v.scale(x.posMatrix,x.posMatrix,[1/2**D,1/2**D,0]),u[p]=x}}return u}getSourceTile(a,u){const p=this.sourceCache._source;let m=a.overscaledZ-this.deltaZoom;if(m>p.maxzoom&&(m=p.maxzoom),m<p.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(m).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!x||!x.dem)&&u)for(;m>=p.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(a.scaledTo(m--).key);return x}tilesAfterTime(a=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=a)}}class _d{constructor(a,u,p){this.painter=a,this.sourceCache=new bd(u),this.options=p,this.exaggeration="number"==typeof p.exaggeration?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,u,p,m=v.EXTENT){if(!(u>=0&&u<m&&p>=0&&p<m))return 0;let x=0;const D=this.getTerrainData(a);if(D.tile&&D.tile.dem){const S=((ee=[])[0]=(re=D.u_terrain_matrix)[0]*(ue=(K=[u/m*v.EXTENT,p/m*v.EXTENT])[0])+re[4]*(he=K[1])+re[12],ee[1]=re[1]*ue+re[5]*he+re[13],ee),M=[S[0]*D.tile.dem.dim,S[1]*D.tile.dem.dim],k=[Math.floor(M[0]),Math.floor(M[1])],F=D.tile.dem.get(k[0],k[1]),N=D.tile.dem.get(k[0],k[1]+1),U=D.tile.dem.get(k[0]+1,k[1]),X=D.tile.dem.get(k[0]+1,k[1]+1);x=v.number(v.number(F,N,M[0]-k[0]),v.number(U,X,M[0]-k[0]),M[1]-k[1])}var ee,K,re,ue,he;return x}getElevation(a,u,p,m=v.EXTENT){return this.getDEMElevation(a,u,p,m)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){const m=this.painter.context,x=new v.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ei(m,x,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ei(m,new v.RGBAImage({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=v.identity([])}const u=this.sourceCache.getSourceTile(a,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const m=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new ei(m,u.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),u.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u+u.tileID.key+a.key;if(p&&!this._demMatrixCache[p]){const m=this.sourceCache.sourceCache._source.maxzoom;let x=a.canonical.z-u.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=m?x=a.canonical.z-m:v.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const D=a.canonical.x-(a.canonical.x>>x<<x),S=a.canonical.y-(a.canonical.y>>x<<x),M=v.fromScaling(new Float64Array(16),[1/(v.EXTENT<<x),1/(v.EXTENT<<x),0]);v.translate(M,M,[D*v.EXTENT,S*v.EXTENT,0]),this._demMatrixCache[a.key]={matrix:M,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(a){const u=this.painter,p=u.width/devicePixelRatio,m=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ei(u.context,{width:p,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ei(u.context,{width:p,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,m,!0),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,m))),this._fbo.colorAttachment.set("coords"===a?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,D=0;x<this._coordsTextureSize;x++)for(let S=0;S<this._coordsTextureSize;S++,D+=4)u[D+0]=255&S,u[D+1]=255&x,u[D+2]=S>>8<<4|x>>8,u[D+3]=0;const p=new v.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),m=new ei(a,p,a.gl.RGBA,{premultiply:!1});return m.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(a){const u=new Uint8Array(4),p=this.painter.context,m=p.gl;p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);const x=u[0]+(u[2]>>4<<8),D=u[1]+((15&u[2])<<8),S=this.coordsIndex[255-u[3]],M=S&&this.sourceCache.getTileByID(S);if(!M)return null;const k=this._coordsTextureSize,F=(1<<M.tileID.canonical.z)*k;return new v.MercatorCoordinate((M.tileID.canonical.x*k+x)/F,(M.tileID.canonical.y*k+D)/F,this.getElevation(M.tileID,x,D,k))}getTerrainMesh(){if(this._mesh)return this._mesh;const a=this.painter.context,u=new v.Pos3dArray,p=new v.TriangleIndexArray,m=this.meshSize,x=v.EXTENT/m,D=m*m;for(let N=0;N<=m;N++)for(let U=0;U<=m;U++)u.emplaceBack(U*x,N*x,0);for(let N=0;N<D;N+=m+1)for(let U=0;U<m;U++)p.emplaceBack(U+N,m+U+N+1,m+U+N+2),p.emplaceBack(U+N,m+U+N+2,U+N+1);const S=u.length,M=S+2*(m+1);for(const N of[0,1])for(let U=0;U<=m;U++)for(const X of[0,1])u.emplaceBack(U*x,N*v.EXTENT,X);for(let N=0;N<2*m;N+=2)p.emplaceBack(M+N,M+N+1,M+N+3),p.emplaceBack(M+N,M+N+3,M+N+2),p.emplaceBack(S+N,S+N+3,S+N+1),p.emplaceBack(S+N,S+N+2,S+N+3);const k=u.length,F=k+2*(m+1);for(const N of[0,1])for(let U=0;U<=m;U++)for(const X of[0,1])u.emplaceBack(N*v.EXTENT,U*x,X);for(let N=0;N<2*m;N+=2)p.emplaceBack(k+N,k+N+1,k+N+3),p.emplaceBack(k+N,k+N+3,k+N+2),p.emplaceBack(F+N,F+N+3,F+N+1),p.emplaceBack(F+N,F+N+2,F+N+3);return this._mesh={indexBuffer:a.createIndexBuffer(p),vertexBuffer:a.createVertexBuffer(u,gd.members),segments:v.SegmentVector.simpleSegment(0,0,u.length,p.length)},this._mesh}getMeshFrameDelta(a){return 2*Math.PI*v.earthRadius/Math.pow(2,a)/5}getMinMaxElevation(a){const u=this.getTerrainData(a).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}}class wc{constructor(a,u,p){this._context=a,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0),p=new ei(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_COMPONENT16,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:a,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>a.id!==u),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(const a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some(a=>!a.inUse)}}const ga={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Lo{constructor(a,u){this.painter=a,this.terrain=u,this.pool=new wc(a.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(p=>!a._layers[p].isHidden(u)),this._coordsDescendingInv={};for(const p in a.sourceCaches){this._coordsDescendingInv[p]={};const m=a.sourceCaches[p].getVisibleCoordinates();for(const x of m){const D=this.terrain.sourceCache.getTerrainCoords(x);for(const S in D)this._coordsDescendingInv[p][S]||(this._coordsDescendingInv[p][S]=[]),this._coordsDescendingInv[p][S].push(D[S])}}this._coordsDescendingInvStr={};for(const p of a._order){const m=a._layers[p],x=m.source;if(ga[m.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const D in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][D]=this._coordsDescendingInv[x][D].map(S=>S.key).sort().join()}}for(const p of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[m][p.tileID.key];x&&x!==p.rttCoords[m]&&(p.rtt=[])}}renderLayer(a){if(a.isHidden(this.painter.transform.zoom))return!1;const u=a.type,p=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(ga[u]&&(this._prevType&&ga[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(a.id),!m))return!0;if(ga[this._prevType]||ga[u]&&m){this._prevType=u;const x=this._stacks.length-1,D=this._stacks[x]||[];for(const S of this._renderableTiles){if(this.pool.isFull()&&(_t(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(S),S.rtt[x]){const k=this.pool.getObjectForId(S.rtt[x].id);if(k.stamp===S.rtt[x].stamp){this.pool.useObject(k);continue}}const M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),S.rtt[x]={id:M.id,stamp:M.stamp},p.context.bindFramebuffer.set(M.fbo.framebuffer),p.context.clear({color:v.Color.transparent});for(let k=0;k<D.length;k++){const F=p.style._layers[D[k]],N=F.source?this._coordsDescendingInv[F.source][S.tileID.key]:[S.tileID];p.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),p._renderTileClippingMasks(F,N),p.renderLayer(p,p.style.sourceCaches[F.source],F,N),F.source&&(S.rttCoords[F.source]=this._coordsDescendingInvStr[F.source][S.tileID.key])}}return _t(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ga[u]}return!1}}const vd=kl,yd={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Fi=g=>{g.touchstart=g.dragStart,g.touchmoveWindow=g.dragMove,g.touchend=g.dragEnd},Hu={showCompass:!0,showZoom:!0,visualizePitch:!1};class Cc{constructor(a,u,p=!1){this._clickTolerance=10;const m=a.dragRotate._mouseRotate.getClickTolerance(),x=a.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=ir({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:D,clickTolerance:S,bearingDegreesPerPixelMoved:M=.8})=>{const k=new pi;return new xs({clickTolerance:S,move:(F,N)=>({bearingDelta:(N.x-F.x)*M}),moveStateManager:k,enable:D,assignEvents:Fi})})({clickTolerance:m,enable:!0}),this.map=a,p&&(this.mousePitch=_c({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:D,clickTolerance:S,pitchDegreesPerPixelMoved:M=-.5})=>{const k=new pi;return new xs({clickTolerance:S,move:(F,N)=>({pitchDelta:(N.y-F.y)*M}),moveStateManager:k,enable:D,assignEvents:Fi})})({clickTolerance:x,enable:!0})),v.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),Oe.addEventListener(u,"mousedown",this.mousedown),Oe.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),Oe.addEventListener(u,"touchcancel",this.reset)}startMouse(a,u){this.mouseRotate.dragStart(a,u),this.mousePitch&&this.mousePitch.dragStart(a,u),Oe.disableDrag()}startTouch(a,u){this.touchRotate.dragStart(a,u),this.touchPitch&&this.touchPitch.dragStart(a,u),Oe.disableDrag()}moveMouse(a,u){const p=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(a,u)||{};if(m&&p.setBearing(p.getBearing()+m),this.mousePitch){const{pitchDelta:x}=this.mousePitch.dragMove(a,u)||{};x&&p.setPitch(p.getPitch()+x)}}moveTouch(a,u){const p=this.map,{bearingDelta:m}=this.touchRotate.dragMove(a,u)||{};if(m&&p.setBearing(p.getBearing()+m),this.touchPitch){const{pitchDelta:x}=this.touchPitch.dragMove(a,u)||{};x&&p.setPitch(p.getPitch()+x)}}off(){const a=this.element;Oe.removeEventListener(a,"mousedown",this.mousedown),Oe.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),Oe.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Oe.removeEventListener(window,"touchend",this.touchend),Oe.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){Oe.enableDrag(),Oe.removeEventListener(window,"mousemove",this.mousemove),Oe.removeEventListener(window,"mouseup",this.mouseup),Oe.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Oe.removeEventListener(window,"touchend",this.touchend)}mousedown(a){this.startMouse(v.extend({},a,{ctrlKey:!0,preventDefault:()=>a.preventDefault()}),Oe.mousePos(this.element,a)),Oe.addEventListener(window,"mousemove",this.mousemove),Oe.addEventListener(window,"mouseup",this.mouseup)}mousemove(a){this.moveMouse(a,Oe.mousePos(this.element,a))}mouseup(a){this.mouseRotate.dragEnd(a),this.mousePitch&&this.mousePitch.dragEnd(a),this.offTemp()}touchstart(a){1!==a.targetTouches.length?this.reset():(this._startPos=this._lastPos=Oe.touchPos(this.element,a.targetTouches)[0],this.startTouch(a,this._startPos),Oe.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),Oe.addEventListener(window,"touchend",this.touchend))}touchmove(a){1!==a.targetTouches.length?this.reset():(this._lastPos=Oe.touchPos(this.element,a.targetTouches)[0],this.moveTouch(a,this._lastPos))}touchend(a){0===a.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Bo(g,a,u){if(g=new v.LngLat(g.lng,g.lat),a){const p=new v.LngLat(g.lng-360,g.lat),m=new v.LngLat(g.lng+360,g.lat),x=u.locationPoint(g).distSqr(a);u.locationPoint(p).distSqr(a)<x?g=p:u.locationPoint(m).distSqr(a)<x&&(g=m)}for(;Math.abs(g.lng-u.center.lng)>180;){const p=u.locationPoint(g);if(p.x>=0&&p.y>=0&&p.x<=u.width&&p.y<=u.height)break;g.lng>u.center.lng?g.lng-=360:g.lng+=360}return g}const xd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function wd(g,a,u){const p=g.classList;for(const m in xd)p.remove(`maplibregl-${u}-anchor-${m}`);p.add(`maplibregl-${u}-anchor-${a}`)}class Hs extends v.Evented{constructor(a,u){if(super(),(a instanceof HTMLElement||u)&&(a=v.extend({element:a},u)),v.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&"auto"!==a.pitchAlignment?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=v.pointGeometry.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=Oe.create("div"),this._element.setAttribute("aria-label","Map marker");const p=Oe.createNS("http://www.w3.org/2000/svg","svg"),m=41,x=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${m}px`),p.setAttributeNS(null,"width",`${x}px`),p.setAttributeNS(null,"viewBox",`0 0 ${x} ${m}`);const D=Oe.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"stroke","none"),D.setAttributeNS(null,"stroke-width","1"),D.setAttributeNS(null,"fill","none"),D.setAttributeNS(null,"fill-rule","evenodd");const S=Oe.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const M=Oe.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"transform","translate(3.0, 29.0)"),M.setAttributeNS(null,"fill","#000000");const k=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const he of k){const ie=Oe.createNS("http://www.w3.org/2000/svg","ellipse");ie.setAttributeNS(null,"opacity","0.04"),ie.setAttributeNS(null,"cx","10.5"),ie.setAttributeNS(null,"cy","5.80029008"),ie.setAttributeNS(null,"rx",he.rx),ie.setAttributeNS(null,"ry",he.ry),M.appendChild(ie)}const F=Oe.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill",this._color);const N=Oe.createNS("http://www.w3.org/2000/svg","path");N.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),F.appendChild(N);const U=Oe.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"opacity","0.25"),U.setAttributeNS(null,"fill","#000000");const X=Oe.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),U.appendChild(X);const ee=Oe.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ee.setAttributeNS(null,"fill","#FFFFFF");const K=Oe.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(8.0, 8.0)");const re=Oe.createNS("http://www.w3.org/2000/svg","circle");re.setAttributeNS(null,"fill","#000000"),re.setAttributeNS(null,"opacity","0.25"),re.setAttributeNS(null,"cx","5.5"),re.setAttributeNS(null,"cy","5.5"),re.setAttributeNS(null,"r","5.4999962");const ue=Oe.createNS("http://www.w3.org/2000/svg","circle");ue.setAttributeNS(null,"fill","#FFFFFF"),ue.setAttributeNS(null,"cx","5.5"),ue.setAttributeNS(null,"cy","5.5"),ue.setAttributeNS(null,"r","5.4999962"),K.appendChild(re),K.appendChild(ue),S.appendChild(M),S.appendChild(F),S.appendChild(U),S.appendChild(ee),S.appendChild(K),p.appendChild(S),p.setAttributeNS(null,"height",m*this._scale+"px"),p.setAttributeNS(null,"width",x*this._scale+"px"),this._element.appendChild(p),this._offset=v.pointGeometry.convert(a&&a.offset||[0,-14])}this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),wd(this._element,this._anchor,"marker"),this._popup=null}addTo(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Oe.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=v.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const m=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(24.6+m)],"bottom-right":[-m,-1*(24.6+m)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(a){const u=a.code,p=a.charCode||a.keyCode;"Space"!==u&&"Enter"!==u&&32!==p&&13!==p||this.togglePopup()}_onMapClick(a){const u=a.originalEvent.target,p=this._element;this._popup&&(u===p||p.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this}_update(a){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Bo(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let u="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?u=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(u=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let p="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?p="rotateX(0deg)":"map"===this._pitchAlignment&&(p=`rotateX(${this._map.getPitch()}deg)`),a&&"moveend"!==a.type||(this._pos=this._pos.round()),Oe.setTransform(this._element,`${xd[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${p} ${u}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const m=this._map.unproject(this._pos),x=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=m.distanceTo(this._lngLat)>20*x?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(a){return this._offset=v.pointGeometry.convert(a),this._update(),this}_onMove(a){if(!this._isDragging){const u=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new v.Event("dragstart"))),this.fire(new v.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new v.Event("dragend")),this._state="inactive"}_addDragHandler(a){this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&"auto"!==a?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const rr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let tl,ba=0,Yl=!1;const js={maxWidth:100,unit:"metric"};function Cd(g,a,u){const p=u&&u.maxWidth||100,m=g._container.clientHeight/2,x=g.unproject([0,m]),D=g.unproject([p,m]),S=x.distanceTo(D);if(u&&"imperial"===u.unit){const M=3.2808*S;M>5280?nl(a,p,M/5280,g._getUIString("ScaleControl.Miles")):nl(a,p,M,g._getUIString("ScaleControl.Feet"))}else u&&"nautical"===u.unit?nl(a,p,S/1852,g._getUIString("ScaleControl.NauticalMiles")):S>=1e3?nl(a,p,S/1e3,g._getUIString("ScaleControl.Kilometers")):nl(a,p,S,g._getUIString("ScaleControl.Meters"))}function nl(g,a,u,p){const m=function(x){const D=Math.pow(10,`${Math.floor(x)}`.length-1);let S=x/D;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:S>=1?1:function(M){const k=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*k)/k}(S),D*S}(u);g.style.width=a*(m/u)+"px",g.innerHTML=`${m}&nbsp;${p}`}const Xt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},rp=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Yf(g){if(g){if("number"==typeof g){const a=Math.round(Math.sqrt(.5*Math.pow(g,2)));return{center:new v.pointGeometry(0,0),top:new v.pointGeometry(0,g),"top-left":new v.pointGeometry(a,a),"top-right":new v.pointGeometry(-a,a),bottom:new v.pointGeometry(0,-g),"bottom-left":new v.pointGeometry(a,-a),"bottom-right":new v.pointGeometry(-a,-a),left:new v.pointGeometry(g,0),right:new v.pointGeometry(-g,0)}}if(g instanceof v.pointGeometry||Array.isArray(g)){const a=v.pointGeometry.convert(g);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:v.pointGeometry.convert(g.center||[0,0]),top:v.pointGeometry.convert(g.top||[0,0]),"top-left":v.pointGeometry.convert(g["top-left"]||[0,0]),"top-right":v.pointGeometry.convert(g["top-right"]||[0,0]),bottom:v.pointGeometry.convert(g.bottom||[0,0]),"bottom-left":v.pointGeometry.convert(g["bottom-left"]||[0,0]),"bottom-right":v.pointGeometry.convert(g["bottom-right"]||[0,0]),left:v.pointGeometry.convert(g.left||[0,0]),right:v.pointGeometry.convert(g.right||[0,0])}}return Yf(new v.pointGeometry(0,0))}const Qf=kl,_a={supported:di,setRTLTextPlugin:v.setRTLTextPlugin,getRTLTextPluginStatus:v.getRTLTextPluginStatus,Map:class extends zu{constructor(g){var a;if(v.PerformanceUtils.mark(v.PerformanceMarkers.create),null!=(g=v.extend({},yd,g)).minZoom&&null!=g.maxZoom&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=g.minPitch&&null!=g.maxPitch&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=g.minPitch&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=g.maxPitch&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Lr(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies),{bearingSnap:g.bearingSnap}),this._interactive=g.interactive,this._cooperativeGestures=g.cooperativeGestures,this._maxTileCacheSize=g.maxTileCacheSize,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._crossSourceCollisions=g.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=g.collectResourceTiming,this._renderTaskQueue=new Vu,this._controls=[],this._mapId=v.uniqueId(),this._locale=v.extend({},Uu,g.locale),this._clickTolerance=g.clickTolerance,this._pixelRatio=null!==(a=g.pixelRatio)&&void 0!==a?a:devicePixelRatio,this._imageQueueHandle=po.addThrottleControl(()=>this.isMoving()),this._requestManager=new dc(g.transformRequest),"string"==typeof g.container){if(this._container=document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}g.maxBounds&&this.setMaxBounds(g.maxBounds),v.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new md(this,g),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=g.hash&&new Di("string"==typeof g.hash&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,v.extend({},g.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=g.localIdeographFontFamily,g.style&&this.setStyle(g.style,{localIdeographFontFamily:g.localIdeographFontFamily}),g.attributionControl&&this.addControl(new Mn({customAttribution:g.customAttribution})),g.maplibreLogo&&this.addControl(new xc,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update("style"===u.dataType),this.fire(new v.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new v.Event(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new v.Event("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(g,a){if(void 0===a&&(a=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new v.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=g.onAdd(this);this._controls.push(g);const p=this._controlPositions[a];return-1!==a.indexOf("bottom")?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new v.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(g);return a>-1&&this._controls.splice(a,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}calculateCameraOptionsFromTo(g,a,u,p){return null==p&&this.terrain&&(p=this.transform.getElevation(u,this.terrain)),super.calculateCameraOptionsFromTo(g,a,u,p)}resize(g){const a=this._containerDimensions(),u=a[0],p=a[1];this._resizeCanvas(u,p,this.getPixelRatio()),this.transform.resize(u,p),this.painter.resize(u,p,this.getPixelRatio());const m=!this._moving;return m&&(this.stop(),this.fire(new v.Event("movestart",g)).fire(new v.Event("move",g))),this.fire(new v.Event("resize",g)),m&&this.fire(new v.Event("moveend",g)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(g){const[a,u]=this._containerDimensions();this._pixelRatio=g,this._resizeCanvas(a,u,g),this.painter.resize(a,u,g)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(v.LngLatBounds.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this._update()}project(g){return this.transform.locationPoint(v.LngLat.convert(g),this.style&&this.terrain)}unproject(g){return this.transform.pointLocation(v.pointGeometry.convert(g),this.terrain)}isMoving(){var g;return this._moving||(null===(g=this.handlers)||void 0===g?void 0:g.isMoving())}isZooming(){var g;return this._zooming||(null===(g=this.handlers)||void 0===g?void 0:g.isZooming())}isRotating(){var g;return this._rotating||(null===(g=this.handlers)||void 0===g?void 0:g.isRotating())}_createDelegatedListener(g,a,u){if("mouseenter"===g||"mouseover"===g){let p=!1;return{layer:a,listener:u,delegates:{mousemove:x=>{const D=this.getLayer(a)?this.queryRenderedFeatures(x.point,{layers:[a]}):[];D.length?p||(p=!0,u.call(this,new Eo(g,this,x.originalEvent,{features:D}))):p=!1},mouseout:()=>{p=!1}}}}if("mouseleave"===g||"mouseout"===g){let p=!1;return{layer:a,listener:u,delegates:{mousemove:D=>{(this.getLayer(a)?this.queryRenderedFeatures(D.point,{layers:[a]}):[]).length?p=!0:p&&(p=!1,u.call(this,new Eo(g,this,D.originalEvent)))},mouseout:D=>{p&&(p=!1,u.call(this,new Eo(g,this,D.originalEvent)))}}}}{const p=m=>{const x=this.getLayer(a)?this.queryRenderedFeatures(m.point,{layers:[a]}):[];x.length&&(m.features=x,u.call(this,m),delete m.features)};return{layer:a,listener:u,delegates:{[g]:p}}}}on(g,a,u){if(void 0===u)return super.on(g,a);const p=this._createDelegatedListener(g,a,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(p);for(const m in p.delegates)this.on(m,p.delegates[m]);return this}once(g,a,u){if(void 0===u)return super.once(g,a);const p=this._createDelegatedListener(g,a,u);for(const m in p.delegates)this.once(m,p.delegates[m]);return this}off(g,a,u){return void 0===u?super.off(g,a):(this._delegatedListeners&&this._delegatedListeners[g]&&(p=>{const m=this._delegatedListeners[g];for(let x=0;x<m.length;x++){const D=m[x];if(D.layer===a&&D.listener===u){for(const S in D.delegates)this.off(S,D.delegates[S]);return m.splice(x,1),this}}})(),this)}queryRenderedFeatures(g,a){if(!this.style)return[];let u;const p=g instanceof v.pointGeometry||Array.isArray(g),m=p?g:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(p?{}:g)||{},m instanceof v.pointGeometry||"number"==typeof m[0])u=[v.pointGeometry.convert(m)];else{const x=v.pointGeometry.convert(m[0]),D=v.pointGeometry.convert(m[1]);u=[x,new v.pointGeometry(D.x,x.y),D,new v.pointGeometry(x.x,D.y),x]}return this.style.queryRenderedFeatures(u,a,this.transform)}querySourceFeatures(g,a){return this.style.querySourceFeatures(g,a)}setStyle(g,a){return!1!==(a=v.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},a)).diff&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(g,a))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){const a=this._locale[g];if(null==a)throw new Error(`Missing UI string '${g}'`);return a}_updateStyle(g,a){if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(g,a));const u=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!g)),g?(this.style=new It(this,a||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof g?this.style.loadURL(g,a,u):this.style.loadJSON(g,a,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new It(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,a){if("string"==typeof g){const u=this._requestManager.transformRequest(g,yn.Style);v.getJSON(u,(p,m)=>{p?this.fire(new v.ErrorEvent(p)):m&&this._updateDiff(m,a)})}else"object"==typeof g&&this._updateDiff(g,a)}_updateDiff(g,a){try{this.style.setState(g,a)&&this._update(!0)}catch(u){v.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(g,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():v.warnOnce("There is no style added to the map.")}addSource(g,a){return this._lazyInitEmptyStyle(),this.style.addSource(g,a),this._update(!0)}isSourceLoaded(g){const a=this.style&&this.style.sourceCaches[g];if(void 0!==a)return a.loaded();this.fire(new v.ErrorEvent(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),g){const a=this.style.sourceCaches[g.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${g.source}`);this.terrain=new _d(this.painter,a,g),this.painter.renderToTexture=new Lo(this.painter,this.terrain),this.transform.updateElevation(this.terrain),this._terrainDataCallback=u=>{"style"===u.dataType?this.terrain.sourceCache.freeRtt():"source"===u.dataType&&u.tile&&(u.sourceId===g.source&&this.transform.updateElevation(this.terrain),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.updateElevation(this.terrain);return this.fire(new v.Event("terrain",{terrain:g})),this}getTerrain(){return this.terrain&&this.terrain.options}areTilesLoaded(){const g=this.style&&this.style.sourceCaches;for(const a in g){const u=g[a]._tiles;for(const p in u){const m=u[p];if("loaded"!==m.state&&"errored"!==m.state)return!1}}return!0}addSourceType(g,a,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(g,a,u)}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,a,{pixelRatio:u=1,sdf:p=!1,stretchX:m,stretchY:x,content:D}={}){if(this._lazyInitEmptyStyle(),a instanceof HTMLImageElement||v.isImageBitmap(a)){const{width:S,height:M,data:k}=v.exported.getImageData(a);this.style.addImage(g,{data:new v.RGBAImage({width:S,height:M},k),pixelRatio:u,stretchX:m,stretchY:x,content:D,sdf:p,version:0})}else{if(void 0===a.width||void 0===a.height)return this.fire(new v.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:S,height:M,data:k}=a,F=a;this.style.addImage(g,{data:new v.RGBAImage({width:S,height:M},new Uint8Array(k)),pixelRatio:u,stretchX:m,stretchY:x,content:D,sdf:p,version:0,userImage:F}),F.onAdd&&F.onAdd(this,g)}}}updateImage(g,a){const u=this.style.getImage(g);if(!u)return this.fire(new v.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=a instanceof HTMLImageElement||v.isImageBitmap(a)?v.exported.getImageData(a):a,{width:m,height:x,data:D}=p;if(void 0===m||void 0===x)return this.fire(new v.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==u.data.width||x!==u.data.height)return this.fire(new v.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const S=!(a instanceof HTMLImageElement||v.isImageBitmap(a));u.data.replace(D,S),this.style.updateImage(g,u)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new v.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g,a){po.getImage(this._requestManager.transformRequest(g,yn.Image),a)}listImages(){return this.style.listImages()}addLayer(g,a){return this._lazyInitEmptyStyle(),this.style.addLayer(g,a),this._update(!0)}moveLayer(g,a){return this.style.moveLayer(g,a),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}setLayerZoomRange(g,a,u){return this.style.setLayerZoomRange(g,a,u),this._update(!0)}setFilter(g,a,u={}){return this.style.setFilter(g,a,u),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,a,u,p={}){return this.style.setPaintProperty(g,a,u,p),this._update(!0)}getPaintProperty(g,a){return this.style.getPaintProperty(g,a)}setLayoutProperty(g,a,u,p={}){return this.style.setLayoutProperty(g,a,u,p),this._update(!0)}getLayoutProperty(g,a){return this.style.getLayoutProperty(g,a)}setGlyphs(g,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(g,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(g,a,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(g,a,u,p=>{p||this._update(!0)}),this}removeSprite(g){return this._lazyInitEmptyStyle(),this.style.removeSprite(g),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(g,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(g,a,u=>{u||this._update(!0)}),this}setLight(g,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,a),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(g,a){return this.style.setFeatureState(g,a),this._update()}removeFeatureState(g,a){return this.style.removeFeatureState(g,a),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,a=0;return this._container&&(g=this._container.clientWidth||400,a=this._container.clientHeight||300),[g,a]}_setupContainer(){const g=this._container;g.classList.add("maplibregl-map");const a=this._canvasContainer=Oe.create("div","maplibregl-canvas-container",g);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=Oe.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions();this._resizeCanvas(u[0],u[1],this.getPixelRatio());const p=this._controlContainer=Oe.create("div","maplibregl-control-container",g),m=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{m[x]=Oe.create("div",`maplibregl-ctrl-${x} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const g=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=Oe.create("div","maplibregl-cooperative-gesture-screen",g);let a="Control",u="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(u="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map",a="Meta"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${u}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,document.addEventListener("keydown",p=>{p.key===a&&(this._metaPress=!0)}),document.addEventListener("keyup",p=>{p.key===a&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",p=>{this._onCooperativeGesture(p,this._metaPress,1)},!1),this._canvasContainer.classList.remove("maplibregl-touch-drag-pan")}_resizeCanvas(g,a,u){this._canvas.width=u*g,this._canvas.height=u*a,this._canvas.style.width=`${g}px`,this._canvas.style.height=`${a}px`}_setupPainter(){const g=v.extend({},di.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1});let a=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{a={requestedAttributes:g},p&&(a.statusMessage=p.statusMessage,a.type=p.type)},{once:!0});const u=this._canvas.getContext("webgl",g)||this._canvas.getContext("experimental-webgl",g);if(!u){const p="Failed to initialize WebGL";throw a?(a.message=p,new Error(JSON.stringify(a))):new Error(p)}this.painter=new Jn(u,this.transform),Qo.testSupport(u)}_contextLost(g){g.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new v.Event("webglcontextlost",{originalEvent:g}))}_contextRestored(g){this._setupPainter(),this.resize(),this._update(),this.fire(new v.Event("webglcontextrestored",{originalEvent:g}))}_onMapScroll(g){if(g.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(g,a,u){return!a&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){let a,u=0;const p=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(a=p.createQueryEXT(),p.beginQueryEXT(p.TIME_ELAPSED_EXT,a),u=v.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let m=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const D=this.transform.zoom,S=v.exported.now();this.style.zoomHistory.update(D,S);const M=new v.EvaluationParameters(D,{now:S,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),k=M.crossFadingFactor();1===k&&k===this._crossFadingFactor||(m=!0,this._crossFadingFactor=k),this.style.update(M)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain&&this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.updateElevation(this.terrain),this._imageQueueDirty=po.processQueue()>0,this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new v.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,v.PerformanceUtils.mark(v.PerformanceMarkers.load),this.fire(new v.Event("load"))),this.style&&(this.style.hasTransitions()||m)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const D=v.exported.now()-u;p.endQueryEXT(p.TIME_ELAPSED_EXT,a),setTimeout(()=>{const S=p.getQueryObjectEXT(a,p.QUERY_RESULT_EXT)/1e6;p.deleteQueryEXT(a),this.fire(new v.Event("gpu-timing-frame",{cpuTime:D,gpuTime:S}))},50)}if(this.listens("gpu-timing-layer")){const D=this.painter.collectGpuTimers();setTimeout(()=>{const S=this.painter.queryGpuTimers(D);this.fire(new v.Event("gpu-timing-layer",{layerTimes:S}))},50)}const x=this._sourcesDirty||this._styleDirty||this._placementDirty||this._imageQueueDirty;return x||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new v.Event("idle")),!this._loaded||this._fullyLoaded||x||(this._fullyLoaded=!0,v.PerformanceUtils.mark(v.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1)),po.removeThrottleControl(this._imageQueueHandle);const g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),Oe.remove(this._canvasContainer),Oe.remove(this._controlContainer),this._cooperativeGestures&&Oe.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map"),v.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new v.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=v.exported.frame(g=>{v.PerformanceUtils.frame(g),this._frame=null,this._render(g)}))}_onWindowOnline(){this._update()}_onWindowResize(g){this._trackResize&&this.resize({originalEvent:g})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get version(){return vd}getCameraTargetElevation(){return this.transform.elevation}},NavigationControl:class{constructor(g){this.options=v.extend({},Hu,g),this._container=Oe.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(v.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),Oe.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),Oe.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(v.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=Oe.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const g=this._map.getZoom(),a=g===this._map.getMaxZoom(),u=g===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){const g=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=g}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Cc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){Oe.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,a){const u=Oe.create("button",g,this._container);return u.type="button",u.addEventListener("click",a),u}_setButtonTitle(g,a){const u=this._map._getUIString(`NavigationControl.${a}`);g.title=u,g.setAttribute("aria-label",u)}},GeolocateControl:class extends v.Evented{constructor(g){super(),this.options=v.extend({},rr,g),v.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(g){var a;return this._map=g,this._container=Oe.create("div","maplibregl-ctrl maplibregl-ctrl-group"),a=this._setupUI,void 0!==tl?a(tl):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then(u=>{tl="denied"!==u.state,a(tl)}):(tl=!!window.navigator.geolocation,a(tl)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Oe.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ba=0,Yl=!1}_isOutOfMapMaxBounds(g){const a=this._map.getMaxBounds(),u=g.coords;return a&&(u.longitude<a.getWest()||u.longitude>a.getEast()||u.latitude<a.getSouth()||u.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new v.Event("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(g),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(g),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new v.Event("geolocate",g)),this._finish()}}_updateCamera(g){const a=new v.LngLat(g.coords.longitude,g.coords.latitude),u=g.coords.accuracy,p=this._map.getBearing(),m=v.extend({bearing:p},this.options.fitBoundsOptions);this._map.fitBounds(a.toBounds(u),m,{geolocateSource:!0})}_updateMarker(g){if(g){const a=new v.LngLat(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const g=this._map._container.clientHeight/2,a=this._map.unproject([0,g]),u=this._map.unproject([1,g]),p=a.distanceTo(u),m=Math.ceil(2*this._accuracy/p);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(g){if(this._map){if(this.options.trackUserLocation)if(1===g.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===g.code&&Yl)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new v.Event("error",g)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(g){if(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=Oe.create("button","maplibregl-ctrl-geolocate",this._container),Oe.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===g){v.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Oe.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Hs(this._dotElement),this._circleElement=Oe.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Hs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||"ACTIVE_LOCK"!==this._watchState||a.originalEvent&&"resize"===a.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new v.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return v.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new v.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ba--,Yl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new v.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new v.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ba++,ba>1?(g={maximumAge:6e5,timeout:0},Yl=!0):(g=this.options.positionOptions,Yl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Mn,LogoControl:xc,ScaleControl:class{constructor(g){this.options=v.extend({},js,g),v.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Cd(this._map,this._container,this.options)}onAdd(g){return this._map=g,this._container=Oe.create("div","maplibregl-ctrl maplibregl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){Oe.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(g){this.options.unit=g,Cd(this._map,this._container,this.options)}},FullscreenControl:class extends v.Evented{constructor(g={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:v.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=Oe.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){Oe.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const g=this._fullscreenButton=Oe.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);Oe.create("span","maplibregl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this.fire(new v.Event(this._fullscreen?"fullscreenstart":"fullscreenend"))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},TerrainControl:class{constructor(g){this.options=g,v.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(g){return this._map=g,this._container=Oe.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=Oe.create("button","maplibregl-ctrl-terrain",this._container),Oe.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){Oe.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends v.Evented{constructor(g){super(),this.options=v.extend(Object.create(Xt),g),v.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new v.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&Oe.remove(this._content),this._container&&(Oe.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new v.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=v.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const a=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=g;p=u.firstChild,p;)a.appendChild(p);return this.setDOMContent(a)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Oe.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){this._container&&this._container.classList.add(g)}removeClassName(g){this._container&&this._container.classList.remove(g)}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}_createCloseButton(){this.options.closeButton&&(this._closeButton=Oe.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(g){this._update(g.point)}_onMouseMove(g){this._update(g.point)}_onDrag(g){this._update(g.point)}_update(g){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=Oe.create("div","maplibregl-popup",this._map.getContainer()),this._tip=Oe.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(x=>this._container.classList.add(x)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Bo(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!g))return;const a=this._pos=this._trackPointer&&g?g:this._map.project(this._lngLat);let u=this.options.anchor;const p=Yf(this.options.offset);if(!u){const x=this._container.offsetWidth,D=this._container.offsetHeight;let S;S=a.y+p.bottom.y<D?["top"]:a.y>this._map.transform.height-D?["bottom"]:[],a.x<x/2?S.push("left"):a.x>this._map.transform.width-x/2&&S.push("right"),u=0===S.length?"bottom":S.join("-")}const m=a.add(p[u]).round();Oe.setTransform(this._container,`${xd[u]} translate(${m.x}px,${m.y}px)`),wd(this._container,u,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(rp);g&&g.focus()}_onClose(){this.remove()}},Marker:Hs,Style:It,LngLat:v.LngLat,LngLatBounds:v.LngLatBounds,Point:v.pointGeometry,MercatorCoordinate:v.MercatorCoordinate,Evented:v.Evented,AJAXError:v.AJAXError,config:v.config,CanvasSource:Jo,GeoJSONSource:Va,ImageSource:Wn,RasterDEMTileSource:ke,RasterTileSource:xn,VectorTileSource:Gn,VideoSource:gs,prewarm:function(){pc().acquire(aa)},clearPrewarmedResources:function(){const g=zn;g&&(g.isPreloaded()&&1===g.numActive()?(g.release(aa),zn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return Qf},get workerCount(){return br.workerCount},set workerCount(g){br.workerCount=g},get maxParallelImageRequests(){return v.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){v.config.MAX_PARALLEL_IMAGE_REQUESTS=g},workerUrl:"",addProtocol(g,a){v.config.REGISTERED_PROTOCOLS[g]=a},removeProtocol(g){delete v.config.REGISTERED_PROTOCOLS[g]}};return Us.extend(_a,{isSafari:v.isSafari,getPerformanceMetrics:v.PerformanceUtils.getPerformanceMetrics}),_a}),Nn}()}},$f=>{$f($f.s=760)}]);